<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[RSS Feed of SharkniA]]></title><description><![CDATA[만 6살 백엔드 개발자]]></description><link>https://sharknia.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Thu, 20 Feb 2025 04:12:31 GMT</lastBuildDate><item><title><![CDATA[Ruff]]></title><description><![CDATA[서론 uv를 조사하고 알고 하다가 Ruff의 존재도 알게 되었습니다. 현재 회사의 팀에서는 나머지 백엔드 개발자는 파이참을 주력으로, 저는 Cursor를 사용하고 있고 포맷팅이나 린팅에 대한 팀의 컨벤션 통일이 안되어있어 Ruff…]]></description><link>https://sharknia.github.io/Ruff/</link><guid isPermaLink="false">https://sharknia.github.io/Ruff/</guid><pubDate>Thu, 20 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5af434a92aebe4c8f63e4d9723071226/3643c/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClUlEQVR42g3M608SAQAA8Pu/+tqn5iq3VpnvLB9pJuEpD+EEkrfccYAc8roD7sFxvBEEBQ8UBHmI6LSiNtew2JptfqjPuf0+/4CByZlns4uvFpfHPq5OguIJUHJvHJSMCkXjoHRKrBDBNgVqfz4nGBZIrcHwAvRJpDMNLYADk++AOYlEqFKtGQwQbFqHTUoUVqAIhCBKC7qOWuRmFPWTdpJa0RiFesS3s6s0W40uXGJE56QQoLOatnDMTXkIlvCyBMEFAlHaF6GpJEdEgnaS8HKMk6HNuA+lgrvVE1eQxaMxxf2OIEA4TmZykTyfLB6ly7V8pX5QqRcqjVK9c1JulXOH+f2jg3Qhm+YLicNK9rTjjKUsbAzacm+4AkD32+n19cXNzZf+r26///3u7ufff39u7/q/b3u9/o/W18vyxXmx3UrW27ok7ym3N+N5XazwWusclyPA2Vn18rJxddXsdju9XrdZP+406p+vziuNk0KtGjmsELmiIpAS+veHNxllmJ9F/G9g6qlQPyrSAixHxuJBhwNlw5SXcAY52oO7l8UStc1ho0PeRAamo6suzpRrbmcqYwZyBiZfyNEHI0uPp0EAtZrrrZoVs1sw+7bfL5BBYrUhwIWpaGzvuGohWZXDPwsT+mwzVz/zxveWNp1r28yI1DD4TgQMj42IVBuDo1OgxjS9IoX0RhPm2OX5fK2mxLw6zC1H3RMalzrTtIZSab5IJzOrOtQaCKmdJPDw0cDQ2/mX0/OQ0YzhuJcLJ/b36FRaoIYtfpqKhJ+8lynIHTvfVnvpSCadLZWCiQSo0roZDhBKZSiGuX2EFrWYPT53MORgQqAGFiq1VDSaPiiIbThopzRsVo5gBEMTDFMoFdl4/INM9R9dBJenqWCw7gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/5af434a92aebe4c8f63e4d9723071226/ca1dc/image1.png&apos; srcset=&apos;/static/5af434a92aebe4c8f63e4d9723071226/e7570/image1.png 170w,
/static/5af434a92aebe4c8f63e4d9723071226/f46e7/image1.png 340w,
/static/5af434a92aebe4c8f63e4d9723071226/ca1dc/image1.png 680w,
/static/5af434a92aebe4c8f63e4d9723071226/02d09/image1.png 1020w,
/static/5af434a92aebe4c8f63e4d9723071226/9d567/image1.png 1360w,
/static/5af434a92aebe4c8f63e4d9723071226/3643c/image1.png 1400w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;uv를 조사하고 알고 하다가 Ruff의 존재도 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;현재 회사의 팀에서는 나머지 백엔드 개발자는 파이참을 주력으로, 저는 Cursor를 사용하고 있고 포맷팅이나 린팅에 대한 팀의 컨벤션 통일이 안되어있어 Ruff를 제안하면 좋겠다고 생각이 들어 알아보게 됐습니다. &lt;/p&gt;
&lt;h2&gt;Ruff란?&lt;/h2&gt;
&lt;p&gt;Ruff는 Python 코드를 빠르고 효율적으로 분석 및 포맷팅해주는 도구입니다. Rust로 개발되어 기존의 Python 기반 린터보다 훨씬 빠른 속도를 자랑합니다. Ruff는 Black보다 최대 100배 빠르게 실행됩니다. 또한 여러 린터와 포매터의 기능을 하나로 통합하여 코드 품질을 관리할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Black → 코드 스타일 포매팅&lt;/li&gt;
&lt;li&gt;isort → import 정리&lt;/li&gt;
&lt;li&gt;Flake8 → 린팅 (PEP 8 준수 검사 등)&lt;/li&gt;
&lt;li&gt;mypy 일부 기능 → 타입 검사 (제한적)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이런 기능들을 Rust로 빠르게 동작하도록 구현해서, Python 환경에서 가장 가벼우면서도 강력한 린터 &amp;#x26; 포매터 역할을 합니다.&lt;/p&gt;
&lt;p&gt;덕분에 Black + isort + Flake8 조합을 쓰던 사람들이 Ruff 하나로 통합해서 쓰는 경우가 많아졌습니다.&lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;Ruff는 pip로 간편하게 설치할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; ruff&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;물론 uvx(uv의 전역 설치), pipx, brew 등 여러가지 설치 옵션을 추가로 제공합니다. &lt;/p&gt;
&lt;h2&gt;사용법&lt;/h2&gt;
&lt;p&gt;터미널에서 Ruff를 실행하는 기본 명령어는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ruff check &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 명령어는 현재 디렉터리 내의 모든 파일을 검사합니다. 자동 수정 기능은 --fix 옵션을 사용하여 적용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ruff check &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--fix&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또 다음의 명령어를 통해 프로젝트 전체의 포맷을 조정할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ruff &lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;속도가 정말 빠릅니다. &lt;/p&gt;
&lt;h2&gt;VSCode에서 사용하기&lt;/h2&gt;
&lt;p&gt;VSCode에서는 PIP 설치 없이도 Ruff 확장을 설치하여 사용할 수 있습니다. 확장을 설치한 후, settings.json에 다음과 같이 설정하면 편리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;  &lt;span class=&quot;token property&quot;&gt;&quot;[python]&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;editor.defaultFormatter&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;charliermarsh.ruff&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;editor.formatOnSave&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;editor.codeActionsOnSave&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;source.fixAll&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;explicit&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;source.organizeImports&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;explicit&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 설정하면 코드 편집 시 자동으로 Ruff 검사가 실행되어 코드 품질을 유지할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;source.organizeImports: 자동으로 import를 정리합니다. &lt;/li&gt;
&lt;li&gt;source.fixAll: 저장시 자동 포맷팅을 활성화 합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Pycharm에서 사용하기&lt;/h2&gt;
&lt;h3&gt;외부 도구(External Tools) 등록&lt;/h3&gt;
&lt;p&gt;PyCharm에서는 외부 도구(External Tools) 설정을 통해 Ruff를 연동할 수 있습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;설정 → Tools → External Tools 로 이동합니다.&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;버튼을 클릭하여 새로운 도구를 추가합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;다음과 같이 설정합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Name: Ruff&lt;/li&gt;
&lt;li&gt;Program: ruff (또는 ruff 명령어의 전체 경로)&lt;/li&gt;
&lt;li&gt;Arguments: check &lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;ProjectFileDir&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8888799999999999em;vertical-align:-0.19444em;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05724em;&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.01968em;&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;r&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Working directory: &lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;ProjectFileDir&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8888799999999999em;vertical-align:-0.19444em;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05724em;&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.01968em;&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;D&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;r&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이후 PyCharm 메뉴에서 Tools &gt; External Tools &gt; Ruff를 실행하면 프로젝트 전반에 대해 린팅이 수행됩니다.&lt;/p&gt;
&lt;h3&gt;감시자(Watcher)를 활용한 Pycharm에서의 Ruff 활용&lt;/h3&gt;
&lt;p&gt;PyCharm의 File Watcher 기능을 활용하면, 파일이 저장될 때마다 자동으로 Ruff가 실행되어 실시간으로 코드 품질을 유지할 수 있습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;설정 → Tools → File Watchers 에서 새 Watcher를 추가합니다.&lt;/li&gt;
&lt;li&gt;File Type: Python&lt;/li&gt;
&lt;li&gt;Scope: 현재 프로젝트 또는 특정 디렉터리&lt;/li&gt;
&lt;li&gt;Program: ruff&lt;/li&gt;
&lt;li&gt;Arguments: check &lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;FileName&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.69444em;vertical-align:0em;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.01968em;&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.10903em;&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;e&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; –fix (또는 필요한 옵션)&lt;/li&gt;
&lt;li&gt;Output Paths: 빈 칸으로 두거나, 필요에 따라 지정합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이렇게 설정하면, 파일 저장 시 자동으로 Ruff가 실행되어 코드 컨벤션 위반 사항을 즉시 수정할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;팀 단위 코드 컨벤션 통일&lt;/strong&gt;&lt;/h2&gt;
&lt;h3&gt;&lt;strong&gt;pyproject.toml 또는 ruff.toml을 사용&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;모든 팀원이 동일한 린터 설정을 공유할 수 있도록 프로젝트 루트에 설정 파일을 배치합니다. 이 파일에 린팅 및 포매팅 규칙, 예외 사항, 플러그인 설정 등을 정의하면 IDE에 관계없이 동일한 룰을 적용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;lint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;E&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;F&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;W&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;I&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# E: 스타일, F: 오류, W: 경고, I: import 정리&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token table class-name&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;line-length&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;88&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 줄 길이 설정 (Black과 동일)&lt;/span&gt;
&lt;span class=&quot;token key property&quot;&gt;indent-style&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;space&quot;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 들여쓰기 스타일 (space / tab)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;팀 전체가 동일한 기준으로 코드를 검사하고 포맷팅 할 수 있으며, CI/CD 파이프라인에 해당 설정 파일을 반영하여 머지 전 코드 품질 검증을 수행할 수도 있습니다. &lt;/p&gt;
&lt;p&gt;PyCharm 또는 VSCode에서 Ruff를 실행할 때, 설정 파일을 자동으로 참조하도록 명령어를 구성할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.astral.sh/ruff/&quot;&gt;https://docs.astral.sh/ruff/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React Native에서 커스텀 폰트 추가하여 사용하기]]></title><description><![CDATA[서론 이번에 만들어볼 어플리케이션에서는 폰트를 모두 Noto Sans KR…]]></description><link>https://sharknia.github.io/React-Native에서-커스텀-폰트-추가하여-사용하기/</link><guid isPermaLink="false">https://sharknia.github.io/React-Native에서-커스텀-폰트-추가하여-사용하기/</guid><pubDate>Wed, 19 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0672b20aa135636675600fc4f9dcc8ff/3643c/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AERSTTA8OC04M19nWTlFPkVSSzhLSFZydIypq4alqIyrrYmorXGNkURZV0BRS0VVTWFtYp2jl9rf2IiUjwBJWlRidnBJWVSKkIBgbmVvfnVme3Zsh4WFoKCwxsiyysqeuLprh4dje3lpfHZ3hHqssaLf4dbj6OKMl5EAWG1pip6aaHlzpKmbfoyBm6mheIeBT11fYHmBepagfJehZoCIS15hXmtmpbGmsrqvtbus1tvR5evkg4+LAGl5coCTjGp9dq61qHeOi4+oqGh6eztNVFBqdFB0gjhdcSpHVjtNVWBpZbK8s6m0qbS8r93j2rPDw0NHPwB/iXxeZ1xGUkuNlYtuhIlUb3VKYGM+UlczR1FJXWQwSVAeLzU0Rk9peHipt7Cksam2vrTR29VgbW5FQjMAiY+BWGFWHiMgY21mboB/cIWHbIGDSF1kLTxERVFUKDg+GCQnLT9GZXV3k6SciZqOipWClqKYlZuQZG9lAFRfWD5IQSkoIl9oYmt5c3eHgllvcUtibEJXXkRaYTdOWCI1PCg6QVJiZXiLf2FuTWd1W217cmFtY1VjWQA5R0E/SkBYVkqBh31CRjyAiYFugoBaa25vgoY/UVU7TVFwhYpicnV4iIeClZA3PS1+hXWGl5F4hXxYZWAAjY59lZF+TUY7oKijWl5Spqic2Obk0N3bwdDPU2BhPEA6tsG9zdnX0t3atcPBSk5FlZeLf4qHkpCEnJuRAKihjH98am1tXm54cGpxZ7W5rWh/hFhsc1BqcUZfaEVcYl50eWJ3fHSFhq6+vVtfVbO2qaGon6qomaupmQBQVUpPVkxMTkRXW1N3gXqLk41ZbHBQanVSbntTcX9Vc4BeeYRgd39pd3aZp6docGmdopqxuLOzuraSlYwWFzfkQQgZqAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/0672b20aa135636675600fc4f9dcc8ff/ca1dc/image1.png&apos; srcset=&apos;/static/0672b20aa135636675600fc4f9dcc8ff/e7570/image1.png 170w,
/static/0672b20aa135636675600fc4f9dcc8ff/f46e7/image1.png 340w,
/static/0672b20aa135636675600fc4f9dcc8ff/ca1dc/image1.png 680w,
/static/0672b20aa135636675600fc4f9dcc8ff/02d09/image1.png 1020w,
/static/0672b20aa135636675600fc4f9dcc8ff/9d567/image1.png 1360w,
/static/0672b20aa135636675600fc4f9dcc8ff/3643c/image1.png 1400w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;이번에 만들어볼 어플리케이션에서는 폰트를 모두 Noto Sans KR로 통일하려고 합니다. 기복없이 튀지 않으면서 안정적인 폰트 같습니다. &lt;/p&gt;
&lt;p&gt;그래서 리액트 네이티브 프로젝트에서 폰트를 어떻게 적용하면 될지를 기록하겠습니다. &lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;프로젝트 준비&lt;/strong&gt;&lt;/h2&gt;
&lt;h3&gt;폰트 다운로드&lt;/h3&gt;
&lt;p&gt;프로젝트 내의 ./assets/fonts/ 폴더에 .ttf 파일들을 넣어둡니다. 폰트는 &lt;a href=&quot;https://fonts.google.com/noto/specimen/Noto+Sans+KR&quot;&gt;이 곳&lt;/a&gt;에서 다운로드 했습니다. &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;react-native.config.js 파일&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;이 파일은 리액트 네이티브가 추가 Asset(폰트, 이미지 등)의 경로를 인식할 수 있도록 설정하는 파일입니다. 프로젝트 루트에 아래와 같이 생성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;assets&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./assets/fonts/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;폰트, 이미지, 사운드 파일 등의 정적 파일들을 네이티브 프로젝트(iOS, Android)로 자동 복사하는 경로를 정의합니다. 즉, 이 설정을 통해 빌드 시 폰트가 네이티브 프로젝트에 자동으로 반영되도록 미리 선언하는 느낌이라고 보면 됩니다. 수동으로 react-native link를 실행하지 않고도, 필요한 자산이 빌드 과정에서 자동으로 복사되도록 설정할 수 있게 해 효율을 올려줍니다. &lt;/p&gt;
&lt;p&gt;만약 굳이 수동으로 Asset 파일들을 네이티브 프로젝트(iOS, Android)에 직접 복사하고 설정할 경우, react-native.config.js 파일은 필요 없습니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;npx react-native-asset 명령어&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;npx react-native-asset 명령어는 react-native.config.js에 지정한 자산 경로를 기반으로 폰트 파일들을 iOS와 Android 프로젝트에 자동으로 연결(link)해줍니다. 이 명령어를 실행하면 각 플랫폼의 설정 파일에 폰트 경로가 추가되어 빌드 시 폰트를 사용할 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;터미널에서 다음 명령어를 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx react-native-asset&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;strong&gt;폰트 사용&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;폰트 링크가 완료된 후, 스타일 시트에서 fontFamily 속성을 사용해 적용할 수 있습니다. 예를 들어, 아래와 같이 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Text&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; StyleSheet &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Text style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;customText&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;안녕하세요&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Noto Sans &lt;span class=&quot;token constant&quot;&gt;KR&lt;/span&gt; 폰트입니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Text&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; StyleSheet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  customText&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 폰트 파일 내에 지정된 폰트 이름&lt;/span&gt;
    fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NotoSansKR-Bold은 실제 폰트 파일 내부의 이름과 일치해야 합니다. &lt;/p&gt;
&lt;h2&gt;Typhograph.ts 작성&lt;/h2&gt;
&lt;p&gt;이 폰트를 기반으로 css의 클래스처럼 미리 Typhography를 정의해두고 사용하려고 합니다. &lt;/p&gt;
&lt;p&gt;다음과 같이 src/styles에 Typhograph.ts를 생성하고  미리 스타일을 정의해주었습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; StyleSheet &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; typography &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; StyleSheet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Headline&lt;/span&gt;
    headlineL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    headlineM&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    headlineS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Title&lt;/span&gt;
    titleL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    titleM&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    titleS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Body&lt;/span&gt;
    bodyL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Regular&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    bodyM&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Regular&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    bodyS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Regular&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Button&lt;/span&gt;
    buttonL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Bold&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    buttonM&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Regular&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    buttonS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Regular&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Caption&lt;/span&gt;
    captionL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Light&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    captionM&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fontFamily&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;NotoSansKR-Light&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 컴포넌트에서 폰트를 사용할 때 다음과 같이 사용할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Text&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; View &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; typography &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;src/styles/typography&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ExampleScreen&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;View&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Text style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;typography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headlineL&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;큰 헤드라인&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Text&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Text style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;typography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bodyM&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;본문 텍스트 예시&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Text&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Text style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;typography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;captionM&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;작은 캡션 텍스트&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Text&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;View&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; ExampleScreen&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[poetry를 활용해 안정적으로 package 업데이트하기]]></title><description><![CDATA[서론 uv는 빠른 설치, 간편한 사용 등 많은 장점이 있지만 아쉽게도 패키지 업데이트 및 설치 시에 최신 버전을 우선적으로 설치하며, poetry…]]></description><link>https://sharknia.github.io/poetry를-활용해-안정적으로-package-업데이트하기/</link><guid isPermaLink="false">https://sharknia.github.io/poetry를-활용해-안정적으로-package-업데이트하기/</guid><pubDate>Tue, 18 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/58dc3ec59a3b6f7ca64979a153eea980/3643c/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ADw/Py4rKSgiHzQwLR8gIUNGSTQ7P05dZmSAlHylvJTF22qLoE9jdV9ueDc/RiMmKh8iJz9DRycoKhkZGgA6P0E2NDIvLCk/PjsnKitLUVU7QUVPWFtZcYJljqeJr8RyhpRFVGBbaXE/S1MpLzUoMDdOWF0xNDchJCcAQ0lLPDw6QD88WFpaNT1BVWFmUFVXcHV2Z3aAb4eYgJ6wgY6XU19pUV9oUWBpNUFLNUJMVGJoNjo+KC0xAEJGSEdFQk9QUF5lZz1HTFlocG93eneBhnSFkX2UpIiltn2OmWJueGd1fmZ2fUJSXkFQXF1sdTtCSC82PABLUlNMTElMTUtcYmM6REljcnlRZHBYbn5pg5Oeu8mxydOQoqxjdYJccH1hcXpIWWRCUVxicHhES086QEQAPkFBPz8+RENASElHMTg7bHd8aHZ+bYKQnrG7hpqnaXiAgI2VeIiTaXqERVdjO0lTMz9IT1tkOT1BMDM1ADU3NywoJDgzLjMvKyQnKT1JUW17hI6epoSWoFtteWp6hIONk46irmR4hjhMWys7RyYwODlCSCgrLicnJwArLS4qKywvNTg4REo8UV5XcoGKpLGgs72MmaBda3NjbnRxfIGousKdtL9ykKJMaHs9UmI3R1MqNT4fJSsALTtGQ1VjW3WFfJempr3Ixtngqbe+eoSKTlVacXqAjJifVmBmaGxulJqbu8vQscrWgZ6uY36RS2N1OUxaADhLWE9ldWiBkYCap5uyvLTI0Z6zu7HBxsTQ05upr1dhZqWuscbV2rLJ0qK8yI6pt3aTo2J+kVBpfENYaAAgLTYqOEM1RVJBU2FJX21Vbn1qi5x9oLKNrr+btcGdtL+VsL59mKpifY9Sa31DWWo6TVwyQk8qOUUkMTs+qQh3czmWrwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/58dc3ec59a3b6f7ca64979a153eea980/ca1dc/image1.png&apos; srcset=&apos;/static/58dc3ec59a3b6f7ca64979a153eea980/e7570/image1.png 170w,
/static/58dc3ec59a3b6f7ca64979a153eea980/f46e7/image1.png 340w,
/static/58dc3ec59a3b6f7ca64979a153eea980/ca1dc/image1.png 680w,
/static/58dc3ec59a3b6f7ca64979a153eea980/02d09/image1.png 1020w,
/static/58dc3ec59a3b6f7ca64979a153eea980/9d567/image1.png 1360w,
/static/58dc3ec59a3b6f7ca64979a153eea980/3643c/image1.png 1400w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/uv-%EA%B0%84%EB%8B%A8-%EC%86%8C%EA%B0%9C-%EB%B0%8F-%EC%A0%81%EC%9A%A9&quot;&gt;uv&lt;/a&gt;는 빠른 설치, 간편한 사용 등 많은 장점이 있지만 아쉽게도 패키지 업데이트 및 설치 시에 최신 버전을 우선적으로 설치하며, poetry 같은 세밀한 의존성 검사를 수행하지 않습니다.&lt;/p&gt;
&lt;p&gt;지금 새로 시작하는 프로젝트로 최신 버전의 라이브러리를 사용할 것이라면 별 문제가 되지 않겠지만 레거시 프로젝트를 업데이트 할 때에는 uv를 사용하기가 쉽지 않습니다. &lt;/p&gt;
&lt;p&gt;이때 poetry를 사용해서 안정적인 패키지 업데이트를 도모할 수 있는 방법이 있지 않을까 궁리해봤습니다. 둘 모두 같은 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 파일 양식을 공유하기 때문에 가능할 것이라고 생각했고, 실제로 성공해서 그 방법을 적어둡니다. &lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 생성 및 수정&lt;/h2&gt;
&lt;p&gt;이미 uv로 관리되고 있거나 생성된 프로젝트라면 당연히 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 파일이 존재하겠지만, 그렇지 않은 경우라면 우선 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 파일을 생성해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv init
uv &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 명령어로 uv 초기화를 하고 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 생성이 가능합니다. &lt;/p&gt;
&lt;h3&gt;레거시 프로젝트의 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 생성이 안되는 경우&lt;/h3&gt;
&lt;p&gt;너무 오래된 레거시로 apple silicon과의 호환성 문제등으로 uv add 명령어에서 오류가 발생해 설치가 되지 않는 경우, requirements.txt의 내용을 수기로 &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 에 붙여넣어서도 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token key property&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;lib==1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;코파일럿이나 커서 등 ai의 도움을 받으면 조금 더 수월하게 작업할 수 있습니다.&lt;/p&gt;
&lt;p&gt;또는 아래의 명령어를 활용합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;s/^\(.*\)$/&quot;\1&quot;,/&apos;&lt;/span&gt; requirements.txt &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; requirements_temp.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;requirements_temp.txt에 toml 파일에 적절한 꼴의 리스트가 완성되므로 해당 내용을 붙여넣어 줍니다. &lt;/p&gt;
&lt;h3&gt;업데이트 할 라이브러리 명시&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 에 작성된 라이브러리==버전은 uv나 poetry가 설치할 라이브러리의 버전을 의미합니다. 업데이트를 할 예정이므로,&lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; 를 &lt;code class=&quot;language-text&quot;&gt;&gt;=&lt;/code&gt;로 수정해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token key property&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;lib&gt;=1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 과정에서 버전이 고정되어야 하는 라이브러리는 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt;로 유지합니다. &lt;/p&gt;
&lt;h3&gt;파이썬 버전 명시&lt;/h3&gt;
&lt;p&gt;사용할 파이썬 버전도 명시해줘야 합니다. 기본적으로 uv를 사용해 생성한 파일은 아래와 같이 최소 버전만 명시되어 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token key property&quot;&gt;requires-python&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt;=3.11&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬의 최대 버전도 정확하게 정의합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;toml&quot;&gt;&lt;pre class=&quot;language-toml&quot;&gt;&lt;code class=&quot;language-toml&quot;&gt;&lt;span class=&quot;token key property&quot;&gt;requires-python&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt;=3.11, &amp;lt;3.12&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 과정을 거쳐야 poetry가 정확한 의존성 검사를 수행할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;업데이트&lt;/h2&gt;
&lt;p&gt;여기까지 마쳤으면 준비과정은 끝났습니다. 다음의 명령어로 라이브러리에 대한 update를 실시합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry update&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;poetry가 엄격한 의존성 검사를 실시해 현재 사용 가능한 파이썬 버전에서, 고정된 라이브러리와 잘 호환되는 최대 버전의 라이브러리들로 업데이트가 되어 가상환경에 설치됩니다. &lt;/p&gt;
&lt;h2&gt;마무리 작업 - uv 개발환경 꾸미기&lt;/h2&gt;
&lt;p&gt;이렇게 하면 성공적으로 개발환경의 설치가 끝났습니다. 다만 이제 업데이트된 라이브러리 버전들로 &lt;code class=&quot;language-text&quot;&gt;uv.lock&lt;/code&gt; 을 재생성 해줘야 이후에도 의존성 검사를 거친 동일한 환경을 사용할 수 있습니다. 이 과정에서는 현재 설치된 라이브러리들을 requirements.txt로 export해 이를 기반으로 다시 uv 가상환경을 만드는 과정을 진행합니다. &lt;/p&gt;
&lt;h3&gt;requirements.txt 재생성&lt;/h3&gt;
&lt;p&gt;아래의 명령어로 &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt;를 재생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv pip freeze &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;가상환경 재설정&lt;/h3&gt;
&lt;p&gt;기존 환경을 정리하고 업데이트된 패키지 목록을 반영하기 위해서 &lt;code class=&quot;language-text&quot;&gt;requirements.txt&lt;/code&gt; 를 활용해 가상환경을 다시 만들 것이므로 &lt;code class=&quot;language-text&quot;&gt;.venv&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;uv.lock&lt;/code&gt; 을 삭제합니다. &lt;/p&gt;
&lt;p&gt;아래의 명령어로 가상환경을 다시 설정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv init
uv &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 업데이트된 환경의 uv 개발환경이 완성되었습니다. &lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이로써 개발환경은 완성되었지만, 라이브러리 업데이트는 충돌 또는 기능 이상을 유발할 수 있는 위험성을 내포하고 있습니다. 테스트 환경이 잘 꾸며져 있다면 좋겠지만, 그렇지 않은 경우에는 철저한 검증을 통해 기능상 이상이 없는지를 잘 따져봐야 하겠습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Nginx를 활용한 Reverse Proxy 구현(2)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Nginx를-활용한-Reverse-Proxy-구현2/</link><guid isPermaLink="false">https://sharknia.github.io/Nginx를-활용한-Reverse-Proxy-구현2/</guid><pubDate>Mon, 17 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/3fcba694fa90ef958a3c57a38aeb2fd6/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ACUvMi4vMj5HTRcKCh0QDiAbHhgXHB8lNCs5Tj9ee0FjfzNEXSUpNhkRExgMChoMChgGAiYeHz9FSTAzNwAuQEcwMzVGVV43RVAeGh0WEBMkJS5ITmBeb4twlrF+qb9tfpVSWnItLDkbFxsaExQfGRtPX2VLWF41PUMASGp3P09VOUZRRlxpQFZlGBojPkBLSFBkUXCLirjKmMLPaYyhP05lSUlYKysyGRoiVmhwYXN8SlZfQlFbAEBgbWKFk2WEkT5UY0pneVhwfkRKVC8/Ukdwi0lugz9gck93jThOYzs+SUNHUWR6hnaNmUdSY0dVYEJZagAnOD4zP0Q7SVBHXGdJZHRghpZ1mqNFZXdPe5I4W3EyU2VKdotAYHdTbHp7mqZrh5Y8SV0mJjUtKy8sNDoAKDQ5JicrGQ4NIyUuIiw1JjM9T2l1Yoyeeq2/Sn6YQnSNaZ+zZI6mYoKSRlhiGB4nFQ4OFgcDKCQmKCgrACAdHSMgISEWGConNDA0R0ZUaHaQoo+3yLrm7qfe66rh7LXj7ajO3IOcsFppfzE2SiYbJSIWGzpMVCMiIQAqGyM9N0YyJDo4K0ZDPFdJVW9abYeGnbR2mKyDsL+TwdF3n7Nfe5JpfphQXHZAQV04LUMqGSk1KTYmFx8ASzhTV1tvJxouNzNFOzdRbHKPZ2mJRUhkQlpvXYOYdpyyQV1zM0BXNzpSSURkdn6YPjNKKSAySEFUOCg5AB0RFiswQSghO3eLp2NskD07VDtAUSswQTlMXV1+knmiuT5VZjlDWDQwRzMmO1RQa1JAZIKIo0xNZR0HEABUaoGCobkwLlE0L0MkHCMYCgodExYgIislM0FGYHBRcYI3SFUpLz0oHzAnFSEdDBEjEBNIQlc7K0lGQmTZgdCL7u3V8AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/3fcba694fa90ef958a3c57a38aeb2fd6/ca1dc/image1.png&apos; srcset=&apos;/static/3fcba694fa90ef958a3c57a38aeb2fd6/e7570/image1.png 170w,
/static/3fcba694fa90ef958a3c57a38aeb2fd6/f46e7/image1.png 340w,
/static/3fcba694fa90ef958a3c57a38aeb2fd6/ca1dc/image1.png 680w,
/static/3fcba694fa90ef958a3c57a38aeb2fd6/02d09/image1.png 1020w,
/static/3fcba694fa90ef958a3c57a38aeb2fd6/9d567/image1.png 1360w,
/static/3fcba694fa90ef958a3c57a38aeb2fd6/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;이번에는 리버스 프록시를 구현해보고, 동적으로 환경변수를 삽입하는 방법에 대해 알아보겠습니다. &lt;/p&gt;
&lt;h2&gt;리버스 프록시의 구현&lt;/h2&gt;
&lt;h3&gt;기본 리버스 프록시 설정&lt;/h3&gt;
&lt;p&gt;가장 간단한 리버스 프록시 설정은 클라이언트의 요청을 특정 백엔드 서버로 전달하는 것입니다. 다음은 &lt;a href=&quot;http://localhost:80%EC%9C%BC%EB%A1%9C&quot;&gt;http://localhost:80으로&lt;/a&gt; 들어오는 요청을 내부의 &lt;strong&gt;백엔드 서버(8080 포트)&lt;/strong&gt;로 프록시하는 설정입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;다중 서비스 리버스 프록시&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;실제 운영 환경에서는 여러 개의 마이크로서비스를 운영할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이때, 요청 경로에 따라 적절한 백엔드 서버로 분배하도록 설정할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 80;
    server_name example.com;

    location /api/ {
        proxy_pass http://backend-service:5000;
    }

    location /auth/ {
        proxy_pass http://auth-service:4000;
    }

    location /static/ {
        root /var/www/html;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 설정에서는 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/api/ 요청 → backend-service:5000으로 전달&lt;/li&gt;
&lt;li&gt;/auth/ 요청 → auth-service:4000으로 전달&lt;/li&gt;
&lt;li&gt;/static/ 요청 → Nginx가 직접 정적 파일 서빙&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;을 실시합니다. 이렇게 하면 마이크로서비스 구조에서 API 요청을 특정 서비스로 라우팅할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;로드 밸런싱을 활용한 리버스 프록시&lt;/h3&gt;
&lt;p&gt;Nginx는 단순한 리버스 프록시 역할뿐만 아니라, 부하 분산(Load Balancing) 기능도 수행할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, 여러 개의 백엔드 서버가 있을 때, 요청을 분산하여 성능을 최적화할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;upstream backend_servers {
    server backend1:5000;
    server backend2:5000;
}

server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://backend_servers;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;upstream backend_servers {}&lt;/code&gt;  을 활용해 여러개의 백엔드 서버 그룹을 정의해주었습니다. 요청이 들어오면 자동으로 두 개의 백엔드 서버(backend1, backend2)로 부하를 분산하여 전달합니다. &lt;/p&gt;
&lt;p&gt;부하 분산 알고리즘은 기본적으로 &lt;code class=&quot;language-text&quot;&gt;Round Robin&lt;/code&gt;이 적용되며, 특정 방식으로 변경할 수도 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;upstream backend_servers {
    least_conn;  # 가장 적은 연결 수를 가진 서버로 요청 전달
    server backend1:5000;
    server backend2:5000;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;HTTPS(SSL) 리버스 프록시&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;보안을 위해 SSL을 적용한 리버스 프록시를 설정할 수도 있습니다.&lt;/p&gt;
&lt;p&gt;이 경우, 클라이언트는 HTTPS로 요청을 보내고, Nginx가 내부 서버와는 HTTP로 통신하는 방식입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /etc/nginx/ssl/example.crt;
    ssl_certificate_key /etc/nginx/ssl/example.key;

    location / {
        proxy_pass http://backend-service:5000;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;제 프로젝트에서는 기본적으로 컨테이너 안에서 작동하게 되므로 이 설정은 적용하지 않았습니다. &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;WebSocket 리버스 프록시&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;실시간 데이터 처리가 필요한 WebSocket 서비스도 Nginx에서 프록시할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 80;
    server_name example.com;

    location /ws/ {
        proxy_pass http://websocket-server:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;proxy_http_version 1.1; → WebSocket을 위해 HTTP 1.1을 사용&lt;/p&gt;
&lt;p&gt;nginx는 기본적으로 http 통신에 1.0 버전을 사용하므로 웹소켓 통신을 위해서는 1.1버전 사용을 설정해줘야 합니다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;proxy_set_header Upgrade $http_upgrade; → WebSocket 연결을 위한 Upgrade 헤더 설정&lt;/li&gt;
&lt;li&gt;proxy_set_header Connection &quot;Upgrade&quot;; → 연결을 유지하기 위한 설정&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이렇게 하면 Nginx를 통해 WebSocket 요청도 정상적으로 처리할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;envsubst를 활용한 환경변수 적용&lt;/h2&gt;
&lt;p&gt;실제 운영 환경에서는 환경 변수를 활용하여 설정을 동적으로 관리하는 경우가 많습니다. 특히 Docker 컨테이너 환경에서는 환경 변수로 설정값을 주입하는 것이 일반적입니다. Nginx에서는 envsubst를 사용하면 Nginx 설정 파일에서 환경 변수를 동적으로 적용할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;envsubst?&lt;/h3&gt;
&lt;p&gt;envsubst는 환경 변수를 치환하는 유틸리티로 쉘 스크립트에서 사용되며 템플릿 파일 내의 변수를 실제 값으로 대체할 수 있습니다. 예를 들어, Nginx 설정 파일 내에서 환경 변수 ${VAR_NAME}을 포함시킨 후 envsubst를 실행하면, 해당 변수 값이 적용된 새로운 설정 파일을 생성할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;gettext 설치&lt;/h3&gt;
&lt;p&gt;envsubst는 &lt;code class=&quot;language-text&quot;&gt;gettext&lt;/code&gt; 패키지에 포함되어 있습니다. 따라서 envsubst를 사용하려면 &lt;code class=&quot;language-text&quot;&gt;gettext&lt;/code&gt;를 먼저 설치해야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; gettext&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ubuntu 및 Debian 계열에서는 gettext 패키지를 설치하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; update
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; gettext &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;환경 변수를 적용한 Nginx 설정&lt;/strong&gt;&lt;/h3&gt;
&lt;h4&gt;&lt;strong&gt;환경 변수가 포함된 Nginx 설정 파일 (nginx.conf.template)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;nginx.conf.template&lt;/code&gt; &lt;strong&gt;파일을 생성해 다음의 내용을 작성합니다.&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 80;
    server_name ${SERVER_NAME};

    location / {
        proxy_pass http://${BACKEND_HOST}:${BACKEND_PORT};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;${SERVER_NAME}&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;${BACKEND_HOST}&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;${BACKEND_PORT}&lt;/code&gt; 값은 &lt;strong&gt;실제 실행 시점에 환경 변수로 치환될 예정&lt;/strong&gt;입니다.&lt;/p&gt;
&lt;h4&gt;envsubst를 이용한 환경 변수 적용&lt;/h4&gt;
&lt;p&gt;envsubst를 활용해 환경 변수를 포함한 템플릿 파일(nginx.conf.template)을 실제 Nginx 설정 파일(nginx.conf)로 변환합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;envsubst &lt;span class=&quot;token string&quot;&gt;&apos;$SERVER_NAME $BACKEND_HOST $BACKEND_PORT&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; nginx.conf.template &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; nginx.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;당연히 환경변수는 미리 정의되어 있어야 합니다. &lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;Nginx 실행&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;치환된 설정 파일을 적용한 후 Nginx를 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;nginx &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 문법 검사&lt;/span&gt;
nginx &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; reload  &lt;span class=&quot;token comment&quot;&gt;# 설정 적용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Docker에서의 활용&lt;/h3&gt;
&lt;p&gt;envsubst를 활용해 Docker 환경에서 Nginx 설정을 동적으로 주입할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;Dockerfile 작성&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; nginx:latest&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 기본 환경 변수 설정&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ENV&lt;/span&gt; SERVER_NAME=myapp.example.com&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ENV&lt;/span&gt; BACKEND_HOST=backend-service&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ENV&lt;/span&gt; BACKEND_PORT=5000&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 환경 변수 템플릿 복사&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; nginx.conf.template /etc/nginx/templates/nginx.conf.template&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 컨테이너 실행 시 envsubst를 이용해 환경 변수를 적용&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; envsubst &amp;lt; /etc/nginx/templates/nginx.conf.template &gt; /etc/nginx/nginx.conf &amp;amp;&amp;amp; nginx -g &lt;span class=&quot;token string&quot;&gt;&apos;daemon off;&apos;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Nginx를 활용한 Reverse Proxy 구현(1)]]></title><description><![CDATA[서론 현재 근무하는 회사의 API Gateway 역할을 하는 서버의 유지보수/고도화 업무를 맡게 됐습니다. API Gateway…]]></description><link>https://sharknia.github.io/Nginx를-활용한-Reverse-Proxy-구현1/</link><guid isPermaLink="false">https://sharknia.github.io/Nginx를-활용한-Reverse-Proxy-구현1/</guid><pubDate>Fri, 14 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1ff1d32d34de711b7867bba7cd51ece2/3643c/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVR42gXBWVMSAQAA4H1SIzQxVMwLXY2bWLCFhV1ugUEOWVHuU0JhBVFEIUUZNW9CwtLRsca8xmPKlyb1zZne+hH9lb4PAOtr2S8pKANkNNTxObw3AmHHsxq13Y7qtSC9h8XmwrDIFPB1kUkohqllMPsFWURreE0igdXVQNBhUAnpCKtbgQj98wWiuCvH4OFJwjkzaSGm8UTKmYw783lExJ47PIpNRqHGOjnYCrdSe6qqAHFvp0EJGTXSfpUYn5oj9g/tHovBrLKEfOu/Hkv3D77UmDcVCY67PVvlXCYa1nAd2j4vxtCANEAq5A/qxSJWp95qCnwo+fbPp3e28bArPJPQpRdts1lX1OuLDJVPj5Zv7y8q2btFa97EnHVr0zo+gAm5fke/P/Zu4eDr9PFVsHK+en6Z2assX//w7F85i4fF29uFT6X85tLSWraSw/cITcnzdkLWnRVQgWA6vX2wO1OYNzlHjC6H1uGxRwOZndX8zf346WPq5mny4LvJaVPr5UoV4seVecLyLaU+TSj3cD6gEAskfBBDeBPx4SEzOoAb3FMJv9eweVjWhBKm2e2Nv/+8K1tKvRIVspQYYoEZWRxK6TgbZi7Ab29y2tC1QvjurJBdiIVCrvWPm+mUm4jj5qDXHIlEtvbe//wTWinqdCqYRZd20rQsuozebOJ1Ax6vIUkMxdPRpbPr+NautE8wYtGpxRybz+oL2pOpUYsePvmcu3z4PVo8GXAGEC6TS6VIOlqgRgogkaO6UNyzXHZl5hUaBdTVIePQPQowlzBZVRDU1qQW0DdiWCbhin+5mLt5Mo6lURkiaKGyyTVAn36wD1Vz2tt6a0lMSh2T/Bxqqo9oGMc5A8akwd2vJGArr7meR6uXo4hiJDCYzBlHJxCFBurq+A+YKtwwMjj6RwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/1ff1d32d34de711b7867bba7cd51ece2/ca1dc/image1.png&apos; srcset=&apos;/static/1ff1d32d34de711b7867bba7cd51ece2/e7570/image1.png 170w,
/static/1ff1d32d34de711b7867bba7cd51ece2/f46e7/image1.png 340w,
/static/1ff1d32d34de711b7867bba7cd51ece2/ca1dc/image1.png 680w,
/static/1ff1d32d34de711b7867bba7cd51ece2/02d09/image1.png 1020w,
/static/1ff1d32d34de711b7867bba7cd51ece2/9d567/image1.png 1360w,
/static/1ff1d32d34de711b7867bba7cd51ece2/3643c/image1.png 1400w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;현재 근무하는 회사의 API Gateway 역할을 하는 서버의 유지보수/고도화 업무를 맡게 됐습니다. API Gateway 역할을 하고 있다고는 하지만 사실은 아직 아주 일부의 기능만 구현된 상태로, 일단은 각 마이크로서비스의 리버스 프록시 역할을 할 수 있도록 Nginx를 활용하려고 합니다. &lt;/p&gt;
&lt;p&gt;이번 글에서는 프록시와 리버스 프록시의 개념부터 Nginx의 설치 및 설정, 환경변수를 활용한 동적 구성 방법 등을 순서대로 다뤄보려고 합니다. &lt;/p&gt;
&lt;h2&gt;프록시와 리버스 프록시란?&lt;/h2&gt;
&lt;h3&gt;프록시&lt;/h3&gt;
&lt;p&gt;클라이언트와 서버 사이에서 중계 역할을 수행하며, 클라이언트의 요청을 대신 서버에 전달하고 서버의 응답을 다시 클라이언트로 전달합니다.&lt;/p&gt;
&lt;h4&gt;주요 기능&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;캐싱: 자주 요청되는 데이터를 임시 저장해서 서버의 부하를 줄이고 응답 속도를 개선합니다. &lt;/li&gt;
&lt;li&gt;익멱성 제공: 클라이언트의 실제 IP 주소를 숨기고 프록시 서버의 IP를 사용해 요청을 전달합니다. &lt;/li&gt;
&lt;li&gt;접근 제어 및 필터링: 특정 웹사이트나 콘텐츠에 대한 접근 제한을 설정할 수 있습니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;활용 사례&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;기업이나 학교 등에서 내부 사용자의 인터넷 접근을 제어하고 모니터링 할 때 사용합니다. &lt;/li&gt;
&lt;li&gt;개인이 익명성을 확보하거나 지역 제한 우회를 위해 활용하기도 합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;리버스 프록시&lt;/h3&gt;
&lt;p&gt;서버 앞단에 위치해 클라이언트의 요청을 받아 이를 내부의 여러 백엔드 서버로 분배하는 역할을 합니다. 클라이언트는 리버스 프록시와만 통신하며 내부 서버 구조는 외부에 노출되지 않습니다.&lt;/p&gt;
&lt;h4&gt;주요 기능&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;보안 강화: 내부 서버의 직접 노출을 방지해 외부 공격으로부터 보호합니다. &lt;/li&gt;
&lt;li&gt;부하 분산: 다수의 백엔드 서버에 요청을 효율적으로 분산시켜 서버 과부하를 예방하고 서비스 안정성을 향상시킵니다. &lt;/li&gt;
&lt;li&gt;캐싱 및 압축: 정적 콘텐츠 캐싱 및 데이터 압축을 통해 응답 속도를 개선하고 네트워크 대역폭을 최적화합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;활용 사례&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;대규모 웹사이트나 API 서비스에서 하나의 접점을 통해 여러 서버를 관리할 때 사용합니다. &lt;/li&gt;
&lt;li&gt;CDN 및 클라우드 환경에서 효율적이고 안전한 서비스 운영을 지원합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;차이점&lt;/h3&gt;
&lt;p&gt;결국 프록시와 리버스 프록시의 가장 큰 차이점은 &lt;code class=&quot;language-text&quot;&gt;누가 프록시를 이용하는가&lt;/code&gt; 라고 할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;Nginx란?&lt;/h2&gt;
&lt;p&gt;Nginx는 가볍고 빠른 웹 서버이자 리버스 프록시 서버로, 높은 성능과 확장성을 제공합니다. 기본적으로 정적 콘텐츠 제공에 최적화되어 있으며, 리버스 프록시, 로드 밸런싱, API Gateway 역할도 수행할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;주요 특징&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;고성능 &amp;#x26; 확장성: 이벤트 기반 아키텍쳐로 동시 요청 처리가 뛰어나고 적은 리소스로 많은 트래픽을 감당할 수 있습니다. &lt;/li&gt;
&lt;li&gt;리버스 프록시 기능: 백엔드 서버로의 트래픽을 중계하는 리버스 프록시 기능을 할 수 있습니다. &lt;/li&gt;
&lt;li&gt;유연한 설정: 설정 파일이 직관적이고 다양한 플러그인 및 모듈을 지원합니다. &lt;/li&gt;
&lt;li&gt;보안 강화: DDoS 방어, 접근 제어, 인증 및 암호화 처리 기능을 제공합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;활용 사례&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;정적 콘텐츠 서빙&lt;/li&gt;
&lt;li&gt;리버스 프록시 및 API Gateway&lt;/li&gt;
&lt;li&gt;로드 밸런싱을 통한 트래픽 분산&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Nginx 설치하기&lt;/h2&gt;
&lt;p&gt;Mac에서 Nginx를 설치하는 가장 쉬운 방법은 Homebrew를 이용하는 것입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치 후 실행하고, 상태를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew services start nginx
brew services list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 완료되면 브라우저에서 &lt;a href=&quot;http://localhost:8080%EC%9D%84&quot;&gt;http://localhost:8080을&lt;/a&gt; 열어 Nginx 기본 페이지가 표시되는지 확인합니다.&lt;/p&gt;
&lt;p&gt;기본적으로 Mac에서 설치된 Nginx는 8080 포트에서 실행됩니다.&lt;/p&gt;
&lt;p&gt;다음의 명령어로 nginx를 중지할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew services stop nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;설정 파일 경로 &lt;strong&gt;(Homebrew 버전)&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;설정 파일은 다음 경로에서 찾을 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;/opt/homebrew/etc/nginx/nginx.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Nginx 설정 파일 구조 및 관리 방법&lt;/h2&gt;
&lt;p&gt;Nginx 설정 파일(nginx.conf)은 여러 개의 블록으로 구성되어 있으며, 역할별로 나누어 관리할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;기본적인 Nginx 설정 파일 구조&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;기본적으로 Nginx 설정 파일은 다음과 같은 구조를 가집니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;worker_processes auto;  # 사용 가능한 CPU 코어 개수만큼 워커 프로세스를 자동 설정

events {
    worker_connections 1024;  # 하나의 워커 프로세스당 처리 가능한 최대 연결 수
}

http {
    include mime.types;  # MIME 타입 설정 포함
    default_type application/octet-stream;

    sendfile on;  # 파일 전송을 최적화하여 성능 향상
    keepalive_timeout 65;  # 연결 유지 시간 설정

    # 로그 설정
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    # 압축 설정
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;

    # 서버 설정 파일 포함
    include /etc/nginx/conf.d/*.conf;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;주요 블록 설명&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;worker_processes auto; → CPU 코어 개수에 맞춰 자동으로 워커 프로세스 개수 설정&lt;/li&gt;
&lt;li&gt;events 블록 → 동시 연결 수 제한&lt;/li&gt;
&lt;li&gt;http 블록 → HTTP 관련 설정, MIME 타입, 압축, 로그 설정 포함&lt;/li&gt;
&lt;li&gt;server 블록 → 개별 서버 설정 (리버스 프록시, 정적 파일 서빙 등)&lt;/li&gt;
&lt;li&gt;include → 설정 파일을 외부에서 불러오는 방법&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;설정 파일을 여러 개로 분리하여 관리하기&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Nginx 설정이 많아지면 하나의 nginx.conf에 모든 설정을 넣는 것은 비효율적입니다. 이를 방지하기 위해 include 지시어를 활용하여 설정 파일을 분리할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;/etc/nginx/conf.d/&lt;/code&gt;폴더에 개별 서버 설정 파일을 저장할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;nginx.conf 파일에서 설정 불러오기&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;http {
    include /etc/nginx/conf.d/*.conf;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;/etc/nginx/conf.d/my_service.conf 파일 생성&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;server {
    listen 80;
    server_name myapp.example.com;

    location / {
        proxy_pass http://backend:5000;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 개별 서비스를 독립적으로 관리할 수 있어 &lt;strong&gt;유지보수성이 높아집니다.&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;설정 파일 문법 검사 및 적용 방법&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;설정 파일을 수정한 후에는 문법 검사를 수행할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;nginx &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 문법 검사&lt;/span&gt;
nginx &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; reload  &lt;span class=&quot;token comment&quot;&gt;# 변경 사항 적용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;만약 설정에 오류가 있다면 nginx -t를 실행했을 때 오류 메시지가 출력됩니다. 오류를 수정한 후 다시 검사한 뒤 적용하면 됩니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;개별 사이트 설정 파일 활용 (sites-available, sites-enabled)&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;일반적으로 배포 환경에서는 사이트 설정을 /etc/nginx/sites-available/에 저장하고 활성화할 설정만 /etc/nginx/sites-enabled/에 심볼릭 링크를 걸어 관리하는 방식도 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;sudo ln -s /etc/nginx/sites-available/myapp.conf /etc/nginx/sites-enabled/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 특정 사이트만 쉽게 활성화/비활성화할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[uv 간단 소개 및 적용]]></title><description><![CDATA[소개 uv는 Rust로 작성된 초고속 Python 패키지 및 프로젝트 관리 툴입니다. uv…]]></description><link>https://sharknia.github.io/uv-간단-소개-및-적용/</link><guid isPermaLink="false">https://sharknia.github.io/uv-간단-소개-및-적용/</guid><pubDate>Mon, 10 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0cd88c58d9a7afb0d57c257a3afe66f0/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVR42g3MWVMSAQAA4P0P9WBhh6YhKyywB+yCLCArchO6QoAgl1ByyCUsHuQqoqOOQloD6Ix5NI6Tio3VczZTNj3UQ77k9NA/6C/U9wM+AEMRqVhEYKgAhEABzEdwRKUDJSRpHdSP5dTRQr/TbTT2mvSkHIFQQTfYeqfr1m2Qw+HeuAmgEimOojiOQ6is36QbHKblNlrrdrmyydFq3VepB6bSkZg97NM5DKhvUKFGQY0EgtvuiTofAjAMYxKpACE6xHKU0lF2Ojw3nVhik6vl4nFz/eJLdq20tp463WOWJ3QJLznQJ9UrMaWMUKkpQNDJ7Rai/J6+NlTJU1DGkG90KnMf+v8bPLXmSPOX/rFrZkT097pxdVGeCCrdtCYSDbgCI6S6F+gWSc2BsWhpIV7Z8LOzdD4VYpl2GDWVd540PzNHW2cfWY8VPj/Ib79MTU4Hs8UU7bThGCzkdgGD4fFsuexNpuk0s3x6vPLuPLu5Iu7XtpCOepP5/jPjSWu6xXyGjdVOt+rHjdzSdCD5VKGheO2dgCM0anbYsT4d7RvSeF3s0cHbHxem8USHYSjYaEy+OeSbhlQ204uj2vxOxeC2kgatIxicXHg2GgsDlNGISAmuEEZUPdaYr3L26v23D4tHO2zz5PXV9dnvP3OHuzPV+fphZWZr1RxySRS4QIxQVrs/kwOEfL5QKILkpDWRKO3V2GppvFRgNiup7f3Kp8v65dfYxvPIVNob82aK8UJ12TKehqREB6dVDCFAO+cuSFDGBDOcyQ8E/d7UU38+5c5PPiosxndPivsHHiYXTEacfnq2GJzKjVh8IUucESr1D1pagS6MEhk8IpmWC2K4xiBUW3gyHU9tA/VedbRoiedwiwuS9WFSgsBxlUoj4KMI2oMbnaDC/A/hwfLEOIAsawAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/0cd88c58d9a7afb0d57c257a3afe66f0/ca1dc/image1.png&apos; srcset=&apos;/static/0cd88c58d9a7afb0d57c257a3afe66f0/e7570/image1.png 170w,
/static/0cd88c58d9a7afb0d57c257a3afe66f0/f46e7/image1.png 340w,
/static/0cd88c58d9a7afb0d57c257a3afe66f0/ca1dc/image1.png 680w,
/static/0cd88c58d9a7afb0d57c257a3afe66f0/02d09/image1.png 1020w,
/static/0cd88c58d9a7afb0d57c257a3afe66f0/9d567/image1.png 1360w,
/static/0cd88c58d9a7afb0d57c257a3afe66f0/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;소개&lt;/h2&gt;
&lt;p&gt;uv는 Rust로 작성된 초고속 Python 패키지 및 프로젝트 관리 툴입니다. uv의 가장 메인 페이지에서도 속도를 크게 강조하고 있습니다. 실제로 사용해보니 진짜 빠릅니다. &lt;/p&gt;
&lt;p&gt;파이썬 개발환경을 위한 도구는 상당히 파편화되어있습니다. 가상 환경을 만드는 방법도 여러가지이며, 파이썬 버전관리를 하는 방법도 여러가지입니다. &lt;/p&gt;
&lt;p&gt;그런데 uv를 사용하면 pip, pip-tools, pipx, poetry, pyenv, twine, virtualenv 등을 하나로 대체할 수 있습니다. 거기에 명령어도 간단합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    즉 파이썬 버전 관리, 가상환경 관리, 패키지 관리등을 uv 하나로 모두 끝낼 수 있습니다. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다만 uv는 속도가 빠르지만, 최신 버전을 우선적으로 설치하며 Poetry처럼 세밀한 의존성 분석을 수행하지 않기 때문에 업그레이드 시 의존성 충돌이 발생할 가능성이 있습니다.&lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;설치방법엔 여러가지가 있는데 Mac에서는 brew를 사용할 수도 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; uv&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 명령어로 설치를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 외에도 pip, curl 등 여러가지 설치 방법을 지원합니다. &lt;/p&gt;
&lt;h2&gt;초기화 하기&lt;/h2&gt;
&lt;h3&gt;이미 존재하는 프로젝트&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.python-version&lt;/code&gt; 을 인식해 자동으로 알맞는 파이썬 버전으로 초기화됩니다. &lt;/p&gt;
&lt;h4&gt;requirements.txt 적용&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;새 프로젝트&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv init &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;프로젝트명&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.12&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원하는 파이썬 버전을 선택해 초기화 할 수 있습니다. 프로젝트 초기화에 필요한 파이썬 버전이 없다면 자동으로 설치합니다. &lt;/p&gt;
&lt;h2&gt;기본적인 명령어&lt;/h2&gt;
&lt;p&gt;uv는 가상환경을 생성하지 않아도 알아서 자동으로 가상환경을 적용합니다. 가상환경이 없다면 스스로 생성하고 있다면 이용합니다. 번거롭게 별도로 가상환경을 만들고 activate를 하고, activate를 잊은 경우 패키지가 잘못 설치되고.. 이런 번거로운 과정을 겪을 필요가 없습니다. &lt;/p&gt;
&lt;p&gt;가상환경은 필요한 시점에서 스스로 생성되며, .venv 형식으로 프로젝트 폴더 내에 생성되므로 IDE에서 이를 이용하면 됩니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.python-version&lt;/code&gt; 이 있다면 해당 파이썬 버전을 자동으로 사용합니다. 해당 파이썬이 설치되어 있지 않다면 자동으로 설치합니다. &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;uv run&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;파이썬 파일 등을 실행할 때에 uv run 명령어로 실행할 수 있습니다. 가상환경이 자동 적용돼 파이썬 스크립트 파일이 실행됩니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# django project 시작하기&lt;/span&gt;
uv run django-admin startproject practice &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;
 
&lt;span class=&quot;token comment&quot;&gt;# django 서버 실행하기&lt;/span&gt;
uv run manage.py runserver&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;패키지 관리&lt;/h3&gt;
&lt;p&gt;다음의 명령어로 패키지를 설치할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;패키지명&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에 적어둔 것처럼 &lt;code class=&quot;language-text&quot;&gt;uv add -r requirements.txt&lt;/code&gt; 명령어로 requirements.txt 를 활용할 수도 있습니다. &lt;/p&gt;
&lt;p&gt;삭제는 다음의 명령어를 사용합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv remove &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;패키지명&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;uv sync&lt;/h3&gt;
&lt;p&gt;uv sync 는 uv.lock 파일을 읽어서 같은 개발환경을 구성합니다. 역시 가상환경에 설치되며, 가상환경이 없다면 자동으로 구성됩니다. &lt;/p&gt;
&lt;h3&gt;파이썬 버전 관리&lt;/h3&gt;
&lt;p&gt;pyenv를 대체해 파이썬 버전 관리도 가능합니다. 여러 버전을 동시에 설치하는 것도 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv python &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.10&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.12&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.python-version 파일을 통해 명시적으로 프로젝트에 사용할 파이썬 버전을 정의할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv python pin &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치된 파이썬은 다음의 명령어를 통해 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv python list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;requirements.txt 만들기&lt;/h2&gt;
&lt;p&gt;requirements.txt 는 여전히 필요한 경우가 많습니다. 다음의 명령어를 통해 requirements.txt를 생성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# requirements.txt에 의존성을 기록하는데 hash값 없고 dev는 제외&lt;/span&gt;
uv &lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; requirements.txt --no-hashes --no-dev
 
&lt;span class=&quot;token comment&quot;&gt;# requirements-dev.txt에 의존성을 기록하는데 hash값도 있고 dev도 포함&lt;/span&gt;
uv &lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; requirements-dev.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또 Docker 환경에서는 가상환경 없이 패키지를 설치하는 것이 더 편리할 때가 많습니다. 이를 위해 가상환경이 아닌 기본 환경에 패키지를 설치할 수도 있습니다. 다만 이 경우에는 requirements.txt 가 필요합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uv pip &lt;span class=&quot;token function&quot;&gt;sync&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--system&lt;/span&gt; requirements.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;(2025-02-18) 추가&lt;/h2&gt;
&lt;p&gt;uv sync를 활용하면 바로 알맞은 가상환경이 설치되고, uv pip list를 통해 가상환경에 설치된 라이브러리를 살펴볼수도 있지만 정작 터미널에서 직접 가상환경을 활성화 해 pip list를 날리면 전역의 pip list만 보여집니다. &lt;/p&gt;
&lt;p&gt;이는 uv를 통해 설치되는 가상환경에 pip가 설치되지 않아 발생하는 문제로, 가상환경을 실행한 뒤 다음의 명령어로 pip를 강제 설치해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;python &lt;span class=&quot;token parameter variable&quot;&gt;-m&lt;/span&gt; ensurepip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 뒤에 가상환경을 재실행 하고 pip list를 날리면 가상환경에 설치된 pip 라이브러리 리스트를 확인할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.astral.sh/uv/&quot;&gt;https://docs.astral.sh/uv/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Deepseek R1 로컬 설치]]></title><description><![CDATA[서론 오늘은 요 며칠 화제의 챗지피티 대안 모델 Deepseek R…]]></description><link>https://sharknia.github.io/Deepseek-R1-로컬-설치/</link><guid isPermaLink="false">https://sharknia.github.io/Deepseek-R1-로컬-설치/</guid><pubDate>Wed, 29 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/063ad97523d4e6185cc1f3419eea1fc4/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AKSxqbC7spOelpuon5KelpOelXWCfGFwbWl8elx0d2iJlVNobUxfYkpbX09eYk5dZFVeZlBZY0ZQXT0/TACbqKGTnpWBjIR8i3l/jn2aqZ6ImJFugHtxiId0i490jpZohI5ifIRedHpTZWlqgotnd4FRXGU+Qk03Mz4Aoa2nhI+GnKeej5mPW1hVV1hYX2ppWWdkeY+OkLG6faGtbpGdcJCaZ4CJXnR8gaOxboKMS1NXQUtZR0ZTAHSBfJGdlXyJgnyKhDg1Ow0WKi1HXSIxQ0ZUWYmsso20vpK7xXyjr22Ml2x9hHGJkW6CiltxgGGHoEJPZAB4hIB5g3uxurGVoJdWW1wgPVWpw8+ovcg7VWJxlZlslqOBqreStsB9m6RyhY5yhYtmdXpje4ZWcYRYan4Ab3dyfIV+ipWNgo2FYmtpL1Ntq7e+rri/UnmMhaqzdKOxaZengqWvbY2VcI6Xb4aNZ3l+XGVnTVlgQ0tWAG12cmBmX1piXGZwaGRuaTNXbnOWqHuiskN1jHWZoo69y3+xwXqgq3WUnHONlHCFiWZ4fGJucVZrdU1hbwB8hoFrcmuCioJ+iYF4gHk9WGpir9BqzO84bIh0lZ2w4Oye0d6Lr7h8nKF2kZVpfoFhdHdXa3FjgY9JVl4As7y3w87IydPPz9vW2uXfW2RtN1xySHGGLz9LWm50v+btrMrNmrG0lqipkJ+erry5oq6qlqOhj5yafIOBALK6tLzDvMPLw8LIwMDGvGdoaDc2P0lHS0I/QkZSWJCzvJqyuXOBhlJaX4iRkb7HwbS9t6qyrKKqqKbF0QCAiIOIkIiSmpKOlY6Um5B7hYRykaKCpLV2hYqPnp+fvcaQpKx3gIGCjo6SnpiLlpJ/iohzfXtzfX50hYru0FKi1ASj2gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/063ad97523d4e6185cc1f3419eea1fc4/ca1dc/image1.png&apos; srcset=&apos;/static/063ad97523d4e6185cc1f3419eea1fc4/e7570/image1.png 170w,
/static/063ad97523d4e6185cc1f3419eea1fc4/f46e7/image1.png 340w,
/static/063ad97523d4e6185cc1f3419eea1fc4/ca1dc/image1.png 680w,
/static/063ad97523d4e6185cc1f3419eea1fc4/02d09/image1.png 1020w,
/static/063ad97523d4e6185cc1f3419eea1fc4/9d567/image1.png 1360w,
/static/063ad97523d4e6185cc1f3419eea1fc4/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;오늘은 요 며칠 화제의 챗지피티 대안 모델 Deepseek R1을 로컬에 간단하게 설치해보겠습니다. 중국에 정보가 넘어간다, 중국 공산당 관련 내용은 검열된다, 접속이 안된다, 이런 저런 말이 많지만 로컬에 설치하면 문제 없습니다. &lt;/p&gt;
&lt;h2&gt;권장 사양&lt;/h2&gt;
&lt;p&gt;이 모델의 특징은 기존 모델 대비 엄청난 저사양에서도 돌릴 수 있다는 것이 특징입니다. 저는 안해봤지만 아이폰에서도 돌리는게 가능하다고 합니다. 저는 오늘 Deepseek 모델 중에서도 14b 모델을 실행해볼 예정인데, 이 모델을 위해선 적어도 32기가의 메모리에, 모델 용량만 10gb 언저리이니 넉넉하게 2-30gb의 여유 공간이 필요할 것 같습니다. &lt;/p&gt;
&lt;p&gt;저는 M3 Pro macbook을 사용중이며, 램 용량은 32기가를 사용중으로, 결과적으로는 속도는 조금 답답했지만 넉넉하게 잘 실행됐습니다. &lt;/p&gt;
&lt;h2&gt;Ollama&lt;/h2&gt;
&lt;p&gt;오늘 모델은 Ollama를 사용해 서빙하려고 합니다. Ollama는 로컬에서 AI 모델을 쉽게 관리하고 실행할 수 있게 해주는 도구입니다. 간단한 명령어로 모델을 설치하고, 서버를 실행하며, 다양한 설정을 조정할 수 있어 Deepseek R1과 같은 모델을 로컬에서 운영하는 데 매우 유용합니다.&lt;/p&gt;
&lt;h2&gt;Open-WebUI&lt;/h2&gt;
&lt;p&gt;또 Ollama로 서빙된 모델을 사용하기 위한 UI로 Open-WebUI를 사용하려고 합니다. Open-WebUI는 사용자 친화적인 웹 인터페이스를 제공하여 AI 모델과 상호작용할 수 있게 해줍니다. 별도의 코딩 없이도 모델을 테스트하고, 설정을 변경하며, 결과를 확인할 수 있어 비개발자도 쉽게 사용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;ChatGPT와 유사한 인터페이스를 제공해 사용이 아주 편리합니다. &lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;h3&gt;Ollama 설치&lt;/h3&gt;
&lt;p&gt;Ollama를 설치하기 위해 Homebrew를 사용합니다. 물론 Ollama도 Docker-compose를 사용해 실행할 수 있지만, 기본적으로 docker의 가상환경에는 많은 램이 배정되지 않으므로 추가적인 설정이 필요합니다. 저는 그 과정이 일반적이지 않으며, 귀찮기도 해 Ollama는 로컬에 그냥 brew로 설치하기로 했습니다. &lt;/p&gt;
&lt;p&gt;터미널을 열고 다음 명령어를 입력하세요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--cask&lt;/span&gt; ollama&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 완료되면 Ollama 서버를 백그라운드에서 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; ollama serve &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; ollama.log &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그 다음, Deepseek R1:14B 모델을 다운로드합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ollama pull deepseek-r1:14b&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Docker-Compose 설정&lt;/h3&gt;
&lt;p&gt;Docker와 Docker-Compose가 설치되어 있는지 확인합니다. 설치되지 않았다면 &lt;a href=&quot;https://www.docker.com/&quot;&gt;Docker 공식 사이트&lt;/a&gt;에서 설치할 수 있습니다.&lt;/p&gt;
&lt;p&gt;다음과 같은 docker-compose.yml 파일을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;services&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;webui&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        image&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ghcr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;webui&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;webui&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;main
        container_name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;webui
        restart&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; unless&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;stopped
        environment&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; OLLAMA_BASE_URL&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;docker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;internal&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;11434&lt;/span&gt;
        ports&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;33000:8080&apos;&lt;/span&gt;
        volumes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; openwebui_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;app&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;backend&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;data

volumes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    openwebui_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;포트는 자유롭게 지정해도 상관없습니다. &lt;/p&gt;
&lt;h2&gt;실행&lt;/h2&gt;
&lt;p&gt;yaml 파일이 있는 터미널에서 다음 명령어를 실행하여 Docker 컨테이너를 시작합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; compose up &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 &lt;a href=&quot;http://localhost:33000/&quot;&gt;Open-WebUI&lt;/a&gt; 페이지로 접속하면 실행됩니다. 혹시 다른 포트를 사용했다면, 포트를 바꿔주면 됩니다. &lt;/p&gt;
&lt;h2&gt;기타 모델 다운로드&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://ollama.com/search&quot;&gt;Ollama 사이트&lt;/a&gt;에서 다운로드 가능한 다른 모델을 살펴볼 수 있습니다. 원하는 모델의 모델명:태그를 Open-WebUI 관리 페이지에 입력해주면 간단하게 다른 모델을 실행할 수 있습니다. &lt;/p&gt;
&lt;p&gt;또는 &lt;a href=&quot;https://huggingface.co/models&quot;&gt;huggingface 사이트&lt;/a&gt;에서 원하는 모델을 선택한 후, Quantizations된 모델을 제공한다면 해당 모델을 Ollama에서 바로 사용할 수도 있습니다. &lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;실행은 잘 되고, 성능도 꽤 좋아보입니다. 하지만 아무래도 맥북에서는 속도가 좀 답답한 감이 있으며, 한국어는 아무래도 좀 능력이 떨어지는지 자주 외국어와 섞여나오는 증상이 있습니다. &lt;/p&gt;
&lt;p&gt;아무래도 저는 아직은 당분간은 유료 챗지피티를 사용할 것 같습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[GraphQL과 Django 2]]></title><description><![CDATA[서론 지난 시간에 이어 GraphQL에 대해 좀 더 자세히 알아보는 시간을 가지려고 합니다.  GraphQL의 장점과 현실적인 문제 GraphQL은 기존 REST API…]]></description><link>https://sharknia.github.io/GraphQL과-Django-2/</link><guid isPermaLink="false">https://sharknia.github.io/GraphQL과-Django-2/</guid><pubDate>Fri, 24 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/2283674169c1dffb0a861a8eecbd40c6/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVR42gXB3VPSAAAA8L340EPnlZ1FmSKCgITCNhgDBtvcBgLb+Nz4JqYDgcCvCEjhyEztQ7rLsyy9nuy88+quj6usrquHXnrqpevv6fcDjH1nTH39rqsGjxpJwcGbUOIRXn2c6W13TlafnxaOf4QPPsOVXbL6AOVLKCGABuyaQmdSjENDOqCgA1/l5gU9skWnNsTlOll86Gt8WHn56eD73utf9//8Xfz2O77/Di9vYeICiLBmLYpoLNCIEVaMAR3U829nXzZRDTtfdyaWgvWdYOfn3N7p9tvO9nvpxZfZo6/Fo4/y4Ru61LUxaYwU5GDeYZ526K0Acn7IowSpMTiMhfN4usIUdvP3nnHtO7Gt0vxhoX1ClXre5V60vUtkGsHyaiJZdZvc+CRqH9EDtisa0oi5VaCAhaVgeSnRaCU7y5GmxLZi/iYfv8uVe55s219aZ4ttwp/FiYgLJqwak0NlAEi1KU1HBdjrgfzJmXylsJ6PN2O+G3FxzceuzOQ2A/HbDDfPXm9gbIEKzhJklHOFvRBDaKcAZGA4YLBL7qjgyVZm67WljbzU8XMVF5kjYy2+dYASWYedJ8UFsd3L3Nrk07Xj1SdPpQY0pAaQwVFcA9Nai+zmZI8oCSUfnXO6k4zcxcKLoF1wkIlpcQHjZActBvicF+fStkBIh1rOXQbgAYVTZWQM1hDkyjLhQlCei9ZgndPqiCBUhso3UVYGIT/HZ1kX6w1JxQf7kNpKm52YQglA/ZeYRNVf7KJK0DUKYuM20uwmcJ6KSBY6RUotIpAh/QJDhyk0EM3Wkotd5xQ+PWqglRMAePYiFim78mumQR2kdVqxuEVldth8OJeFsNAkNINRMTKQgkDGCnkIiLCOTMEXhvkJm6hH/gOvB9X79bQKWQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/2283674169c1dffb0a861a8eecbd40c6/ca1dc/image1.png&apos; srcset=&apos;/static/2283674169c1dffb0a861a8eecbd40c6/e7570/image1.png 170w,
/static/2283674169c1dffb0a861a8eecbd40c6/f46e7/image1.png 340w,
/static/2283674169c1dffb0a861a8eecbd40c6/ca1dc/image1.png 680w,
/static/2283674169c1dffb0a861a8eecbd40c6/02d09/image1.png 1020w,
/static/2283674169c1dffb0a861a8eecbd40c6/9d567/image1.png 1360w,
/static/2283674169c1dffb0a861a8eecbd40c6/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/GraphQL%EA%B3%BC-Django&quot;&gt;지난 시간&lt;/a&gt;에 이어 GraphQL에 대해 좀 더 자세히 알아보는 시간을 가지려고 합니다. &lt;/p&gt;
&lt;h2&gt;GraphQL의 장점과 현실적인 문제&lt;/h2&gt;
&lt;p&gt;GraphQL은 기존 REST API의 단점을 보완하고, 클라이언트가 원하는 데이터만 요청할 수 있는 유연한 구조를 제공합니다. 하지만 현실적으로 적용할 때는 여러 문제를 고려해야 합니다.&lt;/p&gt;
&lt;h3&gt;GraphQL의 이점&lt;/h3&gt;
&lt;h4&gt;유연한 데이터 요청&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;REST API는 백엔드에서 정해준 응답 형식을 그대로 받아야 합니다.&lt;/li&gt;
&lt;li&gt;하지만 GraphQL은 클라이언트가 필요한 데이터만 선택적으로 요청할 수 있어 불필요한 데이터(Over-fetching)를 줄이고, 필요한 데이터를 추가 요청해야 하는 문제(Under-fetching)도 해결할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;단일 엔드포인트&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;REST는 리소스마다 엔드포인트가 다릅니다. (&lt;code class=&quot;language-text&quot;&gt;/users&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;/users/1/posts&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;/users/1/comments&lt;/code&gt; 등)&lt;/li&gt;
&lt;li&gt;GraphQL은 단일 엔드포인트(&lt;code class=&quot;language-text&quot;&gt;/graphql&lt;/code&gt;)에서 다양한 요청을 처리할 수 있어 API 유지보수가 간편합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;실제 프로젝트에서 GraphQL을 도입할 때 겪는 문제들&lt;/h3&gt;
&lt;h4&gt;쿼리가 복잡해지면 성능 이슈 발생&lt;/h4&gt;
&lt;p&gt;GraphQL은 유연한 데이터 요청이 가능하지만, 필요한 데이터를 어떻게 가져올지 효율적으로 설계하지 않으면 오히려 성능이 저하될 수 있습니다. 이에 대한 내용은 &lt;a href=&quot;https://sharknia.github.io/GraphQL%EA%B3%BC-Django&quot;&gt;이전 블로그 글&lt;/a&gt;에서 다룬바가 있습니다. &lt;/p&gt;
&lt;h4&gt;캐싱의 어려움&lt;/h4&gt;
&lt;p&gt;단일 엔드포인트에서 다양한 요청을 처리하고 응답의 꼴이 정해져 있지 않기 때문에 기본적인 HTTP 캐싱이 어렵고, 별도의 캐싱 전략을 고려해야 합니다.&lt;/p&gt;
&lt;h4&gt;쿼리 비용 제한 필요&lt;/h4&gt;
&lt;p&gt;GraphQL은 클라이언트가 원하는 데이터를 자유롭게 요청할 수 있기 때문에, 너무 깊거나 복잡한 쿼리 요청이 들어올 경우 서버 부담이 커질 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property-query&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;token object&quot;&gt;posts&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token object&quot;&gt;comments&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token object&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;name&lt;/span&gt;
          &lt;span class=&quot;token object&quot;&gt;posts&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token object&quot;&gt;comments&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;token object&quot;&gt;author&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
              &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 이처럼 너무 깊은 중첩 쿼리는 서버 성능에 심각한 영향을 미칠 수 있습니다. 이를 위해 GraphQL 쿼리의 Depth 제한 및 요청 복잡도 제한(Query Cost Analysis) 설정이 가능합니다. 예를 들어, 5단계 이상 중첩된 요청은 막거나, 특정 요청당 비용을 계산해 제한하는 방식을 사용할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;validation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rules &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; QueryDepthLimitRule

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomGraphQLView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphQLView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_validation_rules&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;QueryDepthLimitRule&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 최대 5단계 중첩 제한&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런 식으로 적용하면 GraphQL의 무분별한 깊은 요청을 막아 서버 부하를 줄일 수 있습니다.&lt;/p&gt;
&lt;h3&gt;GraphQL을 무조건 적용하면 안 되는 경우&lt;/h3&gt;
&lt;p&gt;이와 같이 발생할 수 있는 문제 때문에 항상 모든 서비스에 적합한 것은 아닙니다. 다음과 같은 경우에는 REST API 가 더 나을 수 있습니다. &lt;/p&gt;
&lt;h4&gt;단순한 API&lt;/h4&gt;
&lt;p&gt;CRUD API가 단순한 경우, GraphQL의 유연성이 오히려 필요 없을 수 있습니다. 예를 들어 &quot;게시판 서비스&quot;처럼 정형화된 API는 REST API가 더 효율적일 수 있습니다. &lt;/p&gt;
&lt;h4&gt;캐싱이 중요한 경우&lt;/h4&gt;
&lt;p&gt;위에서 설명한 것처럼 캐싱에 있어서는 REST API가 더 유리합니다. 정적 데이터를 많이 제공하는 등 캐싱이 성능에 영향을 크게 미칠 수 있는 서비스라면 REST API가 훨씬 효율적입니다. &lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;API 소비자가 다양할 경우&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;GraphQL은 프론트엔드 개발자가 직접 원하는 데이터를 요청하는 방식이므로, &quot;내부 서비스&quot;에서 사용하기에는 좋지만 공개 API(예: 오픈 API)에서는 REST API가 더 적절할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;GraphQL의 성능 최적화: DataLoader 패턴을 적용하기&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/GraphQL%EA%B3%BC-Django&quot;&gt;Django ORM 최적화&lt;/a&gt;만으로도 성능이 좋아질 수 있지만, GraphQL 특성상 동일한 요청을 중복 실행하는 문제가 발생할 수 있습니다. 이를 해결하기 위해 DataLoader 패턴을 적용하면 더욱 효율적으로 데이터 조회가 가능합니다.&lt;/p&gt;
&lt;h3&gt;DataLoader란?&lt;/h3&gt;
&lt;p&gt;GraphQL은 resolver마다 개별적으로 데이터베이스를 조회하는데, 이 과정에서 동일한 데이터에 대한 중복 쿼리가 발생할 수 있습니다. DataLoader는 동일한 요청을 한 번에 처리(Batching)하고, 결과를 캐싱하는 패턴을 말합니다. &lt;/p&gt;
&lt;h3&gt;DataLoader 적용 예시 (Django + Graphene)&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; promise &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Promise
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dataloader &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DataLoader
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; Django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Prefetch
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Post

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostLoader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DataLoader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;batch_load_fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id__in&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;user_ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        post_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; user_id &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; posts&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            post_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;post_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; user_id &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;batch_load_fn()&lt;/code&gt;을 사용해 한 번의 쿼리로 여러 사용자의 &lt;code class=&quot;language-text&quot;&gt;posts&lt;/code&gt; 데이터를 가져오고 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dataloaders &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PostLoader

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User

    posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PostType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_posts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        loader &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PostLoader&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; loader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# DataLoader를 통해 batch 처리&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;GraphQL Resolver에서 DataLoader를 사용해 각 사용자별 개별 쿼리 실행 없이 한 번의 쿼리로 처리할 수 있습니다. &lt;/p&gt;
&lt;p&gt;DataLoader 적용 전에는 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이와 같이 쿼리가 발생해 사용자가 많을수록 쿼리 수 증가하지만 적용 후에는&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쿼리 실행 횟수가 감소해 성능이 최적화됩니다. &lt;/p&gt;
&lt;h3&gt;IN 절 개수 제한을 고려한 DataLoader 최적화&lt;/h3&gt;
&lt;p&gt;다만 이 방법도 만능은 아닙니다. Oracle을 포함한 일부 DBMS에서는 IN 절에 들어갈 수 있는 값의 개수가 제한되어 있습니다. 예를 들어 Oracle은 1000개 제한이 걸려있으며, 사실상 제한이 없는 DBMS라고 하더라도 너무나 긴 IN 절은 성능 저하를 유발할 수 있습니다. 이에 IN 절이 너무 커지지 않도록 방지하는 로직을 추가하는 것이 중요합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; promise &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Promise
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dataloader &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DataLoader
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; Django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Prefetch
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Post

&lt;span class=&quot;token comment&quot;&gt;# DBMS IN 절 제한 (Oracle 기준 1000개)&lt;/span&gt;
BATCH_SIZE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;  

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostLoader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DataLoader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;batch_load_fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        results &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# IN 절 개수 제한을 고려한 배치 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; BATCH_SIZE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            batch_ids &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; BATCH_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id__in&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;batch_ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; posts&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setdefault&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# DataLoader는 user_id 순서대로 반환해야 함&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; user_id &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; user_ids&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 작성하면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; post &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1001&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1002&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쿼리가 1000개씩 나눠서 실행됩니다. &lt;/p&gt;
&lt;h2&gt;GraphQL API 설계: 유지보수 가능한 스키마 설계 원칙&lt;/h2&gt;
&lt;h3&gt;Pagination(페이지네이션) 패턴 (Offset vs Cursor)&lt;/h3&gt;
&lt;p&gt;GraphQL에서 대량의 데이터를 처리할 때는 &lt;strong&gt;Pagination(페이지네이션)&lt;/strong&gt;이 필수입니다. 페이지네이션을 구현하는 방법에는 Offset 방식과 Cursor 방식이 있습니다.&lt;/p&gt;
&lt;h4&gt;Offset Pagination (기본적인 방식)&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;OFFSET&lt;/code&gt;을 이용해 페이지를 이동하는 방식으로 SQL의 LIMIT + OFFSET을 그대로 사용 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property-query&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;offset&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;id&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;name&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Django에서는 아래와 같이 구현 할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    users &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; limit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Int&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; offset&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Int&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_users&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; limit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; offset&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; offset &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# OFFSET 적용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 방법은 구현이 SQL의 OFFESET/LIMIT을 활용하므로 직관적으로 이해가 쉽고 구현이 간단합니다. 다만 데이터가 많아질수록 성능 저하가 일어날 수 있고, 새로운 데이터가 추가되면 데이터가 밀려서 중복 조회가 발생할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;Cursor Pagination (Relay-style)&lt;/h4&gt;
&lt;p&gt;Relay는 GraphQL에서 Cursor 기반 Pagination을 공식적으로 정의한 방식입니다. Cursor Pagination은 특정 필드를 기준으로 다음 데이터를 가져오는 방식으로 OFFSET이 아니라 고유한 Cursor값을 사용합니다. 페이징이 빠르고 안정적으로 Offset 방식의 단점을 개선할 수 있지만 구현이 상대적으로 복잡합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property-query&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;after&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cursor123&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token object&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token object&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;id&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;name&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;cursor&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token object&quot;&gt;pageInfo&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;hasNextPage&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;endCursor&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Django에서는 아래와 같이 구현 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; graphene
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_Django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;types &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoObjectType
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relay &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Node
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_Django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoFilterConnectionField
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        interfaces &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Relay Node 사용&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    users &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DjangoFilterConnectionField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Relay-style Pagination 적용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 방식은 대량 데이터에서도 성능이 뛰어나고 데이터가 추가/삭제되어도 안전하지만, 정렬 기준이 필요한 필드가 있어야 하는 문제점이 있습니다.  정식 GraphQL 표준 방식으로 Cursor 기반이라 성능 최적화가 가능하면서도 &lt;code class=&quot;language-text&quot;&gt;pageInfo.hasNextPage&lt;/code&gt; 등을 제공하여 클라이언트에서 쉽게 처리 가능합니다. &lt;/p&gt;
&lt;h3&gt;GraphQL API 변경 관리(버전 관리 vs Deprecated 필드)&lt;/h3&gt;
&lt;p&gt;GraphQL API는 REST처럼 v1, v2 버전을 사용하지 않는 것이 일반적입니다. 대신 Deprecated 필드를 활용하여 API 변경을 최소화하는 방식을 추천합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token scalar&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token scalar&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token scalar&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token directive function&quot;&gt;@deprecated&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Use contactEmail instead&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;contactEmail&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token scalar&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존의 &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt; 필드는 유지하면서, 새로운 &lt;code class=&quot;language-text&quot;&gt;contactEmail&lt;/code&gt; 필드를 추가했습니다. 클라이언트가 점진적으로 변경할 수 있도록 유도할 수 있습니다. &lt;/p&gt;
&lt;p&gt;Django에서는 다음과 같이 구현이 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User

    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;deprecation_reason&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Use contactEmail instead&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하지만 대규모 변경이 필요한 경우, 특정 API 그룹만 버전 관리를 하는 것이 유리할 수도 있습니다. 상황에 따라 유연한 대처가 필수입니다. &lt;/p&gt;
&lt;h2&gt;GraphQL과 캐싱&lt;/h2&gt;
&lt;h3&gt;HTTP 캐싱이 어려운 이유&lt;/h3&gt;
&lt;p&gt;GraphQL은 REST API보다 강력한 데이터 요청 기능을 제공하지만, 기본적인 HTTP 캐싱이 어렵다는 단점이 있습니다. 단일 엔드포인트를 사용하므로 REST API처럼 URL 기반의 캐싱이 불가능하기 때문입니다. &lt;/p&gt;
&lt;p&gt;REST API의 경우에는 URL이 정해져 있기 때문에, 브라우저나 CDN에서 &lt;code class=&quot;language-text&quot;&gt;Cache-Control&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;ETag&lt;/code&gt; 등을 활용하여 응답을 캐싱할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;GET /users/1  → 캐싱 가능
GET /posts/10 → 캐싱 가능&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;GraphQL에서는 모든 요청이 같은 엔드포인트(&lt;code class=&quot;language-text&quot;&gt;/graphql&lt;/code&gt;)에서 처리되므로, URL 기반의 HTTP 캐싱이 불가능합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;POST /graphql   → 캐싱 불가능&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모든 요청이 POST method로 이루어지며, 요청 본문(Body)에 있는 GraphQL Query 내용이 다를 수 있기 때문입니다.&lt;/p&gt;
&lt;p&gt;이 문제를 해결하기 위해 다음의 방법들을 활용해 캐싱할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;GraphQL의 &lt;code class=&quot;language-text&quot;&gt;Persisted Queries&lt;/code&gt; 활용법&lt;/h3&gt;
&lt;h4&gt;Persisted Queries란?&lt;/h4&gt;
&lt;p&gt;GraphQL 쿼리를 사전에 저장해두고, 해시(hash) 값을 이용해 요청하는 방식입니다. 즉, 쿼리 내용을 생략하고 해시값만 보내므로, 동일한 요청을 쉽게 캐싱할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;graphql&quot;&gt;&lt;pre class=&quot;language-graphql&quot;&gt;&lt;code class=&quot;language-graphql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property-query&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;email&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 쿼리를 아래처럼 쿼리 해시값을 사용한 요청으로 변환합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;e3cbbd2f0f5e4b80b4&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;variables&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해시 값이 동일하면 캐싱이 가능해집니다. 클라이언트와 서버에서 동일한 해시값을 가진 요청을 캐싱할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;Django의 Persisted Queries&lt;/h4&gt;
&lt;p&gt;클라이언트에서 Query 해시값 생성을 생성합니다. 클라이언트는 Apollo Client등을 활용해 해시값을 생성할 수 있습니다. Django에서는 해시값 기반으로 응답을 캐싱합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; cache
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execution&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;executors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sync &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; SyncExecutor

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CachedGraphQLView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphQLView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;execute_graphql_request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        cache_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;graphql:&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; response &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_graphql_request&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3600&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 1시간 캐싱&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쿼리를 해시값으로 변환하여 동일한 요청을 캐싱 가능합니다. &lt;/p&gt;
&lt;h3&gt;Apollo Client의 캐싱 전략&lt;/h3&gt;
&lt;p&gt;GraphQL에서 클라이언트 캐싱(Apollo Client) 을 활용하면 프론트엔드에서 불필요한 네트워크 요청을 줄일 수 있습니다. Apollo Client의 캐싱을 활용하면, 동일한 요청을 여러 번 보낼 필요 없이 프론트엔드에서 데이터를 재사용할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Redis를 활용한 GraphQL 응답 캐싱&lt;/h3&gt;
&lt;p&gt;Persisted Queries와 같은 개념으로 결국 같은 쿼리에 대해 동일한 응답을 반복해서 제공할 수 있기 때문에, Redis를 활용하는 방법으로도 캐싱을 해 성능 향상을 꾀할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;Django + Redis 기반 GraphQL 캐싱 구현&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; redis
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; hashlib
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; cache
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; GraphQLView

redis_client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; redis&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StrictRedis&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; port&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6379&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; db&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CachedGraphQLView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphQLView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;execute_graphql_request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        query_hash &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hashlib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sha256&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;encode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hexdigest&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        cache_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;graphql_cache:&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;query_hash&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;# Redis에서 캐시 확인&lt;/span&gt;
        cached_response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; redis_client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; cached_response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; cached_response

        &lt;span class=&quot;token comment&quot;&gt;# 캐시 없으면 원래 GraphQL 요청 실행&lt;/span&gt;
        response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_graphql_request&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;# Redis에 캐싱 (60분 유지)&lt;/span&gt;
        redis_client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setex&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3600&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 동일한 GraphQL 요청이 오면, Django가 데이터베이스가 아니라 Redis에서 즉시 응답하는 것이 가능합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Elastic APM]]></title><description><![CDATA[Elastic APM Elastic APM (Application Performance Monitoring)은 Elastic Stack(ELK…]]></description><link>https://sharknia.github.io/Elastic-APM/</link><guid isPermaLink="false">https://sharknia.github.io/Elastic-APM/</guid><pubDate>Thu, 23 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/3baf99744627c0cd8b83c615aee37ba6/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChUlEQVR42g3SyU4acQCA8XkGG41WUcGyM8wCzPaHYTZghhlg2BdhZBFawQ1Bi7VVGmNdYoxJYw+mNF7qzTYxPfQp+kz1Ab7kd/gg6+yU/fUr2/y0wzTrWZrzmOc9KyavzYy67ahtEYUxPxMhSIpAURqBWTZCuRHS6URWFt2mGcg+N+Uyzbw0iHUJdtpxDKEoMijJDMvjajU5vtdaPV7WRDkpxrR6dX/bOKrEShxGYbZlyLEwDVtMPoykYu2CUlCEOCXIUqnNxjPG+LLV3+Vjslhs8Ho5kTUuG3tPF09Hd39yrQMSQyCX2RQIUCCaF5q3J+sftsbXKCdjfioEgnFd50sdydgR2ocgVtA7u8P7x62D2/0v3/s/nqPpAgQ7bZy+yibLEaOTPBjjibUAE9JrRnZ7IJZbQr4pdwbq+k6hO9yZ/K5fPERXe8ncmqyXwoIAYbhf/jjJ3T4ruWrceIsEWCIsZA7PuHwDRNTS8efc6LR4cp0bncdX34lymqFoH+whaUAzDORjWP38MXX1q751eaNXKrl1RpDVYj3d2W3d/+z//Zce38V7x+FkmWZCJAMi6WKyuakZHSGuQSiO42LOxjUVee/r5rdKppsq1jPNjVT/U3J0E5QLPgIQvMIoWanSLh9eVN6fpVqbYiLNABpyvjFLmVr+eBLSN3CYlfwgRIKwmmEFJRhNAU70hyWx0q5dTeo3D2qjJxdrhe5ALVZx2AW5LSbK7wOsCESNElSCoOHlea/d6nVYw1pWH57GOsNEZ5DujrS1DU5NcZGYEIkBmsAcFsi+MP2yFOq0eq1mzGVjGODHMS/sIVieS5XCapbmJJLlgagwLwof5vO6fIgHtVs8S7P/AUb6w6D5yQuTAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/3baf99744627c0cd8b83c615aee37ba6/ca1dc/image1.png&apos; srcset=&apos;/static/3baf99744627c0cd8b83c615aee37ba6/e7570/image1.png 170w,
/static/3baf99744627c0cd8b83c615aee37ba6/f46e7/image1.png 340w,
/static/3baf99744627c0cd8b83c615aee37ba6/ca1dc/image1.png 680w,
/static/3baf99744627c0cd8b83c615aee37ba6/02d09/image1.png 1020w,
/static/3baf99744627c0cd8b83c615aee37ba6/9d567/image1.png 1360w,
/static/3baf99744627c0cd8b83c615aee37ba6/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Elastic APM&lt;/h2&gt;
&lt;p&gt;Elastic APM (Application Performance Monitoring)은 Elastic Stack(ELK 스택)의 일부로, 애플리케이션의 성능을 모니터링하고 성능 병목 현상과 오류를 추적하는 도구입니다. 주로 백엔드 서비스, 데이터베이스 쿼리, HTTP 요청, 비동기 작업 등의 성능을 분석하는 데 사용됩니다.&lt;/p&gt;
&lt;h3&gt;ELK 스택이란?&lt;/h3&gt;
&lt;p&gt;ELK 스택은 Elasticsearch, Logstash, Kibana의 약자로, 로그 및 데이터 분석을 위한 오픈소스 도구 모음입니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elasticsearch: 검색 및 분석을 위한 강력한 검색 엔진&lt;/li&gt;
&lt;li&gt;Logstash: 로그 및 데이터 수집·가공 도구&lt;/li&gt;
&lt;li&gt;Kibana: 데이터를 시각화하는 대시보드 도구&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;주로 서버 로그, 애플리케이션 로그를 수집하고 검색·분석하는 데 사용됩니다. 최근에는 Beats(경량 데이터 수집기)를 포함하여 ELK → Elastic Stack으로 확장되었습니다.&lt;/p&gt;
&lt;h3&gt;주요 기능&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;트랜잭션 추적&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;애플리케이션의 특정 요청(예: API 호출)이 시작부터 끝까지 어떻게 실행되는지 추적&lt;/li&gt;
&lt;li&gt;각 요청이 얼마나 걸리는지, 어느 부분에서 병목이 발생하는지 확인 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;분산 추적 (Distributed Tracing)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;여러 서비스 간의 호출을 추적하여 마이크로서비스 아키텍처에서 요청이 어떻게 전달되는지 분석 가능&lt;/li&gt;
&lt;li&gt;OpenTelemetry 및 Jaeger와 유사한 기능 제공&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;에러 및 예외 감지&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;애플리케이션에서 발생하는 오류(예: 500 에러, 데이터베이스 연결 오류)를 자동으로 수집 및 분석&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;메트릭 수집&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPU, 메모리 사용량, 요청 수, 응답 시간 등의 메트릭을 자동으로 수집하여 시각화&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;로그 통합&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elastic Stack의 Elasticsearch 및 Kibana와 연동하여 로그를 함께 분석 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;구조&lt;/h3&gt;
&lt;p&gt;Elastic APM은 보통 아래와 같은 구성으로 동작합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;APM Agent (애플리케이션 내부에서 실행)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;애플리케이션 코드에 삽입되어 요청, 오류, 메트릭을 수집하는 역할&lt;/li&gt;
&lt;li&gt;언어별 지원: Python, Java, Node.js, Go, Ruby, .NET 등&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;APM Server (수집된 데이터를 Elasticsearch로 전달)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;APM Agent가 보낸 데이터를 받아서 Elasticsearch에 저장&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Elasticsearch (데이터 저장소)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;수집된 성능 데이터를 저장하고 검색하는 역할&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Kibana (시각화 도구)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;APM 데이터를 대시보드 형태로 분석하고 시각화하는 역할&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Elasticsearch 기반 → 빠르고 강력한 검색 및 분석 기능 제공&lt;/li&gt;
&lt;li&gt;마이크로서비스 친화적 → 분산 트랜잭션 분석 지원&lt;/li&gt;
&lt;li&gt;자동 인스트루먼테이션 → 코드 수정 없이도 기본적인 성능 데이터 수집 가능&lt;/li&gt;
&lt;li&gt;로그 + 메트릭 + APM 통합 → ELK Stack과 결합하여 강력한 모니터링 시스템 구축 가능&lt;/li&gt;
&lt;li&gt;오픈소스 → 기본적인 기능을 무료로 사용할 수 있음&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Elastic APM을 도입해야 하는 경우&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;마이크로서비스 구조에서 서비스 간의 요청을 추적하고 싶은 경우&lt;/li&gt;
&lt;li&gt;성능 저하 원인을 빠르게 찾고 싶은 경우&lt;/li&gt;
&lt;li&gt;애플리케이션의 에러와 예외를 자동으로 모니터링하고 싶은 경우&lt;/li&gt;
&lt;li&gt;ELK Stack을 이미 사용하고 있는 경우&lt;/li&gt;
&lt;li&gt;Elastic APM은 New Relic, Datadog, AWS X-Ray 같은 APM 도구와 비교할 수 있으며, ELK 스택과의 강력한 연동이 가장 큰 장점입니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Elastic APM을 설치만 하면 request/response 분석이 자동?!&lt;/h2&gt;
&lt;p&gt;기본적인 요청(Request), 응답(Response), 오류(Error), 메트릭(CPU, 메모리 등) 은 별도 설정 없이 자동으로 수집됩니다. Elastic APM 에이전트를 애플리케이션에 설치하고 실행하면 다음과 같은 데이터를 자동으로 캡처합니다.&lt;/p&gt;
&lt;p&gt;트랜잭션(Transaction)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP 요청 (URL, 응답 시간, 상태 코드)&lt;/li&gt;
&lt;li&gt;DB 쿼리 실행 시간&lt;/li&gt;
&lt;li&gt;외부 API 호출 시간&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;스팬(Span)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;트랜잭션 내부의 세부 작업 (예: SQL 쿼리, HTTP 요청 등)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;에러(Error)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unhandled Exception, HTTP 500 오류 등&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;메트릭(Metric)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPU, 메모리 사용량&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;성능 오버헤드를 최소화하기 위해 전체 Body를 저장하지 않으며, URL, 상태 코드, 응답 시간, 헤더 등의 정보만 캡처합니다. 다만 저장하려면 추가 설정을 통해 저장할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;분산 트레이싱(Distributed Tracing)&lt;/h2&gt;
&lt;p&gt;Elastic APM에서는 &quot;분산 트레이싱(Distributed Tracing)&quot; 이라는 기능을 사용하여 각 서비스가 독립적이더라도 같은 요청을 추적할 수 있습니다. 이 과정에서 Trace ID와 Transaction ID라는 개념이 사용됩니다.&lt;/p&gt;
&lt;h3&gt;요청 흐름 예시 (MSA 환경)&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;클라이언트 → &lt;code class=&quot;language-text&quot;&gt;API Gateway&lt;/code&gt;로 요청 보냄&lt;/li&gt;
&lt;li&gt;API Gateway → &lt;code class=&quot;language-text&quot;&gt;User Service&lt;/code&gt; 호출 (Trace ID 생성)&lt;/li&gt;
&lt;li&gt;User Service → &lt;code class=&quot;language-text&quot;&gt;Order Service&lt;/code&gt; 호출 (같은 Trace ID 사용)&lt;/li&gt;
&lt;li&gt;Order Service → &lt;code class=&quot;language-text&quot;&gt;Payment Service&lt;/code&gt; 호출 (같은 Trace ID 사용)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Trace ID가 동일한 요청이라면 여러 서비스에서 발생한 트랜잭션이 하나의 흐름으로 연결됩니다.&lt;/p&gt;
&lt;p&gt;각 마이크로서비스는 독립적으로 실행되지만, 각 요청이 &quot;같은 요청&quot;임을 Trace ID를 통해 추적하는 방식입니다.&lt;/p&gt;
&lt;h3&gt;분산 트레이싱이 동작하는 방식&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;최초 요청이 들어오면 APM 에이전트가 &lt;code class=&quot;language-text&quot;&gt;Trace ID&lt;/code&gt;를 생성&lt;/li&gt;
&lt;li&gt;서비스 간의 HTTP 요청 헤더에 &lt;code class=&quot;language-text&quot;&gt;Trace ID&lt;/code&gt;를 자동으로 추가&lt;/li&gt;
&lt;li&gt;다른 서비스에서도 이 &lt;code class=&quot;language-text&quot;&gt;Trace ID&lt;/code&gt;를 읽고 이어서 로깅&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;헤더 예시 (Trace Context)&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;makefile&quot;&gt;&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;&lt;span class=&quot;token target symbol&quot;&gt;elastic-apm-traceparent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;각 MSA가 이 헤더를 참조하여 &quot;같은 요청&quot;임을 식별합니다. OpenTelemetry 및 W3C Trace Context 표준을 지원하기 때문에, 다른 APM 툴과도 연동할 수 있습니다. Elastic APM을 사용하면, 마이크로서비스 간 각 요청이 어떻게 전달되었는지를 Kibana에서 시각적으로 분석할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Trace ID 발행 방식&lt;/h3&gt;
&lt;p&gt;APM 에이전트가 요청을 처음 만나면, Trace ID를 생성하여 HTTP 헤더에 포함합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;요청이 처음 들어오면 (Trace ID가 없음)&lt;/p&gt;
&lt;p&gt;→ APM 에이전트가 새로운 Trace ID를 생성&lt;/p&gt;
&lt;p&gt;→ HTTP 헤더(&lt;code class=&quot;language-text&quot;&gt;elastic-apm-traceparent&lt;/code&gt;)에 추가&lt;/p&gt;
&lt;p&gt;→ APM 로그를 저장할 때 Trace ID를 키값으로 저장&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;이미 Trace ID가 존재하는 경우 (다른 서비스에서 발행됨)&lt;/p&gt;
&lt;p&gt;→ 기존 요청 헤더에서 &lt;code class=&quot;language-text&quot;&gt;Trace ID&lt;/code&gt;를 가져와 그대로 사용&lt;/p&gt;
&lt;p&gt;→ 같은 Trace ID를 기반으로 새로운 트랜잭션(Transaction)을 생성&lt;/p&gt;
&lt;p&gt;→ APM 로그 저장 시 기존 Trace ID를 유지&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;APM이 적용된 서비스는 Trace ID가 없는 요청을 만나면 자동으로 생성하고, 이미 있으면 그대로 유지하면서 로깅합니다.&lt;/p&gt;
&lt;h3&gt;로그 저장 및 추적&lt;/h3&gt;
&lt;p&gt;Elastic APM은 Trace ID를 기반으로 모든 서비스의 로그를 그룹화하여 저장합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Trace ID를 기준으로 각 요청의 흐름을 추적&lt;/li&gt;
&lt;li&gt;개별 서비스의 실행 시간을 트랜잭션(Transaction) 단위로 기록&lt;/li&gt;
&lt;li&gt;요청 내에서 실행된 특정 동작(DB 쿼리, HTTP 요청 등)은 스팬(Span)으로 기록&lt;/li&gt;
&lt;li&gt;모든 기록은 Elasticsearch에 저장되어 Kibana에서 Trace ID별로 시각화 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;📌 예제&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Trace ID&lt;/th&gt;
&lt;th&gt;서비스&lt;/th&gt;
&lt;th&gt;요청 URL&lt;/th&gt;
&lt;th&gt;응답 시간&lt;/th&gt;
&lt;th&gt;상태 코드&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;abc123&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;API Gateway&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;/user/profile&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;120ms&lt;/td&gt;
&lt;td&gt;200&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;abc123&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;User Service&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;/get-user&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;80ms&lt;/td&gt;
&lt;td&gt;200&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;abc123&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Order Service&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;/get-orders&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;150ms&lt;/td&gt;
&lt;td&gt;200&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;abc123&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Payment Service&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;/payment-status&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;250ms&lt;/td&gt;
&lt;td&gt;500&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;이런 식으로 하나의 요청이 어떤 서비스들을 거쳤고, 어디에서 병목이 발생했는지 확인 가능합니다.&lt;/p&gt;
&lt;p&gt;따라서 Trace ID를 기반으로 로그를 그룹화하려면 모든 요청이 지나는 마이크로서비스(MSA)에 APM 에이전트를 설치하는 것이 중요합니다. 만약 특정 서비스에 APM이 설치되지 않았다면, Kibana에서는 특정 서비스를 거친 요청이 누락되거나 정확한 실행 시간을 알 수 없습니다.&lt;/p&gt;
&lt;h2&gt;Kibana&lt;/h2&gt;
&lt;p&gt;Elastic APM + Kibana를 활용하면 Trace ID별 요청 흐름을 시각적으로 분석할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;트랜잭션 별 요청 흐름을 한눈에 확인&lt;/li&gt;
&lt;li&gt;서비스 간 실행 시간 비교 (병목 지점 분석)&lt;/li&gt;
&lt;li&gt;에러가 발생한 서비스, 실행 시간 초과 등을 쉽게 탐색&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kibana의 APM UI에서는 각 서비스에서 실행된 트랜잭션과 관련된 스팬을 트리 형태로 볼 수 있어 트랜잭션이 어느 서비스에서 가장 오래 걸리는지 확인 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;Trace ID: abc123
├── API Gateway (120ms)
│   ├── User Service (80ms)
│   ├── Order Service (150ms)
│   ├── Payment Service (250ms) → ⛔ 500 에러 발생&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[우리 팀에 맞는 API Gateway 선택하기]]></title><description><![CDATA[서론 현재 회사에서 MSA 형태의 백엔드 서비스를 운용중입니다. 다만 지금은 프론트에서 API Gateway…]]></description><link>https://sharknia.github.io/우리-팀에-맞는-API-Gateway-선택하기/</link><guid isPermaLink="false">https://sharknia.github.io/우리-팀에-맞는-API-Gateway-선택하기/</guid><pubDate>Wed, 22 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/029e25f51d632b2f65d94847aa8ae648/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClUlEQVR42g3PWU/aAAAA4P6RPex9M8vmFp2bGV4oMkCUQlWOcrW0lKNAkVJKOcqhXGJR8UBQPMAD3TBsMXFvEqfJNpe4vzPfv5cPeP/quUTcr9JIhycG52FwSqtS22CYxIyUC2EXLCHKFCD1LhRC9DpMPz2nGBYPqJQj8vG+Dz3PAJGoF7ZpEcqpffKxABkNBiOBRGWdKZfSB9WzH53loz1fIePLpJhCmkqwMGFW61WKmfGhjy+BScWYfFapddqsNEUXsziJOM1g8bBSv+r8evzz9+Hu4d+DcHbMreWpTIKMh2ASz5bSuTwnnvwETGtnqChdax0F1lZxyk2HfdntfPHyC82HWBIOEmovCrlp9/LpYTzLW3GTKxVnF8N02CMDpYAEUmJBKlDMk8UVWNYfTzLlq29b7fPUfs3Js/4k40lH+I1S7Xs7luKMk714NOSL0SGeAWEIkGnVJr/Hm1kkEjHCoSu3DoVGHTeodi9PG/c3J/fdzuPvEEOGIgubX5sEMY+Eg6mdTaG2gfkIQE860Chnwq0M48nvrJbaF3wpi4ED2Waj+bN7cndTvr72+qxODMo1doWq4MBNtgjrjHF6uxkw0guw32MY63m6ZSpCrnkQ59mskKjedrfOjoXK5t5td73disTZfKMeKy6h0jdms9rDhy0OE6DBrXJIrhp54Y9Q/PZ6OJswS97mVlL7nWYkYENVoq3zg8K2YJa8o8L+ZH2PdMzpzaDeiUIwCOhQg8WNaewIEgqyK8uWgA9RvGaEQrJ1EeDcTtNE4viUq+44tCIDbmRLgofnvGGfxjg7pZEDg0N9owqxFFLKdWoVAs+RdhCF7TznyqSwGAtTLk9+yZGKQwQ6S1jVmEmhAz+rZaPSIdFw339wgDc2zs6lBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/029e25f51d632b2f65d94847aa8ae648/ca1dc/image1.png&apos; srcset=&apos;/static/029e25f51d632b2f65d94847aa8ae648/e7570/image1.png 170w,
/static/029e25f51d632b2f65d94847aa8ae648/f46e7/image1.png 340w,
/static/029e25f51d632b2f65d94847aa8ae648/ca1dc/image1.png 680w,
/static/029e25f51d632b2f65d94847aa8ae648/02d09/image1.png 1020w,
/static/029e25f51d632b2f65d94847aa8ae648/9d567/image1.png 1360w,
/static/029e25f51d632b2f65d94847aa8ae648/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;현재 회사에서 MSA 형태의 백엔드 서비스를 운용중입니다. 다만 지금은 프론트에서 API Gateway 없이 각 마이크로서비스를 직접 호출하고 있습니다. &lt;/p&gt;
&lt;p&gt;엔드포인트 통합 작업을 위해 인프라를 고민중입니다. 유지보수가 편해야 하며, 작업공수가 가장 적게 들어가는 방법을 선택하려고 합니다. &lt;/p&gt;
&lt;p&gt;또한 비용의 추가는 가능한 한 줄이려고 합니다. &lt;/p&gt;
&lt;h2&gt;AWS API Gateway&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;AWS API Gateway는 RESTful API, WebSocket API 및 HTTP API를 생성, 배포 및 관리할 수 있도록 지원하는 완전 관리형 서비스입니다.&lt;/p&gt;
&lt;h4&gt;API 라우팅 및 관리&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;클라이언트 요청을 AWS Lambda, EC2, ECS, EKS, DynamoDB, 다른 API 등으로 라우팅&lt;/li&gt;
&lt;li&gt;요청 검증, 요청 변환, 응답 변환 등의 기능 제공.&lt;/li&gt;
&lt;li&gt;REST API, HTTP API, WebSocket API 지원.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;보안 및 인증&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;AWS IAM, Cognito, Lambda Authorizer를 통한 인증 및 권한 관리 가능.&lt;/li&gt;
&lt;li&gt;JWT, OAuth 2.0 지원.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;트래픽 관리 및 스케일링&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;자동 스케일링 지원 (트래픽 증가 시 자동 확장).&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;로깅 및 모니터링&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;AWS CloudWatch, AWS X-Ray, OpenTelemetry 등을 활용한 API 성능 모니터링 가능.&lt;/li&gt;
&lt;li&gt;API 호출량, 응답 시간, 오류율 분석 가능.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;비용&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/ko/api-gateway/pricing/&quot;&gt;https://aws.amazon.com/ko/api-gateway/pricing/&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;비용 비교 (아시아 태평양 리전 기준)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;REST API&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;백만 건당 $3.50&lt;/li&gt;
&lt;li&gt;캐싱(0.5GB 기준) 사용 시 월 $14.40 추가 비용 발생&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP API&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;백만 건당 $1.23 (REST API 대비 65% 저렴)&lt;/li&gt;
&lt;li&gt;캐싱 미지원 (CloudFront 활용 필요)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;REST API와 HTTP API&lt;/h4&gt;
&lt;p&gt;HTTP API는 저렴하지만 (백만 건당 $1) 캐싱 기능을 지원하지 않고 VPC 연결이 불가능합니다. 또 JWT 기반 인증이 가능하지만 Cognito, Lambda Authorizer를 활용한 고급 인증기능은 불가능합니다. &lt;/p&gt;
&lt;p&gt;VPC 연결이 불가능하다는 점이 치명적으로, 보안을 위해 이상적인 아키텍쳐는 AWS API Gateway만 Public으로 유지한 채 다른 마이크로 서비스는 private 으로 설정하는 것인데, 이렇게 아키텍쳐를 꾸밀 경우 AWS PrivateLink 또는 VPC 링크를 지원하지 않는 HTTP API로는 대응이 불가능합니다. &lt;/p&gt;
&lt;p&gt;REST API는 VPC 링크(VPC Link)를 지원하므로, Private 네트워크 내의 ECS/EKS/EC2와 연결할 수 있습니다.&lt;/p&gt;
&lt;p&gt;그럼에도 현재 아키텍쳐를 변경할 계획이 없어 Private 네트워크 접근이 필요 없거나, 인증 서버를 따로 구현해 단순히 API Gateway에서는 JWT 인증만 필요한 경우에는 훨씬 저렴한 HTTP API를 이용하는 것도 좋은 선택이 될 수 있습니다. &lt;/p&gt;
&lt;p&gt;다만 HTTP API에서 REST API로 변환하는 것은 자동 변환 기능이 없어 번거로운 작업이 될 수 있습니다. &lt;/p&gt;
&lt;h4&gt;REST API vs HTTP API 선택 기준 정리&lt;/h4&gt;
&lt;p&gt;✅ REST API를 선택해야 하는 경우&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Private 네트워크(VPC)에 배포된 ECS/EKS/EC2와 연결해야 한다면&lt;/li&gt;
&lt;li&gt;Cognito, Lambda Authorizer 등 고급 인증 기능이 필요하다면&lt;/li&gt;
&lt;li&gt;API Gateway의 캐싱 기능을 사용해야 한다면&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;✅ HTTP API를 선택할 수 있는 경우&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;기존 아키텍처를 변경할 계획이 없고, Private 네트워크 접근이 필요 없다면&lt;/li&gt;
&lt;li&gt;JWT 기반 인증만 필요하고, Cognito 등 추가 인증이 필요 없다면&lt;/li&gt;
&lt;li&gt;비용을 최대한 절감해야 한다면 (REST API 대비 65% 저렴)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;❗ 주의: HTTP API에서 REST API로 변경하는 자동 변환 기능이 없으므로, 추후 변경이 필요할 경우 번거로운 작업이 될 수 있음.&lt;/p&gt;
&lt;h3&gt;Response 응답 꼴의 가공&lt;/h3&gt;
&lt;p&gt;REST API에서 제공하는 Mapping Templates 기능을 사용하지 않으면 백엔드에서 내보내는 응답 꼴 그대로 리턴합니다. &lt;/p&gt;
&lt;p&gt;✔ HTTP API 사용 시 → 추가 설정 없이 기존 요청/응답 그대로 전달됨
✔ REST API 사용 시 → Mapping Templates 사용 금지
✔ API Gateway 오류 응답을 기존 백엔드 응답과 동일하게 설정&lt;/p&gt;
&lt;p&gt;이 조건을 만족하면 프론트에서 엔드포인트만 바꾸면 문제없이 작동합니다. &lt;/p&gt;
&lt;h4&gt;Mapping Templates&lt;/h4&gt;
&lt;p&gt;Mapping Templates은 API Gateway에서 요청과 응답을 변환하는 기능으로, REST API에서만 지원하며, HTTP API에서는 사용할 수 없습니다. 기존 API의 응답 구조를 변경하지 않고 통일된 형식으로 응답을 제공할 수 있는 고급 기능으로, 현재 저희 상황에서는 오히려 필요하지 않은 기능입니다. &lt;/p&gt;
&lt;h3&gt;Swagger&lt;/h3&gt;
&lt;p&gt;API Gateway의 OpenAPI Export 기능을 사용하면 Swagger 적용이 가능합니다. API Gateway에서 OpenAPI 3.0 형식으로 API 명세를 내보낼 수 있으며, 이를 Swagger UI에서 그대로 활용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;AWS S3 + CloudFront를 이용하여 Swagger UI를 정적 웹사이트로 배포할 수 있습니다. API Gateway 수정 이벤트를 감지해 CI/CD 파이프라인을 활용하면 API 변경 시 자동으로 Swagger 문서를 업데이트할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;로깅&lt;/h3&gt;
&lt;p&gt;Elastic APM 적용은 쉽지 않습니다. Elastic APM 에이전트를 API Gateway 자체에 직접 설치하는 것은 불가능하므로, 만약 적용을 하려면 Lambda, OpenTelemetry, X-Amzn-Trace-Id 등을 활용해 우회적으로 API Gateway 트레이싱이 가능하긴 합니다. &lt;/p&gt;
&lt;p&gt;다만 API Gateway는 기본적으로 요청을 Lambda, ECS, EC2 등으로 라우팅하는 역할만 하며, 애플리케이션 로직을 처리하지 않고 성능 병목이나 오류는 보통 API Gateway 이후의 서비스에서 발생하기 때문에 APM을 적용할 필요성이 낮습니다.&lt;/p&gt;
&lt;p&gt;그럼에도 API Gateway의 로그는 활용성이 높을 수 있지만 CloudWatch를 활용하면 API Gateway 호출량 및 응답 시간 분석이 가능하기 때문에 결국 API Gateway에 직접 APM을 적용할 필요는 거의 없다고 생각됩니다. &lt;/p&gt;
&lt;h3&gt;구현 및 배포&lt;/h3&gt;
&lt;p&gt;terraform 또는 AWS CloudFormation을 사용하면 API Gateway 설정을 코드로 정의 가능하고, YAML 파일을 수정할 때에 CI/CD를 통해 자동으로 배포 가능합니다. &lt;/p&gt;
&lt;p&gt;추후 api가 수정된다면 yaml 파일만 수정해서 푸시하면 자동 배포 되도록 CI/CD 구성이 가능합니다. &lt;/p&gt;
&lt;h4&gt;예시 yaml&lt;/h4&gt;
&lt;details&gt;
&lt;summary&gt;예제&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;openapi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;3.0.1&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;API Gateway&quot;&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;/api/users/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Create a new user&quot;&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;requestBody&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;application/json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
              &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; object
              &lt;span class=&quot;token key atrule&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string
                &lt;span class=&quot;token key atrule&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string
      &lt;span class=&quot;token key atrule&quot;&gt;responses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;&quot;200&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;User created successfully&quot;&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;application/json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
              &lt;span class=&quot;token key atrule&quot;&gt;schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; object
                &lt;span class=&quot;token key atrule&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; boolean
                  &lt;span class=&quot;token key atrule&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string
      &lt;span class=&quot;token key atrule&quot;&gt;x-amazon-apigateway-integration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http_proxy&quot;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;httpMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://api.example.com/users/&quot;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;passthroughBehavior&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;when_no_match&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h3&gt;AWS CDK(파이썬)를 사용한  API Gateway 관리&lt;/h3&gt;
&lt;p&gt;AWS CDK는 인프라(AWS 리소스)를 코드로 정의하고 배포할 수 있는 Infrastructure as Code(IaC) 도구입니다. AWS 리소스를 YAML/JSON 같은 설정 파일이 아니라, Python, TypeScript, Java 등 프로그래밍 언어로 정의 가능하게 해줍니다. AWS CloudFormation을 기반으로 동작하며, 코드만 작성하면 자동으로 AWS 리소스를 생성하고 관리가 가능합니다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;REST API 생성 예시 코드 (요청 모델, 응답 모델 포함)&lt;/summary&gt;
&lt;p&gt;이 예시 코드는 문서화를 위해 요청/응답 모델을 완벽하게 포함한 것입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aws_cdk &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; core
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aws_cdk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;aws_apigateway &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; apigateway

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiGatewayStack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scope&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Construct&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__init__&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scope&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# API Gateway 생성&lt;/span&gt;
        api &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RestApi&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MyApi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            rest_api_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;My API&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            description&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;API Gateway with Request &amp;amp; Response Models&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 요청 모델 (Request Model)&lt;/span&gt;
        user_request_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;UserRequestModel&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            content_type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            schema&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                schema&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaVersion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DRAFT4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UserRequest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OBJECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                properties&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STRING&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STRING&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                required&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 응답 모델 (Response Model)&lt;/span&gt;
        user_response_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;UserResponseModel&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            content_type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            schema&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                schema&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaVersion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DRAFT4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UserResponse&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OBJECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                properties&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token string&quot;&gt;&quot;success&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BOOLEAN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token string&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JsonSchemaType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STRING&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 요청 검증기 (Request Validator)&lt;/span&gt;
        request_validator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_request_validator&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;RequestValidator&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            validate_request_body&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            validate_request_parameters&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# Users 리소스 생성&lt;/span&gt;
        users_resource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;users&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# POST 요청 (Create User) + 요청/응답 스키마 추가&lt;/span&gt;
        users_resource&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_method&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Integration&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegrationType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_PROXY&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                integration_http_method&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                uri&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://api.example.com/users/&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            request_validator&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request_validator&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 요청 검증기 추가&lt;/span&gt;
            request_models&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; user_request_model&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 요청 모델 추가&lt;/span&gt;
            method_responses&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MethodResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    status_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;200&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    response_models&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; user_response_model&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# API Gateway 엔드포인트 출력&lt;/span&gt;
        core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CfnOutput&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ApiEndpoint&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;details&gt;
&lt;summary&gt;REST API 생성 예시 코드 (모델 정의 제외하고 단순화)&lt;/summary&gt;
&lt;p&gt;요청 모델, 응답 모델을 문서화를 위해 명확히 정의하면 유지보수 부담이 커질 수 있습니다. 아래처럼 정의하면 문서화를 조금 포기하고 대신 효율적인 유지보수가 가능합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aws_cdk &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; core
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aws_cdk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;aws_apigateway &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; apigateway

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiGatewayStack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scope&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Construct&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__init__&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scope&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# API Gateway 생성 (간단한 설정)&lt;/span&gt;
        api &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RestApi&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MyApi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            rest_api_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Simple API&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            description&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Minimal API Gateway Configuration&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# ======================&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Users API&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# ======================&lt;/span&gt;
        users_resource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;users&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# /api/users/ - POST (Create User)&lt;/span&gt;
        users_resource&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_method&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Integration&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegrationType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_PROXY&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                integration_http_method&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                uri&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://api.example.com/users/&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# ======================&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Orders API &lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# ======================&lt;/span&gt;
        orders_resource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;api&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_resource&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;orders&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# /api/orders/ - POST (Create Order)&lt;/span&gt;
        orders_resource&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_method&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Integration&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;apigateway&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegrationType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_PROXY&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                integration_http_method&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                uri&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://api.example.com/orders/&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# API Gateway 엔드포인트 출력&lt;/span&gt;
        core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CfnOutput&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ApiEndpoint&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;외부에 제공해야 하는 api의 경우라면 요청 모델, 응답 모델까지 명확하게 정의해야 합니다. 그런 경우가 아니라면 선택의 여지가 있습니다. &lt;/p&gt;
&lt;p&gt;현재 예시 코드는 REST API 배포를 위한 것으로 HTTP API의 경우에는 코드가 달라집니다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;HTTP API 생성 예시 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aws_cdk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;aws_apigatewayv2 &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; apigatewayv2
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aws_cdk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;aws_apigatewayv2_integrations &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; integrations

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiGatewayStack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scope&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Construct&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__init__&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scope&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# HTTP API 생성&lt;/span&gt;
        api &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; apigatewayv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HttpApi&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MyHttpApi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; api_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Simple HTTP API&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# Users 엔드포인트 추가&lt;/span&gt;
        api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_routes&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/api/users&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            methods&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;apigatewayv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HttpMethod&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;POST&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            integration&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;integrations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HttpUrlIntegration&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;UsersService&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                integration_url&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://api.example.com/users/&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h4&gt;AWS CDK의 배포&lt;/h4&gt;
&lt;p&gt;AWS CLI를 활용해 수동으로 배포할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;cdk deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 사용해 배포합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;cdk synth&lt;/code&gt; 명령어를 사용해 CloudFormation 템플릿을 미리 확인할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;예상되는 어려움&lt;/h4&gt;
&lt;p&gt;위의 예시 코드를 래핑을 해서 최대한 유지보수가 쉽게 코드는 작성하겠지만, 결국 각 마이크로 서비스를 수정한 이후에 이 프로젝트를 수정하는 별도의 작업을 추가로 해줘야 합니다. &lt;/p&gt;
&lt;h3&gt;Django DRF + &lt;code class=&quot;language-text&quot;&gt;drf-spectacular&lt;/code&gt; + CI/CD를 활용한 API Gateway 관리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;drf-spectacular&lt;/code&gt;는 Django DRF에서 OpenAPI 3.0 문서를 자동 생성해주는 라이브러리입니다. Swagger UI, Redoc, Postman 등에서 활용할 수 있는 API 문서를 제공하는데, 이 OpenAPI YAML 파일을 AWS API Gateway가 OpenAPI Import 기능을 지원하기 때문에 활용할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;S3를 활용한 OpenAPI 문서의 관리&lt;/h4&gt;
&lt;p&gt;각 마이크로서비스에서 &lt;code class=&quot;language-text&quot;&gt;drf-spectacular&lt;/code&gt; 를 사용해 YAML 파일을 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;python service1/manage.py spectacular &lt;span class=&quot;token parameter variable&quot;&gt;--file&lt;/span&gt; service1_openapi.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 service1에서 api의 수정/삭제 등등이 일어나면 service1_openapi.yaml을 생성합니다. &lt;/p&gt;
&lt;p&gt;S3 버킷(&lt;code class=&quot;language-text&quot;&gt;my-api-docs&lt;/code&gt;)에 각 서비스의 OpenAPI 문서를 저장합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;aws s3 &lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; service1_openapi.yaml s3://my-api-docs/service1_openapi.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;각 마이크로서비스의 문서를 병합해 최종 문서를 완성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;openapi-merge-cli &lt;span class=&quot;token parameter variable&quot;&gt;-i&lt;/span&gt; s3://my-api-docs/service1_openapi.yaml s3://my-api-docs/service2_openapi.yaml &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; merged_openapi.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;병합된 문서로 API Gateway를 업데이트 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;aws apigateway import-rest-api &lt;span class=&quot;token parameter variable&quot;&gt;--body&lt;/span&gt; file://merged_openapi.yaml --rest-api-id &lt;span class=&quot;token variable&quot;&gt;${{ secrets.API_GATEWAY_ID }&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;예상되는 어려움&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;문서 병합의 까다로움&lt;/p&gt;
&lt;p&gt;엔드포인트가 같을 경우 병합에서 반드시 문제가 발생하여 특별히 신경써야 합니다. 또 각 API의 인증 방법이 다를 경우 해당 방법은 적용이 불가능하며, 이 외에도 응답 스키마, 공통 컴포넌트 등에서도 병합시 문제가 발생할 가능성이 있습니다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;각 서비스에서 추가 작업이 필요할 수 있음&lt;/p&gt;
&lt;p&gt;혹시 swagger 생성을 위한 밑작업이 잘 안되어있다면 해당 작업을 위해 추가 작업이 필요할 수 있습니다. 또 엔드포인트가 현재 것을 유지하면서 추가 또는 수정 되는 것이 아니라 AWS API Gateway로 결국 엔드포인트가 변경이 되는 것으로 이로 인한 추가 공수가 다시 발생할 수 있습니다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;위의 문제로 인해 실제 작업시에는 AWS CDK를 사용하는 것보다 예상하지 못한 문제가 발생할 가능성이 커보입니다. &lt;/p&gt;
&lt;h2&gt;AWS API Gateway 구현 및 배포 결론&lt;/h2&gt;
&lt;p&gt;마이크로 서비스 수정 후 추가적으로 코드 작업이 필요하다는 단점이 있지만, 그럼에도 불구하고 &lt;code class=&quot;language-text&quot;&gt;drf-spectacular&lt;/code&gt;을 활용한 OpenAPI 병합 방식은 가능하지만, 유지보수성과 API 변경 관리를 고려할 때 AWS CDK가 더 적합한 선택이라고 생각합니다. &lt;/p&gt;
&lt;h2&gt;직접 구현과의 비교&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;비교 항목&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;직접 구현 (Django + DRF)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AWS API Gateway&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;트래픽 처리&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;uWSGI/Gunicorn 조정 필요&lt;/td&gt;
&lt;td&gt;자동 확장(Auto Scaling)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;성능 최적화&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Keep-Alive, Connection Pooling 직접 설정 필요&lt;/td&gt;
&lt;td&gt;AWS에서 자동 최적화&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;로깅 &amp;#x26; 모니터링&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Elastic APM 활용&lt;/td&gt;
&lt;td&gt;CloudWatch, X-Ray&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Kong API Gateway과의 비교&lt;/h2&gt;
&lt;h3&gt;Kong API Gateway 소개&lt;/h3&gt;
&lt;p&gt;Kong은 오픈소스로 제공되는 고성능 API Gateway 및 마이크로서비스 관리 플랫폼입니다. 분산된 API 트래픽을 제어하고, 로드 밸런싱, 인증, 모니터링, 캐싱 등의 기능을 제공합니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Kong을 사용하면 좋은 경우&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;온프레미스 환경에서 API Gateway가 필요할 때&lt;/li&gt;
&lt;li&gt;AWS 이외의 멀티 클라우드 환경을 고려할 때&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[GraphQL과 Django]]></title><description><![CDATA[GraphQL의 특징 클라이언트 주도형 데이터 요청 REST API는 백엔드가 정해준 엔드포인트를 그대로 사용해야 하지만, GraphQL은 클라이언트가 원하는 데이터만 요청할 수 있습니다.  REST API…]]></description><link>https://sharknia.github.io/GraphQL과-Django/</link><guid isPermaLink="false">https://sharknia.github.io/GraphQL과-Django/</guid><pubDate>Mon, 20 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/cd12a1c17378c61251b7eea7205e379a/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ADcMETgcIzcoLzcxOTg8Qz1LT1FnaG+Hg4Sak4idkoqfk4Sbk3GHg0xfYD9LTzo+QzkzOTkoLzYcJDcOFAA5EBQ+KjA4LDQ1Mzs3PkVDU1hKZm94l5i3xrV6lJJykJG3x7aJnJRKYWtATFFBSk5BQEU2KDA3HyY2ERcANxIYPTE3SEFEOjtCOEVMXW9ycY2Sgqeqrci/l7Ovory2ob2zb4qKZYCGP1JbU2NkS01QNCcvNyEoNRMYADkZIEg6QEdMU0NSWUleZnCEg4yhm36kpluOnpO3uK7V0lCElmF8gXmSkUhjbmF5fU1WWjowNzYeJjYSGQA8HiNKQERSX2lYb3Rof4NdeX56kZBaipcvdZN0rrxZobZRgJKquqyUp59wjpR3kJFZZ2pMT1Y9N0A2ExkAORwiRT1DUGJraImQbo+WcpWbkqedlrGsTJu0ZcHVO5+9hrW7Wnh9jZaJqbWlbomNVm53SFNcTUlQPSAmADggKUVLV1l0f22MkoeprHukqERndmeBhajT0a7s8qrf4HylqzBJXlRiZH2SjXaUm2GAjFBkcz85RTgZIABAMjpbb3lyjJB9j4uVraZQeYc6WW5khpF3oqmZxstrprU7X3JRZ3FJY3FjhI6Kq66Eo6dpgotWW2NCIyoAUkRGYmlsUGJtP1FeSlpiWG10WXF6jKWmaJGcX5KjVIGVOk5eV2BnR1BbPE9eU2dyaHyBdYKAgYeDWklKAFBGS15RUUZHUUtHTmJyeGmSnnSEhGN5gE92iF+WrXaltF93fEtRVWFdV2BpaU1faklYZk9FSmxzdWZtcAA9SFxHJCQ9JSxROz1lY2VLdIlcZGZBU1s7aoJnnrZxm6ScrJxzem5kaWBqamBMYGo/VGo7HSRBLjRmanDhkwzuelVbHwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/cd12a1c17378c61251b7eea7205e379a/ca1dc/image1.png&apos; srcset=&apos;/static/cd12a1c17378c61251b7eea7205e379a/e7570/image1.png 170w,
/static/cd12a1c17378c61251b7eea7205e379a/f46e7/image1.png 340w,
/static/cd12a1c17378c61251b7eea7205e379a/ca1dc/image1.png 680w,
/static/cd12a1c17378c61251b7eea7205e379a/02d09/image1.png 1020w,
/static/cd12a1c17378c61251b7eea7205e379a/9d567/image1.png 1360w,
/static/cd12a1c17378c61251b7eea7205e379a/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;GraphQL의 특징&lt;/h2&gt;
&lt;h3&gt;클라이언트 주도형 데이터 요청&lt;/h3&gt;
&lt;p&gt;REST API는 백엔드가 정해준 엔드포인트를 그대로 사용해야 하지만, GraphQL은 클라이언트가 원하는 데이터만 요청할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;REST API 요청 예시 (불필요한 데이터 포함)&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;GET /users/1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;alice@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;phone&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;123-456-7890&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;GraphQL 요청 예시 (원하는 데이터만 선택)&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;{
  user(id: 1) {
    name
    email
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;data&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;alice@example.com&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;REST API는 필요하지 않은 데이터까지 포함되지만, GraphQL은 원하는 필드만 반환합니다. &lt;/p&gt;
&lt;h3&gt;하나의 엔드포인트로 모든 요청 처리&lt;/h3&gt;
&lt;p&gt;REST API는 엔드포인트가 여러 개(GET /users, GET /users/1/posts 등) 필요하지만, GraphQL은 단 하나의 엔드포인트(/graphql)만 사용하여 모든 요청을 처리할 수 있습니다.&lt;/p&gt;
&lt;p&gt;GraphQL에서는 Mutation이 데이터 변경(Create, Update, Delete) 작업이지만, HTTP 요청 방식은 기본적으로 POST를 사용합니다. 왜냐하면 요청 본문(Body)에 쿼리를 포함해야 하기 때문입니다. &lt;/p&gt;
&lt;h3&gt;타입 시스템 &amp;#x26; 스키마 정의&lt;/h3&gt;
&lt;p&gt;GraphQL은 스키마 기반으로 동작하며, 데이터의 타입을 명확하게 정의합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;type User {
  id: ID!
  name: String!
  email: String!
  posts: [Post!]!
}
type Post {
  id: ID!
  title: String!
  content: String!
}
type Query {
  user(id: ID!): User
  posts: [Post]
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;정리&lt;/h3&gt;
&lt;p&gt;GraphQL은 원하는 데이터만 요청이 가능하고, 하나의 엔드포인트로 모든 요청을 처리하며 강력한 타입 시스템으로 별도의 문서화가 필요 없어 프론트엔드에 최적화되어 있습니다. &lt;/p&gt;
&lt;p&gt;다만 쿼리가 복잡해질 경우 성능 이슈가 발생할 수 있음에 유의해야 합니다. &lt;/p&gt;
&lt;h2&gt;Django의 GraphQL&lt;/h2&gt;
&lt;p&gt;Django에서 GraphQL을 사용하려면 보통 &lt;code class=&quot;language-text&quot;&gt;graphene-django&lt;/code&gt; 라이브러리를 활용합니다.&lt;/p&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 통해 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; graphene-django&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 Django 프로젝트의 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt;에 GraphQL를 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;django.contrib.admin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;django.contrib.auth&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;graphene_django&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# GraphQL 추가&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;myapp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

GRAPHENE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;SCHEMA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;myapp.schema.schema&quot;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# GraphQL 스키마 경로 지정&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;graphene.ObjectType&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Django에서 GraphQL을 사용할 때, &lt;code class=&quot;language-text&quot;&gt;graphene.ObjectType&lt;/code&gt;을 상속받아 &lt;strong&gt;GraphQL에서 응답 데이터의 구조를 정의&lt;/strong&gt;합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; graphene

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ID&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;GraphQL에서 &lt;code class=&quot;language-text&quot;&gt;UserType&lt;/code&gt;을 정의.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt;이 응답에 포함될 필드임을 지정.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;즉, GraphQL API에서 클라이언트가 어떤 데이터를 받을 수 있는지 정의하는 것입니다.&lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;DjangoObjectType&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Django 모델을 GraphQL 타입으로 변환할 때는 &lt;code class=&quot;language-text&quot;&gt;graphene_django.types.DjangoObjectType&lt;/code&gt;을 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;types &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoObjectType
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User  &lt;span class=&quot;token comment&quot;&gt;# Django 모델과 자동 매핑&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델과 자동으로 연결됨.&lt;/li&gt;
&lt;li&gt;Django 모델 필드를 자동으로 GraphQL 필드로 변환 (&lt;code class=&quot;language-text&quot;&gt;CharField → String&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;IntegerField → Int&lt;/code&gt;  등).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;GraphQL과 CSRF&lt;/h3&gt;
&lt;h4&gt;CSRF 보호란?&lt;/h4&gt;
&lt;p&gt;Django는 CSRF(Cross-Site Request Forgery) 공격 방지를 위해 POST 요청을 보호합니다. 하지만 GraphQL은 기본적으로 POST 요청을 사용하기 때문에 CSRF 보호 정책과 충돌할 수 있습니다. 따라서 &lt;code class=&quot;language-text&quot;&gt;csrf_exempt&lt;/code&gt;를 사용하면 Django의 CSRF 미들웨어가 해당 뷰를 검사하지 않도록 설정할 수 있습니다. &lt;/p&gt;
&lt;p&gt;GraphQL은 일반적으로 REST API처럼 클라이언트가 직접 요청을 보내는 방식입니다. 즉, 웹 브라우저에서 실행되는 폼(form) 기반 요청이 아니므로 CSRF 토큰을 사용할 필요가 없음.&lt;/p&gt;
&lt;h4&gt;보안 강화를 위한 대체 방법&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;csrf_exempt&lt;/code&gt; 대신 &lt;code class=&quot;language-text&quot;&gt;@csrf_protect&lt;/code&gt;를 사용하는 방법이 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;decorators&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;csrf &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; csrf_protect

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;graphql/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; csrf_protect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphQLView&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;as_view&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphiql&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# CSRF 보호 적용&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 CSRF 보호를 유지하면서도 GraphQL API를 안전하게 사용할 수 있습니다. &lt;/p&gt;
&lt;p&gt;또, JWT 또는 Token 기반 인증을 사용할 수 있습니다. &lt;/p&gt;
&lt;p&gt;GraphQL API는 보통 JWT(Json Web Token) 또는 OAuth 토큰을 사용하여 인증합니다. 이렇게 하면 CSRF 보호 없이도 API 요청을 안전하게 관리할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphql_jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;decorators &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; login_required
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; graphene

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@login_required&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;CSRF 공격은 &quot;브라우저가 자동으로 요청을 보내는 방식&quot;을 악용하는 공격입니다. 그러나 JWT 인증 방식은 CSRF 보호가 필요 없는 구조입니다. 즉, GraphQL + JWT 인증을 사용하면 &lt;code class=&quot;language-text&quot;&gt;csrf_exempt&lt;/code&gt; 없이도 보안 문제를 예방할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Query&lt;/h3&gt;
&lt;p&gt;GraphQL에서 데이터를 조회할 때는 &lt;code class=&quot;language-text&quot;&gt;Query&lt;/code&gt;를 사용합니다. Django에서는 다음과 같이 구현할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; graphene
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;types &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoObjectType
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Int&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

schema &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Schema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Mutation&lt;/h3&gt;
&lt;p&gt;GraphQL은 조회뿐만 아니라, 데이터를 추가/수정/삭제할 수도 있습니다. 이를 위해 Mutation을 사용합니다.&lt;/p&gt;
&lt;p&gt;요청을 이렇게 보낸다면, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;mutation {
  createUser(name: &quot;Alice&quot;, email: &quot;alice@example.com&quot;) {
    user {
      id
      name
      email
    }
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래와 같이 구현할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CreateUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mutation&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Arguments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; CreateUser&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Mutation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    create_user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CreateUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런식으로 &lt;code class=&quot;language-text&quot;&gt;Update&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Delete&lt;/code&gt;도 구현이 가능합니다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;resolve_&amp;lt;필드명&gt;&lt;/code&gt; 규칙&lt;/h3&gt;
&lt;p&gt;GraphQL에서 &lt;code class=&quot;language-text&quot;&gt;Query&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;Mutation&lt;/code&gt;을 처리할 때, &lt;code class=&quot;language-text&quot;&gt;graphene&lt;/code&gt;은 자동으로 해당 필드를 처리하는 &lt;code class=&quot;language-text&quot;&gt;resolve_&amp;lt;필드명&gt;&lt;/code&gt; 메서드를 찾습니다. 따라서 필드명이 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;라면 &lt;code class=&quot;language-text&quot;&gt;resolve_user()&lt;/code&gt;라는 메서드를 만들면 자동으로 연결됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; graphene
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; graphene_django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;types &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DjangoObjectType
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DjangoObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Int&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# GraphQL 필드 정의&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 필드명과 매칭된 resolver 함수&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

schema &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Schema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드에서 GraphQL의 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 필드를 요청하면 &lt;code class=&quot;language-text&quot;&gt;resolve_user()&lt;/code&gt;가 자동 실행됩니다. &lt;code class=&quot;language-text&quot;&gt;resolve_user(self, info, id)&lt;/code&gt;를 만들지 않으면, &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 필드의 데이터를 가져올 방법이 없기 때문에 오류가 발생합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;resolve_&lt;/code&gt;를 사용하지 않고, &lt;code class=&quot;language-text&quot;&gt;Field()&lt;/code&gt;에서 직접 &lt;code class=&quot;language-text&quot;&gt;resolver&lt;/code&gt;를 지정할 수도 있지만, 일반적으로는 &lt;code class=&quot;language-text&quot;&gt;resolve_&lt;/code&gt;를 사용하는 것이 가독성이 좋고 유지보수가 쉽습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Int&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; resolver&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;GraphQL의 성능 최적화 (N+1 문제 해결)&lt;/h3&gt;
&lt;p&gt;GraphQL은 기본적으로 &lt;a href=&quot;https://sharknia.github.io/N1-%EB%AC%B8%EC%A0%9C&quot;&gt;N+1 문제&lt;/a&gt;가 발생할 가능성이 큽니다. Django ORM에서는 &lt;code class=&quot;language-text&quot;&gt;select_related()&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;prefetch_related()&lt;/code&gt;를 활용해 최적화할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    users &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_users&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 각 user마다 profile을 조회하는 추가 쿼리 발생!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 작성하면 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt;를 조회할 때 각 &lt;code class=&quot;language-text&quot;&gt;profile&lt;/code&gt;을 개별 쿼리로 조회해 N+1 문제가 발생합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ObjectType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    users &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; graphene&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UserType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve_users&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;select_related&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# SQL JOIN 사용&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 한 번의 SQL 쿼리로 해결 가능합니다. ManyToMany 또는 1:N의 경우에는 &lt;code class=&quot;language-text&quot;&gt;prefetch_related()&lt;/code&gt;를 사용해 최적화 할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;예고편&lt;/h2&gt;
&lt;p&gt;다음에는 GraphQL의 캐싱 전략, batch queries, Persisted Queries와 함께 GraphQL의 강점 중 하나인 Subscription(실시간 데이터 스트리밍) 기능에 대해 알아보겠습니다. 또 django의 &lt;code class=&quot;language-text&quot;&gt;graphene-file-upload&lt;/code&gt;를 이용한 파일 업로드 방법이나 &lt;code class=&quot;language-text&quot;&gt;relay-style pagination&lt;/code&gt; 에 대해서도 알아보려고 합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[React Native Navigation과 Paper: 기본부터 사용하기]]></title><description><![CDATA[React Native Paper 소개 는 React Native로 앱을 개발할 때 Material Design 가이드를 준수하는 UI 컴포넌트 라이브러리입니다. Google의 Material Design 철학을 기반으로 한 다양한 UI…]]></description><link>https://sharknia.github.io/React-Native-Navigation과-Paper-기본부터-사용하기/</link><guid isPermaLink="false">https://sharknia.github.io/React-Native-Navigation과-Paper-기본부터-사용하기/</guid><pubDate>Mon, 13 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/61f25f74424606a4eb62a4d4be36c99c/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaklEQVR42h3OyW7TQACAYb8S74GEkBAHxJUiISEWwaEqFCWItjRVmzhtVmKnXhNPvI7HduyxsziLs3VJ2qQsB1AlKkTFAV6AwP3/pJ+gVFm0oB64Tifwo3b3ODqaH03mx8efpv2zSTQ/bZ1OvHHkDntWL9SafsWxGEMvyCDFcwSt1CoW1ALXCgO33wqGXak3ZpoDo90Zz6ew4eNBVI+6QRTCdhPgOvBc1oRFRU7zAlGSayJaYs9sN/Ag5J36W0ZdzXBau/vn96+f11fXPy7NsAPCAWeoomMDH7MIFmWZXOJ8TeaQqfgYtht2vxNEnfV0KZ4p9Kbj88Xs+9XXy28XCQ49KZoQIxXXq9jnkFVUFFIQiExNYRCqYQ+GLdn3rIbbGfSqTblo0sPZ+ezzx/MvF7Fs9e7ageTVRdwAfrDs/+MKkQUyYyLJrevtpmAh3jC4IHpRAs9zjNsfnSzm08VsnwdvcodbZfFlMi9hvMR5Rf2H9ysSrRuCbcvNJm/CpKDcO2jdJxsPcq3GYDSeTkYn4yTLflBlRq7G8yXR82loZkBtl+WJPV4sKCproqqHJc/Ly/rtZ+9vrry+9SjuNJrhsNcdRfFUtlgBrGkWkcs6XlHV06KUOOSIBMNngELpkLMdgPEhNFvD/tliurl/UFD0tWR+dTudKlMVBDcKNG3VKdNe9ntcZZNiiM0SkxJBTtaWM6zl8LbDatraxhbJME9z/I07j1debcUy5MPYO1qDlG7kVIOs1LbLfLxAE7FCeYcR05KcV3TKtAQXlyBKMEJehWRVJasKjewU0HYFQCE7q8I0UHfY6gbFrWepv4X5vt4oVdV4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/61f25f74424606a4eb62a4d4be36c99c/ca1dc/image1.png&apos; srcset=&apos;/static/61f25f74424606a4eb62a4d4be36c99c/e7570/image1.png 170w,
/static/61f25f74424606a4eb62a4d4be36c99c/f46e7/image1.png 340w,
/static/61f25f74424606a4eb62a4d4be36c99c/ca1dc/image1.png 680w,
/static/61f25f74424606a4eb62a4d4be36c99c/02d09/image1.png 1020w,
/static/61f25f74424606a4eb62a4d4be36c99c/9d567/image1.png 1360w,
/static/61f25f74424606a4eb62a4d4be36c99c/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;React Native Paper&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;react-native-paper&lt;/code&gt;는 React Native로 앱을 개발할 때 Material Design 가이드를 준수하는 UI 컴포넌트 라이브러리입니다. Google의 Material Design 철학을 기반으로 한 다양한 UI 요소를 제공합니다. React Native를 처음 사용하거나, 디자인을 크게 신경 쓰지 않고 표준적인 UI를 빠르게 구축하려는 경우에 적합합니다. &lt;/p&gt;
&lt;h3&gt;특징&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Material Design 준수&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Google Material Design의 스타일 가이드를 따르며, 디자인 일관성을 유지하기에 적합합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;사용하기 쉬운 컴포넌트&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;버튼, 카드, 텍스트 입력, 다이얼로그, 앱바 등 자주 사용하는 UI 컴포넌트를 제공합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;프리셋 스타일&lt;/strong&gt;과 &lt;strong&gt;테마&lt;/strong&gt;를 이용해 빠르게 개발할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;커스터마이징 가능&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;제공되는 컴포넌트를 프로젝트에 맞게 커스터마이징할 수 있으며, 테마를 적용하여 색상, 글꼴 등을 변경 가능합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;반응형 디자인 지원&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;다양한 화면 크기 및 플랫폼(iOS, Android)에서 잘 동작하는 반응형 디자인을 지원합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;React Native 친화적&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;React Native의 철학에 맞춰 제작되었으며, &lt;code class=&quot;language-text&quot;&gt;react-native-vector-icons&lt;/code&gt;와 잘 통합됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;주요 컴포넌트&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Button: 기본 버튼, 아이콘 버튼 등 다양한 스타일의 버튼 제공.&lt;/li&gt;
&lt;li&gt;Card: Material Design 스타일의 카드 컴포넌트.&lt;/li&gt;
&lt;li&gt;AppBar: 상단바(AppBar) 컴포넌트.&lt;/li&gt;
&lt;li&gt;TextInput: 다양한 텍스트 입력 UI.&lt;/li&gt;
&lt;li&gt;FAB: 플로팅 액션 버튼(Floating Action Button).&lt;/li&gt;
&lt;li&gt;Dialog: 알림 대화상자.&lt;/li&gt;
&lt;li&gt;Snackbar: 사용자에게 간단한 알림을 제공하는 스낵바.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; nativewind react-native-paper react-native-vector-icons&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Button &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-paper&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button icon&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;camera&quot;&lt;/span&gt; mode&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;contained&quot;&lt;/span&gt; onPress&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Pressed&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        Press me
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; MyComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위처럼 버튼 컴포넌트를 쉽게 사용할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;아이콘이 제대로 로드되지 않는 문제&lt;/h3&gt;
&lt;p&gt;react-native-vector-icons를 사용해 아이콘을 쓰고 싶은데, 아이콘 이름을 제대로 입력해도 아이콘이 제대로 출력되지 않는 문제가 발생했습니다. 이 문제는 다음의 방법을 사용해 해결할 수 있습니다. &lt;/p&gt;
&lt;p&gt;react-native-vector-icons.d.ts 파일을 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-vector-icons/MaterialCommunityIcons&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; IconProps &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-vector-icons/Icon&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MaterialCommunityIcons&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IconProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;App.tsx의 상단부에 선언합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Icon &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-vector-icons/MaterialCommunityIcons&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Icon&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadFont&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래와 같이 사용합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; StyleSheet &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Button &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-paper&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Icon &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-vector-icons/MaterialCommunityIcons&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SocialButtonProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    text&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    icon&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    color&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;onPress&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SocialButton&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SocialButtonProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; text&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; icon&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onPress &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button
            mode&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;contained&quot;&lt;/span&gt;
            onPress&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onPress&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; backgroundColor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; color &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            labelStyle&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;label&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            icon&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Icon name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;icon&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; color&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;white&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://pictogrammers.com/library/mdi/&quot;&gt;이 페이지&lt;/a&gt;에서 아이콘을 미리 볼 수 있습니다. &lt;/p&gt;
&lt;h2&gt;React Navigation&lt;/h2&gt;
&lt;p&gt;상단 헤더는 &lt;code class=&quot;language-text&quot;&gt;react-native-paper&lt;/code&gt; 를 사용해 간단하게 구현이 가능하지만 하단탭은 React Navigation 라이브러리를 설치하고 사용해야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;npm install &lt;span class=&quot;token decorator&quot;&gt;&lt;span class=&quot;token at operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;react&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;navigation&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;native &lt;span class=&quot;token decorator&quot;&gt;&lt;span class=&quot;token at operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;react&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;navigation&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;bottom&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;tabs react&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;native&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;screens react&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;native&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;safe&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;area&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;context react&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;native&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;gesture&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;handler react&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;native&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;reanimated react&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;native&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;icons&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;AppNavigator를 만들 때 사용했던 &lt;code class=&quot;language-text&quot;&gt;AppNavigator.tsx&lt;/code&gt; 파일에 다음의 내용을 추가 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createBottomTabNavigator &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@react-navigation/bottom-tabs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Icon &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-vector-icons/MaterialCommunityIcons&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FeedScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/FeedScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; HomeScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/HomeScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; WriteScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/WriteScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Tab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createBottomTabNavigator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; BottomTabNavigator&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator
            screenOptions&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; route &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function-variable function&quot;&gt;tabBarIcon&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; size &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; iconName&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;route&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Home&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        iconName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;home&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;route&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Write&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        iconName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pencil&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Icon name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;iconName&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; color&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                tabBarActiveTintColor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#F4A261&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                tabBarInactiveTintColor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gray&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// tabBarShowLabel: false, // 메뉴 이름 숨기기&lt;/span&gt;
                headerShown&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Home&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;HomeScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Write&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;WriteScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원하는대로 생성된 하단바의 모습을 볼 수 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[React Native 설치]]></title><description><![CDATA[React Native 환경 설정 현재 맥북을 사용하고 있고, IDE는 VScode를 사용하고 있습니다. NVM은 이미 설치되어 있다고 가정하겠습니다.  먼저, iOS 개발을 위한 환경을 확인하세요. Xcode 설치 App Store에서 Xcode…]]></description><link>https://sharknia.github.io/React-Native-설치/</link><guid isPermaLink="false">https://sharknia.github.io/React-Native-설치/</guid><pubDate>Sun, 12 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/8e9adaece68e511f7aa8d9afd7f9bd66/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACb0lEQVR42g2Sa0/TYBiG+1NM1EQ/miACQfAHkBgIH9UgQxI0IaAwUBjIQI1RoGzCju16WM99e27ftusODBybDAaEGH+Ob/J8vZ/nuq882GE+T5dZXpZgENSbTQf6qqbpptVsndWbJ2edznm3W2s0LMexPdhqtxzoAdPgJLFAkRjJsPvpFM2VKZYWJAlooN1pK5p+/LvF8DzLC0H9BFbrh9ns8Oizre1tx3Nt11Y0wPAcxvDCYSZj2DbQwVE2CwP//KJLMszb+fmBpyPLa+uN9mXv9p9fifqHhu7cv7ew9CGqVlSgCrKESZqOgJsnTUESd/F9B8I9fO9Rf9+T4eGx8fGXsZne9Q1J08B0bBi8eD01PTsLw1A3dGAYGLBsXhQQi6QoFMtGjeNcsfh4aHBgZLRvcPD55KTr+5lCgWDYbu+61enwsoK6GZZpQw8zXEizlOfDsFYnSMKFvmbZYxMTdx8+QMm5hcWDTB7FLns9tHoXx2EYuJ5XqdbcIMBkw+REficRJ0pEIpn0oyqy8CoWm3ozE5ubW4yv5Ajq4uqm2WoxHIen08Cy8BRO0lRQq2G646q6/v7dNEUR35Lric2NQqkkqWBj+4usaadnfyhe5BXVhjD+6ePa5gbDlct8+SifM10PE4GWSG7F19c009zZ+Ywc+mGItMGoenX7t3F6anme7bqGZS+tri6vrggiL0iCDABqh2UJEvlAx7///JH89hXxKKpc5nmCptHkigU8dSDIsmk7NMdxooA4ZKBJmlYWJSxLlgRV1R1HMQw/ihCqhlr9SguK7PgQid1LHaCfC6q1sF6HlQiYJjAtVpSKNPMf9p6cu9JAqw0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/8e9adaece68e511f7aa8d9afd7f9bd66/ca1dc/image1.png&apos; srcset=&apos;/static/8e9adaece68e511f7aa8d9afd7f9bd66/e7570/image1.png 170w,
/static/8e9adaece68e511f7aa8d9afd7f9bd66/f46e7/image1.png 340w,
/static/8e9adaece68e511f7aa8d9afd7f9bd66/ca1dc/image1.png 680w,
/static/8e9adaece68e511f7aa8d9afd7f9bd66/02d09/image1.png 1020w,
/static/8e9adaece68e511f7aa8d9afd7f9bd66/9d567/image1.png 1360w,
/static/8e9adaece68e511f7aa8d9afd7f9bd66/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;React Native 환경 설정&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;현재 맥북을 사용하고 있고, IDE는 VScode를 사용하고 있습니다. NVM은 이미 설치되어 있다고 가정하겠습니다. &lt;/p&gt;
&lt;p&gt;먼저, iOS 개발을 위한 환경을 확인하세요.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Xcode 설치&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;App Store에서 Xcode를 설치하세요.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;설치 후 Xcode를 실행하고, &quot;Preferences &gt; Locations&quot;에서 Command Line Tools를 설정합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e84d8d68cb2fadfbfc48026726cf1457/8aec5/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFklEQVR42qWT7Y6TQBSGMdEfJjWbJvrX7XYp/QLK8NGBDoUCbYHSajTZq9J7Wf94Jxrt3sqGvJ5h17rWjbGR5M1hGM5z3nMYFEVRnuTZLAgzb+t7rODcKo+VpqJMI1G6rkFrt5FoolX6nlkEgb0VwvYlS2kr7bMym33d7DJUxareFBQ3K2yKJUq6L9cLvN3m2FVrVOUS+WpBcYV8nWBL6/LNu7qqSsRz/qXdbp8prVbrleeYNwvBsZjzehFyxOEUkXCRhB6yZYqlVDLDKg2bvSTyKXJkcYA4Seo4EuCOsSfWywZoG/29bfbgmFo9tUcIPANzKmBNhvBFiGAeNc+4PQYzegeZoy4mo4ta5jJd+34AMgI6Ew1Te1wLbiGNPGyqHDzg4FYfUzaEx0bkQqcooRqEz3D1fkuuBQE1MPMIKKtQxZo7Y2rVRV6swBwGW1fhWQNZrJEzGcA2+02BkKDc1Wtp5gio7e9brX1XRywclPkC+TJCnoXwZwEcgnrk9GHLk/ElLF0lYP9PoHQ2m05q2VZMH6Qi4LZIsCtTTH3/Z/JvwHs95vBXy5Z+2QzbGHZgDEjDC1jji8dAfwc2tmlTviSH/FBM6iQgLaRDaulWzuRE3d4V7X87AF02vpEzdNmw9poj8u+SOU2uNbo72HS9ULuvP2pq53NP7Vz31PNPp6lzLXPV7vkHYrWU5odWlGek5/+pp5L1AwP2YZA4u0qgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/e84d8d68cb2fadfbfc48026726cf1457/ca1dc/image2.png&apos; srcset=&apos;/static/e84d8d68cb2fadfbfc48026726cf1457/e7570/image2.png 170w,
/static/e84d8d68cb2fadfbfc48026726cf1457/f46e7/image2.png 340w,
/static/e84d8d68cb2fadfbfc48026726cf1457/ca1dc/image2.png 680w,
/static/e84d8d68cb2fadfbfc48026726cf1457/8aec5/image2.png 942w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;Node.js 설치&lt;/strong&gt;&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NVM을 이미 사용중이므로 다음의 명령어를 사용해 node 버전 명시만 해주겠습니다. 20.13.1을 사용하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;20.13.1&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; .nvmrc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Watchman 설치&lt;/h2&gt;
&lt;h4&gt;&lt;strong&gt;Watchman의 역할&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;React Native CLI를 사용할 때, 파일 변경 사항을 감지해 앱을 즉각적으로 업데이트.&lt;/li&gt;
&lt;li&gt;대규모 프로젝트에서도 빠르게 파일 변경을 감지.&lt;/li&gt;
&lt;li&gt;선택 사항이지만, 맥에서 개발할 때 성능을 개선하는 데 유용.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; watchman&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치 후 아래의 명령어로 설치를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;watchman &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;React Native 프로젝트 생성&lt;/h2&gt;
&lt;p&gt;React Native CLI를 사용해 프로젝트를 생성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx @react-native-community/cli init MyFirstApp
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; MyFirstApp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치를 하다보면 CocoaPods를 설치하겠냐고 물어봅니다. &lt;/p&gt;
&lt;h3&gt;CocoaPods&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;CocoaPods&lt;/strong&gt;는 macOS 및 iOS 앱 개발에서 사용되는 &lt;strong&gt;의존성 관리 도구&lt;/strong&gt;입니다. React Native 프로젝트의 iOS 빌드와 관련된 라이브러리를 관리하기 위해 필수적인 도구입니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;CocoaPods의 역할&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;iOS 네이티브 라이브러리 관리&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;외부 라이브러리(예: React Native Paper, Firebase 등)를 프로젝트에 추가하고 관리합니다.&lt;/li&gt;
&lt;li&gt;필요할 때마다 최신 버전으로 업데이트를 쉽게 수행할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;자동 구성&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;네이티브 라이브러리를 프로젝트에 포함시킬 때 필요한 설정(예: Xcode 빌드 설정)을 자동으로 처리합니다.&lt;/li&gt;
&lt;li&gt;CocoaPods 없이 이런 설정을 수동으로 관리하면 시간이 많이 걸리고 오류가 발생할 가능성이 높습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Podfile 관리&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CocoaPods는 프로젝트의 의존성을 Podfile이라는 파일로 관리합니다.&lt;/li&gt;
&lt;li&gt;Podfile은 어떤 라이브러리를 사용할지 정의하는 파일입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;설치&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pod &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;CocoaPods가 설치되지 않았다면 다음의 명령어를 사용해 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; cocoapods&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;cocoapods를 지금 설치했다면 CocoaPods 의존성 재설치를 해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ios
pod &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;iOS 프로젝트 빌드&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx react-native run-ios&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;iOS 시뮬레이터가 자동으로 실행되며, 기본 React Native 앱이 표시됩니다.&lt;/p&gt;
&lt;h3&gt;시뮬레이터&lt;/h3&gt;
&lt;p&gt;해당 명령어를 실행했을 때, 다음과 같은 오류가 발생할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;error iOS devices or simulators not detected. Install simulators via Xcode or connect a physical iOS device&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 오류는 시뮬레이터가 설치되지 않은 것으로,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;xcrun simctl list devices&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어를 사용해 설치된 시뮬레이터를 확인할 수 있습니다. 만약 시뮬레이터가 설치되어 있지 않다면 설치해야 합니다. 저는 최초 Xcode 설치 시 iOS를 선택하지 않아 해당 오류가 발생했습니다. &lt;/p&gt;
&lt;p&gt;Xcode의 설정에서 Components 탭으로 이동해 iOS 시뮬레이터를 설치해주면 됩니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/dbc3e00362766991ec993e6465e83843/8aec5/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACN0lEQVR42qWQy27TQBRAXbYkpEJkUTZQaBK/X+MZexLHjtPETeK4tDykWoDEX7Ciu4oFS1ix4SU2/QFY9StQifmVaHQZm7ZpVonESEf33nmcuTOCIAg3xkFn6PfdF9R1jigxM0rQAoqyQRRmUeRn5RqvCUVl7iMtc13ryKfkpe85g8Il1ITa5qjvn4/TAUwneyyZxJBORzyPIRkPYTqO4fBRAgec/XQMo71d2E9imKQpJE8ySJOYjUe7EAb0V61W2xSESqWOkT6Lozb0u3gedhDr+c4Sgx5lYcdhUReXsZgLAo8FYbfI5/2AgIv137zDO9wn1JEp51EvAIIR01QJdFW+QALLUPlmBKaulrWhLdYMRQRNkZhjm2Cb8kyoFEJBqGveIJdencKD56ds6+k3qKZf4NYVn6GSfLpWL1OdfmV3n30HBfdmW5cd2raRe70UrHbMFKcHMloTO4Qoydjrk49APTK7eHKFP1nKQ9eALtEYMZqA1IdrM41DdvzmGDqueV0o5wHFQLHJkCGDpYlgc6yVtGAyGrKTt+/Ad63lDn3XBA/pzNZFMOQdMJUGl7ZW0iYme3yQAraUhdA25NwjCAKKGN8AHQ519LWESBeZrTXA0sUZd/0TFoWly4BNZU5slbmI/6WlMEttrgQZ0ry8XBfPr4TYVv5QpIJjSAwbEo9iCbHklWBTYq6t8FzJSyEf1Vbj/gepuX0mtbZ/8PjzErGxFsWZs9bOvfeFqxBucG5ybv8nhWPjL1Uybt+wD3kcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/dbc3e00362766991ec993e6465e83843/ca1dc/image3.png&apos; srcset=&apos;/static/dbc3e00362766991ec993e6465e83843/e7570/image3.png 170w,
/static/dbc3e00362766991ec993e6465e83843/f46e7/image3.png 340w,
/static/dbc3e00362766991ec993e6465e83843/ca1dc/image3.png 680w,
/static/dbc3e00362766991ec993e6465e83843/8aec5/image3.png 942w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;오류!&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Error: EMFILE: too many &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt; files, &lt;span class=&quot;token function&quot;&gt;watch&lt;/span&gt;
    at FSWatcher._handle.onchange &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node:internal/fs/watchers:207:21&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Emitted &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt; event on NodeWatcher instance at:
    at FSWatcher._checkedEmitError &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;/Users/furychick/Develop/tuum/node_modules/metro-file-map/src/watchers/NodeWatcher.js:82:12&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    at FSWatcher.emit &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node:events:519:28&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    at FSWatcher._handle.onchange &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node:internal/fs/watchers:213:12&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  errno: -24,
  syscall: &lt;span class=&quot;token string&quot;&gt;&apos;watch&apos;&lt;/span&gt;,
  code: &lt;span class=&quot;token string&quot;&gt;&apos;EMFILE&apos;&lt;/span&gt;,
  filename: null
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런 오류가 발생할 수 있습니다. 이 에러는 파일 감시(watch)와 관련된 문제이며, macOS에서 &lt;code class=&quot;language-text&quot;&gt;EMFILE: too many open files&lt;/code&gt;는 시스템이 동시에 열 수 있는 파일 핸들의 수가 초과되었을 때 발생합니다. Watchman을 사용해 이 오류를 피할 수 있습니다. 이미 설치가 되어있는데도 해당 오류가 발생한다면 Watchman 서비스 재시작 - 캐시 정리 - 다시 실행을 시도합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;watchman shutdown-server
watchman watch-del-all
npx react-native start --reset-cache&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 568px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/a6ddd67e8f69841be71d4fff945eb110/d63a8/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 190.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAmCAYAAADEO7urAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGUElEQVR42pWW+09TZxjHuTkyzIY6nTqRDe9C3HQtUIEWFHVmTtc5tx/mftS/w1+2ZL+IcUvmlugCSqbRRXTJMMN4QahyRwvlVgSBttCWlt4vp+ec757n0JKCqOxNnpz3nPO+n/e5n5OSMjtSSTJI3lqiZC6QjJTksTo3d/1nJXvrjx0sNugOlTTrj35hYDmhP2bYX15mKC0pNpSVahTRlZUYDuwvN+yv0BkOVO5rrtCWPdaWam5v2rQpdw6YtWbN7iOlpcL3x7XYd7RM+uroUfnEcb30+eFDUqmmSCr8dLdUpNqjiLZEIx8+WCnv05XJRw4f4jl0pXv9GzZsKE7wUrNSUtZnr1n1dXr6sp/WrV77uKBgp2nLls19O7bv6CvX6UwV5eWm8rgUFBT0b926dWDXrl39BGldtiz97Lp1a74hzvq461LS4mCNXv+l9d79e2hubpaNPT0wPH6MU6dO4buTJ3GS5PTp02hqakJvby8ePXokX79+HXq93sZ752Jx5swZBZiX9+HvA319oCGaBwdkxGKyeXhY3rF9m7wl7yM5L2+TTFrJw+YhmdbIIyMj8sTEhGgymbB58+bfmJFg8Xjnk8LCuz3THgz7QqLJF4bN60M46IcgSTB7g+i2OdA37YVx3AqrZQIWqxVOp1M0m82orKy8z6Ggg1ITwJX5qsKHw043ouGwaCVYtzuA5x4/ejxBDLi8mJyawpTDiScWB2x0tdO9y+0WX7x4AZ1O10SMd5OBqz5WqRsnp90IETDk98MbCqHRHUY/AYWAD/5gkDQOoN8fgcMfRCgQQFQQxCkCa7Xal4AbdqnUJsu0C7FwSPJ5vGgatWDA7kKX0wurL4CQ3wc+6JljBtM+P3w+ckkkIk5OTi4KXF+wR93aRYvN/rD0lHxYdfUGfjx3HlXVV3D+Rh2qLv6BC1ev45ebf+PWP3cgkAVhssY2C2xeCMzJV6mNrfYZTISikmHKjYa7d9HW3o62lie4/aAR1fUN+PdJGy42PMRfLV0wOj0IRqLi1Czw0ULgRyq1erDb7kZfMCaNTNpR9esF/HCpBj9f+RMNDQ04d6kaZ2uv4WLNZVy7ehXPJibRHxKlcZsN5VptG8chGbhRo1Y97XG40OEJSUHylzEYwwOPgEavAFcoDGc4iha/gHA0ijDdR2nNSCAsdVumsE+nHeQ4JPeH3EK12uQMBBEAJEmMYSYmwRaJsQsQiEThD0dgozkFAhGSaDSCgATJ6nKjQqdj4MZkYJ5GoxnyejyctJLdbsckJW6IUkUZsoyFQ559JnG0KQ/NrFQy8IPi4uLW6elpdHR0SFyrz4xG8L1IlSLEYhCEGGKiSOpLVJUxRcskYDsx3k/24XsEfOh2u2GxWMSBgQH0UV0PDw+DahZ8zyU2Pj6uzNkCPozrnoEVFRWchyvmVUpRUVEj5RVEGlFyPGsQolzjOWvE74LkAgbQkoTJCpDa2kt5uIo0bPSwD61W0UapwCVFc4yNjSmaORyOxXyYrOF8IAWlkc0gk0Q2tdfUi6GhIRjJly0tLcqctWStWfvgbMBEP5XjokDW0Ov1Kho+f/5cAXAn4UN4E79jLWdmZhRhC14LZB/yyWTKnA95sSAIySYu3WTW0OVycVQVkwPUnhaCFpm/3ofUgTE4OCh2dnQqwWDtQrNdZS7q/Iw1T6TNknzIucfBYE1ZzENm5co5SAdyrir5SXCRLXmtD/lUzjvOtUT+RebqN4p4ri7Nh4lKYS36+/uV6kgE5RW1/OY8JIjyJWPh1GE3sJ8479g8nieuZMHr0yZITqeNyiI+mSEM5OhzFSWEn7E15IZXA9VqdSP7iM2QF2lX/9tkRUNqoiFRFj0RAUFqVzw4CPxlS3QYrhCuGK53goms7bzmEKeuVKtU9wNksiMsiGP0p2APKhFX/MWlyI1idHRUMTcRfa4qNp364YOFwLdzcnKudHd3M4NVk5Yosc7OTtDey/N+RfLz8/mv9Dh9Du036+rQ1tYud3Z1ob6+HtXV1aitrVWkpqYGd+7cQRe9a29vl+toLZnroL36OGNupHMLT0tL+zYjI+NiVlZWHcmtzMzMW3R/Oy7KnJ7d5nckN+n+Eu9Zvnz52jhj3uD/5BXxr9c2kp1vEF6zMTs7e8VL/9hJIzX+A5q+RElbSPgPjL08ko/b8xsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/a6ddd67e8f69841be71d4fff945eb110/d63a8/image4.png&apos; srcset=&apos;/static/a6ddd67e8f69841be71d4fff945eb110/e7570/image4.png 170w,
/static/a6ddd67e8f69841be71d4fff945eb110/f46e7/image4.png 340w,
/static/a6ddd67e8f69841be71d4fff945eb110/d63a8/image4.png 568w&apos; sizes=&apos;(max-width: 568px) 100vw, 568px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이 화면이 확인되면 React Native 프로젝트가 &lt;strong&gt;정상적으로 빌드 및 실행된 것&lt;/strong&gt;입니다. 이제 React Native의 기본 구조와 기능을 수정하거나 추가하여 프로젝트를 진행할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React Native의 프로젝트 구조와 화면 이동 구현하기]]></title><description><![CDATA[일반적인 React Native 프로젝트의 구조 각 디렉토리의 역할  이미지, 폰트 등 정적 파일을 저장. 예: 아이콘, 배경 이미지, 로고 등.  재사용 가능한 UI…]]></description><link>https://sharknia.github.io/React-Native의-프로젝트-구조와-화면-이동-구현하기/</link><guid isPermaLink="false">https://sharknia.github.io/React-Native의-프로젝트-구조와-화면-이동-구현하기/</guid><pubDate>Sun, 12 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/180f6a62a148ae7423cf45783eed113e/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR42g3RWVMSAQAA4P0RjT0405OTDzUOJqICcoQgGB7ALrCwssCy7MXuAnvAcsSpgBh4DAJWWFmNOeVLOc3o1PTQaO/+gv5JfX/hA/6eGO/a+tvC/BWv+RyeGXlUh84nLeu0YpqVdBpubo5f0PsmnyAmB6jSr4w/tj+YtoxPuSZndfceAXcd45+S/qek+5bQnqGat5v6QcC8ZVNvbViyTodkXylq9B3/6u6wU4tt4hqDa2L+2YRGstq0Y1PA77LxSpi/5A0XpOENoh3CxsPgcs3jKMOeIh0vxrgf5OqvkeAVmiwclZ0gtmCqg2s7Ia9mbBr4nrV+lezn1NOPxHI/4uj7TbuYt0biLRK9EvDTePRyl052D+JKIy3WQJ/YjCLX/UInl5i7rwbOZfdZGRthth7tP457XylCD4EHhXQ+kjrD3ReUM4ymA1u9FIZel/OsjeMD8ruTXrJSNT80ASNm/Zh29bDV/RjYQiGZzwtK5f0gkyXwHZmvRmi6tJNIV/cC5MlSyKL2BSGpnyg56JJJtQIckOBeHGqEXB+qzKdhHat0iOFp58vLo5OmWKljYk2US69DVAFkwY0ERT0/wLgqljas84szq8A2EajHgw0i2Bfpo24bye/ZyKaFfVHMtepUOelib4RMROV2W/31lNiBsX0q6QukjIbg/0EgT4SLVLTGxcsMXuJoKkxKPlpZgGsBupuu3saKN3BWXgkrCOZdCkJIwg+yS07U7SMWbSiQJnCJJgSWSbFst60M2rkcK0MhHuWyECK4YAHxMC1ORlMlCGERLGWPZqCYxColq48HaIohSCZGMDiTDDDKZrYRyW1DhBhmZRfKrREZO56xByUzLJj9CR3EzboSWp9gCStqj/gPquYQHMBgUdIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/180f6a62a148ae7423cf45783eed113e/ca1dc/image1.png&apos; srcset=&apos;/static/180f6a62a148ae7423cf45783eed113e/e7570/image1.png 170w,
/static/180f6a62a148ae7423cf45783eed113e/f46e7/image1.png 340w,
/static/180f6a62a148ae7423cf45783eed113e/ca1dc/image1.png 680w,
/static/180f6a62a148ae7423cf45783eed113e/02d09/image1.png 1020w,
/static/180f6a62a148ae7423cf45783eed113e/9d567/image1.png 1360w,
/static/180f6a62a148ae7423cf45783eed113e/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;일반적인 React Native 프로젝트의 구조&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;root/
├── android/                   # Android 네이티브 코드
├── ios/                       # iOS 네이티브 코드
├── src/                       # 주요 소스 코드 디렉토리
│   ├── assets/                # 이미지, 폰트 등 정적 파일
│   ├── components/            # 재사용 가능한 UI 컴포넌트
│   ├── navigation/            # 네비게이션 관련 코드
│   ├── screens/               # 화면(페이지) 컴포넌트
│   │   ├── LoginScreen.tsx    # 로그인 화면
│   │   ├── HomeScreen.tsx     # 홈 화면
│   │   └── ...                # 기타 화면
│   ├── services/              # API 요청 및 백엔드 연동
│   ├── utils/                 # 유틸리티 함수와 헬퍼 코드
│   ├── context/               # 글로벌 상태 관리 (React Context 등)
│   └── App.tsx                # 메인 엔트리 파일
├── package.json               # 프로젝트 정보 및 의존성 관리
├── tsconfig.json              # 타입스크립트 설정 파일
├── .gitignore                 # Git 무시 파일
└── README.md                  # 프로젝트 설명&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;각 디렉토리의 역할&lt;/h2&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/assets/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;이미지, 폰트 등 정적 파일을 저장.&lt;/li&gt;
&lt;li&gt;예: 아이콘, 배경 이미지, 로고 등.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/components/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;재사용 가능한 UI 요소를 정의.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예: 버튼, 텍스트 입력 필드, 카드, 모달 등.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/components/
├── CustomButton.tsx
├── InputField.tsx
└── Modal.tsx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/navigation/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;화면 간의 라우팅과 네비게이션 설정.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예: React Navigation을 사용하여 스택, 탭, 드로어 네비게이션 설정.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/navigation/
├── AppNavigator.tsx  # 앱 전체 네비게이션
├── AuthStack.tsx     # 로그인/회원가입 스택
└── MainStack.tsx     # 로그인 후 메인 스택&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/screens/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;각 페이지(화면) 컴포넌트를 정의.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;페이지별로 파일을 생성하고, 필요하면 서브 디렉토리를 사용.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/screens/
├── LoginScreen.tsx
├── SignupScreen.tsx
├── HomeScreen.tsx
├── ProfileScreen.tsx
└── SettingsScreen.tsx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/services/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;API 요청 및 백엔드와의 연동 로직 작성.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예: &lt;code class=&quot;language-text&quot;&gt;axios&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt;를 사용한 API 호출 함수 정의.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/services/
├── api.ts           # 공통 API 설정
├── authService.ts   # 인증 관련 API
└── userService.ts   # 사용자 데이터 API&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/utils/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;재사용 가능한 유틸리티 함수, 상수, 헬퍼 코드.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예: 날짜 포맷팅, 폼 유효성 검사 함수 등.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/utils/
├── dateUtils.ts
├── validation.ts
├── constants.ts
└── helpers.ts&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;src/context/&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;React Context API를 사용해 글로벌 상태를 관리.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예: 사용자 인증 상태, 테마 설정 등.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;src/context/
├── AuthContext.tsx
├── ThemeContext.tsx
└── AppProvider.tsx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;App.tsx&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;프로젝트의 메인 엔트리 파일.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네비게이션 초기화 및 최상위 컴포넌트 렌더링.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; NavigationContainer &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@react-navigation/native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AppNavigator &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./src/navigation/AppNavigator&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; App&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NavigationContainer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;AppNavigator &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;NavigationContainer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;AppNavigator를 활용한 화면의 추가&lt;/h2&gt;
&lt;p&gt;App.tsx가 main.py 같은 역할을 하는 파일임을 짐작할 수 있습니다. 여기서 AppNavigator를 사용하고 있는 것도 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;이 페이지는 React Navigation을 사용하여 앱의 화면 전환(네비게이션)을 관리하는 역할을 합니다. React Native 앱에서는 여러 화면이 있고, 이러한 화면 간의 이동을 효과적으로 관리하기 위해 네비게이션 라이브러리를 사용하는 것이 일반적입니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;AppNavigator&lt;/code&gt;(또는 React Navigation과 같은 네비게이션 시스템)를 사용하지 않으면, 화면 전환 및 뒤로가기 동작을 직접 관리해야 합니다. 이는 상당히 번거롭고, 유지보수성이 떨어질 수 있습니다. React Navigation을 사용하면 뒤로가기를 포함한 화면 전환과 네비게이션 흐름을 자동으로 관리할 수 있어 훨씬 간편합니다.&lt;/p&gt;
&lt;p&gt;React Navigation 같은 라이브러리를 사용하지 않으면,&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;각 화면 전환을 수동으로 처리해야 합니다.&lt;/li&gt;
&lt;li&gt;안드로이드의 뒤로가기 버튼(하드웨어 버튼)도 직접 구현해야 합니다.&lt;/li&gt;
&lt;li&gt;상태를 유지하기 위한 글로벌 상태 관리나 Context API를 추가적으로 사용해야 할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; @react-navigation/native
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; react-native-screens react-native-safe-area-context react-native-gesture-handler react-native-reanimated react-native-vector-icons
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; @react-navigation/stack
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ios &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pod &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;주요 역할&lt;/strong&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;스택 네비게이션 구성&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;createStackNavigator&lt;/code&gt;를 통해 화면 간의 전환 방식을 스택(Stack) 방식으로 관리.&lt;/li&gt;
&lt;li&gt;스택 방식은 사용자가 한 화면에서 다른 화면으로 이동할 때, 이전 화면이 &quot;뒤로가기&quot;로 돌아갈 수 있도록 스택 구조에 저장되는 방식.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;화면 정의&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;SplashScreen&lt;/code&gt;: 앱이 처음 로드될 때 사용자에게 표시되는 스플래시 화면.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;LoginScreen&lt;/code&gt;: 사용자가 로그인할 수 있는 화면.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;HomeScreen&lt;/code&gt;: 로그인 후 메인 화면으로 이동.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;초기 화면 설정&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;initialRouteName=&quot;Splash&quot;&lt;/code&gt;는 앱 실행 시 첫 화면을 &lt;code class=&quot;language-text&quot;&gt;SplashScreen&lt;/code&gt;으로 설정.&lt;/li&gt;
&lt;li&gt;앱 로드 후, &lt;code class=&quot;language-text&quot;&gt;SplashScreen&lt;/code&gt;에서 로그인 상태를 확인한 뒤 적절한 화면(&lt;code class=&quot;language-text&quot;&gt;LoginScreen&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;HomeScreen&lt;/code&gt;)으로 리디렉션.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;헤더 숨기기&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;screenOptions={{ headerShown: false }}&lt;/code&gt;를 통해 화면 상단의 기본 헤더를 숨김.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;코드&lt;/h3&gt;
&lt;p&gt;/src/navigation 경로에 다음의 파일을 작성해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createStackNavigator &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@react-navigation/stack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; HomeScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/HomeScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; LoginScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/LoginScreen/LoginScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; SplashScreen &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../screens/SplashScreen&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStackNavigator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; AppNavigator&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator initialRouteName&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Splash&quot;&lt;/span&gt; screenOptions&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; headerShown&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Splash&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;SplashScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Login&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;LoginScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Home&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;HomeScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; AppNavigator&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;네비게이션 초기화&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;createStackNavigator&lt;/code&gt;를 통해 스택 네비게이터를 생성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStackNavigator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;스택 구성&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;Stack.Navigator&gt;&lt;/code&gt;에 앱에서 사용할 화면들을 정의&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;: 네비게이션 이름. 다른 화면으로 이동할 때 이 이름으로 참조.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;component&lt;/code&gt;: 연결된 화면 컴포넌트&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator initialRouteName&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Splash&quot;&lt;/span&gt; screenOptions&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; headerShown&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Splash&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;SplashScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Login&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;LoginScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Screen name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Home&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;HomeScreen&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Navigator&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;useNavigation 훅을 사용한 화면 전환&lt;/h2&gt;
&lt;p&gt;React Navigation가 설치되었고 AppNavigator에 화면을 정의했다면, &lt;code class=&quot;language-text&quot;&gt;useNavigation&lt;/code&gt; 훅을 사용해 &lt;code class=&quot;language-text&quot;&gt;navigation&lt;/code&gt; 객체를 간단하게 가져올 수 있습니다.&lt;/p&gt;
&lt;p&gt;다만 이 전에 타입스크립트의 특징 때문에 경로와 관련된 타입을 명시해야 오류를 방지할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;타입 정의 추가&lt;/h3&gt;
&lt;p&gt;React Navigation의 &lt;code class=&quot;language-text&quot;&gt;createStackNavigator&lt;/code&gt;에서 정의한 경로 이름(&lt;code class=&quot;language-text&quot;&gt;Home&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Login&lt;/code&gt; 등)에 대한 타입을 추가해야 합니다. types/navigation.tsx 파일을 생성하고 다음의 내용을 작성합니다. 이는 선택사항으로 모든 네비게이션 타입 정의를 한 곳에서 관리하기 위함입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; StackNavigationProp &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@react-navigation/stack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RootStackParamList&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Home&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &apos;Home&apos; 경로에 매개변수가 없는 경우&lt;/span&gt;
  Login&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &apos;Login&apos; 경로&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigationProp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; StackNavigationProp&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;RootStackParamList&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Login&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; NavigationProp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;RootStackParamList&lt;/code&gt; 정의&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Home&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Login&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Profile&lt;/code&gt; 등 네비게이션 경로의 이름과 매개변수 타입을 정의.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;useNavigation&lt;/code&gt;에 타입 적용&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;useNavigation&amp;lt;StackNavigationProp&amp;lt;RootStackParamList, &apos;Login&apos;&gt;&gt;()&lt;/code&gt;와 같이 타입 지정.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;useNavigation&lt;/code&gt;에 타입 적용&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;useNavigation&lt;/code&gt; 훅에 방금 정의한 &lt;code class=&quot;language-text&quot;&gt;NavigationProp&lt;/code&gt; 타입을 적용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useNavigation &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@react-navigation/native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; StyleSheet&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; View &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; SocialButton &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../../components/SocialButton&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; NavigationProp &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../../types/navigation&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 방금 정의한 타입 가져오기&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LoginScreen&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; navigation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;useNavigation&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NavigationProp&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 타입 적용&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleGoogleLogin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Google Login Clicked&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        navigation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Home&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 네비게이션 수행&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;View style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SocialButton
                text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Google 계정으로 로그인&quot;&lt;/span&gt;
                icon&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;google&quot;&lt;/span&gt;
                color&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#F4A261&quot;&lt;/span&gt;
                onPress&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleGoogleLogin&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;View&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; LoginScreen&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;reset&lt;/code&gt; 메서드&lt;/h3&gt;
&lt;p&gt;이대로 구현하면 로그인 후 홈 화면으로 이동할 때 &lt;strong&gt;뒤로 가기 버튼&lt;/strong&gt;을 누르면 로그인 화면으로 돌아갈 수 있습니다. 이는 일반적으로 기대되는 동작이 아니며, 로그인 화면은 &lt;strong&gt;로그인 후&lt;/strong&gt; 접근할 수 없도록 하는 것이 적절합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;navigation.reset&lt;/code&gt;을 사용하면 네비게이션 스택을 재설정하여 뒤로가기를 방지할 수 있습니다. 이는 웹의 &lt;strong&gt;리다이렉트&lt;/strong&gt;와 유사한 동작을 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleGoogleLogin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Google Login Clicked&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 네비게이션 스택을 재설정&lt;/span&gt;
    navigation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        index&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 스택의 첫 번째 화면으로 설정&lt;/span&gt;
        routes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Home&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 새로 설정할 스택의 화면&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 구현하면 로그인 화면은 네비게이션 스택에서 제거되며 &quot;뒤로가기&quot; 버튼을 눌러도 로그인 화면으로 돌아갈 수 없습니다.&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;오늘은 리액트 네이티브를 설치하고, 프로젝트 구조를 뜯어보고 간단한 화면을 만들어 화면을 이동시켜봤습니다. &lt;/p&gt;
&lt;p&gt;다음 시간에는 하단 탭을 구현하고 하단 탭으로 화면 전환을 하는 방법, 왼쪽/오른쪽에서 열리는 메뉴를 추가해보고 역시 이를 통해 화면을 이동해보겠습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Typescript의 얇은 복사 vs 깊은 복사]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Typescript의-얇은-복사-vs-깊은-복사/</link><guid isPermaLink="false">https://sharknia.github.io/Typescript의-얇은-복사-vs-깊은-복사/</guid><pubDate>Thu, 09 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d9e9a6617e85381d1296ccea482abfb9/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYklEQVR42hWNy04aUQBA55O66NKlO5smTe2mbtq09RG1GGlBpahAUZFBGECYYYY7j3vvvGfuZXgqYIGgkda46sJ00W8pTU7O7uQwQ4qGFF9T3CaY+sjxkOEi6OpWk5rNBun3gU84ZLJAPROk77yYEkCSl5OCkuAV5sqHPR+2CQoIIj72iG4Tm7TJ5H7y++8fffogXo3x6LZIuxkFndW1dB0d8/JxFRxVFabjaR0fBr5GPUiJEbTcm37rYTYdj4dVm7yOF3cAKfdnudY0HwwympkWtQSvzuPDedxwVOqq1NN8T6PUeJz9ePo16jU8zTBzqolHMzB+jKidjwU3Q8doOLmAdrwMYkUpVpYZ6mjEhY4LKdVvx92nn6Mb4sB6rdltS41elgyW96pLoexKWvt0riuDO4G0E1X5gBMPSjLj2ND1sO3pjYb9cNef+ZhIAgRKDainVTWcV5ejXLhif0jU3kQuoyWT95tHlfm5HuUAY1rQcrDu6I5vjgcBPElefImIeU6FhkZ7ORRUO/fvj8TFlf1ni2sbx5WSRWMlEMlLXwsygy2EXQO5hu4atEUcCyX3YqHVUCLFsqIRrxhvo8XnS5sLL7fWvnEsIgkeRgtSOCfu5gCDbIxsHTm69h/DbQeD6QgY9vbByav1w90cWlgOv1hNnKsED6ZZ6M3L3ayww0ohts5oFtJMNLdq67KlA8uAxHf7fdjpXSDyLl7eZlW5N7l0W2nZ2uPq8+fnc3ErI22eSYxiIsXCsoWBhSVzji4YhmA5NY9KQRd0rqXWVcGkSRHvF0GYrW2fVjZSl6spfv1E+geFdZVplFR6EQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/d9e9a6617e85381d1296ccea482abfb9/ca1dc/image1.png&apos; srcset=&apos;/static/d9e9a6617e85381d1296ccea482abfb9/e7570/image1.png 170w,
/static/d9e9a6617e85381d1296ccea482abfb9/f46e7/image1.png 340w,
/static/d9e9a6617e85381d1296ccea482abfb9/ca1dc/image1.png 680w,
/static/d9e9a6617e85381d1296ccea482abfb9/02d09/image1.png 1020w,
/static/d9e9a6617e85381d1296ccea482abfb9/9d567/image1.png 1360w,
/static/d9e9a6617e85381d1296ccea482abfb9/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;오랜만에 타입스크립트를 다루고 있습니다. 특히 코딩 테스트를 위해서 다루고 있는데, 오랜만에 타입스크립트의 배열을 다루다보니 얕은 복사와 깊은 복사에 관한 문제가 발생했습니다. 예전에 공부했던 내용이지만 정리한 적은 없는 것 같아 한 번 정리하고 넘어가려고 합니다. &lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;TypeScript의 값 분류&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;TypeScript(JavaScript)는 &quot;객체 기반 언어&quot;(Object-Oriented Programming Language)입니다. &lt;/p&gt;
&lt;p&gt;이는 객체를 활용하여 데이터를 구성하고 조작하는 데 최적화되어 있음을 의미합니다. 배열도 객체로 다루어지며, 대부분의 연산은 객체 참조를 기반으로 동작합니다. 대신 모든 값이 객체인 것은 아닙니다. &lt;/p&gt;
&lt;h3&gt;Primitive Value (기본형 값)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;불변형(Immutable) 값입니다.&lt;/li&gt;
&lt;li&gt;값을 직접 복사하며, 다른 변수에 영향을 미치지 않습니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;기본형 값에는 다음이 포함됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;number&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;string&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;boolean&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;undefined&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;symbol&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;bigint&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;메모리 저장 방식&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primitive 값은 스택(Stack)에 직접 저장됩니다.&lt;/li&gt;
&lt;li&gt;값 자체가 변수에 저장되며, 독립적으로 동작합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Reference Value (참조형 값)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;객체처럼 동작하며, 값이 아닌 참조를 복사합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;참조형 값에는 다음이 포함됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;object&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;array&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;function&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Map&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Set&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Date&lt;/code&gt; 등&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;메모리 저장 방식&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;참조형 값은 힙(Heap)에 저장되며, 변수에는 객체의 메모리 주소(참조)가 저장됩니다.&lt;/li&gt;
&lt;li&gt;따라서, 여러 변수가 동일한 객체를 참조할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Primitive vs Reference 차이&lt;/h3&gt;
&lt;h4&gt;Primitive Value 예시 (Immutable)&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 42 (원본 값은 변경되지 않음)&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 100&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;b&lt;/code&gt;는 독립적인 값을 가지고 있으며, 하나를 변경해도 다른 값에 영향을 미치지 않습니다.&lt;/p&gt;
&lt;h4&gt;Reference Value 예시 (Mutable)&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arr1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 참조 복사&lt;/span&gt;
arr2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [100, 2, 3] (원본 배열도 변경됨)&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [100, 2, 3]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;arr2&lt;/code&gt;는 동일한 배열 객체를 참조합니다. 하나를 수정하면 다른 것도 영향을 받습니다.&lt;/p&gt;
&lt;h2&gt;얕은 복사와 깊은 복사&lt;/h2&gt;
&lt;h3&gt;얕은 복사란?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;얕은 복사(Shallow Copy)는 &lt;strong&gt;객체의 1차원 수준만 복사&lt;/strong&gt;하는 것을 의미합니다.&lt;/li&gt;
&lt;li&gt;배열이나 객체를 복사할 때, 최상위 수준의 값만 복사되며, 만약 내부 요소가참조형 값(Reference Value)이라면, 이 값들은 참조(주소)만 복사됩니다.&lt;/li&gt;
&lt;li&gt;따라서, 얕은 복사된 객체나 배열은 원본과 일부 데이터를 공유하게 되어, &lt;strong&gt;한쪽을 수정하면 다른 쪽도 영향을 받을 수 있습니다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;깊은 복사란?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;깊은 복사(Deep Copy)&lt;/strong&gt;는 객체의 모든 수준을 복사하여, 원본과 완전히 독립적인 객체를 생성합니다.&lt;/li&gt;
&lt;li&gt;중첩된 데이터(예: 객체 안의 객체, 배열 안의 객체)까지 새로운 메모리를 할당합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;얕은 복사의 동작&lt;/h2&gt;
&lt;p&gt;얕은 복사가 어떻게 작동하는지 예시를 통해 메모리 구조와 함께 자세히 알아보겠습니다. &lt;/p&gt;
&lt;h3&gt;예제 1: Primitive Value&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;arr1&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 얕은 복사&lt;/span&gt;
arr2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [100, 2, 3]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위는 언뜻 보기에는 깊은 복사로 동작하는 것으로 보이지만, &lt;code class=&quot;language-text&quot;&gt;const arr2 = [...arr1];&lt;/code&gt;는 얕은 복사를 시행합니다. &quot;깊은 복사처럼 작동한다&quot;는 것은 단지 불변형 값 덕분에 두 배열이 독립적이기 때문입니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;메모리 구조&lt;/strong&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;이 생성되면, 배열 자체는 힙(Heap)에 저장되고, 각 요소(&lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;2&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;3&lt;/code&gt;)는 Primitive Value이므로 스택(Stack)에 저장됩니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;const arr2 = [...arr1]&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;스프레드 연산자(&lt;code class=&quot;language-text&quot;&gt;...&lt;/code&gt;)는 &lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;의 각 요소를 복사하여 새로운 배열 &lt;code class=&quot;language-text&quot;&gt;arr2&lt;/code&gt;를 만듭니다.&lt;/li&gt;
&lt;li&gt;배열 자체는 새로운 객체로 힙(Heap)에 저장되지만, 복사된 Primitive 값들은 각각 스택(Stack)에 저장됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;arr2[0] = 100&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;arr2&lt;/code&gt;의 첫 번째 값을 스택(Stack)에서 변경합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;은 독립적인 배열이므로 영향을 받지 않습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;예제 2: Reference Value&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; a&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; c&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;arr1&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 얕은 복사&lt;/span&gt;

arr2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [ { a: 100 }, { b: 2 }, { c: 3 } ]&lt;/span&gt;
&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arr2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [ { a: 100 }, { b: 2 }, { c: 3 } ]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제에서는 &quot;얕은 복사&quot;의 문제가 발생하며, 참조가 공유됩니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;메모리 구조&lt;/strong&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;이 생성되면, 배열 자체는 힙(Heap)에 저장되고, 배열의 각 요소(&lt;code class=&quot;language-text&quot;&gt;{ a: 1 }&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;{ b: 2 }&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;{ c: 3 }&lt;/code&gt;)도 힙(Heap)에 저장됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt; 배열은 힙에 저장된 객체들의 참조(주소)를 가집니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;const arr2 = [...arr1]&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;스프레드 연산자(&lt;code class=&quot;language-text&quot;&gt;...&lt;/code&gt;)는 &lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;의 각 요소의 참조(주소)를 복사하여 새로운 배열 &lt;code class=&quot;language-text&quot;&gt;arr2&lt;/code&gt;를 만듭니다.&lt;/li&gt;
&lt;li&gt;배열 &lt;code class=&quot;language-text&quot;&gt;arr2&lt;/code&gt;는 새로운 객체로 힙(Heap)에 저장되지만, 각 요소는 &lt;code class=&quot;language-text&quot;&gt;arr1&lt;/code&gt;과 동일한 객체를 참조합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;arr2[0].a = 100&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;arr2[0]&lt;/code&gt;이 &lt;code class=&quot;language-text&quot;&gt;arr1[0]&lt;/code&gt;과 동일한 객체를 참조하므로, 변경이 두 배열에 영향을 미칩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;p&gt;얕은 복사는 항상 1차원만 복사하는 것이 핵심입니다. 하지만, 배열의 요소가 불변형 값(Primitive Value)인지, 참조형 값(Reference Value)인지에 따라 결과가 달라질 뿐입니다.&lt;/p&gt;
&lt;p&gt;얕은 복사는 항상 동일한 작업을 수행합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1차원 요소만 복사하고, 요소가 불변형이면 값 복사, 참조형이면 참조 복사.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결과 차이는 배열 요소의 유형(불변형 vs 참조형)에 따라 다릅니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;불변형 값 → 깊은 복사처럼 작동.&lt;/li&gt;
&lt;li&gt;참조형 값 → 얕은 복사로 인해 참조 문제 발생.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;strong&gt;요약&lt;/strong&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;얕은 복사의 본질&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;배열이나 객체의 &lt;strong&gt;1차원 요소만 복사&lt;/strong&gt;합니다.&lt;/li&gt;
&lt;li&gt;요소가 불변형 값이면 &lt;strong&gt;값을 복사&lt;/strong&gt;하고, 참조형 값이면 &lt;strong&gt;참조를 복사&lt;/strong&gt;합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;결과의 차이&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;배열의 요소가 &lt;strong&gt;불변형 값&lt;/strong&gt;이면, &lt;strong&gt;&quot;깊은 복사처럼&quot;&lt;/strong&gt; 보일 뿐입니다.&lt;/li&gt;
&lt;li&gt;배열의 요소가 &lt;strong&gt;참조형 값&lt;/strong&gt;이면, &lt;strong&gt;&quot;얕은 복사처럼&quot;&lt;/strong&gt; 참조를 공유합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;얕은 복사와 깊은 복사를 언제 사용해야 할까?&lt;/h2&gt;
&lt;h3&gt;&lt;strong&gt;1. 얕은 복사(Shallow Copy)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;언제 사용하나요?&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터가 불변형 값(Primitive Value)로만 이루어진 경우.&lt;/li&gt;
&lt;li&gt;객체나 배열을 복사할 때, &lt;strong&gt;수정하지 않는 1차원 데이터&lt;/strong&gt;만 필요할 때.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;수행 속도가 빠르고, 메모리를 덜 사용.&lt;/li&gt;
&lt;li&gt;간단한 데이터 구조에서는 충분히 적합.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;2. 깊은 복사(Deep Copy)&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;언제 사용하나요?&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터에 참조형 값(Reference Value)이 포함된 경우.&lt;/li&gt;
&lt;li&gt;데이터가 &lt;strong&gt;중첩된 구조&lt;/strong&gt;(객체 안의 객체, 배열 안의 배열)를 가지는 경우.&lt;/li&gt;
&lt;li&gt;복사본이 원본과 완전히 독립적이어야 할 때.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;원본 데이터와 완전히 독립적이므로, 수정해도 영향을 주지 않음.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;결론&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;복사 작업에서 얕은 복사와 깊은 복사의 차이를 명확히 이해하고, 데이터 구조와 사용 목적에 따라 올바른 방법을 선택해야 합니다.&lt;/li&gt;
&lt;li&gt;단순히 &quot;복사다!&quot;라고 덤비면 참조 문제나 의도치 않은 결과가 발생할 가능성이 큽니다.&lt;/li&gt;
&lt;li&gt;문제가 복잡하거나 확신이 없을 때는 깊은 복사를 기본으로 고려하는 것이 안전합니다. &lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[FastAPI 의존성 주입의 심화 활용법과 주의점]]></title><description><![CDATA[의존성 간 관계 자동 해결 FastAPI는 의존성 간의 관계를 자동으로 해결해 주기 때문에 개발자는 복잡한 로직을 작성하지 않아도 FastAPI가 필요한 리소스를 적절히 연결해줍니다.  FastAPI…]]></description><link>https://sharknia.github.io/FastAPI-의존성-주입의-심화-활용법과-주의점/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI-의존성-주입의-심화-활용법과-주의점/</guid><pubDate>Mon, 30 Dec 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/bc95502d239744b8dcf04017e835e840/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVR42g2QW1MSAQCF9y/UmIqaiQiKIshFUIjlflt2YWG5reAiN7kvIBcBERG1UqwRGzUna5zMaSonp6brVD7USzP1VD8i/0Gv7cx5OQ/ffGcOcKWjq7unb5TLl4EKUKlUaPWiSREMm2QQFk5nzLDRjuNzwdlAPJIppJfqhZ2d9WenB18+Pf/54yPQe/2GWDLF5fE5PD4RTQkl06A38+LbL4dvVq7ReUJRlz8QCM+l85nqcmGxmt1qrRw9vHd+9uji80tgkM5gsTmcCcE4X8SVyEUSqSZStxdajkTBl6tZyFp27XYqHXfh+FKtmC+mm83y7u7G8eP2m/NjAMX9fIEIVCjisTBnQgTbnQYEUfui9o3jxOHbk/N3uf1Xpe29xt1Wsdmor1bL1dzW1srB/ubpyR4gBrV9AyzxTLF19lVndQikCoUR0TkIc+nA/v7y6PJf++JPqn5nY3tzPjFP5pLlSq6xWm61GhQPMJijNFof11MBM21/NBFOkRrMq8W808ic9tbrxPe/y4dPXYEotTybTUaigWw+WSpnV5sVigfoMrPB5mRzBTyYgPLt0u6TKS0kNVgRl9dbaQXWHkDeCFmuIjZbmozF0/FIIpyh/NUFyg90DYxINabRcZ4OQoQGjwILmDE3uVgzeQgDHgjF4m7Cb/EHYSuMOjG3D58NEqFYKJmJ5YskoFapBoeGGUy2Sm+SgGrqczF5f/3DbyOKsQVTkN1BLFSMRp0BMpltKBULhjlncCLoD0VDAH14TCAU9tMHmUzWmNoq0pjF2DxENoWTYolMroHME0qjTKm8qVarjJDaBOlhBEJR1OnAcDfQ0dlz9Vp3J62X1s/o6h+iszgCqXxsUsoc4fRShS+iwhNPi+VKmVoLavVKg1EDQQaLxYSi/wGAbunpqWm/CAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/bc95502d239744b8dcf04017e835e840/ca1dc/image1.png&apos; srcset=&apos;/static/bc95502d239744b8dcf04017e835e840/e7570/image1.png 170w,
/static/bc95502d239744b8dcf04017e835e840/f46e7/image1.png 340w,
/static/bc95502d239744b8dcf04017e835e840/ca1dc/image1.png 680w,
/static/bc95502d239744b8dcf04017e835e840/02d09/image1.png 1020w,
/static/bc95502d239744b8dcf04017e835e840/9d567/image1.png 1360w,
/static/bc95502d239744b8dcf04017e835e840/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;의존성 간 관계 자동 해결&lt;/h2&gt;
&lt;p&gt;FastAPI는 의존성 간의 관계를 자동으로 해결해 주기 때문에 개발자는 복잡한 로직을 작성하지 않아도 FastAPI가 필요한 리소스를 적절히 연결해줍니다. &lt;/p&gt;
&lt;h3&gt;FastAPI 의존성 주입의 기본 개념&lt;/h3&gt;
&lt;p&gt;의존성은 서로 다른 의존성을 참조할 수 있으며, FastAPI는 이를 바탕으로 &lt;strong&gt;의존성 그래프&lt;/strong&gt;를 생성해 자동으로 해결합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FastAPI

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;DB 세션&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_redis_client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Redis 클라이언트 (DB: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;db_session&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redis_client&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_redis_client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;redis_client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; redis_client&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_db_session&lt;/code&gt;: DB 세션 문자열을 반환하는 의존성.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_redis_client&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;get_db_session&lt;/code&gt;의 반환값을 의존성으로 사용.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;read_data&lt;/code&gt; 엔드포인트: &lt;code class=&quot;language-text&quot;&gt;get_redis_client&lt;/code&gt;의 반환값을 의존성으로 사용.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;FastAPI는 &lt;code class=&quot;language-text&quot;&gt;read_data&lt;/code&gt; → &lt;code class=&quot;language-text&quot;&gt;get_redis_client&lt;/code&gt; → &lt;code class=&quot;language-text&quot;&gt;get_db_session&lt;/code&gt; 순서로 의존성을 파악해 의존성 그래프를 생성합니다. 가장 하위 의존성(&lt;code class=&quot;language-text&quot;&gt;get_db_session&lt;/code&gt;)부터 실행하여 결과를 상위로 전달합니다. 최종적으로 &lt;code class=&quot;language-text&quot;&gt;get_redis_client&lt;/code&gt;의 결과를 &lt;code class=&quot;language-text&quot;&gt;read_data&lt;/code&gt; 함수로 전달합니다.&lt;/p&gt;
&lt;h3&gt;의존성 간 관계 자동 해결의 장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;복잡한 의존성 관리 단순화&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FastAPI는 의존성 간의 관계를 자동으로 파악하고 올바른 순서로 호출합니다.&lt;/li&gt;
&lt;li&gt;개발자는 의존성 간의 호출 순서를 걱정하지 않아도 됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;유연한 확장 가능성&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;새로운 의존성을 추가하거나 기존 의존성을 수정해도 FastAPI가 자동으로 관계를 재구성합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;의존성 간 관계 자동 해결시 주의점&lt;/h3&gt;
&lt;p&gt;의존성 함수가 서로를 참조하는 경우(&lt;code class=&quot;language-text&quot;&gt;A → B → A&lt;/code&gt;), FastAPI는 순환 참조를 해결하지 못합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;중간 레벨의 의존성을 생성하거나 의존성을 리팩토링해 순환을 제거해야 합니다.&lt;/p&gt;
&lt;h2&gt;의존성에 매개변수 전달하기&lt;/h2&gt;
&lt;p&gt;FastAPI에서 의존성 함수에 직접 값을 전달하는 기능은 없지만, 아래와 같은 방법으로 유사한 동작을 구현할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;람다(Lambda) 함수로 전달&lt;/h3&gt;
&lt;p&gt;의존성 함수가 동적으로 다른 값을 받을 수 있도록 람다를 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FastAPI

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Value is &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;custom_value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; get_value&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;custom_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom_value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;lambda: get_value(42)&lt;/code&gt;를 통해 &lt;code class=&quot;language-text&quot;&gt;42&lt;/code&gt;를 매개변수로 전달.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Depends()&lt;/code&gt;는 동적으로 생성된 값을 사용할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;의존성 팩토리 함수&lt;/h3&gt;
&lt;p&gt;의존성 함수를 팩토리 함수로 감싸서 동적으로 값을 전달합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FastAPI

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_value_factory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Value is &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; get_value

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;custom_value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_value_factory&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;custom_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom_value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_value_factory(42)&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;get_value&lt;/code&gt;를 반환하며, 내부적으로 &lt;code class=&quot;language-text&quot;&gt;42&lt;/code&gt;를 사용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;이 방법은 더 복잡한 로직에서 유용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;의존성 컨텍스트 전달 (Request State 활용)&lt;/h3&gt;
&lt;p&gt;FastAPI의 &lt;code class=&quot;language-text&quot;&gt;Request.state&lt;/code&gt;를 사용하여 동적으로 데이터를 전달할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Request

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_custom_value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;custom_value

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add_custom_value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; call_next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;custom_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;
    response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; call_next&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;custom_value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_custom_value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;custom_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom_value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;미들웨어를 사용해 &lt;code class=&quot;language-text&quot;&gt;Request.state&lt;/code&gt;에 값을 추가.&lt;/li&gt;
&lt;li&gt;의존성 함수에서 &lt;code class=&quot;language-text&quot;&gt;Request.state&lt;/code&gt; 값을 참조.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;의존성 클래스 활용&lt;/h3&gt;
&lt;p&gt;의존성 클래스를 사용해 동적으로 상태를 전달할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ValueProvider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__call__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Value is &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;custom_value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ValueProvider&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;custom_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom_value&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ValueProvider&lt;/code&gt; 클래스는 생성자에서 값을 받고, 호출 시 이 값을 반환.&lt;/li&gt;
&lt;li&gt;FastAPI의 &lt;code class=&quot;language-text&quot;&gt;Depends&lt;/code&gt;는 호출 가능한 객체를 의존성으로 사용할 수 있으므로 동적으로 값을 전달 가능.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;주의점&lt;/h3&gt;
&lt;p&gt;일반적으로 FastAPI의 의존성 주입 시스템을 우회해서 매개변수를 전달하는 방식(람다 함수나 팩토리 함수 등)은 유지보수성과 가독성 측면에서 좋지 않을 수 있습니다. 이러한 방법은 특정 상황에서는 유용하지만, 남용할 경우 프로젝트의 구조를 복잡하게 만들고 디버깅을 어렵게 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;람다 함수, 팩토리 함수 등 우회 방법은 특수한 상황에서만 신중히 사용해야 합니다.&lt;/p&gt;
&lt;p&gt;가능한 경우, 동적 값을 처리하는 로직은 상위 레벨(미들웨어, 라우터)에서 관리하고 의존성 함수는 단순화하는 것을 권장합니다.&lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;Annotated&lt;/code&gt; 를 활용한 의존성의 선언&lt;/h2&gt;
&lt;p&gt;의존성의 선언에서 &lt;code class=&quot;language-text&quot;&gt;Annotated&lt;/code&gt;는 0.95 버전 이후에 추가된 기능으로, 타입 힌트를 더 명확히 표현하고 코드를 더 읽기 쉽게 만들어줍니다. FastAPI에서 &lt;code class=&quot;language-text&quot;&gt;Annotated&lt;/code&gt;를 사용하는 것은 가독성 외에도 타입 안정성, 코드 재사용성, 확장 가능성 등 여러 측면에서 이점을 제공합니다.&lt;/p&gt;
&lt;h3&gt;코드 가독성 및 명확성&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Annotated&lt;/code&gt;를 사용하면 의존성의 역할을 타입 힌트를 통해 명확히 나타낼 수 있습니다. 코드의 의도를 더 직관적으로 파악할 수 있으므로, 팀원 간 협업이나 유지보수 시 유리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Annotated
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends

AdminUser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;admin_permissions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/admin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;admin_only_route&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AdminUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Hello, &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;AdminUser&lt;/code&gt;: 타입 힌트를 통해 이 변수가 관리자의 인증과 권한 검증을 포함한다는 점을 명확히 전달&lt;/li&gt;
&lt;li&gt;가독성과 의미 전달이 좋아져 코드 리뷰와 유지보수가 용이&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;타입 안정성 및 도구 지원&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Annotated&lt;/code&gt;는 타입 힌팅을 강화하여, IDE의 자동 완성과 정적 분석 도구(&lt;code class=&quot;language-text&quot;&gt;mypy&lt;/code&gt; 등)가 더 정확하게 동작하도록 도와줍니다. 복잡한 의존성 체계를 사용할 때 코드 안정성을 높이는 데 기여합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;AdminUser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;admin_permissions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;IDE에서 &lt;code class=&quot;language-text&quot;&gt;AdminUser&lt;/code&gt;를 사용할 때 자동 완성 기능으로 &lt;code class=&quot;language-text&quot;&gt;Depends(admin_permissions)&lt;/code&gt;가 연결됨.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;mypy&lt;/code&gt;와 같은 도구는 타입 충돌을 방지하고 코드 품질을 유지하는 데 도움을 줌.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;확장 가능성&lt;/h3&gt;
&lt;p&gt;타입 힌트와 의존성을 결합하여 더 복잡한 구조나 동작을 설계할 수 있습니다. 데이터를 검증하거나 추가적인 메타데이터를 전달하는 데 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pydantic &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; BaseModel
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Annotated
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AdminPayload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BaseModel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    action&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;

AdminRequest &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;AdminPayload&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;admin_permissions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/admin/action&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;perform_admin_action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AdminRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;action_performed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;AdminRequest&lt;/code&gt;: 관리자의 인증/인가와 함께 데이터를 검증하는 구조로 확장 가능.&lt;/li&gt;
&lt;li&gt;인증/인가와 데이터 검증을 결합하여 더욱 강력한 의존성 관리 가능.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;모든 의존성을 Annotated로 바꿔야 할까?&lt;/h3&gt;
&lt;p&gt;아니요, 기존 방식(&lt;code class=&quot;language-text&quot;&gt;Depends&lt;/code&gt;)도 완벽히 동작합니다. Annotated는 더 명확한 타입 힌팅과 가독성을 제공하지만, 필수는 아닙니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI의 의존성 주입(Dependency Injection)]]></title><description><![CDATA[서론 이번에 FastAPI 과제를 진행하면서 아무생각없이 기존에 짜던대로 코드를 짜고 피드백을 받은 후, 제가 의존성 주입을 할 때 Depends…]]></description><link>https://sharknia.github.io/FastAPI의-의존성-주입Dependency-Injection/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI의-의존성-주입Dependency-Injection/</guid><pubDate>Thu, 26 Dec 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7eac015e439d346d54403594c48b4e79/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdklEQVR42hVSa0/aYBTuD9w/2Ef3wZgsZmZTly0alTnUKQaNuiF3aUuBFnqlLZRLBSrlIpQqCi1FZWZTgbjEfZnJXpMnJ+ec5DnnOReIEQRWEEiWBSBoOkbRBMMA4BQdpchIIhGOx1EcR6KxIywSCId9COKDYW8IdodCEM0LNM8rleppS2/qrbN2u9Zs1hoNYNV6vVSpFFX1WFFkRckXi2k5L8kylUwGUMwLIxAtCHRS6A8G/56fh+M/9XbvYTT++/R0/zAEzvjx8W748Ovu7vrnoNvrdQyzrmliRrI79/woBlG8wKVSYr500TE7pgGzktJoFdT6pWk29LNOt2v1LdOyqo2mpuskJ3BSzh0MTb7/9EIGsjkxVVBrfDrniXHbXmwniAfiHJ+RsyU1ni1LVV27uExlZSl33DxvfztEXr2efDu/6ENQiBFEThTzNc3HyLMbHj8ajSboKMkCB6XSB7g0Zdtf2fYgETKIEevuyMyaa2p2AXT2wChEgW2LYqJQWz1KOr1orlBU66ftrtG1elVN53MlMgnmysSSmVQ2uwOKMOLOD/ebd/PeF3KSB8olpXpSb4KFX91cdy3rfjT6PRwbVzd61+z0++ZVP1WsgNHKFbXR0g6DyMT0rA+Q4xwXZ1nDNAa3t52edWFY5x2j1b5snp3nyzWxcCKXK9lSWVZOxJzMpjMp+XhjzzUxPecOwlCUonGGSXAcHCO2Dlx2577NsfvFsWvb2l3edC6sOT5/3fxoW59bts+vrM0t2T8srs4s2JY2HPseP4QlyAhJYmQiTMSRGA6eKUwQKE6AEFgAkDzCouAwQKcnhIA7ufzB777Agdf/HzHX2HCB7+/dAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/7eac015e439d346d54403594c48b4e79/ca1dc/image1.png&apos; srcset=&apos;/static/7eac015e439d346d54403594c48b4e79/e7570/image1.png 170w,
/static/7eac015e439d346d54403594c48b4e79/f46e7/image1.png 340w,
/static/7eac015e439d346d54403594c48b4e79/ca1dc/image1.png 680w,
/static/7eac015e439d346d54403594c48b4e79/02d09/image1.png 1020w,
/static/7eac015e439d346d54403594c48b4e79/9d567/image1.png 1360w,
/static/7eac015e439d346d54403594c48b4e79/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;이번에 FastAPI 과제를 진행하면서 아무생각없이 기존에 짜던대로 코드를 짜고 피드백을 받은 후, 제가 의존성 주입을 할 때 Depends()만 사용하는 방식이 구식 방법이라는 것을 뒤늦게 알게 됐습니다. 심지어 공식문서에도 권장하지 않는 방법이라고 적혀있었습니다. &lt;/p&gt;
&lt;p&gt;아니 정말? 이라는 생각이 들어서 공식문서의 커밋 년도까지 확인을 했는데, 공식 문서가 해당 내용으로 작성된 것은 2023년 중순으로 제 작업 이전이었습니다. &lt;/p&gt;
&lt;p&gt;변명의 여지가 없는 것으로, 곰곰이 생각해보니 의존성 주입이라는 친구와 제가 그다지 친하지 않다는 사실을 깨달았습니다. 예를 들면 매개변수는 어떻게 들어가는지, 이게 다른 의존성이 스윽 들어가고 이런 것들 그냥 아무 생각 없이 쓰던 것들이 사실은 제가 정확히 모르고 있다는 사실을 알게 됐습니다. &lt;/p&gt;
&lt;p&gt;그래서 이번 기회에 의존성 주입에 대해 한 번 정리하고 넘어가려고 합니다. &lt;/p&gt;
&lt;h2&gt;의존성 주입(Dependency Injenction) 이란?&lt;/h2&gt;
&lt;p&gt;의존성(dependency)이라는 단어를 한국어로 풀이하면 &quot;다른 것에 기대어 의존하는 상태&quot;를 의미합니다. FastAPI 같은 프로그램에서는 의존성은 어떤 코드가 특정 기능이나 데이터를 수행하기 위해 다른 객체, 함수, 또는 리소스를 필요로 하는 상태를 말합니다.&lt;/p&gt;
&lt;p&gt;예를 들면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Depends
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Annotated

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;데이터베이스 세션&quot;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_items&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &quot;read_items&quot; 함수가 의존성(&lt;code class=&quot;language-text&quot;&gt;get_db&lt;/code&gt;)에 의존합니다.&lt;/p&gt;
&lt;p&gt;프로그램에서 데이터베이스 연결이 필요한 코드가 있다고 합시다. 이때 그 코드는 데이터베이스 연결(리소스)에 의존합니다. 즉, &quot;내가 작동하려면 데이터베이스 연결이 있어야 해!&quot;라고 말하는 상황입니다. FastAPI의 의존성 주입(Dependency Injection)은 이러한 의존성을 명확하게 관리하고, 코드의 재사용성과 유지보수성을 높이는 데 목적을 둡니다.&lt;/p&gt;
&lt;h2&gt;FastAPI의 의존성 주입의 작동&lt;/h2&gt;
&lt;h3&gt;작동 순서&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;종속성 확인&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;함수의 매개변수에 &lt;code class=&quot;language-text&quot;&gt;Depends()&lt;/code&gt;가 있는지 확인합니다. &lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Depends()&lt;/code&gt;는 호출될 함수를 정의하거나, 리소스를 반환하는 팩토리 역할을 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;함수 호출 전 평가(evaluate)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FastAPI는 필요한 의존성을 모두 호출하거나 평가 하여 결과값을 준비합니다.&lt;/li&gt;
&lt;li&gt;예를 들어, 데이터베이스 세션을 생성하거나, 인증 정보를 확인합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;값 전달&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;준비된 의존성을 매개변수로 주입하여 실제 라우터, 미들웨어, 이벤트 핸들러 등에서 사용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;범위(Scope) 관리&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FastAPI는 의존성의 &lt;strong&gt;범위(scope)&lt;/strong&gt;를 관리합니다. (&lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;singleton&lt;/code&gt; 등)&lt;/li&gt;
&lt;li&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt; 범위의 의존성은 요청이 끝나면 자동으로 정리됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;&quot;의존성을 평가한다&quot;는 의미&lt;/h3&gt;
&lt;p&gt;FastAPI에서 의존성을 평가(evaluate)한다는 것은 &lt;code class=&quot;language-text&quot;&gt;Depends()&lt;/code&gt;에 지정된 함수나 객체를 실행하거나 처리하여, 해당 결과값을 준비한다는 뜻입니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;평가(evaluation)는 단순히 함수를 호출하는 것을 넘어서, 해당 의존성이 반환하는 값을 준비하고, 필요한 경우 예외를 처리하거나 적절한 스코프를 설정하는 과정을 포함합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;예시1: 단순한 함수 의존성&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;데이터베이스 세션&quot;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_items&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;FastAPI는 &lt;code class=&quot;language-text&quot;&gt;get_db&lt;/code&gt;를 호출하여 결과값 &lt;code class=&quot;language-text&quot;&gt;&quot;데이터베이스 세션&quot;&lt;/code&gt;을 반환합니다.&lt;/li&gt;
&lt;li&gt;“평가”는 여기서 단순히 &lt;code class=&quot;language-text&quot;&gt;get_db()&lt;/code&gt;를 호출하고, 반환값을 준비하는 과정을 의미합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;예시2: 의존성 내부에 추가 로직이 있는 경우&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;check_auth_header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Header&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; auth &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;secret-token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; HTTPException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;status_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;401&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; detail&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Unauthorized&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; auth&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;이 경우 FastAPI는 &lt;code class=&quot;language-text&quot;&gt;check_auth_header&lt;/code&gt;를 호출하며, 헤더 값이 유효한지 검증합니다.&lt;/li&gt;
&lt;li&gt;&quot;평가&quot;는 검증 로직이 실행되어 예외가 발생할 수도 있는 전체 과정을 포함합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;의존성은 반드시 함수여야 할까?&lt;/h3&gt;
&lt;p&gt;의존성은 반드시 함수일 필요는 없으며, 호출 가능한 객체도 사용할 수 있습니다. FastAPI의 &lt;code class=&quot;language-text&quot;&gt;Depends()&lt;/code&gt;는 &lt;strong&gt;함수뿐 아니라 호출 가능한 객체(callable)&lt;/strong&gt;도 의존성으로 사용할 수 있습니다. 호출 가능한 객체란, &lt;code class=&quot;language-text&quot;&gt;__call__&lt;/code&gt; 메서드를 구현한 클래스 인스턴스를 의미합니다.&lt;/p&gt;
&lt;h4&gt;예시1: 호출 가능한 클래스&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DBSession&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__call__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;데이터베이스 세션&quot;&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DBSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;DBSession&lt;/code&gt; 클래스는 호출 가능한 객체로 동작하며, &lt;code class=&quot;language-text&quot;&gt;__call__&lt;/code&gt; 메서드가 실행됩니다.&lt;/li&gt;
&lt;li&gt;FastAPI는 &lt;code class=&quot;language-text&quot;&gt;DBSession&lt;/code&gt;의 인스턴스를 평가하여, &lt;code class=&quot;language-text&quot;&gt;__call__&lt;/code&gt;의 반환값 &lt;code class=&quot;language-text&quot;&gt;&quot;데이터베이스 세션&quot;&lt;/code&gt;을 준비합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;예시2: 상수 값 (Callable이 아님)&lt;/h4&gt;
&lt;p&gt;일반적으로 의존성은 &lt;strong&gt;함수 또는 호출 가능한 객체&lt;/strong&gt;를 사용하는 것이 일반적이지만, 다음과 같은 객체도 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;db_config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5432&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db_config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;db_config&lt;/code&gt;는 상수 값이지만, 람다 함수 &lt;code class=&quot;language-text&quot;&gt;lambda: db_config&lt;/code&gt;로 감싸서 의존성으로 주입할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;FastAPI 의존성의 범위(Scope)&lt;/h3&gt;
&lt;h4&gt;범위란?&lt;/h4&gt;
&lt;p&gt;범위는 의존성이 언제 생성되고 언제 소멸되는지를 정의합니다. FastAPI는 요청(Request) 기반의 애플리케이션이므로 일반적으로는 요청이 처리되는 동안 의존성이 유지되다가 요청이 끝날 때 정리됩니다.&lt;/p&gt;
&lt;h4&gt;주요 범위(scope) 종류&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt; 범위 (기본값)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;요청이 들어오면 의존성이 생성되고, 요청이 끝나면 소멸됩니다.&lt;/li&gt;
&lt;li&gt;대부분의 의존성은 기본적으로 &lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt; 범위를 가집니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    db &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;데이터베이스 세션 생성&quot;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; db
    &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;데이터베이스 세션 종료&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_items&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_db&lt;/code&gt;는 요청이 들어올 때 실행되고, 요청이 끝날 때 &lt;code class=&quot;language-text&quot;&gt;finally&lt;/code&gt; 블록이 실행되어 세션이 종료됩니다.&lt;/li&gt;
&lt;li&gt;요청이 끝난 후 해당 의존성(&lt;code class=&quot;language-text&quot;&gt;db&lt;/code&gt;)은 더 이상 사용되지 않습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;singleton&lt;/code&gt; **** 범위&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;애플리케이션이 시작된 후 종료될 때까지 의존성을 단 한 번만 생성하고 유지합니다.&lt;/li&gt;
&lt;li&gt;FastAPI에서 특정 경우 &lt;code class=&quot;language-text&quot;&gt;@lru_cache&lt;/code&gt;를 사용해 싱글톤 동작을 흉내낼 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; functools &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; lru_cache

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@lru_cache&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 설정 정보&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_items&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_config&lt;/code&gt;는 애플리케이션 생명주기 동안 단 한 번 실행됩니다.&lt;/li&gt;
&lt;li&gt;이후 모든 요청은 같은 객체를 재사용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;session&lt;/code&gt; 범위&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;특정 세션 동안 유지되는 의존성을 정의할 때 사용됩니다.&lt;/li&gt;
&lt;li&gt;FastAPI에서 기본적으로 제공하지 않지만, &lt;code class=&quot;language-text&quot;&gt;Dependency Injection Containers&lt;/code&gt;(의존성 관리 라이브러리)를 사용해 구현할 수 있습니다.&lt;/li&gt;
&lt;li&gt;하지만 FastAPI는 기본적으로 RESTful 아키텍처를 따르기 때문에, 요청(Request) 단위를 기본 범위(scope)로 처리합니다. 각 요청은 독립적으로 처리되며, 요청이 끝나면 관련 자원(예: DB 세션, 인증 정보 등)이 정리됩니다. 따라서 일반적인 FastAPI 애플리케이션에서는 세션 범위(scope)를 따로 고려할 필요가 없습니다.&lt;/li&gt;
&lt;li&gt;다만, WebSocket, 장기 실행 작업, 상태를 유지해야 하는 특수한 경우에는 세션 스코프를 고려할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;lru_cache&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;lru_cache&lt;/code&gt;는 Python의 내장 데코레이터로, 함수의 반환값을 캐싱하여 이후 호출 시 동일한 결과를 반환하는 데 사용됩니다. 이를 활용해 싱글톤 객체를 쉽게 구현할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; functools &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; lru_cache

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@lru_cache&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db_host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;db_port&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5432&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Annotated&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;FastAPI에서 설정 정보나 리소스와 같이 &lt;strong&gt;상태를 유지하지 않는 객체&lt;/strong&gt;를 공유할 때는 &lt;code class=&quot;language-text&quot;&gt;lru_cache&lt;/code&gt;를 사용하는 것이 훨씬 더 일반적입니다.&lt;/p&gt;
&lt;p&gt;직접 싱글톤을 구현하는 경우는 다음과 같은 상황에서 주로 사용됩니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;복잡한 초기화 로직: 초기화 과정에서 외부 리소스를 다루거나 복잡한 설정을 적용해야 할 때.&lt;/li&gt;
&lt;li&gt;상태를 유지해야 하는 경우: 싱글톤 객체가 내부적으로 상태를 관리해야 할 경우.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;의존성 사용시 주의점&lt;/h3&gt;
&lt;p&gt;보통 의존성은 Router Function에서 사용합니다. Request의 시작과 동시에 의존성을 사용하는게 일반적입니다. 하지만 의존성 주입이 라우터에서만 가능한 것은 아닙니다. &lt;/p&gt;
&lt;p&gt;따라서 라우터가 아닌 서비스 레이어에서 직접 의존성을 주입해 사용(클래스등을 활용)하는 것이 기술적으로 가능하지만, FastAPI의 &lt;strong&gt;의존성 관리 철학&lt;/strong&gt;과 &lt;strong&gt;응집성/분리성&lt;/strong&gt;의 원칙에 따라 판단해야 합니다. &lt;/p&gt;
&lt;p&gt;일반적으로, &lt;strong&gt;라우터에서 의존성을 주입한 후 서비스에 전달하는 방식&lt;/strong&gt;이 권장됩니다. 이는 의존성을 명확히 관리하고, 서비스 레이어를 테스트하기 쉽고, FastAPI와의 결합도를 줄이는 데 유리하기 때문입니다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;의존성 주입은 반복되는 코드를 획기적으로 줄이면서도 결합도가 떨어져 유지보수가 굉장히 쉬워지고, 테스트코드를 짤 때에도 독립된 코드이므로 훨씬 수월해지므로 장점이 많습니다. &lt;/p&gt;
&lt;p&gt;다만 의존성이 지나치게 중첩되면 코드의 복잡도가 증가할 수 있어 주의가 필요합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Python Mocking시 patch 경로 문제 해결하기]]></title><description><![CDATA[서론 테스트 코드를 작성하다 보면 을 자주 사용하게 됩니다. 특히 의 는 외부 의존성을 대체하고 독립적인 테스트를 작성할 때 매우 유용합니다. 그런데 최근에 테스트를 작성하면서 Mocking…]]></description><link>https://sharknia.github.io/Python-Mocking시-patch-경로-문제-해결하기/</link><guid isPermaLink="false">https://sharknia.github.io/Python-Mocking시-patch-경로-문제-해결하기/</guid><pubDate>Thu, 19 Dec 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/6401512079ec88240f4703d5f439c088/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQklEQVR42jVSa2sTQRTdP2QREUXQT4J+ElSEilQr+KClIgapH6TRVmhD6yOtNiVka9J089jmsc/sc3Z2ZnZ2k9itNJZa1F/jbUS4XDhwz5xz7h1BD4lBiElIF2EjDAHq/zoOtSC0I46SBGDHxyahCgqarm/8nxGA06MsX+tkRdmkzGLMiiKHMTwcHvw88mK+WKwqKGx4VHaCqVUxJ5t+HKvwNCZCvqH3aLTZVOqWBxhofj9JfoxImq5sS5fuvzg/OWcwbvJYMp1VqRulBwZhekihhJYb2Iy5LAJNZyxbUq1soXzj+dtz9zIXpzILpVp48ic+Pt7zwCotdnogZpJIC5kAwbSQgnObcejuYPgs92Xi1pMrDzJn78zu2IE+Otl0+OHvX17SLynWp6ZpUJjkBokEyUI7hmfSCHbjJ0lJdyfnly/cnbs8/XLi9lPYguhQu59+qMjFlm6yWKdcwayLIx2U65ZfNVwVU1Fz31XaM2vi9ZnXZ24+fph9n/vaDL7t6zR2k8GuYdN0v3/4Xce0jWjDpRqmgoJIB0F6VrPRcrl1bTZ79dEr2fa8/mB66fPsSmGpuLtWbS8Upfn1shP3XZ4oCPhMBdtdBCclbThjSBHcAOF8Vd6Q9uqWI7sIstA0bWO2rVrrtY4aELHbWyw1IbBG+SlZCUjD9lsehrvDzoIklgzrTaGy1dIGR6OaE5R12yTM5bET8Y26KioOZNHImKwGFPjqacGvIlAWix2ebMnqx1qn7QPkkAtCQoFNiKmOyX8BMYS/hpYhDPUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/6401512079ec88240f4703d5f439c088/ca1dc/image1.png&apos; srcset=&apos;/static/6401512079ec88240f4703d5f439c088/e7570/image1.png 170w,
/static/6401512079ec88240f4703d5f439c088/f46e7/image1.png 340w,
/static/6401512079ec88240f4703d5f439c088/ca1dc/image1.png 680w,
/static/6401512079ec88240f4703d5f439c088/02d09/image1.png 1020w,
/static/6401512079ec88240f4703d5f439c088/9d567/image1.png 1360w,
/static/6401512079ec88240f4703d5f439c088/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;테스트 코드를 작성하다 보면 &lt;code class=&quot;language-text&quot;&gt;Mocking&lt;/code&gt;을 자주 사용하게 됩니다. 특히 &lt;code class=&quot;language-text&quot;&gt;pytest-mock&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;mocker.patch&lt;/code&gt;는 외부 의존성을 대체하고 독립적인 테스트를 작성할 때 매우 유용합니다. 그런데 최근에 테스트를 작성하면서 Mocking을 적용했음에도 불구하고 원래 함수가 호출되는 문제를 겪었습니다.&lt;/p&gt;
&lt;p&gt;결론부터 말하면, Mocking할 함수의 &quot;사용 경로&quot;와 &quot;선언 경로&quot;를 혼동한 것이 문제였습니다. 이 블로그에서는 이 문제의 원인과 해결 방법을 공유하겠습니다.&lt;/p&gt;
&lt;h2&gt;문제 상황&lt;/h2&gt;
&lt;h3&gt;테스트 대상 코드&lt;/h3&gt;
&lt;p&gt;테스트하려는 서비스 함수는 아래와 같이 특정 &lt;code class=&quot;language-text&quot;&gt;Diary&lt;/code&gt;와 관련된 자산 정보를 조회합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domains&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;diaries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;repositories &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; get_diary_by_id
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domains&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;diary_assets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;repositories &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; get_assets_by_diary_id
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domains&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;diary_assets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;schemas &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AssetDetailResponse

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_assets_by_diary_service&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Session&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; diary_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;AssetDetailResponse&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    diary &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; get_diary_by_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; diary_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; diary&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; HTTPException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;status_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; detail&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Diary not found&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; diary&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; user_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; HTTPException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;status_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;403&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; detail&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;You do not have permission to access this diary&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    diary_assets &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; get_assets_by_diary_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; diary_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        AssetDetailResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            diary_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;diary_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            asset_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;asset_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            amount&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;amount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            buy_price&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buy_price&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            created_at&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;created_at&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            updated_at&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;asset&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;updated_at&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; asset &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; diary_assets
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 함수에서 &lt;code class=&quot;language-text&quot;&gt;get_diary_by_id&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;get_assets_by_diary_id&lt;/code&gt;는 외부 레포지토리를 호출합니다. 이를 Mocking하여 독립적인 테스트를 작성하려고 했습니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;잘못된&lt;/strong&gt; Mocking&lt;/h3&gt;
&lt;p&gt;처음에는 아래와 같이 Mocking을 작성했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;mocker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;patch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;app.domains.diaries.repositories.get_diary_by_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;mock_diary&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
mocker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;patch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;app.domains.diary_assets.repositories.get_assets_by_diary_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;mock_assets&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드가 올바르게 작동해 &lt;code class=&quot;language-text&quot;&gt;get_diary_by_id&lt;/code&gt; 메소드가 mock_diary을 리턴할 것이라고 예상했지만, 테스트 중 mocker가 아니라 실제 &lt;code class=&quot;language-text&quot;&gt;get_diary_by_id&lt;/code&gt; 함수가 호출되었습니다(이 부분은 몇 번의 실패 끝에 실제 함수에 로그를 남겨 확인할 수 있었습니다.) &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;문제의 원인&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Mocking의 대상은 함수가 선언된 위치가 아니라, 테스트 대상 함수에서 해당 함수를 가져오는 경로여야 합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get_assets_by_diary_service&lt;/code&gt; 함수는 &lt;code class=&quot;language-text&quot;&gt;app.domains.diary_assets.services&lt;/code&gt; 모듈에서 &lt;code class=&quot;language-text&quot;&gt;get_diary_by_id&lt;/code&gt;를 import하여 사용합니다.&lt;/li&gt;
&lt;li&gt;따라서, Mocking할 때도 &lt;code class=&quot;language-text&quot;&gt;services&lt;/code&gt; 모듈에서 &lt;code class=&quot;language-text&quot;&gt;get_diary_by_id&lt;/code&gt;를 사용하는 경로를 지정해야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;해결: 올바른 Mocking&lt;/h2&gt;
&lt;p&gt;아래와 같이 경로를 수정해야 Mocking이 제대로 적용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;mocker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;patch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;app.domains.diary_assets.services.get_diary_by_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;mock_diary&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
mocker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;patch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;app.domains.diary_assets.services.get_assets_by_diary_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;mock_assets&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 테스트 대상 함수가 사용하는 의존성을 올바르게 Mocking할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;정리&lt;/h2&gt;
&lt;h3&gt;Mocking의 핵심: &quot;사용 경로를 기준으로&quot;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;테스트 대상 함수에서 import된 경로를 기준으로 설정해야 합니다.&lt;/li&gt;
&lt;li&gt;함수가 선언된 원래 위치를 Mocking하면, 테스트 대상 함수에서는 여전히 원래 함수를 호출하게 됩니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;&lt;strong&gt;왜 이런 문제가 발생할까?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Python에서 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt;는 모듈 간의 의존성을 설정합니다. 테스트 대상 함수가 의존성을 import한 순간, Python은 해당 모듈의 네임스페이스에 함수를 바인딩합니다. 따라서 Mocking은 실제 사용된 모듈의 네임스페이스에서 함수 대체를 수행해야 효과가 있습니다.&lt;/p&gt;
&lt;p&gt;이 문제는 &lt;code class=&quot;language-text&quot;&gt;unittest.mock&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;pytest-mock&lt;/code&gt; 등 모든 Mocking 라이브러리에서 동일하게 발생할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이 문제로 몇 시간을 헤매면서 Mocking의 원리를 제대로 이해하게 되었습니다. 지금은 당연하게 느껴지지만, 처음 겪을 때는 정말 답답했습니다. 알게된 후에도 자주 하게 되는 실수로, 제일 먼저 잘못된건 아닌지 확인하게 되는 습관이 들었습니다. &lt;/p&gt;
&lt;p&gt;이 경우에는 실제 함수에 로그를 남겨보는 것이 가장 알기 쉬웠습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Docker에서 Python 환경 변수 관리]]></title><description><![CDATA[문제 상황 최근 Python 프로젝트에서 Docker를 사용해 컨테이너를 실행하면서 환경 변수가 제대로 반영되지 않는 문제를 겪었습니다. Docker의  옵션을 사용해 환경 변수를 전달했지만, 코드 실행 결과는 Docker…]]></description><link>https://sharknia.github.io/Docker에서-Python-환경-변수-관리/</link><guid isPermaLink="false">https://sharknia.github.io/Docker에서-Python-환경-변수-관리/</guid><pubDate>Fri, 29 Nov 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;문제 상황&lt;/h2&gt;
&lt;p&gt;최근 Python 프로젝트에서 Docker를 사용해 컨테이너를 실행하면서 환경 변수가 제대로 반영되지 않는 문제를 겪었습니다. Docker의 &lt;code class=&quot;language-text&quot;&gt;--env-file&lt;/code&gt; 옵션을 사용해 환경 변수를 전달했지만, 코드 실행 결과는 Docker가 전달한 값이 아닌 로컬 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일의 값이 사용되는 이상한 상황이 발생했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; --env-file .env &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; my_app my_image&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Docker Run에서 사용한 .env 파일에서 &lt;code class=&quot;language-text&quot;&gt;KEYWORD=스타일러&lt;/code&gt;를 설정했지만, 프로그램은 여전히 &lt;code class=&quot;language-text&quot;&gt;KEYWORD=콜라&lt;/code&gt;를 사용하고 있었습니다.&lt;/p&gt;
&lt;h2&gt;원인 분석&lt;/h2&gt;
&lt;p&gt;Python에서 환경 변수를 관리하기 위해 &lt;code class=&quot;language-text&quot;&gt;python-dotenv&lt;/code&gt; 라이브러리의 &lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt;를 사용하고 있었습니다. 이 라이브러리는 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일의 내용을 Python 환경 변수로 로드해주는 편리한 도구입니다.&lt;/p&gt;
&lt;p&gt;하지만, Docker와 &lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt;를 함께 사용할 때 충돌이 발생했습니다.&lt;/p&gt;
&lt;h3&gt;원인의 핵심&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Docker 환경 변수: &lt;code class=&quot;language-text&quot;&gt;-env-file&lt;/code&gt; 옵션으로 전달된 값은 컨테이너 실행 시 시스템 환경 변수로 설정됩니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt;의 동작:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일의 내용을 Python 환경 변수로 설정.&lt;/li&gt;
&lt;li&gt;기본적으로 이미 존재하는 환경 변수는 덮어쓰지 않음.&lt;/li&gt;
&lt;li&gt;하지만 코드가 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일을 명시적으로 읽어, Docker에서 설정된 환경 변수를 덮어쓰는 문제가 발생.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이로 인해 프로그램은 Docker가 전달한 &lt;code class=&quot;language-text&quot;&gt;KEYWORD=스타일러&lt;/code&gt;가 아닌 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일의 &lt;code class=&quot;language-text&quot;&gt;KEYWORD=콜라&lt;/code&gt;를 사용했습니다.&lt;/p&gt;
&lt;h2&gt;해결 방법&lt;/h2&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt; 제거&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt;는 로컬 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일을 로드하기 위한 도구로, Docker와 함께 사용할 때는 불필요합니다. Docker는 &lt;code class=&quot;language-text&quot;&gt;--env-file&lt;/code&gt;로 전달한 환경 변수를 컨테이너 내부에 자동으로 설정하므로, Python 코드에서는 &lt;code class=&quot;language-text&quot;&gt;os.getenv&lt;/code&gt;만 사용하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; os

&lt;span class=&quot;token comment&quot;&gt;# 환경 변수 읽기&lt;/span&gt;
keyword &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Keyword: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;keyword&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 &lt;code class=&quot;language-text&quot;&gt;load_dotenv&lt;/code&gt;를 제거하니, Docker에서 전달한 환경 변수(&lt;code class=&quot;language-text&quot;&gt;KEYWORD=스타일러&lt;/code&gt;)가 정상적으로 동작했습니다.&lt;/p&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
### Docker에서 환경 변수 확인
&lt;p&gt;Docker 컨테이너가 환경 변수를 올바르게 전달했는지 확인하려면 아래 명령어를 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-it&lt;/span&gt; my_app &lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; KEYWORD&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;KEYWORD=스타일러&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어를 통해 컨테이너 내부에서 설정된 환경 변수를 확인할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;로컬에서는..?&lt;/h2&gt;
&lt;p&gt;로컬에서 실행할 때는 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일을 사용해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dotenv &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; load_dotenv
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; os

load_dotenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
keyword &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Keyword: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;keyword&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;교훈&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Docker와 Python 환경 변수 관리의 중복은 주의해야 합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Docker에서 환경 변수를 관리한다면, Python 코드에서 추가로 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일을 읽지 않아야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;환경 변수 우선순위를 명확히 해야 합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Docker &gt; 시스템 환경 변수 &gt; &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일 순으로 환경 변수가 설정되도록 설계하면 혼란을 줄일 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[SD 카드 기반 디스크 오류 및 해결 과정]]></title><description><![CDATA[서론 최근 ODROID SBC(Single Board Computer)를 사용하는 환경에서 루트 파일 시스템()이 읽기 전용(read-only) 모드로 전환되는 문제를 경험했습니다. 이는 특정 상황에서 발생할 수 있는 디스크 오류로, SD…]]></description><link>https://sharknia.github.io/SD-카드-기반-디스크-오류-및-해결-과정/</link><guid isPermaLink="false">https://sharknia.github.io/SD-카드-기반-디스크-오류-및-해결-과정/</guid><pubDate>Wed, 27 Nov 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0c352fd12751c7e5e8af9c8efe3fa10f/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACb0lEQVR42hVRyU4TAQCdnzAeMBqTgoFEoCJShdrQMqXQbdpZ29LZ931xhrbTgqSttChEUAsJhxoxMX6B0ZPxZvwph/N7L28DNlYW1hZnlx89mJ25s/BwBitnjzrW8LjPyoIfuMNBDy/nHI5443FQdnM5dn/u3t343IPnj2NbiUUAyq4XM2vgRjyxGFt/sjA5H9x8/2YcT6ucab9yw7briQ2PQfdletSy8PTT5NJsLhmHwAS6mwSaSI5CsnUok99cJZHc+emgqfj4/iXv9jrDE9sx21L9zCHzqeTHUG7RxSqYIGGQRrcZLAfIZEVnYI2u8PW8SsP9w5brmqph9Y4Ot3KFl6lNpLi9r1I8Xt4rg2guqdCwwcEmC+ssDGgsYou4IxGWiAcGpQqUYhi05q6kdpaT2y/Ke7H5JVFkbJ3nRLF71DF1zpNrrkTYAgoYPObKNU+qdS3qZtK/mQwNmfXa3fkU4r+ffv39bzVTwklO0PTR5fXVr79Kp68biqnQloADUQBPQAOJCNX65/ODybjtSE0/8NdABFP87ruLdAnbKZZZlgw7gReGpqVaGmvJDZuPnJmqK6CuiDkCZvIoUdlFoAIj6VpnlG04cbDWoHmSUwXZ9h2zY7NRWl8hHBG7FasMYvBo1F6hqxE2vRonE88IwbGmf9rXP4z2gNccTBkQo5/hQb9lUjpbjTayBMziMUChqhoLa0xVYRCWKFyc9MLAbOyRhDVUDs764zGv2pTa7b798rrlRr/KJKQx0dSIySGA2IQksiKREE3k8WIaL4Ghw5sKA1UgQeQ/fDqtYZXAlg8DHS5k8FKarRUiskrfHvwf4Lj96n8h+y4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/0c352fd12751c7e5e8af9c8efe3fa10f/ca1dc/image1.png&apos; srcset=&apos;/static/0c352fd12751c7e5e8af9c8efe3fa10f/e7570/image1.png 170w,
/static/0c352fd12751c7e5e8af9c8efe3fa10f/f46e7/image1.png 340w,
/static/0c352fd12751c7e5e8af9c8efe3fa10f/ca1dc/image1.png 680w,
/static/0c352fd12751c7e5e8af9c8efe3fa10f/02d09/image1.png 1020w,
/static/0c352fd12751c7e5e8af9c8efe3fa10f/9d567/image1.png 1360w,
/static/0c352fd12751c7e5e8af9c8efe3fa10f/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;최근 ODROID SBC(Single Board Computer)를 사용하는 환경에서 루트 파일 시스템(&lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;)이 읽기 전용(read-only) 모드로 전환되는 문제를 경험했습니다. 이는 특정 상황에서 발생할 수 있는 디스크 오류로, SD 카드나 eMMC와 같은 저장 장치를 사용하는 시스템에서 흔히 발생할 수 있습니다. 이번 글에서는 문제 발생 원인과 증상, 그리고 실제로 문제를 해결한 과정을 공유하고자 합니다.&lt;/p&gt;
&lt;h2&gt;문제 증상&lt;/h2&gt;
&lt;p&gt;문제는 다음과 같은 상황에서 처음 발생했습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;시스템에서 디렉토리에 접근하거나 파일을 생성하려고 했을 때 &quot;Read-only file system&quot; 오류가 발생.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;/HDD/develop&lt;/code&gt; 디렉토리에서 Docker 이미지를 빌드하려고 했지만 권한 문제로 실패했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;ERROR: &lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; /home/&lt;span class=&quot;token environment constant&quot;&gt;USER&lt;/span&gt;/.docker: read-only &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; system&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;이후, 권한 문제를 해결하려고 &lt;code class=&quot;language-text&quot;&gt;chmod&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;chgrp&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;usermod&lt;/code&gt; 명령어를 시도했지만 여전히 동일한 오류가 발생했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;chmod: changing permissions of &lt;span class=&quot;token string&quot;&gt;&apos;/etc/passwd&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; Read-only &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; system&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;mount | grep &apos; / &apos;&lt;/code&gt; 명령어를 통해 파일 시스템 상태를 확인한 결과, 루트 파일 시스템이 읽기 전용 모드로 전환된 것을 확인했습니다. ro 라고 써있는 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;/dev/mmcblk1p2 on / &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; ext4 &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ro,noatime,errors&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;remount-ro,stripe&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32753&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;원인 분석&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ro&lt;/code&gt;(read-only) 모드는 파일 시스템에서 심각한 오류가 발생했을 때 시스템이 자동으로 읽기 전용 모드로 전환하는 보호 메커니즘입니다. &lt;code class=&quot;language-text&quot;&gt;/etc/fstab&lt;/code&gt; 파일의 설정에서 &lt;code class=&quot;language-text&quot;&gt;errors=remount-ro&lt;/code&gt; 옵션이 이를 담당합니다. 일반적으로 이는 다음과 같은 이유로 발생할 수 있습니다:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;파일 시스템 손상: 예상치 못한 종료나 전원 문제로 파일 시스템이 손상됨.&lt;/li&gt;
&lt;li&gt;SD 카드 불량: SD 카드나 eMMC 저장 장치의 물리적 손상.&lt;/li&gt;
&lt;li&gt;디스크 용량 부족: 루트 파티션에 남은 공간이 없을 때.&lt;/li&gt;
&lt;li&gt;I/O 오류: 저장 장치와의 통신 문제.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
## 해결 과정
&lt;h3&gt;파일 시스템 복구&lt;/h3&gt;
&lt;p&gt;루트 파일 시스템 복구를 위해 &lt;code class=&quot;language-text&quot;&gt;fsck&lt;/code&gt;(파일 시스템 체크) 도구를 사용했습니다. 이를 위해 먼저 루트 파일 시스템이 마운트된 디스크를 식별했습니다. 제 경우 &lt;code class=&quot;language-text&quot;&gt;/dev/mmcblk1p2&lt;/code&gt;가 루트 디스크였습니다.&lt;/p&gt;
&lt;p&gt;다음 명령어로 파일 시스템 복구를 실행했습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fsck&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt; /dev/mmcblk1p2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;y&lt;/code&gt; 옵션은 모든 수정 사항에 대해 자동으로 &quot;Yes&quot;를 선택하게 합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;fsck&lt;/code&gt; 실행 중, 손상된 블록 및 파일 시스템 불일치를 수정했습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;시스템 재부팅&lt;/h3&gt;
&lt;p&gt;복구 후 시스템을 재부팅하여 파일 시스템이 정상적으로 작동하는지 확인했습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reboot&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;결과&lt;/h2&gt;
&lt;p&gt;재부팅 후 &lt;code class=&quot;language-text&quot;&gt;mount&lt;/code&gt; 명령어로 다시 파일 시스템 상태를 확인한 결과, 루트 파일 시스템이 읽기-쓰기 모드로 마운트된 것을 확인할 수 있었습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;/dev/mmcblk1p2 on / &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; ext4 &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rw,noatime,errors&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;remount-ro,stripe&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32753&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 권한 변경 및 Docker 이미지 빌드 작업도 정상적으로 동작했습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; g+w /HDD/develop
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; hotdeal_alarm &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다만, 해당 문제는 곧 다시 발생했으며 SD 카드 자체에 심각한 물리적인 손상이 생긴것으로 짐작되어 새로운 SD카드를 사기로 결정했습니다. &lt;/p&gt;
&lt;p&gt;이 글을 읽는 여러분은 위의 방법으로 해결되기를 기원합니다.. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django의 startapp]]></title><description><![CDATA[서론: 이란? startapp은 Django에서 새로운 앱(application)을 생성하기 위한 명령어입니다. Django는 프로젝트를 기능별로 나누어 독립적인 모듈(앱)로 구성하는 것을 권장합니다. startapp…]]></description><link>https://sharknia.github.io/Django의-startapp/</link><guid isPermaLink="false">https://sharknia.github.io/Django의-startapp/</guid><pubDate>Wed, 20 Nov 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1b156c54e43f417164aaf00764aba102/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACb0lEQVR42j2QWWsTURzFxy8gfgUR9U1cilJU6gKtqYKiVWNbobjb0kJt0ZDEmKZSW2uzzJLZkqlJOklmz0zTtJnMkkk0C9L6ovgoPvjig+An0DsUhAP/C/f8zj3/C1XZeK0I1woJowgD1TjE5BJAlkQYSqqpUg0RczjY4WGDA7euE0jPx6v5GFQFg43phbheSNg8YguoJZONEuWwS99i17aJQUXG6C2uKKccAQH8rmrFBEAAnKiCpCJs8qghJJlysVxKtt94jMDRxOKV0RxxtdaOMSmKp0RttSliBrBxaK2IgL4QwIDAyRYwU8b9ps2+vSf5jw0XsH6925dvTExGfDORMUqs5BZa7LKl0CZwChiIgHTOzXBXFYkdLR6r8HLy6dJc/6HVyun5tYOPXvcGg4ejYt/48s5KsJWN1stMXSJMIWkIKFTjUVNMgu9pysSGlglo1VdweMg/diAUPJWrnE0L04ve6Qse9dxlGkUknmlrtC2TtkRYYtKFwbBF3FboroLyEoUI5I15JDQwNOm//ST6zBvxzQ5eKnl7ZlZW6Cz9sUQaIlGXCcC7sEuKeF2huhq9LuO/13t+WA9HsyrORsml+yfGgxPXBwLDnvDsVCoa2WRhR6J0KQvKQ4YLJ22JbChka4P5Whd+qSN/Mciz8HKP9ucBI6fvHDl+8dbe3psvxh9n3oXYtdR5VBUKc12V3H3Zre0oxAeV2t5ivtj5n0YsQ4b353f2TeHhk2e8Q3dDAZ+cgVsKvqYIbOj59/SIpTKQ/n9niXBkl++U6c5m9rPNd+qllMgJVLSp0J+2Mp3K+/bGqlVK55F4jqRMhf4HRTuPG6u9IpoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/1b156c54e43f417164aaf00764aba102/ca1dc/image1.png&apos; srcset=&apos;/static/1b156c54e43f417164aaf00764aba102/e7570/image1.png 170w,
/static/1b156c54e43f417164aaf00764aba102/f46e7/image1.png 340w,
/static/1b156c54e43f417164aaf00764aba102/ca1dc/image1.png 680w,
/static/1b156c54e43f417164aaf00764aba102/02d09/image1.png 1020w,
/static/1b156c54e43f417164aaf00764aba102/9d567/image1.png 1360w,
/static/1b156c54e43f417164aaf00764aba102/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론: &lt;code class=&quot;language-text&quot;&gt;startapp&lt;/code&gt;이란?&lt;/h2&gt;
&lt;p&gt;startapp은 Django에서 새로운 앱(application)을 생성하기 위한 명령어입니다. Django는 프로젝트를 기능별로 나누어 독립적인 모듈(앱)로 구성하는 것을 권장합니다. startapp 명령어를 사용하면 앱을 생성하고, 필요한 기본 디렉토리와 파일 구조를 자동으로 생성해줍니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Django의&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;앱&lt;/code&gt;&lt;strong&gt;이란?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Django 앱은 특정 기능이나 도메인을 처리하는 독립적인 모듈입니다. 예를 들어, 블로그 기능이 필요한 경우 &lt;code class=&quot;language-text&quot;&gt;blog&lt;/code&gt;라는 앱을 생성하고, 사용자 관리 기능은 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt;라는 앱으로 나눌 수 있습니다.&lt;/p&gt;
&lt;p&gt;하나의 프로젝트에서 여러 앱을 생성하고 조합하여 큰 시스템을 구성합니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;왜 앱을 나눌까?&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;모듈화: 기능을 분리하여 유지보수가 쉬워집니다.&lt;/li&gt;
&lt;li&gt;재사용성: 다른 프로젝트에서도 독립적으로 앱을 가져다 쓸 수 있습니다.&lt;/li&gt;
&lt;li&gt;확장성: 프로젝트가 커지더라도 각 앱이 독립적으로 관리되므로 확장성이 높아집니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;startapp&lt;/code&gt; 명령어의 역할&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;python manage.py startapp &amp;lt;앱_이름&gt;&lt;/code&gt; 명령을 실행하면, 아래와 같은 기본 파일과 디렉토리를 포함하는 앱 구조가 생성됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;앱_이름/
    ├── migrations/
    │   └── __init__.py  # 마이그레이션 파일 관리
    ├── __init__.py      # Python 패키지 파일
    ├── admin.py         # 관리자 페이지 설정
    ├── apps.py          # 앱 구성 정보
    ├── models.py        # 데이터베이스 모델 정의
    ├── tests.py         # 테스트 케이스 작성
    └── views.py         # 뷰 로직 작성&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;startapp&lt;/code&gt; 사용 방법&lt;/h2&gt;
&lt;h3&gt;명령어 실행&lt;/h3&gt;
&lt;p&gt;프로젝트 디렉토리에서 다음 명령어를 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;python manage.py startapp myapp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt;에 앱 등록&lt;/h3&gt;
&lt;p&gt;생성된 앱을 프로젝트에서 사용하려면 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일의 &lt;code class=&quot;language-text&quot;&gt;INSTALLED_APPS&lt;/code&gt;에 추가해야 합니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 기존 앱들&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;myapp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 새로 생성한 앱 추가&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;앱 내에서 기능 추가&lt;/h3&gt;
&lt;p&gt;생성된 파일들에 모델, 뷰, URL 등 앱의 로직을 작성합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django의 관리자 페이지 만들기]]></title><description><![CDATA[서론 Django의 설치가 끝났고 DB 연결까지 완료됐다면 Django의 관리자 페이지를 활성화 할 수 있습니다.  Django 관리자 페이지 소개 Django…]]></description><link>https://sharknia.github.io/Django의-관리자-페이지-만들기/</link><guid isPermaLink="false">https://sharknia.github.io/Django의-관리자-페이지-만들기/</guid><pubDate>Tue, 29 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/438dd31a95ed6fae82d89e96003e3df8/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZ0lEQVR42iWQa0/aYACF+5emmUj7FnqhpS+9QUtbWqml3G9OnGOioIUJeMMZidOAzrhp1KjbhyVz2Zftr61myfl28jw5OQhKi0E8yhlWKCrOo3QwxOAR/jVgMIITE9qrABkA9MxcGGqGkLbngiQgIUpAjIqhNI+gYcjpFlcsL251CE4CFC/otl9X22tHjxcUJ3PKAglVRjVilh1AaYyEwTAEVAyPCAiIiLMYU9z23p8dzQTIZDqTbrbW+t7Jj+v0eHT/fBNkVTmdb3zorg63oaIHcBZEhP9BACvNoUy21eRN26rU3xyOHM/Ltze+/P32+edt/3KMsnIym999uDj9fZtwMrNoBKNfSPQFpngszJGyxljOm/2dweRj9/w401rf/Hq6Mh69O94j5JSSL+/dTs5+XSeyOZQSSF7FWQkw4stsQAu0pONx6/DqZHp/plTq0M737yad6Ti72aY1G4h62etUvDYhJOWFnJTOh7g45sM4I/kaXwYY2aotQdNhzFyqtixkSqhs6qWl8+9Xm4c7uJji3TKdMOcJiFLQvxpjJQSP+g4Ji8YpUYcpt7kzKG95Wn21uT+cPF3Uel2jUNVqy4X93YO7aeNgKJUq2kYLh4qPICCaAD4fjXOWm+31htNP44fL9Hp7abd//nzjttZRxQkZbs7zqoMuY9hkqbow7HdGgxmCR0KcEoYqKWgh0WBMt7DdW+y0WacMsw3KLDCGm3zbkosNSncjpjtLSZxhP/15VN3iPBtHME7FY8mwqBMJy/+M0BxctSOLFaG4QlkFXM+QVoG08iHVJjUHk01W1O36ciCaBGLqH5BZ8L24/0IWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/438dd31a95ed6fae82d89e96003e3df8/ca1dc/image1.png&apos; srcset=&apos;/static/438dd31a95ed6fae82d89e96003e3df8/e7570/image1.png 170w,
/static/438dd31a95ed6fae82d89e96003e3df8/f46e7/image1.png 340w,
/static/438dd31a95ed6fae82d89e96003e3df8/ca1dc/image1.png 680w,
/static/438dd31a95ed6fae82d89e96003e3df8/02d09/image1.png 1020w,
/static/438dd31a95ed6fae82d89e96003e3df8/9d567/image1.png 1360w,
/static/438dd31a95ed6fae82d89e96003e3df8/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;Django의 설치가 끝났고 DB 연결까지 완료됐다면 Django의 관리자 페이지를 활성화 할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Django 관리자 페이지 소개&lt;/h3&gt;
&lt;p&gt;Django 관리자 페이지는 웹 애플리케이션에서 데이터를 손쉽게 관리할 수 있도록 제공되는 &lt;strong&gt;자동화된 백오피스&lt;/strong&gt;입니다. Django에서 기본적으로 제공하며, 별도의 코딩 없이도 &lt;strong&gt;모델 데이터를 추가, 수정, 삭제&lt;/strong&gt;할 수 있는 UI를 제공합니다. 이 페이지는 개발자와 관리자가 데이터베이스를 직접 접근하지 않아도 웹 상에서 데이터 관리를 효율적으로 할 수 있도록 돕습니다.&lt;/p&gt;
&lt;h3&gt;Django 관리자 페이지의 주요 기능&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;모델 관리: 데이터베이스에 정의된 모델 데이터를 관리할 수 있습니다.&lt;/li&gt;
&lt;li&gt;사용자 관리: 관리자, 스태프 등의 사용자 권한을 설정하고 관리할 수 있습니다.&lt;/li&gt;
&lt;li&gt;보안 기능: Django의 인증 및 권한 관리 기능과 연동되어 보안이 보장됩니다.&lt;/li&gt;
&lt;li&gt;확장성: 커스터마이징이 가능해 필요한 기능을 추가하여 쉽게 확장할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Django 관리자 페이지는 기본적으로 제공되기 때문에, 간단한 설정만으로도 바로 사용할 수 있어 개발 속도를 높이고 데이터 관리의 효율성을 극대화할 수 있는 장점이 있습니다.&lt;/p&gt;
&lt;h2&gt;관리자 페이지 설정&lt;/h2&gt;
&lt;p&gt;관리자 페이지를 사용하기 위해서는 슈퍼유저를 생성해야 합니다. 슈퍼유저를 생성하기 위해서는 슈퍼유저 관리를 위한 기본 인증 테이블이 DB에 존재해야 합니다. &lt;/p&gt;
&lt;p&gt;만약 인증 테이블이 생성되지 않은 상태에서 createsuperuser를 실행한다면 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;django.db.utils.ProgrammingError: relation &lt;span class=&quot;token string&quot;&gt;&quot;auth_user&quot;&lt;/span&gt; does not exist
LINE &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;: &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.user&lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;is_active&lt;span class=&quot;token string&quot;&gt;&quot;, &quot;&lt;/span&gt;auth_user&lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;date_joined&lt;span class=&quot;token string&quot;&gt;&quot; FROM &quot;&lt;/span&gt;auth_user&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;의 오류가 발생합니다. &lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;createsuperuser&lt;/code&gt; 명령을 실행하기 전에 반드시 &lt;code class=&quot;language-text&quot;&gt;migrate&lt;/code&gt; 명령을 먼저 실행해 기본 테이블을 생성해줘야 합니다.&lt;/p&gt;
&lt;h3&gt;마이그레이션 적용&lt;/h3&gt;
&lt;p&gt;docker compse 환경에서의 명령어입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;docker-compose yml 파일 경로&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; run web python manage.py migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Superuser 설정&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;docker-compose yml 파일 경로&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; run web python manage.py createsuperuser&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령을 실행하면, 아래와 같이 관리자 계정에 필요한 정보를 입력하라는 메시지가 표시됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;사용자명: 관리자 페이지에 로그인할 때 사용할 사용자명입니다.&lt;/li&gt;
&lt;li&gt;이메일 주소: 계정과 연결할 이메일 주소입니다.&lt;/li&gt;
&lt;li&gt;비밀번호: 로그인 시 사용할 비밀번호입니다. 두 번 입력하여 확인합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;각 정보를 입력한 후, 성공 메시지가 나타나면 슈퍼유저 생성이 완료된 것입니다.&lt;/p&gt;
&lt;h2&gt;관리자 페이지 접속&lt;/h2&gt;
&lt;p&gt;여기까지 마치면 생성한 계정을 통해 &lt;a href=&quot;http://localhost:8000/admin/&quot;&gt;http://localhost:8000/admin/&lt;/a&gt; 에 접속해서 로그인 할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;관리자 페이지의 깨짐&lt;/h2&gt;
&lt;p&gt;로그인은 되는데, 페이지 모양이 완전히 깨져서 나옵니다. 개발자 도구를 켜서 확인해보니 아래와 같은 오류들이 잔뜩 떠있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/e9d40/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 45.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9ElEQVR42j1S25KiQAz1j3bEOwgICAhya2gQBlTUQR1nyprdqn3dXz8beqf24VSSJgk5Jxk0izn+WCsc7TV+lgU+U4YHS3CPI4FrGOCD3p45R7txhd+/P1iMD8q7hVscqDYYSXAIA0caYjsZg+saavrQ+h4OVHj0NmgcW6CjBr3lmiqQqUsk8gJM1ZDqBmJlCTYbw3x5wYBPJ/hMInRRgDM16WiiLvBxpfjkuchVBbm2RKos0KxNVIaB3UoDI2ap4YDbPjXWsV9OYQ2HGLDZBOcgxCGIUDobnMIELeEYMTR+gMr1EFPBdr7AVlbJyghmUzCF7EQCN0ycsgrRUqcJf/SUJVwZx3vxio9yjxsvcY44TnGOS5LjlpW4F7X4UUd+GzLB5MlTXL+ZPIsctWnBHhLliPS7+BvcSeQLJRREp9BVQau3paGjNFfIljJqotzHkayIibjpINFWiBYyKmUKo9cwnIzQumtUloG9s0ZjWzi4NunnCL8lHQvS0BsNweQ5QpLIG49JBmqkGf/B5dm/peTzGd7TAh2v0EaZoHVOd7gWDd6ynYhrP0FheyjWvrDVJhQbrmnacxijo1xu2LB6DW3S8Kt8xa+6wYPn1Jzj9/FEp5LSGfXn49PS6B5jhjcqbr0tLmT3tvN9hwH2dMcJMXUlCX8B26ZUrsB870YAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/ca1dc/image2.png&apos; srcset=&apos;/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/e7570/image2.png 170w,
/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/f46e7/image2.png 340w,
/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/ca1dc/image2.png 680w,
/static/987b670a2d86d83fdfb2bc9d0e1e6aa9/e9d40/image2.png 1014w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이는 정적파일(static files)이 올바르게 수집되지 않아서 발생하는 문제입니다. &lt;/p&gt;
&lt;h3&gt;정적 파일 수집 및 설정&lt;/h3&gt;
&lt;p&gt;Django는 기본적으로 관리자 페이지에 필요한 JavaScript와 CSS 같은 정적 파일을 서빙하기 위해 collectstatic 명령을 사용합니다. 이 명령어를 통해 모든 정적 파일을 프로젝트의 STATIC_ROOT 디렉토리에 모으고, 웹 서버가 이를 제공할 수 있도록 합니다.&lt;/p&gt;
&lt;h4&gt;STATIC_ROOT 설정 확인&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;STATIC_ROOT&lt;/code&gt;가 다음과 같이 설정되어 있는지 확인합니다. 이 경로로 모든 정적 파일이 모입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; os
BASE_DIR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dirname&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dirname&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;abspath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__file__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

STATIC_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/static/&apos;&lt;/span&gt;
STATIC_ROOT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BASE_DIR&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;staticfiles&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;정적 파일 수집&lt;/h4&gt;
&lt;p&gt;아래의 명령어를 사용해 정적 파일을 수집합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; ./docker/docker-compose.local.yml run web python manage.py collectstatic &lt;span class=&quot;token parameter variable&quot;&gt;--noinput&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;urls.py 설정&lt;/h4&gt;
&lt;p&gt;개발 환경에서는 Django가 &lt;code class=&quot;language-text&quot;&gt;/static/&lt;/code&gt; 경로의 파일들을 직접 제공하도록 &lt;code class=&quot;language-text&quot;&gt;urls.py&lt;/code&gt;에 정적 파일 URL을 추가할 수도 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conf &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; settings
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conf&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;static &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; static
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; admin
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;admin/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; admin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DEBUG&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    urlpatterns &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; static&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STATIC_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; document_root&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STATIC_ROOT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 설정이 완료되면 Django가 개발 모드에서 &lt;code class=&quot;language-text&quot;&gt;/static/&lt;/code&gt; 경로에 있는 파일들을 서빙할 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;DEBUG == True 일때에만 작동하게 되어있음을 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;Django에서 &lt;code class=&quot;language-text&quot;&gt;urls.py&lt;/code&gt; 설정을 개발 환경에서만 사용하는 이유는 정적 파일 서빙은 일반적으로 프로덕션 환경의 웹 서버(예: Nginx, Apache)가 담당하기 때문입니다. Django는 웹 애플리케이션을 제공하는 데 최적화되어 있으며, 정적 파일을 효율적으로 서빙하는 데는 적합하지 않습니다. 따라서, 개발 환경이 아닌 프로덕션 환경에서는 Django가 아닌 웹 서버가 정적 파일을 제공하도록 구성하는 것이 성능 면에서 더 효율적입니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JPA(Java Persistence API) (1)]]></title><description><![CDATA[ORM(Object-Relational Mapping) 생각해보니 ORM을 사용한 적이 많았는데, 이게 어떤 것인지 명확하게 짚고 넘어갔던 적은 없던 것 같습니다. Spring의 ORM…]]></description><link>https://sharknia.github.io/JPAJava-Persistence-API-1/</link><guid isPermaLink="false">https://sharknia.github.io/JPAJava-Persistence-API-1/</guid><pubDate>Thu, 05 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/9bb7dc646a8a7e2c59d49960e734bae2/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZElEQVR42g3RW0/TYADG8X41Y2JivNArL8RDDBBIRFFMjAajycy4AYUB29jWbj2f27ft2/NpPWxrBw5QdHBhlEsTv4T9AL/88+RBtrpEkxUxCZAActAGbqA7fpzlAJq8omZFEefjFtr3s5xRtR4vNTCiw8lNVtrq4sg2RrcYgdYtxrAF6OAcL6tKcVwmxVTWDej6YZYXsxkjg6MByShgu9VjodPh1Z0+jXwhuPp+mwKwS7GG56MEySsgysfTs29Bmj94sqRBqzg9V3T95LiIsqxNshXuiWB3wCAHjFjbbZKqQSua7vntPs5yrB8n3QHphNGNW3cAtGc/LoPQT9LYjhPVjyqMiuoewSJNVqnvdwgVEpJaeT/wJnkyPT2//vuvi1OPF1dXXrw2vCAYDgWgi5Yn2L7shphi7FMC0qDFJi2CMKUB7POSKHBR6J9czAXNvHd/YbNWv3n7rhMlF7/+WHEWjEszzXEY7LHGISsj+5RIAJO3/CqOS8BLUhG60HFRnEAHZKuHEQx7eXU1LqY/f1/nZ9+9Ucl7SUeGB4xUbZZQSWuQ/AElNEih3sZfbdaerq43u9h8Pi/KclIUjCCzolSefC0v5pWHw5yGdnUwskdwOyhJACubnR8x4sLK+qPlZxvvPq6/ef9wee0Iw1lJcYLQCeMeyWhe6OUTmIxIvcIyskvyqGzow1wLh6yqqbZ7iBGLzzeW1jbefvikW64Xpxgj9DkJY3hckATT0aKU0K1DRkQ+EzymQt4JzHxipqNwXIajie4G283uy83aTquHchIlA2C7MBz646kznopeNFDNBiX8B5gYtnnmvHZDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/9bb7dc646a8a7e2c59d49960e734bae2/ca1dc/image1.png&apos; srcset=&apos;/static/9bb7dc646a8a7e2c59d49960e734bae2/e7570/image1.png 170w,
/static/9bb7dc646a8a7e2c59d49960e734bae2/f46e7/image1.png 340w,
/static/9bb7dc646a8a7e2c59d49960e734bae2/ca1dc/image1.png 680w,
/static/9bb7dc646a8a7e2c59d49960e734bae2/02d09/image1.png 1020w,
/static/9bb7dc646a8a7e2c59d49960e734bae2/9d567/image1.png 1360w,
/static/9bb7dc646a8a7e2c59d49960e734bae2/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;ORM(Object-Relational Mapping)&lt;/h2&gt;
&lt;p&gt;생각해보니 ORM을 사용한 적이 많았는데, 이게 어떤 것인지 명확하게 짚고 넘어갔던 적은 없던 것 같습니다. Spring의 ORM을 써보려고 하니, 이번 기회에 한 번 정리하고 넘어가려고 합니다. &lt;/p&gt;
&lt;h3&gt;ORM의 정의&lt;/h3&gt;
&lt;p&gt;ORM은 객체 지향 프로그래밍(OOP) 언어에서 사용하는 객체와 관계형 데이터베이스의 테이블을 자동으로 매핑해주는 기법입니다. 이를 통해 데이터베이스와의 상호작용을 SQL이 아닌 객체를 통해 처리할 수 있습니다. ORM을 사용하면 데이터베이스의 테이블을 객체로 추상화하여 비즈니스 로직을 더 직관적으로 표현할 수 있으며, 코드의 재사용성과 유지보수성을 높일 수 있습니다.&lt;/p&gt;
&lt;h3&gt;객체 지향 프로그래밍과 관계형 데이터베이스의 차이&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;객체 지향 프로그래밍(OOP)에서는 데이터를 객체로 모델링하고, 이 객체들 간의 상호작용을 통해 프로그램을 구성합니다. 객체는 속성(필드)과 행동(메서드)을 가집니다.&lt;/li&gt;
&lt;li&gt;관계형 데이터베이스(RDB)에서는 데이터를 테이블로 구조화하여 저장합니다. 테이블은 행과 열로 이루어져 있으며, 관계를 통해 데이터를 연결합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;주요 차이점은 객체는 메모리에서 동작하는 반면, 데이터베이스는 저장 공간에 데이터를 영구적으로 저장한다는 점입니다. 객체 간의 관계는 참조로 연결되지만, 테이블 간의 관계는 외래 키(Foreign Key)로 연결됩니다. 또한 객체는 다형성(polymorphism)을 지원하지만, 테이블은 그렇지 않습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;다형성(polymorphism)은 객체 지향 프로그래밍(OOP)에서 중요한 개념 중 하나로, 같은 메서드나 연산자가 여러 가지 형태로 동작할 수 있는 성질을 말합니다. 이를 통해 코드의 유연성과 확장성을 높일 수 있습니다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;장점과 단점&lt;/h3&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;생산성 향상: SQL을 직접 작성하지 않고도 데이터베이스 작업을 할 수 있으므로 개발자가 비즈니스 로직에 집중할 수 있습니다. 복잡한 SQL 쿼리를 줄이고, 간결한 코드로 데이터 접근 로직을 처리할 수 있습니다.&lt;/li&gt;
&lt;li&gt;유지보수성: 객체 지향 프로그래밍의 구조를 따르기 때문에 비즈니스 로직과 데이터베이스 로직을 분리할 수 있어 코드의 재사용성 및 유지보수성이 높아집니다.&lt;/li&gt;
&lt;li&gt;데이터베이스 독립성: ORM은 데이터베이스에 종속되지 않으며, 동일한 코드를 사용해 여러 데이터베이스와 상호작용할 수 있습니다. 즉, 데이터베이스가 변경되어도 코드 수정이 최소화됩니다.&lt;/li&gt;
&lt;li&gt;자동화된 매핑: 객체와 테이블의 매핑이 자동으로 이루어지기 때문에 데이터베이스의 스키마를 수동으로 매핑하는 부담이 줄어듭니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;성능 저하: 복잡한 쿼리나 대량의 데이터를 다룰 때는 ORM이 생성하는 쿼리가 비효율적일 수 있습니다. 특히, &lt;a href=&quot;https://sharknia.github.io/N1-%EB%AC%B8%EC%A0%9C&quot;&gt;N+1 문제&lt;/a&gt;와 같은 성능 이슈가 발생할 수 있으며, 이를 해결하기 위해서는 추가적인 최적화가 필요합니다.&lt;/li&gt;
&lt;li&gt;추상화의 복잡성: ORM은 데이터베이스와의 상호작용을 추상화하지만, 너무 많은 추상화는 특정한 데이터베이스 특성을 활용하지 못하게 하거나 디버깅을 어렵게 만들 수 있습니다.&lt;/li&gt;
&lt;li&gt;복잡한 쿼리의 한계: ORM은 단순한 CRUD 작업에는 효율적이지만, 복잡한 쿼리나 고성능이 요구되는 작업에서는 SQL이 더 유리할 수 있습니다. 이때는 Native Query를 사용해야 할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ORM을 사용하지 않았을 때의 문제점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;반복되는 코드: SQL 쿼리 작성과 결과 매핑을 직접 처리해야 하기 때문에 비슷한 패턴의 코드가 반복적으로 나타날 수 있습니다. 이는 코드의 양을 증가시키고 유지보수를 어렵게 만듭니다.&lt;/li&gt;
&lt;li&gt;비즈니스 로직과 데이터베이스 로직의 혼합: SQL 쿼리가 비즈니스 로직에 직접 포함될 경우, 코드의 가독성과 유지보수성이 저하됩니다. 이는 복잡한 프로젝트에서 특히 문제로 작용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;데이터베이스 종속성: 특정 데이터베이스에 종속된 SQL 쿼리를 사용하면, 데이터베이스가 변경될 때마다 코드를 수정해야 할 필요가 생깁니다. ORM을 사용하면 데이터베이스와 독립적으로 애플리케이션을 설계할 수 있습니다.&lt;/li&gt;
&lt;li&gt;수동 매핑의 불편함: 데이터베이스에서 가져온 데이터를 객체에 수동으로 매핑하는 과정에서 발생하는 실수나 비효율성이 존재할 수 있으며, 이를 관리하는 데 많은 시간이 소모될 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;JPA&lt;/h2&gt;
&lt;h3&gt;JPA란?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;JPA(Java Persistence API)는 자바에서 객체 지향 프로그래밍을 기반으로 관계형 데이터베이스를 다룰 수 있게 해주는 표준 인터페이스입니다. 즉, 객체와 데이터베이스 테이블 간의 매핑을 제공하는 프레임워크 표준입니다.&lt;/li&gt;
&lt;li&gt;JPA를 사용하면 SQL을 직접 작성하는 대신, 객체를 통해 데이터베이스의 데이터를 조회, 삽입, 수정, 삭제하는 작업을 수행할 수 있습니다.&lt;/li&gt;
&lt;li&gt;JPA는 데이터베이스와의 상호작용을 추상화하여 데이터베이스 종속성을 줄이고, 객체 지향적인 방식으로 애플리케이션을 설계할 수 있게 도와줍니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;JPA와 Hibernate의 관계&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;JPA는 표준 인터페이스이기 때문에, 실제로 데이터베이스와 상호작용을 하려면 JPA의 구현체가 필요합니다. Hibernate는 JPA의 대표적인 구현체 중 하나로, 가장 널리 사용됩니다.&lt;/li&gt;
&lt;li&gt;JPA가 ORM 표준을 정의하고 있다면, Hibernate는 이 표준을 기반으로 JPA의 동작을 구현하는 라이브러리입니다. 즉, JPA는 추상적인 규칙을 제공하고, Hibernate는 이를 실제로 동작하게 만듭니다.&lt;/li&gt;
&lt;li&gt;그 외에도 EclipseLink, OpenJPA 등 다른 JPA 구현체도 있지만, Spring Data JPA 환경에서는 일반적으로 Hibernate를 사용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;JPA의 주요 어노테이션&lt;/h3&gt;
&lt;p&gt;JPA에서는 객체와 데이터베이스 테이블을 매핑하기 위해 여러 가지 어노테이션을 제공합니다. 이 어노테이션들을 통해 엔티티 클래스가 테이블과 어떻게 연결되는지를 정의할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;@Entity: 이 어노테이션이 붙은 클래스는 JPA가 관리하는 엔티티임을 나타냅니다. 즉, 해당 클래스는 데이터베이스 테이블과 매핑된다는 의미입니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;@Table: 엔티티가 매핑될 데이터베이스 테이블의 이름을 지정합니다. 지정하지 않으면 기본적으로 엔티티 클래스 이름이 테이블 이름으로 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;users&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 엔티티 클래스의 필드 정의&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;@Id: 해당 필드가 테이블의 기본 키(primary key)임을 나타냅니다.&lt;/li&gt;
&lt;li&gt;@GeneratedValue: 기본 키가 자동으로 생성되는 방식을 정의합니다. 주로 &lt;code class=&quot;language-text&quot;&gt;AUTO&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;IDENTITY&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;SEQUENCE&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;TABLE&lt;/code&gt; 전략이 사용됩니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;@Column: 엔티티의 필드를 데이터베이스의 컬럼과 매핑합니다. 컬럼 이름, 길이, null 허용 여부 등을 설정할 수 있습니다. 지정하지 않으면 필드 이름이 컬럼 이름으로 매핑됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GenerationType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IDENTITY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; username&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;엔티티(Entity)와 테이블(Table) 매핑&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;JPA에서 엔티티(Entity)는 데이터베이스의 테이블(Table)과 매핑되는 자바 객체입니다. 즉, 엔티티는 데이터베이스에서 하나의 레코드(Row)를 표현하고, 엔티티의 각 필드는 테이블의 컬럼(Column)과 매핑됩니다.&lt;/li&gt;
&lt;li&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;라는 엔티티는 데이터베이스의 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt; 테이블과 매핑되고, 엔티티의 &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt; 필드는 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt; 테이블의 &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt; 컬럼과 연결됩니다. 이를 통해 자바 객체를 사용하여 데이터베이스의 데이터를 쉽게 다룰 수 있게 됩니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;또한, 엔티티 간의 관계도 JPA를 통해 정의할 수 있습니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;@OneToMany&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@ManyToOne&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@ManyToMany&lt;/code&gt; 같은 애노테이션을 사용하여 테이블 간의 외래 키 관계를 객체 지향적으로 표현할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;users&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Id&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GeneratedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strategy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GenerationType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IDENTITY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; username&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이러한 매핑을 통해 JPA는 자바 애플리케이션의 객체 모델과 데이터베이스의 테이블 간의 일관된 관계를 유지하게 해줍니다. ORM의 핵심은 이런 매핑을 통해 개발자가 SQL에 의존하지 않고 객체 지향적인 방식으로 데이터베이스와 상호작용할 수 있게 하는 데 있습니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Spring Data JPA&lt;/strong&gt;&lt;/h2&gt;
&lt;h3&gt;Spring과 JPA의 통합&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Spring은 강력한 의존성 주입(DI)과 트랜잭션 관리 기능을 제공하는 프레임워크로, 이를 통해 JPA와의 통합이 용이합니다.&lt;/li&gt;
&lt;li&gt;Spring Data JPA는 Spring과 JPA를 통합하여 ORM 기능을 더 간단하고 쉽게 사용할 수 있게 해줍니다. 이를 통해 개발자는 JPA의 복잡한 설정 없이도 간단한 설정만으로 데이터베이스 연동을 할 수 있습니다.&lt;/li&gt;
&lt;li&gt;Spring Data JPA는 JPA의 표준을 기반으로 하며, JPA 엔티티 매핑을 활용하면서도, 다양한 리포지토리(repository) 계층의 자동화된 구현을 지원합니다. 즉, 개발자는 직접 SQL 쿼리를 작성할 필요 없이, 메서드 이름만으로도 데이터베이스 작업을 쉽게 처리할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Spring Data JPA의 구조 및 역할&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Spring Data JPA는 데이터베이스와의 상호작용을 쉽게 처리할 수 있도록 다양한 인터페이스와 클래스들을 제공합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;주요 계층 구조&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Repository: Repository는 가장 상위 레벨의 인터페이스입니다. Spring Data JPA의 기본적인 인터페이스로, 이 자체로는 아무 기능도 제공하지 않습니다. 그저 기본적인 리포지토리 패턴을 정의한 추상적인 인터페이스일 뿐입니다.&lt;/p&gt;
&lt;p&gt;이 인터페이스는 메서드가 정의되어 있지 않으며, 데이터 액세스 계층을 추상화하는 기반 역할을 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; Repository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;CrudRepository: 리포지토리의 기본 인터페이스로, CRUD 작업을 위한 메서드들을 제공합니다.&lt;/li&gt;
&lt;li&gt;JpaRepository: CrudRepository를 확장한 인터페이스로, JPA에 특화된 추가 기능(페이징, 정렬 등)을 제공합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;JpaRepository, CrudRepository 인터페이스 활용&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Spring Data JPA는 JpaRepository와 CrudRepository 인터페이스를 제공하여 개발자가 직접 구현하지 않고도 기본적인 데이터 액세스 기능을 사용할 수 있게 합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CrudRepository는 기본적인 CRUD(Create, Read, Update, Delete) 작업을 위한 메서드를 제공하는 가장 기본적인 인터페이스입니다.&lt;/p&gt;
&lt;p&gt;이 인터페이스는 데이터를 저장, 조회, 수정, 삭제하는 작업을 처리하기 위한 메서드들이 제공됩니다. 즉, 실제 CRUD 작업을 수행할 수 있는 기능을 가지고 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;save()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;findById()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;findAll()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;deleteById()&lt;/code&gt; 등의 메서드들이 정의되어 있어, 이 인터페이스를 상속받으면 별도로 구현 없이 기본적인 CRUD 작업을 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; CrudRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; extends Repository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;S extends T&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; S &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;S entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Optional&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ID id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Iterable&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    void &lt;span class=&quot;token function&quot;&gt;deleteById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ID id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    void &lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JpaRepository는 CrudRepository를 확장하여 더 많은 기능을 제공합니다. 예를 들어, 페이징 처리, 정렬 등의 기능을 추가로 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; CrudRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ID&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageable&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Pageable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Page&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sort&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Sort&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;기본적인 CRUD 작업 처리&lt;/h3&gt;
&lt;p&gt;Spring Data JPA를 통해 직접 SQL을 작성하지 않고도 CRUD 작업을 쉽게 처리할 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;JpaRepository&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;CrudRepository&lt;/code&gt; 인터페이스를 상속받은 리포지토리를 사용하여 아래와 같은 작업을 자동으로 처리할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Create (저장): &lt;code class=&quot;language-text&quot;&gt;save()&lt;/code&gt; 메서드를 사용해 엔티티를 저장합니다. 새 엔티티라면 INSERT 쿼리를 생성하고, 기존 엔티티라면 UPDATE 쿼리를 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Read (조회): &lt;code class=&quot;language-text&quot;&gt;findById()&lt;/code&gt;를 사용하여 특정 엔티티를 조회하고, &lt;code class=&quot;language-text&quot;&gt;findAll()&lt;/code&gt;을 사용하여 모든 엔티티를 조회할 수 있습니다. 또한, &lt;code class=&quot;language-text&quot;&gt;findBy...&lt;/code&gt; 형태의 메서드를 작성하여 다양한 조건으로 데이터를 조회할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; user&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; allUsers&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Update (수정): &lt;code class=&quot;language-text&quot;&gt;save()&lt;/code&gt; 메서드는 기본적으로 엔티티가 존재하면 수정 작업을 처리합니다. 특정 엔티티를 조회한 후 필드를 변경하고 다시 저장하면 UPDATE 쿼리가 실행됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Jane&quot;&lt;/span&gt;&lt;/span&gt;
userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Delete (삭제): &lt;code class=&quot;language-text&quot;&gt;deleteById()&lt;/code&gt;를 사용하여 특정 엔티티를 삭제하거나, &lt;code class=&quot;language-text&quot;&gt;delete()&lt;/code&gt; 메서드를 사용해 엔티티를 직접 삭제할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;deleteById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Kotlin에서의 GET API 선언 후 Swagger 설정 하기]]></title><description><![CDATA[서론 해당 프로젝트의 역할은 Rest API Backend 서버입니다. 본연의 역할을 위해 먼저 간단하게 Get 메소드에 대한 요청을 처리하는 컨트롤러를 정의해보겠습니다.  user 컨트롤러 프로젝트 구조는 DDD…]]></description><link>https://sharknia.github.io/Kotlin에서의-GET-API-선언-후-Swagger-설정-하기/</link><guid isPermaLink="false">https://sharknia.github.io/Kotlin에서의-GET-API-선언-후-Swagger-설정-하기/</guid><pubDate>Thu, 05 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/bce58b1cd3851c7d1695f53c1d842c27/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACj0lEQVR42g2RyVLaAABA80c99gt6aDudTg/t1E7tOG2n1mqrdVB0FIGqVcCyxAUQlE0NIGAI+xa2LASSGEwIBIKgznDwK8oHvHd4Dyhf3+RpNttgk2Q9XKpCuWIArYTQShitBHNFKIsiVTxawZNELUFQMaKBsjeE0CIFkZVkwBdLuiIxLWgDz4JpioaxGoJTYxGUKVyVsHAJQ2nWeolclXCsyVeaLSiV1zs8UCIbyhQAZwjeOrB/X9eqzNYEWS/fCHGslqYYk9e/uGOa37W4Y9nKNX8t9RhJJludJb1lYVP3z+mxuM8ADxzfPnQo9cZ1s9WXKeYZzhZG7OHY5G/lk1fvJ1U6rfM8U2Pl0WO52UI5QWk8VJkPDMcuG3QJWANhhc7yQ7urOXQGC9UC00RIetVif/r6g8Z62hs9JuvcHhQJFvFgiXTEc9Oa3bkt/ZrxwOBwAesW+yeF6u2cYkajc8fzOaYZxaip1c1nE59hgoFJRngYmQLwhsPry1cdSGZaq/+4rP62trmkswA7drdSD86qd9SgLUM2/NlSEqd8SPrl1MyLL3MTCtW8DpzdNhnOQpWWhIldnTuwbNhf/GtUg8dAKJsHfX6D0zVumK/V8xQt9AfNrmz1R979Wnn+deHNz5VFPRhCq5QoEUJ7Y//4j9WxdXRydB4EkGL5NATboKDRfTGeIQ4fpIdRqz/EOcGbRP/5EXMgGq2QnDwg+Ha93R3DhhOv2QNdxFNAiWbhQvkyk7MHIgTfwgWpynfGCqYjY7yYbnBFTuC6t5TYi5RIqiPveQJuOOFP5TIEBdDtXo0XC3U2hVFcb0B3B0xvyA/uhcE9f3vXlIeNTp+W+px8x8p3je4gSdSzNQZvthqi9B/88sGNbaIP/QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/bce58b1cd3851c7d1695f53c1d842c27/ca1dc/image1.png&apos; srcset=&apos;/static/bce58b1cd3851c7d1695f53c1d842c27/e7570/image1.png 170w,
/static/bce58b1cd3851c7d1695f53c1d842c27/f46e7/image1.png 340w,
/static/bce58b1cd3851c7d1695f53c1d842c27/ca1dc/image1.png 680w,
/static/bce58b1cd3851c7d1695f53c1d842c27/02d09/image1.png 1020w,
/static/bce58b1cd3851c7d1695f53c1d842c27/9d567/image1.png 1360w,
/static/bce58b1cd3851c7d1695f53c1d842c27/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;해당 프로젝트의 역할은 Rest API Backend 서버입니다. 본연의 역할을 위해 먼저 간단하게 Get 메소드에 대한 요청을 처리하는 컨트롤러를 정의해보겠습니다. &lt;/p&gt;
&lt;h2&gt;user 컨트롤러&lt;/h2&gt;
&lt;p&gt;프로젝트 구조는 &lt;a href=&quot;https://sharknia.github.io/FastAPI%EC%99%80-DDD&quot;&gt;DDD&lt;/a&gt;를 따라 정의할 예정입니다. 따라서 먼저 user 패키지를 정의하고, 그 안에 &lt;code class=&quot;language-text&quot;&gt;Controller.kt&lt;/code&gt; 파일을 생성해주고 다음과 같이 GET 요청을 처리할 컨트롤러를 작성했습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; world&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nolog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nolog_world&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GetMapping
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RequestMapping
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RestController

&lt;span class=&quot;token keyword&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; result&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token annotation builtin&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/user&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 공통 경로 설정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; HelloController &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// /user 경로를 처리&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;userRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HelloResponse &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Welcome to the user page!&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// /user/hello 경로를 처리&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/hello&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HelloResponse &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hello world!~~&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;코드 분석&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; world&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nolog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nolog_world&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GetMapping
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RequestMapping
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RestController&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;package world.nolog.nolog_world.user&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;HelloController&lt;/code&gt; 클래스가 속해 있는 패키지 경로를 정의합니다. 일반적으로 프로젝트 구조에 따라 패키지가 설정됩니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; 구문: 스프링 웹 어노테이션인 &lt;code class=&quot;language-text&quot;&gt;@GetMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@RequestMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@RestController&lt;/code&gt;를 가져옵니다. 이는 HTTP 요청을 처리하기 위한 스프링 웹의 주요 어노테이션입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; result&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;data class HelloResponse&lt;/code&gt;: JSON 응답으로 반환될 데이터를 담는 간단한 코틀린 데이터 클래스입니다. &lt;code class=&quot;language-text&quot;&gt;result&lt;/code&gt;라는 이름의 문자열 필드 하나를 가집니다. 스프링 부트는 이 &lt;code class=&quot;language-text&quot;&gt;data class&lt;/code&gt;를 자동으로 JSON 형식으로 변환하여 클라이언트에게 반환합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/user&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 공통 경로 설정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; HelloController &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@RestController&lt;/code&gt;: 이 클래스가 스프링의 RESTful 웹 API를 처리하는 컨트롤러임을 명시합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@RequestMapping(&quot;/user&quot;)&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;/user&lt;/code&gt; 경로로 들어오는 HTTP 요청을 이 컨트롤러가 처리하게 합니다. 즉, 이 컨트롤러 내의 모든 메소드가 기본적으로 &lt;code class=&quot;language-text&quot;&gt;/user&lt;/code&gt; 경로를 가집니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// /user 경로를 처리&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;userRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HelloResponse &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Welcome to the user page!&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@GetMapping&lt;/code&gt;: 경로를 명시하지 않으면 기본 경로인 &lt;code class=&quot;language-text&quot;&gt;/user&lt;/code&gt;로 들어오는 GET 요청을 처리합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;userRoot&lt;/code&gt;: 함수 이름은 임의로 지정된 이름입니다. 이 함수가 &lt;code class=&quot;language-text&quot;&gt;/user&lt;/code&gt; 경로로 들어오는 요청을 처리하며, &lt;code class=&quot;language-text&quot;&gt;HelloResponse&lt;/code&gt; 객체를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;return HelloResponse(result = &quot;Welcome to the user page!&quot;)&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;&quot;Welcome to the user page!&quot;&lt;/code&gt;라는 값을 담은 &lt;code class=&quot;language-text&quot;&gt;HelloResponse&lt;/code&gt; 객체를 반환하여, 이를 JSON 응답으로 반환합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// /user/hello 경로를 처리&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/hello&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HelloResponse &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HelloResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hello world&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@GetMapping(&quot;/hello&quot;)&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;/user/hello&lt;/code&gt; 경로로 들어오는 GET 요청을 처리합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;hello&lt;/code&gt;: 마찬가지로 함수 이름은 임의로 지정되었습니다. 이 함수가 &lt;code class=&quot;language-text&quot;&gt;/user/hello&lt;/code&gt; 경로로 들어오는 요청을 처리하며, &lt;code class=&quot;language-text&quot;&gt;HelloResponse&lt;/code&gt; 객체를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;return HelloResponse(result = &quot;hello world!~~&quot;)&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;&quot;hello world&quot;&lt;/code&gt;라는 값을 담은 &lt;code class=&quot;language-text&quot;&gt;HelloResponse&lt;/code&gt; 객체를 반환하여, 클라이언트에게 JSON 응답으로 보냅니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;API 테스트&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/user&lt;/code&gt; 경로로 접속하면 다음과 같은 화면을 볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d8e410440f91f8ef99ccaf5ad65faebc/bb03a/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA20lEQVR42mMws6ryd/OcsdzZbcYcK9sp8yysJ6FgKwLY2nbSPAfHqbPtHSavNDEp92VQUzNt09W1+6+mbvZbRcX0v7yCAclYQdHgt7KyyX9FeZ1mBkFBwRZ+fp7/fHzcP/n5uf8I8POQjIH6fwgK8P0XFRRsZBAVlWgVFRX9LyQk9BuI/5OHBX+LiIj8FxcWb2IQFRZvBXFGDRwhBv4C4n/kYcFfcANFRCTaQOlQWFj4NxD/Jw8L/QaZATSwmUGUX9RAhF8sTYhfNAGIE2FYlDScIMYnli4qIKoPAPbuL9IBNL3mAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/d8e410440f91f8ef99ccaf5ad65faebc/ca1dc/image2.png&apos; srcset=&apos;/static/d8e410440f91f8ef99ccaf5ad65faebc/e7570/image2.png 170w,
/static/d8e410440f91f8ef99ccaf5ad65faebc/f46e7/image2.png 340w,
/static/d8e410440f91f8ef99ccaf5ad65faebc/ca1dc/image2.png 680w,
/static/d8e410440f91f8ef99ccaf5ad65faebc/02d09/image2.png 1020w,
/static/d8e410440f91f8ef99ccaf5ad65faebc/9d567/image2.png 1360w,
/static/d8e410440f91f8ef99ccaf5ad65faebc/bb03a/image2.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Springdoc OpenAPI&lt;/h2&gt;
&lt;p&gt;API 문서는 협업때도 그렇고, 테스트를 위해서도 중요한 작업입니다. Django를 할 때에는 Swagger를 사용해서 API를 구현하면 자동으로 문서화가 되는 기능을 사용했었는데, Spring에도 비슷한 게 있습니다. Springdoc OpenAPI 입니다. &lt;/p&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;Springdoc OpenAPI는 Swagger/OpenAPI 3.0 사양을 지원하는 라이브러리로, 스프링 부트 애플리케이션과 잘 통합됩니다.
설정이 매우 간단하고, 최신 OpenAPI 3.0 사양을 사용할 수 있습니다.
REST API 문서와 UI를 자동으로 생성해 주며, API 테스트도 가능합니다.&lt;/p&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;p&gt;다음의 의존성을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 다음의 설정 클래스를 선언합니다. config 패키지를 생성해서 그 안에 넣어주었습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; world&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nolog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;package&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Components
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OpenAPI
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;info&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Info
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Bean
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Configuration


&lt;span class=&quot;token annotation builtin&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; SwaggerConfig &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;openAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; OpenAPI &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;OpenAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Components&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Info &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Springdoc 테스트&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Springdoc을 사용한 Swagger UI 테스트&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후  &lt;a href=&quot;http://localhost:8080/swagger-ui/index.html&quot;&gt;http://localhost:8080/swagger-ui/index.html&lt;/a&gt; 경로에서 Swagger UI로 API를 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1bffd23fa77519a06dbfbda7c89c6adb/bb03a/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABu0lEQVR42p2Sz0sbQRSA99/oIcZcantQe+ldKtKT9C5CI5aI1zqJHuzBpOYSsXgoitbtqYhXLWHTxIjgUQ9KPbW0EPDSuOuu82N3Z2b3ObspVBDDNg++w2PefLw3b7RUf/ZVXwbtDAwufHoyuKg/SiH98dMlfWR0U3/xsjujY5v685FlfWBoYSudRruZ1PS49iaHypXKNqyub4jVNR0W332Ajxtf4PTsB5xftLrzvQV7xzVY294SKyufYXYGlbR6/fA9qPA87tu2LSklkjBb+tKWEEgZBr6CP4i6GuFFjqODoyXNMGrLUUIZE7ZzAxgTJfdASpkILjj4vi8iR8NoFLVa7SAWuhQLs/0HTMsCx3ZAClUThokIgiAWNhvNolat1mPhr7YvTn6acO0QwK4Eh/qJuCYeYOr969D4K/xtCnFx6YLpMDAxB4uIRFypWkzvjGwYHaHLqLCu2kAwBkKSg/ENuK57Xxg9LI5lBCil/4Va4n2h6AT0Auf87pY7QrUprg7DXlDfh8fCb0r4da9ajhLGXEEpg4dg3Yk7rO4bJW1i4vWz/Fw+N4/ms4W5wlQvoLcoW0CFmcnJqeFb3ixxuWfiDUAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/1bffd23fa77519a06dbfbda7c89c6adb/ca1dc/image3.png&apos; srcset=&apos;/static/1bffd23fa77519a06dbfbda7c89c6adb/e7570/image3.png 170w,
/static/1bffd23fa77519a06dbfbda7c89c6adb/f46e7/image3.png 340w,
/static/1bffd23fa77519a06dbfbda7c89c6adb/ca1dc/image3.png 680w,
/static/1bffd23fa77519a06dbfbda7c89c6adb/02d09/image3.png 1020w,
/static/1bffd23fa77519a06dbfbda7c89c6adb/9d567/image3.png 1360w,
/static/1bffd23fa77519a06dbfbda7c89c6adb/bb03a/image3.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;작동 원리&lt;/h3&gt;
&lt;p&gt;Springdoc OpenAPI는 Spring Web MVC 또는 Spring WebFlux와 통합되어, 컨트롤러 클래스와 그 안의 메서드에 있는 어노테이션을 기준으로 API 엔드포인트를 수집합니다. 이를 통해, 정의된 API 명세서를 자동으로 생성하고 Swagger UI에 보여줄 수 있습니다.&lt;/p&gt;
&lt;p&gt;다음은 Springdoc OpenAPI가 API 엔드포인트를 수집하는 기준입니다. 기본적으로 모든 컨트롤러 클래스와 매핑된 모든 메서드가 자동으로 API 문서에 포함됩니다. 특정 API를 문서화에서 제외하고 싶다면, &lt;code class=&quot;language-text&quot;&gt;@Hidden&lt;/code&gt; 어노테이션을 사용하여 OpenAPI 명세에서 해당 엔드포인트를 숨길 수 있습니다.&lt;/p&gt;
&lt;h4&gt;스프링 컨트롤러 클래스 (&lt;code class=&quot;language-text&quot;&gt;@RestController&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@Controller&lt;/code&gt;)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@RestController&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;@Controller&lt;/code&gt; 어노테이션이 붙은 클래스에서 API 엔드포인트를 수집합니다.&lt;/li&gt;
&lt;li&gt;일반적으로 이 클래스에서 HTTP 요청 경로를 정의하는 메서드를 찾습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;HTTP 요청 매핑 어노테이션&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@GetMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@PostMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@PutMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@DeleteMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@PatchMapping&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@RequestMapping&lt;/code&gt;과 같은 스프링의 HTTP 요청 매핑 어노테이션이 있는 메서드를 API로 수집합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;이 어노테이션들에 의해 정의된 HTTP 메서드와 경로 정보가 OpenAPI 문서로 변환됩니다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;더 상세한 문서 만들기&lt;/h3&gt;
&lt;p&gt;이렇게만 해도 정의된 REST API들을 수집하여 자동으로 문서화합니다. 그러나 원활한 협업을 위해서는 더 자세한 문서를 작성해야 하는 경우가 많습니다. 다음은 그 문서를 작성하는 방법입니다. Springdoc OpenAPI에서 제공하는 대표적인 어노테이션들은 다음과 같습니다. &lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@Operation&lt;/code&gt; 어노테이션&lt;/h4&gt;
&lt;p&gt;API 엔드포인트에 대한 핵심 정보를 문서화하는 데 사용됩니다. 각 엔드포인트에 대한 간단한 설명(summary)과 자세한 설명(description)을 추가할 수 있으며, 이 설명은 Swagger UI에 표시되어 API 사용자를 위한 안내로 제공됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;summary&lt;/code&gt;: API 엔드포인트의 간략한 설명을 제공.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt;: API의 상세 설명을 제공하여 어떤 용도로 사용되는지 안내.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;tags&lt;/code&gt;: API를 그룹화할 수 있는 태그를 설정. 이 태그를 이용해 API 문서를 논리적으로 분리할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@ApiResponse&lt;/code&gt; 어노테이션&lt;/h4&gt;
&lt;p&gt;API의 응답 결과에 대해 상세히 설명하는 데 사용됩니다. 각 API가 어떤 응답 코드와 응답 메시지를 반환하는지 문서화할 수 있습니다. 이 정보는 성공 시 응답뿐만 아니라 오류 응답도 함께 정의하여, API 사용자가 오류 상황에 대한 정보를 명확히 알 수 있게 해줍니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;responseCode&lt;/code&gt;: 응답 코드 (HTTP 상태 코드)를 명시.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt;: 해당 응답 코드에 대한 설명을 제공.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;content&lt;/code&gt;: 반환되는 데이터의 타입이나 스키마를 정의할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@Parameter&lt;/code&gt; 어노테이션&lt;/h4&gt;
&lt;p&gt;API 메서드의 파라미터를 문서화할 때 사용됩니다. 주로 URL 경로에 포함된 경로 변수나 쿼리 파라미터, 요청 본문에서 사용하는 데이터를 더 명확히 설명하는 데 유용합니다. 이를 통해 API 사용자는 각 파라미터가 어떤 역할을 하는지, 필수인지 여부를 쉽게 이해할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;: 파라미터의 이름을 명시.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt;: 파라미터에 대한 설명을 제공.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;required&lt;/code&gt;: 필수 여부를 정의.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;example&lt;/code&gt;: 파라미터의 예시값을 설정하여 문서에 추가.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@Schema&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;DTO 클래스나 특정 필드의 구조를 문서화할 때 사용합니다. 이 어노테이션을 사용하면 각 필드에 대해 설명을 추가할 수 있으며, 데이터 타입이나 예시값을 명시할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt;: 각 필드의 의미를 설명.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;example&lt;/code&gt;: 필드의 예시값을 제공하여 API 사용자가 쉽게 이해할 수 있도록 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@``RequestBody&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;요청 본문에 포함되는 데이터를 설명하는 데 사용됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;description&lt;/code&gt;: 각 필드의 의미를 설명.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;example&lt;/code&gt;: 필드의 예시값을 제공하여 API 사용자가 쉽게 이해할 수 있도록 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;어노테이션을 모두 활용한 API 문서 예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Operation
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Parameter
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;responses&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ApiResponse
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;responses&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ApiResponses
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;swagger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;v3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;media&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Schema
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseEntity
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GetMapping
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PathVariable
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RequestParam
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RestController

&lt;span class=&quot;token annotation builtin&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; UserController &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Operation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        summary &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Get user by ID&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Returns user details based on the user ID provided.&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        tags &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@ApiResponses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;ApiResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;200&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Successfully retrieved user&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;ApiResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;400&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Invalid user ID supplied&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;ApiResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;404&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User not found&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;ApiResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;500&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Internal server error&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/user/{id}&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getUserById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token annotation builtin&quot;&gt;@Parameter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ID of the user to be retrieved&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            required &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token annotation builtin&quot;&gt;@PathVariable&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Long&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        
        &lt;span class=&quot;token annotation builtin&quot;&gt;@Parameter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;includeAddress&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Flag to include user&apos;s address in the response&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            required &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token annotation builtin&quot;&gt;@RequestParam&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;required &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; defaultValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;false&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; includeAddress&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Boolean
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; ResponseEntity&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 비즈니스 로직: 사용자 정보 조회&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ResponseEntity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;John Doe&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;john.doe@example.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                address &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;includeAddress&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;123 Main St, Springfield&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User&apos;s unique ID&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;123&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Long&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User&apos;s full name&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;John Doe&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User&apos;s email address&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;john.doe@example.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; email&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@Schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;User&apos;s physical address&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; example &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;123 Main St, Springfield&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nullable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; address&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[N+1 문제]]></title><description><![CDATA[N+1 문제란? N+1 문제는 주로 ORM(Object-Relational Mapping)과 관련된 성능 문제입니다. 이를 간단하게 설명하자면, N+1 문제는 하나의 쿼리를 실행한 후, 그 결과에 대해 추가적으로 N개의 쿼리를 실행하게 되어, 총 N…]]></description><link>https://sharknia.github.io/N1-문제/</link><guid isPermaLink="false">https://sharknia.github.io/N1-문제/</guid><pubDate>Thu, 05 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/2125224b2a6461a68750b804006e1da5/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSElEQVR42hWSS2/TQBSF/c9Ys+QPIHWBxGPDQwJaVVAeKqitSpsmjuNnbMceezx+z9jjxI805Nk2lFYIwRYJfgeT3d2ce757zuWOjg87/JkkC31dBsAIQi9KwjAOkGcVRUqy1HacUUkxiX3fBcDUDVVWel2h02qdcKetL6LY1foycDZK5EMv8FIcQQhSEodJLCrqcasdJ2FG0yDyXGgPrL6qSny3zbXOThVFsmwjZMoQQc9lJhhHzLNuqvlyPltMLQcEIaJ0AxLFCELLMPuiJHB8t8NIkO/kBc6KDCG3rtmUBnH099+fq/Xl8mJxuV7VTUkZe5bQgoQRAo6laQrXEwXLMuIkKOth1YzKkhJKvMBnnr9+/8yKnBelVrdHaJaQlC3FJIlidhtg5pysyo4LcJ4259XF1aqsy9ly5sdRkueT6eTZq537Dx5tPX76+u3HT0fHgiSZtuW4juNsyDmlr3o+zIcZEy9Xs/limhJcjZv192tMsxfbu1sPn9y5e2/73X5b6L3c3TtpdwzLhJ5jmjonawpEblYQhl2PS6bXdD1K4uVqcfVtbXuequuaaWZD+v7zwfPtNwC6EEGE4MAyOFHqses3SYxy1mdOSUYJ46+aav/g8PbHzc3ttahqw7oqmzKneDjKkzRkzoOBwXV7vGn2Wcg4S86n43JcS6rienB5MZ/MvvKi6PoI58R2QYpDWmCSs7YC4NqarnK8wLPQbTBA7DdIMmrK8XQyqktRkYEHq3GdD4udvQ9REhWsiByz/3Ncm6Ula/J/OVK5VeHg81cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/2125224b2a6461a68750b804006e1da5/ca1dc/image1.png&apos; srcset=&apos;/static/2125224b2a6461a68750b804006e1da5/e7570/image1.png 170w,
/static/2125224b2a6461a68750b804006e1da5/f46e7/image1.png 340w,
/static/2125224b2a6461a68750b804006e1da5/ca1dc/image1.png 680w,
/static/2125224b2a6461a68750b804006e1da5/02d09/image1.png 1020w,
/static/2125224b2a6461a68750b804006e1da5/9d567/image1.png 1360w,
/static/2125224b2a6461a68750b804006e1da5/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;N+1 문제란?&lt;/h2&gt;
&lt;p&gt;N+1 문제는 주로 ORM(Object-Relational Mapping)과 관련된 성능 문제입니다. 이를 간단하게 설명하자면, N+1 문제는 하나의 쿼리를 실행한 후, 그 결과에 대해 추가적으로 N개의 쿼리를 실행하게 되어, 총 N+1번의 쿼리가 발생하는 상황을 말합니다.&lt;/p&gt;
&lt;p&gt;Spring에서는 JPA나 Hibernate를 사용할 때 이 문제가 자주 발생합니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;1:N&lt;/code&gt; 관계를 가진 두 개의 엔티티(예: &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;)가 있다고 가정해봅시다. &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 리스트를 조회하면서 각 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 리스트를 조회해야 한다면, 처음에 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 엔티티를 조회하는 쿼리가 1번 발생하고, 각 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;마다 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 리스트를 조회하는 쿼리가 N번 발생하여 총 N+1번의 쿼리가 실행됩니다.&lt;/p&gt;
&lt;p&gt;ORM을 사용하는 개발자가 쿼리 최적화에 대한 이해가 부족하거나, 기본 설정 그대로 사용할 경우 발생하는 문제라고 볼 수 있습니다. ORM은 기본적으로 객체 지향적인 방식으로 데이터베이스를 다루기 때문에, 개발자는 비즈니스 로직에 집중할 수 있습니다. 그러나 데이터베이스와의 상호작용 방식을 깊이 이해하지 못하면, 의도치 않게 비효율적인 쿼리를 작성하게 될 수 있는 거죠. N+1 문제도 이런 맥락에서 발생하는 대표적인 문제입니다.&lt;/p&gt;
&lt;h2&gt;원인&lt;/h2&gt;
&lt;p&gt;이 문제가 발생하는 주된 원인은 JPA에서 연관된 엔티티를 지연 로딩(Lazy Loading) 방식으로 가져올 때, 각 엔티티마다 별도의 쿼리를 실행하기 때문입니다. 이러한 방식은 데이터가 많아질수록 성능에 악영향을 끼칠 수 있습니다.&lt;/p&gt;
&lt;p&gt;지연로딩은 연관된 엔티티를 실제로 필요할 때까지 로딩하지 않고, 그 시점에 쿼리를 실행하여 데이터를 불러오는 전략입니다. 이는 성능 최적화를 위해 설계된 방식이지만, 잘못 사용하면 오히려 성능 문제를 일으킬 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mappedBy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FetchType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LAZY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Order&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; orders&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 설정하면, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 엔티티를 조회할 때는 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 리스트는 로딩되지 않습니다. &lt;code class=&quot;language-text&quot;&gt;orders&lt;/code&gt; 필드에 접근하는 시점에 Hibernate가 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 데이터를 가져오기 위한 쿼리를 실행합니다. 즉, 필요한 순간에만 쿼리를 실행하는 방식입니다.&lt;/p&gt;
&lt;p&gt;하지만 이 방식으로 여러 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 엔티티를 조회하고 각각의 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;에 접근하게 되면, 각 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;에 대해 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;를 가져오는 쿼리가 N번 실행되어 N+1 문제가 발생할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;지연로딩(Lazy Loading)이란?&lt;/h2&gt;
&lt;p&gt;지연로딩은 데이터베이스에서 실제로 데이터를 가져오는 시점을 지연시켜, 필요할 때만 데이터를 로드하는 방식입니다. 이 과정은 성능을 최적화하려는 목적에서 사용되지만, 상황에 따라 성능 저하를 유발할 수도 있습니다. 이제 지연로딩이 어떻게 작동하는지 좀 더 깊이 살펴보겠습니다.&lt;/p&gt;
&lt;h3&gt;프록시 객체(Proxy Object)&lt;/h3&gt;
&lt;p&gt;지연 로딩의 핵심은 프록시 객체입니다. Hibernate나 JPA와 같은 ORM 프레임워크는 데이터베이스에서 실제로 데이터를 가져오는 대신, 먼저 프록시 객체를 반환합니다. 이 프록시 객체는 실제 엔티티 클래스의 서브클래스 또는 대리 객체로, 데이터베이스에 접근하는 기능이 추가된 형태입니다.&lt;/p&gt;
&lt;p&gt;프록시 객체는 해당 엔티티에 대한 모든 정보를 가지고 있지는 않지만, 메모리에 로드된 엔티티와 동일한 메서드와 필드를 갖고 있습니다. 필요할 때만 데이터베이스에서 실제 데이터를 가져오는 역할을 합니다.&lt;/p&gt;
&lt;h3&gt;필드 접근 시점에 쿼리 실행&lt;/h3&gt;
&lt;p&gt;지연 로딩의 핵심은 필드에 실제로 접근하는 시점에 데이터베이스 쿼리를 실행한다는 점입니다. 즉, 엔티티를 처음 로드할 때는 연관된 데이터는 로드되지 않고, 연관된 데이터에 접근하려고 할 때 비로소 데이터베이스에 쿼리를 실행하여 필요한 데이터를 가져옵니다.&lt;/p&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 엔티티와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 엔티티가 &lt;code class=&quot;language-text&quot;&gt;1:N&lt;/code&gt; 관계로 연결되어 있고, &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 필드가 지연 로딩으로 설정된 경우를 생각해봅시다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fetch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FetchType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LAZY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Order&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; orders&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 경우, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 객체를 조회할 때 &lt;code class=&quot;language-text&quot;&gt;orders&lt;/code&gt;는 바로 로드되지 않습니다. 대신 프록시 객체가 생성되고, 이 &lt;code class=&quot;language-text&quot;&gt;orders&lt;/code&gt; 필드에 접근하는 순간 &lt;code class=&quot;language-text&quot;&gt;SELECT&lt;/code&gt; 쿼리가 실행되어 데이터베이스에서 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 리스트를 가져옵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;User user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; userRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 여기서는 orders에 대한 쿼리 없음&lt;/span&gt;
List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Order&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; orders &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getOrders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// 이 시점에서 쿼리 실행&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 핵심은 &lt;strong&gt;데이터에 접근하는 순간&lt;/strong&gt;에 쿼리가 실행된다는 점입니다.&lt;/p&gt;
&lt;h4&gt;Hibernate와 프록시 객체&lt;/h4&gt;
&lt;p&gt;Hibernate에서 프록시 객체는 데이터베이스에서 실제로 데이터를 로드할 때 메서드 호출을 가로챕니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;getOrders()&lt;/code&gt; 메서드를 호출하면, Hibernate는 이 메서드 호출을 감지하고 해당 엔티티의 프록시가 아닌 실제 데이터를 로드하도록 동작합니다. 이를 통해 개발자는 메서드 호출 시점에 자연스럽게 데이터베이스와 상호작용하는 것처럼 느낍니다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;불필요한 데이터 로드를 피함: 필요한 데이터만 로드하여 메모리 사용량을 줄일 수 있습니다. 특히, 연관된 데이터가 많을 때 불필요한 로드를 피할 수 있어 성능 향상에 도움이 됩니다.&lt;/li&gt;
&lt;li&gt;성능 최적화: 모든 데이터를 한 번에 가져오는 대신, 실제로 필요한 시점에만 데이터를 가져오므로 초기 로드 시간이 줄어들 수 있습니다. 예를 들어, 대규모 연관 데이터를 갖는 엔티티를 매번 로드할 필요가 없을 때 유용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;N+1 문제: 앞서 설명한 것처럼, 지연 로딩을 잘못 사용하면 하나의 엔티티를 가져오는 쿼리 외에 추가적으로 여러 번의 쿼리가 실행되어 성능 저하를 초래할 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;1:N&lt;/code&gt; 관계에서 &lt;code class=&quot;language-text&quot;&gt;N&lt;/code&gt;개의 엔티티가 각각 추가적인 쿼리를 실행하게 되어 N+1 문제가 발생할 수 있습니다.&lt;/li&gt;
&lt;li&gt;영속성 컨텍스트(Persistence Context)와의 연관성: 지연 로딩은 엔티티가 영속성 컨텍스트 안에 있을 때만 동작합니다. 만약 영속성 컨텍스트 밖에서(예: 트랜잭션이 종료된 후) 프록시 객체에 접근하면 &lt;code class=&quot;language-text&quot;&gt;LazyInitializationException&lt;/code&gt;이 발생할 수 있습니다. 이는 데이터를 로드할 수 있는 컨텍스트가 이미 종료되었기 때문입니다.&lt;/li&gt;
&lt;li&gt;복잡한 쿼리와 성능 저하: 많은 연관 엔티티가 지연 로딩으로 설정되어 있을 때, 각 엔티티에 접근할 때마다 별도의 쿼리가 실행되므로 성능 저하를 초래할 수 있습니다. 이를 피하기 위해서는 상황에 맞게 &lt;code class=&quot;language-text&quot;&gt;Fetch Join&lt;/code&gt; 등을 사용해 즉시 로딩으로 전환하거나, 필요한 데이터를 한 번에 가져오는 전략이 필요합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;즉시 로딩(Eager Loading)&lt;/h2&gt;
&lt;p&gt;그렇다면 지연 로딩을 사용하지 않으면 모든 문제가 해결될까요? &lt;/p&gt;
&lt;p&gt;지연 로딩은 필요할 때만 데이터를 로드하는 반면, 즉시 로딩(Eager Loading)은 엔티티가 처음 로드될 때 관련된 모든 데이터를 즉시 로드합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fetch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FetchType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EAGER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Order&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; orders&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 &lt;code class=&quot;language-text&quot;&gt;FetchType.EAGER&lt;/code&gt;로 설정된 경우, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;를 조회할 때 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 리스트도 함께 즉시 로딩됩니다. 이 방식은 N+1 문제를 피할 수 있지만, 불필요한 데이터까지 모두 로드하게 되어 메모리 사용량이 늘어날 수 있습니다.&lt;/p&gt;
&lt;h2&gt;즉시로딩 vs 지연로딩&lt;/h2&gt;
&lt;p&gt;로우 쿼리 레벨에서 이야기 한다면 즉시 로딩은 불필요하게 User 테이블을 조회할 떄마다 Join 해서 Order를 항상 다 가져오는거고, 지연 로딩은 User만 가지고 왔다가 Order가 필요할 때 뒤늦게 N개의 User에 대해 for 문을 돌면서 User별 Order를 가져오는 쿼리를 N번 실행해서 생기는 문제라고 이해할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;즉시로딩&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 테이블을 조회할 때마다 항상 &lt;code class=&quot;language-text&quot;&gt;JOIN&lt;/code&gt;을 사용해서 연관된 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 테이블의 데이터를 함께 가져옵니다. 이 방식은 한 번의 쿼리로 필요한 데이터를 모두 가져올 수 있지만, &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 데이터를 필요로 하지 않는 경우에도 항상 &lt;code class=&quot;language-text&quot;&gt;JOIN&lt;/code&gt;이 발생해 불필요한 데이터까지 로드하게 되어 메모리나 성능상 오버헤드가 생길 수 있습니다.&lt;/p&gt;
&lt;p&gt;이를 쿼리문으로 표시하면 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;User&lt;/span&gt; u
&lt;span class=&quot;token keyword&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Order&lt;/span&gt; o &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;지연로딩&lt;/h3&gt;
&lt;p&gt;처음에는 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 테이블만 조회하고, 연관된 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;는 실제로 필요할 때 그때서야 개별적으로 쿼리를 실행하여 데이터를 가져옵니다. 이로 인해 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;를 조회한 후 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;가 필요해지면, 각 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;별로 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;를 조회하는 추가적인 쿼리가 발생하게 됩니다. 만약 &lt;code class=&quot;language-text&quot;&gt;N&lt;/code&gt;명의 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;가 있다면, &lt;code class=&quot;language-text&quot;&gt;N&lt;/code&gt;번의 추가 쿼리가 실행되며, 이로 인해 N+1 문제가 발생합니다.&lt;/p&gt;
&lt;p&gt;이를 쿼리문으로 표시하면 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- 처음에 User만 조회&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- 나중에 각 User마다 Order를 조회 (N번 실행)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ?&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/N1-%EB%AC%B8%EC%A0%9C%EC%9D%98-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95&quot;&gt;N+1 문제의 해결방법&lt;/a&gt;으로 이어집니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[N+1 문제의 해결방법]]></title><description><![CDATA[서론 지난 시간의 N+1 문제 소개에 이어 이번 시간에는 N+1 문제를 해결하기 위해서는 어떤 방법들이 있는지 알아보려고 합니다.  레포지토리에 User와 Order를 조인해서 가져오는 메소드와 User…]]></description><link>https://sharknia.github.io/N1-문제의-해결방법/</link><guid isPermaLink="false">https://sharknia.github.io/N1-문제의-해결방법/</guid><pubDate>Thu, 05 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0669af171f90f1e1340ae447d96a7a22/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVR42g2RyVLaAABA82ud6bnTQ9tLp9VxqtYuohWtGzOKLbgUBtwiaKUINUooBEJCAlkJWYmBBAjIIhSdfke9vMubd3pA9/6fddux74b9v/fd0YPd64udgdjoGO2O1mxJNYsxLEzShGpNqTdls15p2mLNlMw6b9SA1mD0eXk9ls1fCRWCE5bdHoTmUySD0VyeK+VoJkkUkSKFczxRKlOSHEVQ/3k8y/CUUgFawwfvYRgm2UCOTRK0Y30To9gCL2JcuShIjwEvSSleghmBk5WCpARiidB1Gi4wtKYDjbsRJalWt0/KumA2WdPmzWZeVFntBhXVBElHyNJlSSFkLSnrMEmBcDaSweECS2sGYPUHk3NLb8ELH0ptc5WZNP3mIjsFEU6ImNuPPnk9/czln8gpDpia3o9vx9JRJBdDyTCMFGQNqA9GnuDxuB98sX/qQ4tnJfWQ5CMldTkcfzq1uOo7wHghqVRX/lAz4PWHUGosCF3kuasczupVoNodBM6iRqPpFdV5MCIqOlLkcoywEUu6giCp6rhWK1etSAp9595NFegQxv6A0NkVF0JxwM1tb8KxGMvgstVMMgJEl1FBPUnmPgZOH38YvSGE5icX1sacruP4FZSnvmztbQZPnBvfr/EioLZ6Xz2+2XX3DniG8FKcEb+lqDl/aH7DG/x1KVfrjjT2au/gJ4Kt+MHn750vPy2dZ/DZNXcCpwDZ7iKCdhSDdo7ClKzhJQmTdd6wzhMp59ZuBIIz3f4qrYx7jha8gd84RSh6FCuG0lhBNQDV7piDkXU3MvvDWm9Que1p7W653pbtjtrustUGVzFEs1Gutx6t2uqULZuvWsIja43/yULLRLIZG2kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/0669af171f90f1e1340ae447d96a7a22/ca1dc/image1.png&apos; srcset=&apos;/static/0669af171f90f1e1340ae447d96a7a22/e7570/image1.png 170w,
/static/0669af171f90f1e1340ae447d96a7a22/f46e7/image1.png 340w,
/static/0669af171f90f1e1340ae447d96a7a22/ca1dc/image1.png 680w,
/static/0669af171f90f1e1340ae447d96a7a22/02d09/image1.png 1020w,
/static/0669af171f90f1e1340ae447d96a7a22/9d567/image1.png 1360w,
/static/0669af171f90f1e1340ae447d96a7a22/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;지난 시간의 &lt;a href=&quot;https://sharknia.github.io/N1-%EB%AC%B8%EC%A0%9C&quot;&gt;N+1 문제 소개&lt;/a&gt;에 이어 이번 시간에는 N+1 문제를 해결하기 위해서는 어떤 방법들이 있는지 알아보려고 합니다. &lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;레포지토리에 User와 Order를 조인해서 가져오는 메소드&lt;/strong&gt;와 &lt;strong&gt;User만 가져오는 메소드&lt;/strong&gt;를 따로 만들기&lt;/h2&gt;
&lt;p&gt;이렇게 하면, 상황에 맞게 필요한 데이터만 가져올 수 있고, 불필요한 쿼리나 데이터 로드를 방지할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;레포지토리에 각각의 메소드를 따로 작성할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;만 조회하는 메소드&lt;/h4&gt;
&lt;p&gt;이 메소드는 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;만 가져오고, &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;는 지연 로딩을 통해 나중에 필요할 때 가져오도록 설정할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; UserRepository extends JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// User만 조회하는 메소드&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SELECT u FROM User u&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllUsers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;를 함께 조회하는 메소드&lt;/h4&gt;
&lt;p&gt;이 메소드는 &lt;code class=&quot;language-text&quot;&gt;JOIN FETCH&lt;/code&gt;를 사용하여 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 연관된 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;를 한 번에 가져옵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; UserRepository extends JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// User와 Order를 조인해서 조회하는 메소드&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SELECT u FROM User u JOIN FETCH u.orders&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllUsersWithOrders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;h4&gt;필요한 데이터만 로드&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;만 필요한 경우 불필요한 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 데이터를 가져오지 않기 때문에 쿼리가 간결하고 성능이 최적화됩니다.&lt;/li&gt;
&lt;li&gt;반대로, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;가 모두 필요한 경우에는 조인을 통해 데이터를 한 번에 가져와서 N+1 문제를 방지할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;쿼리 제어 가능&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;각 메소드에서 쿼리의 동작 방식을 명시적으로 설정할 수 있으므로, ORM의 기본 동작(지연 로딩, 즉시 로딩 등)에 의존하지 않고 최적화된 방식으로 데이터 조회가 가능합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;h4&gt;&lt;strong&gt;메소드의 복잡성 증가&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;레포지토리에 여러 종류의 메소드를 추가하다 보면 코드가 복잡해질 수 있습니다. 특히, 다양한 쿼리 요구사항을 처리해야 하는 경우 메소드 수가 급격히 늘어나 관리가 어려워질 수 있습니다.&lt;/li&gt;
&lt;li&gt;매번 어떤 메소드를 사용할지 개발자가 직접 선택해야 하므로 실수로 적절하지 않은 메소드를 사용할 가능성도 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;중복 코드 발생 가능성&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;만 가져오는 메소드와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;까지 조인하는 메소드처럼 비슷한 기능을 가진 메소드들이 생기면서 중복 코드가 발생할 수 있습니다. 중복된 코드를 유지보수해야 하므로 코드가 장기적으로 복잡해질 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;확장성의 한계&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;만약 엔티티의 관계가 많아지거나 복잡해지면, 조인해야 할 엔티티가 많아지므로 각 관계마다 최적화된 메소드를 만들어야 하는데, 이 과정에서 코드 관리가 어려워질 수 있습니다.&lt;/li&gt;
&lt;li&gt;예를 들어 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt;뿐만 아니라 &lt;code class=&quot;language-text&quot;&gt;Payment&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;Delivery&lt;/code&gt; 같은 연관된 엔티티가 추가된다면 그때마다 새로운 메소드를 만들어야 할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fetch Join&lt;/h2&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;Fetch Join을 사용하여 연관된 엔티티를 한 번에 가져오는 방법입니다. JPA에서 &lt;code class=&quot;language-text&quot;&gt;JOIN FETCH&lt;/code&gt;를 사용하면 기본적으로 Lazy Loading으로 설정된 연관 엔티티를 즉시 로딩으로 전환하여, 필요한 데이터를 모두 한 번에 가져옵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; UserRepository extends JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SELECT u FROM User u JOIN FETCH u.orders&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllUsersWithOrders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;한 번의 쿼리로 관련 데이터를 모두 조회: 여러 테이블을 조인해 한 번의 쿼리로 데이터를 조회하므로 N+1 문제를 해결할 수 있습니다.&lt;/li&gt;
&lt;li&gt;성능 최적화: 불필요한 추가 쿼리가 발생하지 않기 때문에 성능이 향상됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;데이터 중복: 조인된 테이블의 데이터가 중복되어 반환될 수 있습니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 1명에 &lt;code class=&quot;language-text&quot;&gt;Order&lt;/code&gt; 10개가 있으면, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;가 10번 중복되어 조회될 수 있습니다.&lt;/li&gt;
&lt;li&gt;페이징 불가: JPA에서는 &lt;code class=&quot;language-text&quot;&gt;Fetch Join&lt;/code&gt;을 사용할 때 페이징 기능을 사용할 수 없습니다. 대량의 데이터에서 페이징이 필요하면 다른 해결책을 찾아야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;EntityGraph&lt;/h2&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@EntityGraph&lt;/code&gt;는 특정 엔티티의 연관된 엔티티들을 즉시 로딩으로 설정할 수 있는 기능입니다. 이 방법은 Fetch Join보다 더 명시적으로 필요한 엔티티들만 선택적으로 로드할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; UserRepository extends JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@EntityGraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;attributePaths &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;orders&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAllWithOrders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;선택적 즉시 로딩: 특정 연관 엔티티만 선택적으로 즉시 로딩할 수 있어 성능 최적화에 유리합니다.&lt;/li&gt;
&lt;li&gt;더 간결한 쿼리: Fetch Join보다 코드가 간결하며 쿼리 가독성이 좋습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;유연성 부족: 복잡한 조인 관계를 설정할 때는 Fetch Join보다 유연성이 떨어질 수 있습니다. 특히 다중 테이블 조인이나 특정 조건의 조인에는 적합하지 않을 수 있습니다.&lt;/li&gt;
&lt;li&gt;쿼리 튜닝의 한계: 데이터베이스 레벨에서 세밀한 쿼리 튜닝을 하기는 어렵습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Batch Size&lt;/h2&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@BatchSize&lt;/code&gt;는 연관 엔티티를 Lazy Loading으로 가져올 때, 한 번에 가져올 데이터의 수를 조정하여 성능을 최적화하는 방법입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; User &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fetch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FetchType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LAZY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@BatchSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Order&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; orders&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Lazy Loading을 유지하면서 성능 최적화: 한 번에 여러 개의 엔티티를 가져오므로, Lazy Loading의 장점을 살리면서 N+1 문제를 줄일 수 있습니다.&lt;/li&gt;
&lt;li&gt;메모리 효율: 필요한 만큼의 데이터를 가져오므로 메모리 사용을 최적화할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;설정 복잡성: 각 연관 관계마다 적절한 배치 크기를 설정해야 하므로, 모든 상황에 대해 적절한 값을 찾기가 어려울 수 있습니다.&lt;/li&gt;
&lt;li&gt;대규모 데이터에서 한계: 데이터가 대규모일 경우에도 배치로 묶어 가져오기 때문에 여전히 성능 문제나 메모리 부담이 발생할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;DTO Projection 사용&lt;/h2&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;DTO(데이터 전송 객체)를 사용해 필요한 데이터만 쿼리해서 가져오는 방식입니다. 엔티티 전체를 로딩하는 대신, 특정 필드들만 쿼리해서 가져오기 때문에 성능 최적화가 가능합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; UserOrderDTO &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; String userName&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; LocalDateTime orderDate&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UserOrderDTO&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String userName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; LocalDateTime orderDate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;userName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; userName&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;orderDate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; orderDate&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation builtin&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; UserRepository extends JpaRepository&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Long&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SELECT new com.example.UserOrderDTO(u.name, o.orderDate) FROM User u JOIN u.orders o&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UserOrderDTO&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findUserOrderData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;필요한 데이터만 조회: 엔티티 전체를 가져오지 않고, 필요한 필드만 가져와 성능을 최적화할 수 있습니다.&lt;/li&gt;
&lt;li&gt;성능 최적화: 연관 엔티티가 많아도 DTO로 필요한 정보만 가져오므로 데이터 로딩 비용을 줄일 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;유연성 부족: DTO는 엔티티와 다르게 데이터베이스의 영속성 컨텍스트에서 관리되지 않으므로, 비즈니스 로직에서 엔티티처럼 활용하기 어려울 수 있습니다.&lt;/li&gt;
&lt;li&gt;복잡한 쿼리 작성 필요: 다양한 필드를 조합해야 할 경우, 복잡한 쿼리와 DTO 설계가 필요해질 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Secondary Query Cache&lt;/h2&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;ORM에서 제공하는 2차 캐시 기능을 활용하여, 쿼리 결과를 캐싱하고 필요할 때 캐시된 데이터를 재사용하는 방식입니다. Hibernate에서는 설정을 통해 2차 캐시를 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;hibernate.cache.use_second_level_cache&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;true
&lt;span class=&quot;token assign-left variable&quot;&gt;hibernate.cache.region.factory_class&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;org.hibernate.cache.jcache.JCacheRegionFactory&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;데이터 재사용: 데이터베이스를 매번 조회하지 않고 캐시에 저장된 데이터를 재사용할 수 있으므로 성능 향상에 도움이 됩니다.&lt;/li&gt;
&lt;li&gt;N+1 문제 완화: 동일한 쿼리가 반복적으로 실행될 때 캐시된 데이터를 활용하여 성능 저하를 방지할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;데이터 일관성 문제: 캐시된 데이터가 실시간으로 변경되지 않기 때문에 데이터 일관성 문제가 발생할 수 있습니다. 자주 변경되는 데이터를 캐싱하는 데는 부적합할 수 있습니다.&lt;/li&gt;
&lt;li&gt;캐시 관리의 복잡성: 캐시 만료 시간, 데이터 동기화 등의 설정을 적절히 관리해야 하며, 복잡한 애플리케이션에서는 캐시 관리가 어려워질 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;요약&lt;/h2&gt;
&lt;p&gt;로우쿼리로 직접 작업할 때에도 스키마가 복잡해지면 결국 쿼리문이 복잡해져서 작업이 힘들어지는데 ORM도 결국 같은 문제를 갖고 있다고 생각됩니다. 각 방법은 상황에 맞게 적용해야 하며, 각각의 장점과 단점이 있으므로 성능과 코드 복잡성을 모두 고려한 최적화 전략을 선택하는 것이 중요합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fetch Join: 한 번의 쿼리로 모든 데이터를 가져올 수 있지만, 페이징이 어렵고 중복 데이터가 발생할 수 있음.&lt;/li&gt;
&lt;li&gt;EntityGraph: 더 세밀한 제어가 가능하지만, 유연성이 부족하고 쿼리 튜닝에 한계가 있음.&lt;/li&gt;
&lt;li&gt;Batch Size: Lazy Loading을 유지하면서 최적화를 시도할 수 있지만, 설정의 복잡성과 대규모 데이터 처리에 한계가 있음.&lt;/li&gt;
&lt;li&gt;DTO Projection: 필요한 데이터만 조회할 수 있어 성능이 좋지만, DTO 설계가 복잡하고 영속성 관리가 어려움.&lt;/li&gt;
&lt;li&gt;Secondary Cache: 쿼리 성능을 크게 향상시키지만, 캐시 관리의 복잡성과 데이터 일관성 문제가 발생할 수 있음.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[SDKMAN!과 bootRun]]></title><description><![CDATA[서론 JVM(Java Virtual Machine) 버전을 관리할 수 있는 도구로는 SDKMAN!이라는 것이 있습니다. SDKMAN!은 다양한 JVM 버전뿐만 아니라 여러 Java 관련 도구(예: Maven, Gradle, Scala…]]></description><link>https://sharknia.github.io/SDKMAN과-bootRun/</link><guid isPermaLink="false">https://sharknia.github.io/SDKMAN과-bootRun/</guid><pubDate>Wed, 04 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/2798bdab70a90a9a9008fdd6f4ca00f0/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACi0lEQVR42iVS6U/TABzt/2T0g/IBokQFIVE8EsQjGo+YEP2AQUQ+GA14wDY2tnb31mNrux5bt65lR9nR3WtXYbBuiyAsxKD4P9ho8svLS96H9355DzB7w1Y/HmSSMCv4qSTGpT14zB4kIZSGMNaBGMg4YMqBUF6CQ2MpJCrCjLARJG1BEjC5URdGff/5p7Z3kKm3a+2+ICuVnX55uydruqx1lM5+eVuvtXspWcnVdyrf+vrgN4RSFh8GmDwhF0a3uj+YrZo1QD2Z+xiIZeO5OpWuoHw+ZJwoU5lqVCozaTnIpuO5hn70y3C2BnBgPUC4w2y9P+DzFbOPmluGkoXmwrL9wpXpsev3L03cOTM0fnHyAcyIK1bv5KPXT5dMin5gfGSHKcASoHxEnNd6lnCczzeYdGWz1HqzDJ4bnro8dnt04tb5kcmR8XuEWHj3CRybmX28uKp0Dpyh2AbKAiYf6QpFi5oO4glZ3ZNqra1G+9WS+ezw1Oi16fEbD4dGbw5fvRvPK2hMer64OmsJSb1jCGGsMG04E6Af17qHYDgBwjQvVUw4DxIClypDSMzixAlOAknBw2YtCCeVWxRmkxoqhHG2YARYR+i1SDrb0hec5MyLtx/M3s9M1sFmImIxIVWZzZJQ1kwwZ4FjS2vBVFHNOF5qzaoT5+0wCay5Q8/mvzT3T+i8CqJcTu2S2Tol1bdUPSIU0WjWSMvmVCZTJUVZ2T+ZX/Gka7vGFmwBEvjqRBbem9T+oLJ3GMsrhlxqHyaKWrl7XOoMaKkpVtvbR6fJosoXlN3BqcMXKqgdCGWsAcKoijRKcxNxLyW6yKQ7Irj/ESfBuyICRCRdJO8meed/ySAY4wpz635iA6H/Ahz9svYS2AAJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/2798bdab70a90a9a9008fdd6f4ca00f0/ca1dc/image1.png&apos; srcset=&apos;/static/2798bdab70a90a9a9008fdd6f4ca00f0/e7570/image1.png 170w,
/static/2798bdab70a90a9a9008fdd6f4ca00f0/f46e7/image1.png 340w,
/static/2798bdab70a90a9a9008fdd6f4ca00f0/ca1dc/image1.png 680w,
/static/2798bdab70a90a9a9008fdd6f4ca00f0/02d09/image1.png 1020w,
/static/2798bdab70a90a9a9008fdd6f4ca00f0/9d567/image1.png 1360w,
/static/2798bdab70a90a9a9008fdd6f4ca00f0/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;JVM(Java Virtual Machine) 버전을 관리할 수 있는 도구로는 &lt;strong&gt;SDKMAN!&lt;/strong&gt;이라는 것이 있습니다. SDKMAN!은 다양한 JVM 버전뿐만 아니라 여러 Java 관련 도구(예: Maven, Gradle, Scala 등)도 쉽게 설치하고 관리할 수 있게 도와줍니다.&lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;터미널에서 다음 명령어를 실행하여 SDKMAN!을 설치합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://get.sdkman.io&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 완료되면, 새로운 쉘을 열거나 다음 명령어를 실행하여 SDKMAN!을 활성화합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token environment constant&quot;&gt;$HOME&lt;/span&gt;/.sdkman/bin/sdkman-init.sh&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;JVM 버전을 설치하고 관리할 수 있습니다. 예를 들어, 특정 Java 버전을 설치하려면 다음과 같이 입력합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;sdk &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11.0&lt;/span&gt;.11.hs-adpt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치된 JVM 버전을 전환할 때는 다음 명령어를 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;sdk use &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11.0&lt;/span&gt;.11.hs-adpt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;bootRun&lt;/h2&gt;
&lt;h3&gt;booRun?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;은 Spring Boot 애플리케이션을 Gradle을 통해 직접 실행할 수 있도록 하는 Gradle task입니다. 이는 Gradle 빌드 도구를 사용하는 Spring Boot 프로젝트에서, 애플리케이션을 컴파일하고 즉시 실행할 수 있도록 해주는 편리한 명령어입니다.&lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;의 역할&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;코드를 컴파일: &lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt; 명령어는 프로젝트의 코드를 컴파일한 후, 애플리케이션을 실행합니다.&lt;/li&gt;
&lt;li&gt;애플리케이션 실행: Spring Boot 애플리케이션을 직접 실행하여 &lt;code class=&quot;language-text&quot;&gt;localhost:8080&lt;/code&gt; 등에서 결과를 확인할 수 있습니다.&lt;/li&gt;
&lt;li&gt;개발 단계에서 주로 사용: &lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;은 애플리케이션을 개발할 때 빠르게 실행하고 테스트하기에 적합한 도구입니다. &lt;code class=&quot;language-text&quot;&gt;bootJar&lt;/code&gt;와 같이 패키징하는 과정 없이도 바로 실행이 가능하기 때문에, 코드를 수정하고 결과를 빠르게 확인할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt; 명령어 실행 방법&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c84fbd9110c6fea3b9ae04ee9e99dc62/1263b/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 76.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVR42p2T227TQBCG/TQljuNde23Hh/VpfUxDWq5akLhAIFQhcYUEz8Dr8IY/M1tipSC1CRe/7PXsfrP+Z8Ypa4Np9xobEcLzA6w30orfj2vPl8v30xjLl8qeDaMtsqKCI8PYLvgji9csfufNMkzoGUEE0RI7BfI+TiIVAXUDh2GBSijwmC1JNbaZtoBQxYjzDjIqoOIM8TZHmpd23ymUgaFS0LqAs6Fgpmu03QTTz6jqHmveyJl9zs6HHp9H8XqRiOCurpBcf8Pw5Rcc9od/ozY7DOMMGSg6JOCdKzrvrl5h271H8+4nAWUCL8igsg5md4dueoN2vEWcGaxlamMvyRUJkjhBW2v65fQGwjzAKz8g33/FfP+d9APR8IBN/RF+8+l5tZ/hFW/JX42WLHM8QQaL2HqRFQ2G+QAz7NCNe6pcSj4qG3tOLvmapAU6C7SVEoiSHO2wR9N2VMXwT1/Ks7Va+3A9cQRKAhZo+gNlmTBMe9ukfzfxS+JWW4CKgO1wsJXmFtJVu0zPOeLk3J9PgGa6gS4bXK08e/1LbvcPMIwyVIY97GkqUjuO/w30qdJ51aOfbzHO16Q9jV95kYdPgCKIUdQjqsaQd8bO8qUFOQJ/A94H38Fev4bsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/c84fbd9110c6fea3b9ae04ee9e99dc62/ca1dc/image2.png&apos; srcset=&apos;/static/c84fbd9110c6fea3b9ae04ee9e99dc62/e7570/image2.png 170w,
/static/c84fbd9110c6fea3b9ae04ee9e99dc62/f46e7/image2.png 340w,
/static/c84fbd9110c6fea3b9ae04ee9e99dc62/ca1dc/image2.png 680w,
/static/c84fbd9110c6fea3b9ae04ee9e99dc62/1263b/image2.png 1000w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
Intellij에서 Gradle 메뉴를 선택 후 &lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;을 더블클릭 합니다. &lt;/p&gt;
&lt;h3&gt;주의 사항&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;은 개발 환경에서 주로 사용되며, 배포용 빌드에는 적합하지 않습니다. 실제로 애플리케이션을 배포할 때는 &lt;code class=&quot;language-text&quot;&gt;bootJar&lt;/code&gt; 같은 태스크로 패키징된 JAR 파일을 만들어서 배포하는 것이 좋습니다.&lt;/li&gt;
&lt;li&gt;환경 변수 및 프로파일 설정을 통해 개발과 배포 환경을 구분해서 사용할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;요약&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bootRun&lt;/code&gt;은 Spring Boot 애플리케이션을 즉시 실행하는 Gradle의 편리한 태스크입니다.&lt;/li&gt;
&lt;li&gt;개발 중에 빠르게 애플리케이션을 실행하고 테스트할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;결과&lt;/h3&gt;
&lt;p&gt;bootRun까지 마치면 &lt;a href=&quot;http://localhost:8080/&quot;&gt;http://localhost:8080&lt;/a&gt;에서 서버를 테스트 해볼 수 있습니다.&lt;/p&gt;
&lt;h2&gt;코드 수정 후 자동 컴파일-자동 재실행 설정하기&lt;/h2&gt;
&lt;p&gt;코드를 수정할 때마다 bootRun을 할 생각을 하니 끔찍합니다. 이를 피하기 위해 코드 변경 시 서버가 자동으로 재시작되도록 설정하는 것이 훨씬 편리하게 개발할 수 있는 방법입니다.&lt;/p&gt;
&lt;h3&gt;IntelliJ에서 자동 빌드 설정&lt;/h3&gt;
&lt;p&gt;설정에서 다음을 찾아 &lt;code class=&quot;language-text&quot;&gt;프로젝트 자동 빌드&lt;/code&gt; 를 체크합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/a90584f086c433b8a52a039435b565ce/698bb/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 80.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACmUlEQVR42p2Ty2rbQBRATaAlkEVqAnUJODQxrm1pNKPHjF4jW7Yc59WatKvuYkih+y76X4V+RbxofyIEUn1CI93eK9slSRNoKziMkDRH9zW1jzXviVbuu47k56bJzwzLmrW73SXGrIt4SlV0DWtmWPaMvllhcn7GGD/vMfbWMIyntebW1raU6toNIhC2KoWrIE6GEOm0WoMoAUu4IBwPGHeq+3sUNu5h3L3crm83a3jtyCD+McoO8KVX4KbSD6JSBXHph0mFpyJcdelHCT7XpfRjJKqeO15ww20JpmVfbTYauyRsxnqQD1HY6ZmlKRR44QgURhwuo0Qp0CbH83G9HamDIoFB2NAz+VVjJZQqzI9OpuAHIQoDCNI3kPQHkAwy6KdjXEeg+1SGwYIkxZ9osKUG7upCuBEKrYVwfb3etIKTfDydgRNPSxaewmj6AbIsg2xyXAn8QIMrgzs1pHuT0+oWWKrbwvUmEypPsyOQWB/maAiHp1WE1BjabDDxIJguwqnu94Rc5OPJIaTpuLTwrwprpvsjTHcfu9yvpFj0x/hTaDKRTw5fQxT3S6qLrw9A+SFgF5Fwkd6/CIUtMcIjGGaTkuFHOhlU84edA5qxxZw5j1EsynKry34Qo/CYxqIkCc5g1VXhyIrFnNFm9yGKO3NIEWKXchoNGmoSUprUXRJTdK4MUaweS70gsbGaw3q93uz22DWJsHM3CB2lAqUFngacMVlYtldwR1KtCox0ib26/8kYA8PoXaLwJQl38MO8Sk14JYJnWv5O18bI6IRUpwTfraCIOYFn2R28Bx6dXm1u1nZrGxsbz9vtzte91qtvyMVeqz3/G3qGNW93evNWq3XB9j9/N7NPX7AfDWrKGvIMebF88L+QY+0XENKk3OR8SNIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/a90584f086c433b8a52a039435b565ce/ca1dc/image3.png&apos; srcset=&apos;/static/a90584f086c433b8a52a039435b565ce/e7570/image3.png 170w,
/static/a90584f086c433b8a52a039435b565ce/f46e7/image3.png 340w,
/static/a90584f086c433b8a52a039435b565ce/ca1dc/image3.png 680w,
/static/a90584f086c433b8a52a039435b565ce/02d09/image3.png 1020w,
/static/a90584f086c433b8a52a039435b565ce/9d567/image3.png 1360w,
/static/a90584f086c433b8a52a039435b565ce/698bb/image3.png 2068w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이번안 다음을 찾아 &lt;code class=&quot;language-text&quot;&gt;개발된 애플리케이션이 현재 실행 중인 경우에도 auto-make가 시작되도록 허용&lt;/code&gt; 을 체크합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/967ef4a35e696319e0e0e6f0060b362d/698bb/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 80.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVR42p2TzWrbQBDHTaDFkIMbAnUwODQJriXtrlYfK621svXhjzjNoU0PpbcEcui99MUKfYrk0L5ECKR6hEaazipOHFNM0wr+rDTM/vTfmdnGp4b/LA68931hnxNin1qMnfUM40yv9/L9oJbBrJW4ZVlnhmGcmpSeo07w+3mju73dESK48WQE3Akq7gYQjzJwfQmMe2A7PjheUEu/P5YbjMCVeemKCChzrzqdTreBz66Q6mc+PkSAXxLmVKFUlR+qyqJORW1vrTC/EjK+VcMM0Mh1q9Xa08CuipMiG8+gb1JMdEEMRhCGApME6G/8yYp07D6Oa8nRLaH8utVuI7DZ7IowKo6O30I4iNEVB0+mcDRRMFDDR0f1tAt9CtA5WhqIa6nhJmHXbQ1sIhADxXg61xsqmzswzWOw3WXNHC98qKN2rWP37tcAnSLNp+CHUUWoDSI5gXR8BGk+gWGS1xrECUiVoOtR/a6GKXhCrgdOZgjIZhVjLnAxhFE2rUHZ5BAhCYhQLRzfOWRLl6WehhUgFrSYzY9BxWk9NvgDXU+ERBBIVUtGQ+CLI3PXX6wId0Wp4yaxl0DuuOhwDlk+qSh7KPaKcMMf3V5o9cjY5m6oJsX0zXsc0qyyeLhu49OAza2tri3nxWj2AZg8roiXYhL/R6C3PPIWAg3DvDEtApZFbi3K9G35q3R3tUzKfxFigWH0rxD4SgN39Rzyu7nDOcROPkE636nll17yEezoHV69xl5jc3PzZa/X/7Z/8Po76mL/oHf5FBkmvTQtdkkpvaDTLz/I+PNXbEhb3+UN1AvUziLwP9pZMDZ+A6zxoYkFrub5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/967ef4a35e696319e0e0e6f0060b362d/ca1dc/image4.png&apos; srcset=&apos;/static/967ef4a35e696319e0e0e6f0060b362d/e7570/image4.png 170w,
/static/967ef4a35e696319e0e0e6f0060b362d/f46e7/image4.png 340w,
/static/967ef4a35e696319e0e0e6f0060b362d/ca1dc/image4.png 680w,
/static/967ef4a35e696319e0e0e6f0060b362d/02d09/image4.png 1020w,
/static/967ef4a35e696319e0e0e6f0060b362d/9d567/image4.png 1360w,
/static/967ef4a35e696319e0e0e6f0060b362d/698bb/image4.png 2068w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;자동 서버 재실행: spring boot devtools&lt;/h3&gt;
&lt;h3&gt;Spring Boot Devtools의 주요 기능&lt;/h3&gt;
&lt;h4&gt;&lt;strong&gt;자동 재시작 (Automatic Restart)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;애플리케이션의 클래스나 리소스 파일이 변경되면, Devtools가 이를 감지하고 애플리케이션을 자동으로 재시작합니다.&lt;/p&gt;
&lt;p&gt;Gradle 또는 Maven 프로젝트에 의존성을 추가하면 활성화되며, Spring Boot 프로젝트를 재실행하지 않아도 변경된 코드가 반영됩니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;LiveReload 통합&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;LiveReload는 브라우저를 자동으로 새로 고침하는 기능을 제공하며, 코드를 수정하면 브라우저에서 변경 사항이 즉시 반영됩니다.&lt;/p&gt;
&lt;p&gt;이를 통해 프론트엔드 개발 시에도 수정한 내용을 즉시 확인할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;캐싱 비활성화&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Devtools는 개발 중 데이터 캐싱을 비활성화하여, 변경된 설정이나 데이터를 즉시 반영할 수 있도록 돕습니다. 프로덕션 환경에서는 캐싱을 사용하는 것이 일반적이지만, 개발 중에는 캐싱으로 인해 변경 사항이 제대로 반영되지 않는 상황을 방지합니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;프로퍼티 파일 자동 로딩&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;application.properties&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;application.yml&lt;/code&gt; 파일을 수정하면, Devtools가 이를 감지하고 다시 로딩해 변경된 설정을 반영합니다.&lt;/p&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;p&gt;자동으로 서버를 재실행 하기 위해서는 spring boot devtools가 필요합니다. 다음의 의존성을 추가하고 Gradle을 새로고침합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;developmentOnly&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springframework.boot:spring-boot-devtools&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;developmentOnly&lt;/code&gt; 를 사용해 &lt;strong&gt;개발 환경에서만 사용&lt;/strong&gt;하도록 설계되었습니다. 배포 시 Devtools가 포함되지 않으며, 이를 위한 별도의 설정 없이도 프로덕션 빌드에서 Devtools가 자동으로 제외됩니다.&lt;/p&gt;
&lt;h3&gt;환경 설정&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;application.properties&lt;/code&gt; 에 다음의 설정을 추가해줬습니다. 이로써 이 프로젝트가 어느 환경인지를 명시할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;enviroment&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;dev&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;결과&lt;/h3&gt;
&lt;p&gt;여기까지 마치면 클래스 파일을 수정을 하면 브라우저를 통해서 테스트를 해보면 변경사항이 별도의 작업 없이 반영되는 것을 확인할 수 있습니다. 다만 파이썬이나 Node.js처럼 즉각적으로 반영은 되지 않고 약간의 시간 소요가 필요합니다. &lt;/p&gt;
&lt;h2&gt;윈도우에선: jabba&lt;/h2&gt;
&lt;p&gt;윈도우에서도 SDKMAN!을 사용할 수 있는지 찾아보면 WSL을 통해 설치할 수 있다는 글이 꽤 나옵니다. 물론 이렇게 해서 설치를 할 수는 있지만, WSL은 윈도우 환경과 분리되어 있어 WSL에 설치된 프로그램은 기본적으로 WSL 내부에서만 동작합니다. &lt;/p&gt;
&lt;p&gt;단적으로 이야기해서 인텔리제이에서는 이렇게 설치된 SDKMAN!을 통한 JDK는 사용할 수 없습니다. 따라서 윈도우에서 JDK 버전 관리를 위해서는 다른 프로그램을 사용해야 합니다. 바로 Jabba입니다. &lt;/p&gt;
&lt;h3&gt;Jabba 설치&lt;/h3&gt;
&lt;p&gt;PowerShell을 관리자 권한으로 실행해 다음의 명령어를 실행합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;iwr&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;useb https:&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;raw&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;githubusercontent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com/shyiko/jabba/master/install&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ps1 &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;iex&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;설치 오류&lt;/h3&gt;
&lt;p&gt;관리자 권한으로 실행을 했는데도 다음과 같은 오류가 난다면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; : 이 시스템에서 스크립트를 실행할 수 없으므로 C:\Users\ID\&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jabba\jabba&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ps1 파일을 로드할 수 없습니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 자세한
내용은 about_Execution_Policies&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;https:&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;go&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;microsoft&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com/fwlink/?LinkID=135170&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;를 참조하십시오&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
위치 줄:80 문자:3
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$jabbaHome&lt;/span&gt;\jabba&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ps1
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;   ~~~~~~~~~~~~~~~~~~~~
    &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; CategoryInfo          : 보안 오류: &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;:&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; PSSecurityException
    &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; FullyQualifiedErrorId : UnauthorizedAccess&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;PowerShell의 실행 정책이 기본적으로 제한되어 있어 발생합니다. 이를 허용하려면 실행 정책을 변경하면 됩니다. PowerShell을 관리자 권한으로 실행해 다음의 명령어를 입력합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;Set-ExecutionPolicy&lt;/span&gt; RemoteSigned &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Scope CurrentUser&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어는 로컬에서 생성된 스크립트는 실행을 허용하고, 원격에서 다운로드된 스크립트는 서명이 있을 때만 실행하도록 합니다.&lt;/p&gt;
&lt;p&gt;다시 시도를 하면 설치가 정상적으로 된 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;JDK 설치&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 사용해 설치 가능한 리스트를 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;jabba &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;remote&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원하는 버전을 선택해 다음의 명령어로 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;jabba install &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;선택한버전&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래의 명령어로 설치된 JDK 리스트를 확인하고&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;jabba &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 명령어로 사용할 자바를 선택할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;jabba use &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;선택한버전&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;오류&lt;/h2&gt;
&lt;h3&gt;잘못된 Gradle JDK 구성을 발견했습니다.&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;IntelliJ IDEA&lt;/strong&gt;에서 Gradle이 사용하고 있는 JDK 버전이 프로젝트에 필요한 JDK 버전과 일치하지 않기 때문에 발생할 수 있습니다. 이를 해결하려면 IntelliJ에서 Gradle이 사용하는 JDK를 올바르게 설정해 주어야 합니다.&lt;/p&gt;
&lt;p&gt;IntelliJ IDEA에서 &quot;잘못된 Gradle JDK 구성을 발견했습니다&quot; 메시지 옆에 있는 &quot;Gradle 설정 열기&quot; 버튼을 클릭하거나, 상단 메뉴에서 File &gt; Settings (macOS의 경우 IntelliJ IDEA &gt; Preferences)로 이동합니다.&lt;/p&gt;
&lt;p&gt;왼쪽 메뉴에서 Build, Execution, Deployment &gt; Build Tools &gt; Gradle을 선택합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7f57651fe43d08157143caab3b3b083d/698bb/image5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 80.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC1UlEQVR42m1T2WrbQBQ1hbaGPLgmEEPAIbbr2pZmRvtiSZYlbyEhdIG2jzGk0NdCv6zQr0ge2p8IhlSf0Ixu7x3bwUlqOIxmO3PPOdeVrxXneezZH3quuNR1caFxvuz2+wp9TUP0l9w0l6bjLTWuLWl/F7oQF4yJywFj7zVNe1Fp7u8fuq53awdDMEyvNGwPwjiFISKMRuAFkRpNXOeGDcJ0gCPEBrgm6Q4T1s1h/bBZwd+RG0R/8skCNx2JG2U8ykrXH5Z4uKQ5jRozFHRuPoJxh/dAY2JVazRaRNiM4rTIJnPoDRgRqOpG44mqjOCHCY4p2G4IlhM8hjQsDwmNVWNL6HpBcXp2Dn4wLDVdgOOFSDhVoIdGaQ45jlGM0i0XHDdA8jXQCknnmTBXtVqtVanW603dSop09g7scFbqZogXfIgT9DFK7r1EGyCOY0VIXpKSDSR5eS+5jkZqVl6ki08ggpOS2SnE+Tkks4/AvakKZQuXxjAG9G4Xkh4Y6HwtuVqtNrkwiulsDpbtkMnArQiwarCDHKJkjD75YGBllDSNO9WRVKnj+IAQN4psuoBkNCk5t6l80HSORK4iHKLkrXQln9ZwTns4l1Q9N6yNh0ioM0MRxklWmuvEFKgySpsQxWNMO1ZpU+q0R1KpD6lyVIaEmwrRh2K6OKUXqefuCSnFbfsQWTCkdsK0kwnKD9QZ8pDtSlZt44dFThViQ2/N3hKu/XOUdwIfI491tGQHkuH5B4SOF9zOT87I5LsBMyRaILEfqb8kJivD9FSms7fST+bS8jMFG2H6Y2l46V/LjbAA8wY9PMa2qR9RKObak1Lg34gqIRjYX+SP6Y4w8QwsDxP3CRk44UR1geVhKPMvIJLPq9rLSquyt7d30O32frY7b34hrtqd7vUTtDtPMBho16+7vetO+/iKTb//1ifffqDaBkl+hqhtJgcbPP7enf9vjb5fEdc/daKoROTY0AkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image5&apos; title=&apos;&apos; src=&apos;/static/7f57651fe43d08157143caab3b3b083d/ca1dc/image5.png&apos; srcset=&apos;/static/7f57651fe43d08157143caab3b3b083d/e7570/image5.png 170w,
/static/7f57651fe43d08157143caab3b3b083d/f46e7/image5.png 340w,
/static/7f57651fe43d08157143caab3b3b083d/ca1dc/image5.png 680w,
/static/7f57651fe43d08157143caab3b3b083d/02d09/image5.png 1020w,
/static/7f57651fe43d08157143caab3b3b083d/9d567/image5.png 1360w,
/static/7f57651fe43d08157143caab3b3b083d/698bb/image5.png 2068w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
현재 사용하는 버전의 JVM이 올바르게 선택되어 있는지 확인합니다. 만약 필요한 버전이 목록에 없으면, 해당 버전을 설치 또는 추가 해줘야합니다.&lt;/p&gt;
&lt;p&gt;오류를 해결 한 후 &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5879f74e79fc540d95cfb0159f541efd/e0a8c/image6.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 77.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvklEQVR42p1U2XKbQBDkY1K2rANxLAss9ykhpMLYSWQ/2P//F52ZdVDJLtmO8tC1sDM0090LhooztNseS9PGfLk+YbGyaGWY7/bvFqauTVitHY21LRCoBIYMFBzhnxptV+r7pfnWaLkKpi1hOZJqPoQM9f45Kb+ICX0m5AYhld4wLQHPj+CHCWwitYWECHI4MqG6p1/2FWEYZTB4MhUXGB+fMYxHdP2I4eGI/fATW7ru+gFl02E2X12UzOAayx3uH2FMfnlhgaLa6Cl4AvZ0Rg8zwbR+htu7JVwvoOdbGJbjQXgh6adwdg/YH0b0BBXnmtyl2ndgf9n3rKhhsGdZ0RJBiarp8ev4gt9Pr9jtR6R5gySrvwT3hFGuJyzrzZtkLZskchhVs6U1puaSQnK1pPNjcwncw6ElWQVjMtalpIvmgCyvtNQpvY8BfAbuZS//Eq7hkBdZ1dPYLTbdgaRU/0w2gYM8I1REuENe1uRJqo/Bx/P23YS8nghtoZDXPSL6FH/czHEzW1w13QVCH1G+RU7RyyDSx+FaDzUhX3CaKm1Q0IR126HZ7Ig0/j/C6Y8h/BRxWoD/Pp6vriI7J/wD8nzgIXl60iAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image6&apos; title=&apos;&apos; src=&apos;/static/5879f74e79fc540d95cfb0159f541efd/ca1dc/image6.png&apos; srcset=&apos;/static/5879f74e79fc540d95cfb0159f541efd/e7570/image6.png 170w,
/static/5879f74e79fc540d95cfb0159f541efd/f46e7/image6.png 340w,
/static/5879f74e79fc540d95cfb0159f541efd/ca1dc/image6.png 680w,
/static/5879f74e79fc540d95cfb0159f541efd/e0a8c/image6.png 998w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
Refresh를 실행합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Kotlin/Spring 프로젝트 설치 및 실행]]></title><description><![CDATA[서론 한국에서 자바와 스프링은 대세중의 대세입니다.  구인풀도 넓고, 자료도 많고, 검증된 안정성으로 다른 언어로 시작한 회사들도 스프링 기반으로 백엔드 서버를 바꾸는 일도 많습니다.  처음에 자바는 뭔가 C…]]></description><link>https://sharknia.github.io/KotlinSpring-프로젝트-설치-및-실행/</link><guid isPermaLink="false">https://sharknia.github.io/KotlinSpring-프로젝트-설치-및-실행/</guid><pubDate>Tue, 03 Sep 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5c5b1b8da91c59c04dadb0c5563deed4/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZ0lEQVR42kWSW0/TYBjH+z38BMR75YILjQfwwhAQJSIkRFTkuJhN0BCm7sC6jq5ru7Gta7t1XY/v267HHRgYMV4QA6IhRj6O77wx+T/Jc/PLL/8nD7avwrz2P7RhFXQLb2jDRQW0bqUFmTUtRjPzKkiLCm3aec3K68NgQ1gFlAYKOmQMq2I5RdPe3K+UTCvFSYRkrCQoDtqMrOyJymqqULFdSocUgrUhDEjFzCuA0a1q2xP8sBn2Kk5XCA5rXl8MBlL3uOb16mG/YvtkC5RtrwjbCCZViOX+aZGNa3vNTtc5+ZIoC7E9cgsnn29/WNzanVhcjySItwTNKCYyC15QsT3GbJMawEgNlYScjcheNHdAqyCSJu8/XRqbmlvZ+bhLUjPLGw/ml2c33tMqXM+wguMjvggddBqsYNgl0Bb9EBekaJZN15pv9vJjUwujk3Nr8eQnpvR4LXp79uXUyhY87OuhX3fcetCptn0GOBhtOrzr5xotqqXbx0eXV2c7ZHHk7sz4wuuRO9PX7z26dmP85uTCrWdr57/Pf12dW5+P6kGXdwMWulgJurzjZ8VWUYNVYMUZjmo0s+UyyfMJphinGJKrJmk6VeayohLBi1LQ0QcD5CtZHoauxzm+0u0VWuZ8LDk6vaT4/o+ri9PL74zUiGXzXy9Oz/78DL6d4Lw88erdNlXVDwei3zlAMBrUQe31Mrz8JJqceBEjRJmHgG3UGYGPJIlMlVc7IRz0CUF5uLqziTPG0THnhkMzAz0WuLRuE7JJyCAjGSlRTVVFvNYgZYNsanGWS4tyAX2VauGSkWuBA9tHYS3vLyZYiOg8/cMkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/5c5b1b8da91c59c04dadb0c5563deed4/ca1dc/image1.png&apos; srcset=&apos;/static/5c5b1b8da91c59c04dadb0c5563deed4/e7570/image1.png 170w,
/static/5c5b1b8da91c59c04dadb0c5563deed4/f46e7/image1.png 340w,
/static/5c5b1b8da91c59c04dadb0c5563deed4/ca1dc/image1.png 680w,
/static/5c5b1b8da91c59c04dadb0c5563deed4/02d09/image1.png 1020w,
/static/5c5b1b8da91c59c04dadb0c5563deed4/9d567/image1.png 1360w,
/static/5c5b1b8da91c59c04dadb0c5563deed4/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;한국에서 자바와 스프링은 대세중의 대세입니다. &lt;/p&gt;
&lt;p&gt;구인풀도 넓고, 자료도 많고, 검증된 안정성으로 다른 언어로 시작한 회사들도 스프링 기반으로 백엔드 서버를 바꾸는 일도 많습니다. &lt;/p&gt;
&lt;p&gt;처음에 자바는 뭔가 C랑 다르게 생기고 그래서 거부감도 많았었는데, 최근 이것저것 다른 언어나 프레임워크를 써보다 보니 상대적으로 낯을 덜 가리게 되어서 한 번 그냥 써볼까 합니다. &lt;/p&gt;
&lt;p&gt;또 코틀린이 자바보다 현대적이고 간결하다 하니, 굳이 묘한 거부감에서 여태까지 부리던 고집을 유지할 필요가 없을 것 같습니다. &lt;/p&gt;
&lt;p&gt;그래서 이번 프로젝트는 정말 끝내는걸 목표로! 코틀린-스프링으로 진행해보려고 합니다. &lt;/p&gt;
&lt;h2&gt;프로젝트 초기화&lt;/h2&gt;
&lt;p&gt;스프링 부트(Sprint Boot)는 빠르게 프로젝트를 설정할 수 있는 다양한 방법을 제공합니다. 가장 쉬운 방법은 Spring Initializr를 사용하는 것입니다. 다음은 Spring Initializr를 사용하여 코틀린 프로젝트를 설정하는 방법입니다. &lt;/p&gt;
&lt;h3&gt;Spring Initializr&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABf0lEQVR42pVS2XKDMAzkKzotAYMPsDFnyEFCJmn71P//oq3kTtKmyfR42BlZSMtqpWjzvEU7d7Bdg2l/gioqPKUSi0xfIRb6Jsd1jIdYwPcjXl7fEJmqhq4qyNLCuBqZtpCFQ6IMUlmExiQ3yFR5Rca5ompg6w7a1gHO9Yh8t0I3bLCQCk8yh1AW9TBCGEPEnpQp5PST9XSA9d0VYU2qhtWEqhkgqCZeSEQlFS03O6jSQ5c1kVSBKCtIXa4uzYyz4q8jPyb5xSIhCkSFazHNJ/huJEIi0iVy40hpgZTARJ8+qhsfL99zjVQYRJyo2oFGmoN0HsvVPWGAb5dB8XeSuzgT8oON7Ufa9nJDSpe0nIYMb8F28JL+RZgZGwjXuxm7wzPaYY2mXwVwzDbE/yE8j+w6usWmRSLV3xT9NHLYEh1unKkPiJ/xq8Lv4PNg7wQdMyPElDu/7/Uk0nwQsn+lby/g62+GFfbHl3Cf43aP6XD6jOcjXNNf9ViCth5pavAO+C5U3/HmqfQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/e4561d6809ea9e5ac9e3d1401b0583d4/ca1dc/image2.png&apos; srcset=&apos;/static/e4561d6809ea9e5ac9e3d1401b0583d4/e7570/image2.png 170w,
/static/e4561d6809ea9e5ac9e3d1401b0583d4/f46e7/image2.png 340w,
/static/e4561d6809ea9e5ac9e3d1401b0583d4/ca1dc/image2.png 680w,
/static/e4561d6809ea9e5ac9e3d1401b0583d4/02d09/image2.png 1020w,
/static/e4561d6809ea9e5ac9e3d1401b0583d4/9d567/image2.png 1360w,
/static/e4561d6809ea9e5ac9e3d1401b0583d4/a66f5/image2.png 1711w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
    &lt;/span&gt;
&lt;a href=&quot;https://start.spring.io/&quot;&gt;Spring Initializr&lt;/a&gt;는 스프링 부트 프로젝트를 생성할 수 있는 웹 도구입니다. 여기서 필요한 의존성과 설정을 선택하면, 프로젝트가 자동으로 생성됩니다.&lt;/p&gt;
&lt;h3&gt;각 항목에 대한 설명&lt;/h3&gt;
&lt;h4&gt;Project&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Gradle - Groovy: Gradle는 빌드 도구로, Groovy는 그 빌드 스크립트를 작성하는 언어입니다. Groovy 기반의 Gradle은 전통적인 방식으로 널리 사용됩니다.&lt;/li&gt;
&lt;li&gt;Gradle - Kotlin: Gradle을 사용하는데, 빌드 스크립트를 Kotlin 언어로 작성합니다. Kotlin DSL은 타입 안전성과 더 나은 IDE 지원을 제공합니다.&lt;/li&gt;
&lt;li&gt;Maven: 또 다른 빌드 도구로, XML 기반의 설정 파일을 사용합니다. Maven은 오랫동안 Java 프로젝트에서 널리 사용되어 왔으며, 설정이 직관적이라는 장점이 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Language&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Java: 가장 널리 사용되는 JVM 언어로, Spring Boot 프로젝트에서 기본적으로 사용됩니다.&lt;/li&gt;
&lt;li&gt;Kotlin: JetBrains에서 개발한 현대적인 JVM 언어로, 간결하고 강력한 기능을 제공합니다. Spring Boot는 Kotlin과도 잘 통합되어 있으며, Kotlin의 간결한 문법을 활용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;Groovy: 동적 타이핑을 지원하는 JVM 언어로, Gradle의 기본 스크립트 언어입니다. 코드가 간결하고 유연하며, 스크립팅 및 간단한 애플리케이션에 자주 사용됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Spring Boot Version&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;3.4.0 (SNAPSHOT): 최신 개발 중인 버전으로, 아직 안정화되지 않은 기능이 포함될 수 있습니다. 최신 기능을 테스트하거나 개발 단계에서 사용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;3.4.0 (M2): 마일스톤(Milestone) 버전으로, 안정화가 진행 중인 버전입니다. 새로운 기능이 도입될 예정이지만, 여전히 테스트와 피드백이 필요한 단계입니다.&lt;/li&gt;
&lt;li&gt;3.3.4 (SNAPSHOT): 3.3.x 라인의 최신 개발 버전입니다. 마찬가지로 새로운 기능을 포함하지만, 아직 안정화되지 않았습니다.&lt;/li&gt;
&lt;li&gt;3.3.3: 3.3.x 라인의 최신 안정 릴리스입니다. 버그 수정 및 안정화된 기능들이 포함되어 있습니다.&lt;/li&gt;
&lt;li&gt;3.2.10 (SNAPSHOT): 3.2.x 라인의 최신 개발 버전으로, 3.2.x 라인에 대한 최신 기능을 포함하고 있지만, 안정화가 이루어지지 않았습니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;3.2.9: 3.2.x 라인의 안정 릴리스로, 안정성과 신뢰성을 바탕으로 한 기능들이 포함되어 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;안정된 개발을 원한다면 안정 릴리스(예: 3.2.9, 3.3.3)를 선택하는 것이 좋습니다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;최신 기능을 테스트하고 싶다면 SNAPSHOT이나 Milestone 버전을 선택할 수 있습니다. 하지만 이러한 버전은 불안정할 수 있으므로, 프로덕션 환경에는 권장되지 않습니다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Group&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Group ID는 프로젝트의 고유 식별자로, 주로 도메인 이름을 역순으로 사용합니다. 예를 들어, 도메인이 &lt;code class=&quot;language-text&quot;&gt;example.com&lt;/code&gt;이라면 &lt;code class=&quot;language-text&quot;&gt;com.example&lt;/code&gt;와 같이 설정됩니다. 이 값은 Maven 또는 Gradle에서 프로젝트를 식별하는 데 사용됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Artifact&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Artifact ID는 생성된 프로젝트의 이름입니다. 이 이름은 빌드된 결과물(JAR 파일 등)의 이름이 됩니다. 보통 프로젝트의 이름으로 설정하며, 고유해야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Name&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;프로젝트의 이름을 설정하는 항목으로, 일반적으로 Artifact와 동일하게 설정합니다. IDE나 빌드 도구에서 프로젝트 이름으로 표시됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Description&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;프로젝트에 대한 간단한 설명을 작성하는 곳입니다. 이 설명은 주로 프로젝트의 목적이나 내용을 요약합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Package Name&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;패키지 이름은 Java/Kotlin 파일의 기본 패키지 경로를 지정합니다. 보통 Group과 Artifact를 결합하여 만듭니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;com.example.demo&lt;/code&gt;와 같이 설정합니다. 모든 소스 파일이 이 패키지 하위에 생성됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Packaging&lt;/h4&gt;
&lt;p&gt;프로젝트의 결과물 형식을 선택하는 항목입니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jar: 대부분의 스프링 부트 프로젝트에서 사용되는 기본 형식으로, 애플리케이션을 실행 가능한 단일 JAR 파일로 패키징합니다.&lt;/li&gt;
&lt;li&gt;War: 기존의 서블릿 컨테이너(예: Tomcat, Jetty)에 배포하기 위한 웹 애플리케이션 아카이브(WAR) 파일 형식입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;strong&gt;Java Version&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;프로젝트에서 사용할 자바의 버전을 선택하는 항목입니다. 최신 자바 기능을 사용하거나 기존 호환성을 유지하기 위해 버전을 선택합니다. Spring Boot 3.x 이상에서는 자바 17 이상이 요구됩니다.&lt;/li&gt;
&lt;li&gt;17버전을 사용하겠습니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;Dependencies&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Dependencies는 프로젝트에서 필요로 하는 외부 라이브러리나 프레임워크를 의미합니다. 프로젝트가 의존하는 모든 외부 코드를 관리하고, 해당 의존성들이 올바르게 설치되고 사용될 수 있도록 돕습니다. 이것은 NPM(Node Package Manager)에서 JavaScript 라이브러리를 설치하고 관리하는 것과 매우 유사합니다.
일단 저는 다음의 의존성을 설치하려고 합니다. &lt;/p&gt;
&lt;h4&gt;Spring Web&lt;/h4&gt;
&lt;p&gt;RESTful API 개발을 위한 기본적인 웹 기능을 제공합니다. 이 의존성을 추가하면 Spring MVC와 함께 HTTP 요청을 처리할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;Spring Data JPA&lt;/h4&gt;
&lt;p&gt;데이터베이스 접근을 쉽게 할 수 있도록 도와줍니다. JPA를 사용해 객체 지향적으로 데이터베이스를 다룰 수 있으며, 이와 함께 추가적으로 사용할 데이터베이스 드라이버가 필요합니다.&lt;/p&gt;
&lt;h4&gt;PostgreSQL Driver&lt;/h4&gt;
&lt;p&gt;PostgreSQL 데이터베이스와 연결하기 위한 드라이버입니다. Spring Data JPA와 함께 사용되어 데이터베이스 연동이 가능합니다.&lt;/p&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
추가로 다음의 JWT 인증을 사용할 예정이므로 다음의 의존성을 설치합니다. 
&lt;h4&gt;Spring Security&lt;/h4&gt;
&lt;p&gt;애플리케이션에 보안 기능을 추가하고자 할 때 유용합니다. 기본적인 인증 및 권한 부여 기능을 손쉽게 설정할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;Jackson Module Kotlin&lt;/h4&gt;
&lt;p&gt;JSON을 코틀린 데이터 클래스에 매핑할 때 유용한 라이브러리입니다. 코틀린에서 JSON 데이터를 처리할 때 직렬화/역직렬화 작업을 쉽게 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;해당 의존성은 Spring Initializr에서는 기본적으로 표시되지 않으므로, 추후 &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt; 에서 추가하겠습니다. &lt;/p&gt;
&lt;h3&gt;의존성 관리&lt;/h3&gt;
&lt;p&gt;Spring Initializr를 통해 프로젝트를 생성할 때, 위의 의존성을 선택하여 프로젝트를 생성하면 자동으로 &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt;에 해당 의존성들이 추가됩니다. 또는, 이미 생성된 프로젝트에 의존성을 추가하고 싶다면, &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt; 파일에 다음과 같이 추가할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springframework.boot:spring-boot-starter-web&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.postgresql:postgresql&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;developmentOnly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springframework.boot:spring-boot-devtools&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.springframework.boot:spring-boot-starter-test&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;생성 및 프로젝트 구조 확인&lt;/h3&gt;
&lt;p&gt;GENERATE를 누르면 파일이 다운로드됩니다. &lt;/p&gt;
&lt;p&gt;VS Code에서 프로젝트를 열면 다음과 같은 기본 폴더와 파일들이 있습니다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;src/main/kotlin/&lt;/code&gt;: 이 폴더 아래에 Kotlin 소스 코드가 위치합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;src/main/resources/&lt;/code&gt;: 설정 파일 및 리소스 파일들이 위치합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt;: 프로젝트의 빌드 설정을 관리하는 파일입니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;application.properties&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;application.yml&lt;/code&gt;: 애플리케이션 설정을 관리하는 파일입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;서버 실행&lt;/h2&gt;
&lt;p&gt;로컬에 JVM을 설치하지 않고 도커와 &lt;code class=&quot;language-text&quot;&gt;docker-compose&lt;/code&gt;를 활용하여 스프링 부트 서버와 PostgreSQL 데이터베이스를 컨테이너로 실행해보려고 합니다. &lt;/p&gt;
&lt;p&gt;이렇게 하면 애플리케이션을 완전 격리된 환경에서 실행할 수 있어 이로 인해 개발, 테스트, 배포 환경 간의 일관성을 유지할 수 있으며, &quot;내 로컬에서는 잘 되는데 서버에서는 왜 안 될까?&quot; 같은 문제를 줄일 수 있습니다.&lt;/p&gt;
&lt;p&gt;다만, 이렇게 할 경우에는 애플리케이션 디버깅이 좀 더 어려워지는 문제가 생길 수 있는데, 일단 이렇게 해보려고 합니다. &lt;/p&gt;
&lt;h3&gt;환경 변수 설정&lt;/h3&gt;
&lt;h4&gt;.env 파일&lt;/h4&gt;
&lt;p&gt;환경 변수 관리를 위해 .env 파일을 사용하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;makefile&quot;&gt;&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;POSTGRES_DB&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;yourdbname
POSTGRES_USER&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;yourusername
POSTGRES_PASSWORD&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;yourpassword

DB_URL&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;jdbc&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;postgresql&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;5432/&lt;span class=&quot;token variable&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_DB&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
DB_USER&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_USER&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
DB_PASSWORD&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;application.properties 파일&lt;/h4&gt;
&lt;p&gt;application.properties에 DB 연결을 위한 다음의 내용을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 연결 설정&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;spring.datasource.url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;${DB_URL}&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;spring.datasource.username&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;${DB_USER}&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;spring.datasource.password&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;${DB_PASSWORD}&lt;/span&gt;
spring.datasource.driver-class-name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;org.postgresql.Driver&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Dockerfile 작성&lt;/h3&gt;
&lt;p&gt;스프링 부트 애플리케이션을 도커 이미지로 빌드할 수 있도록 Dockerfile을 작성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Gradle 빌드 단계&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; gradle:7.6.1-jdk17 &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; build&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; gradle bootJar&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 런타임 단계&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; openjdk:17-slim&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; &lt;span class=&quot;token options&quot;&gt;&lt;span class=&quot;token property&quot;&gt;--from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;build&lt;/span&gt;&lt;/span&gt; /app/build/libs/*.jar app.jar&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ENTRYPOINT&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;java&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;-jar&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;app.jar&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 Dockerfile은 두 가지 단계로 구성됩니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;빌드 단계: Gradle을 사용하여 애플리케이션을 빌드합니다.&lt;/li&gt;
&lt;li&gt;런타임 단계: 빌드된 JAR 파일을 경량의 OpenJDK 이미지에서 실행합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;openjdk:17-alpine과 맥북&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;openjdk:17-alpine&lt;/code&gt; 를 사용할 경우 애플 실리콘 기반의 맥북에서 docker-compose build를 실행할 경우 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;failed to solve: openjdk:21-alpine: docker.io/library/openjdk:21-alpine: not found&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;오류가 발생합니다. 이는 &lt;code class=&quot;language-text&quot;&gt;alpine&lt;/code&gt;의 특성으로 &lt;code class=&quot;language-text&quot;&gt;alpine&lt;/code&gt; 기반 이미지는 특히 경량화되어 있어, 특정 아키텍처에 맞춘 바이너리만 포함하고 있을 수 있습니다. 따라서 ARM 기반 시스템에서 &lt;code class=&quot;language-text&quot;&gt;alpine&lt;/code&gt; 이미지를 사용할 때 호환성 문제가 발생할 수 있습니다.&lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;slim&lt;/code&gt; 이미지로 교체 해주었습니다. &lt;code class=&quot;language-text&quot;&gt;slim&lt;/code&gt; 이미지는 &lt;code class=&quot;language-text&quot;&gt;alpine&lt;/code&gt;보다 약간 더 크지만, 다양한 플랫폼에서의 호환성이 더 좋습니다.&lt;/p&gt;
&lt;h3&gt;docker-compose.yml 작성&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;docker-compose.yml&lt;/code&gt; 파일을 사용하여 스프링 부트 애플리케이션과 PostgreSQL을 각각 컨테이너로 실행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;3.8&apos;&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; .
        &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;3000:8080&apos;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;env_file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; .env
        &lt;span class=&quot;token key atrule&quot;&gt;depends_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; db

    &lt;span class=&quot;token key atrule&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postgres&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;env_file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; .env
        &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;5432:5432&apos;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; db_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/var/lib/postgresql/data

&lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    db_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 파일은 두 개의 서비스를 정의합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;app: 스프링 부트 애플리케이션을 실행하는 컨테이너&lt;/li&gt;
&lt;li&gt;db: PostgreSQL 데이터베이스를 실행하는 컨테이너&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;컨테이너 실행 및 테스트&lt;/h2&gt;</content:encoded></item><item><title><![CDATA[GitHub Container Registry vs Docker Hub]]></title><description><![CDATA[서론 컨테이너 기술이 점점 더 중요한 개발 도구로 자리 잡으면서, Docker 이미지를 효율적으로 관리할 수 있는 레지스트리 선택도 중요해졌습니다. 많은 개발자들이 Docker Hub와 GitHub Container Registry(GHCR…]]></description><link>https://sharknia.github.io/GitHub-Container-Registry-vs-Docker-Hub/</link><guid isPermaLink="false">https://sharknia.github.io/GitHub-Container-Registry-vs-Docker-Hub/</guid><pubDate>Thu, 22 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/dc8f58c73080b0067a12473f54704a9a/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbUlEQVR42hWQ22/ScACF+2+a6INPG9BSQpwzho0C4yKwwoDSbqyUOy2jUCi9t2zuhnPhJpBNx+KIUTNN1D/B35Lv4bx8yTkHoivVQrnINhtdVRU1XTZNxTJly+pZlnX+/i1+8OJNFA5mkBCBhAkXIJhBfQmXL+EO4NB+qUKXqyzPdxSlq2k9wwAYJ/2zweXybnE+niZKPBpM2317wHSHsyADGfXGXVgcIgvFXLFUP2oAuaPpoqFLhr56uDWvhhej6bfvK8IabuR4GMNd4aw7QjkDaSeGo1jc4Y1BBM0AKhzblmVeUo4k+XYxUqefg5f3ocF96myOMj3h7JoWtLVtHA2TKJjgSyBYwrYVgzI0QxVKZZblhG6hIfCS+ufXw+DTLFLtIWXjOSWEatLHu6/CxdDh33NH910hArRY90RtnihE17imatbbXV4UeUkWdeP34+rxx2o8GXd0K1kRtOGiP/vSGYxBbZufgAMZB5awb8Vsnhh0AA6rN5g615KkmtBryepyeUNxalM9vRqO2I5OcrI1X7LHH9a8CThIwv407EvCW3H79i6UpfNkninWqm1ZEVSjpWing8vJfHE9mQ6urok8F8hUxNFNMN9cx/Y28YLDn34dz/nJ6ubuIRQlDg4LdJWttVVN0EzRNFuqPplN/v39OV/MyEobb+h4+2R9h0IilCNIgebOQArcZsOSUHKfzjO5J1nR26reM0zJ6vOyJlv98XSUaYjuZOmlB1/DUmiEgkOkY4eyY0mwGd6OQ0ylWCgx9SO2pagdDTjWE8fHgmaIurnxjnz2KmIPZOBQFgmTznAWeZqdQry7qD/5H/jSoPOIb6wuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/dc8f58c73080b0067a12473f54704a9a/ca1dc/image1.png&apos; srcset=&apos;/static/dc8f58c73080b0067a12473f54704a9a/e7570/image1.png 170w,
/static/dc8f58c73080b0067a12473f54704a9a/f46e7/image1.png 340w,
/static/dc8f58c73080b0067a12473f54704a9a/ca1dc/image1.png 680w,
/static/dc8f58c73080b0067a12473f54704a9a/02d09/image1.png 1020w,
/static/dc8f58c73080b0067a12473f54704a9a/9d567/image1.png 1360w,
/static/dc8f58c73080b0067a12473f54704a9a/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;컨테이너 기술이 점점 더 중요한 개발 도구로 자리 잡으면서, Docker 이미지를 효율적으로 관리할 수 있는 레지스트리 선택도 중요해졌습니다. 많은 개발자들이 Docker Hub와 GitHub Container Registry(GHCR) 사이에서 어떤 서비스를 사용할지 고민하는데요, 각 서비스의 특징과 차이점을 살펴보고, 개인 프로젝트에 어떤 레지스트리가 더 적합한지 알아보겠습니다.&lt;/p&gt;
&lt;h2&gt;기본 사용 목적과 생태계 통합&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Docker Hub&lt;/strong&gt;는 Docker 이미지를 저장하고 관리하는 가장 널리 알려진 레지스트리 서비스입니다. Docker CLI와의 직접적인 통합 덕분에 Docker 이미지를 쉽게 빌드하고 푸시할 수 있습니다. 또한, CI/CD 도구와도 잘 통합되어 있어 다양한 프로젝트에서 유용하게 사용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;반면 &lt;strong&gt;GHCR&lt;/strong&gt;은 GitHub 리포지토리와의 긴밀한 통합을 자랑합니다. GitHub Actions를 활용하여 코드와 이미지를 한 곳에서 관리할 수 있으며, GitHub 생태계를 적극적으로 활용하는 개발자에게는 특히 편리한 선택이 될 수 있습니다.&lt;/p&gt;
&lt;h2&gt;프라이빗 이미지 관리와 접근 제어&lt;/h2&gt;
&lt;p&gt;Docker Hub는 무료 사용자의 경우 프라이빗 저장소를 하나만 제공하지만, GHCR은 무료 사용자에게도 무제한 프라이빗 저장소를 제공합니다. 따라서 개인 프로젝트에서 여러 프라이빗 이미지를 관리하려면 GHCR이 더 유리합니다. 또한, GHCR은 GitHub 리포지토리의 접근 제어와 연동되어 있어 기존 팀 및 조직 설정을 그대로 사용할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;사용의 용이성 및 학습 곡선&lt;/h2&gt;
&lt;p&gt;Docker Hub는 오래된 서비스인 만큼 사용자 인터페이스와 명령어가 직관적이며, 이미 Docker 생태계에 익숙한 사용자에게는 친숙합니다. 반면, GHCR은 GitHub를 이미 사용하고 있다면 쉽게 적응할 수 있지만, GitHub Actions와의 연동 등 추가적인 학습이 필요할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;퍼포먼스 및 안정성&lt;/h2&gt;
&lt;p&gt;두 서비스 모두 글로벌 인프라를 바탕으로 안정적이고 빠른 성능을 제공합니다. 다만, GHCR은 GitHub Actions와의 연동 시 뛰어난 퍼포먼스를 보여줍니다.&lt;/p&gt;
&lt;h2&gt;비용&lt;/h2&gt;
&lt;p&gt;Docker Hub는 프라이빗 저장소에 대한 제한이 있으며, 추가 저장소를 원할 경우 유료 플랜을 선택해야 합니다. 반면, GHCR은 무료 플랜 내에서도 무제한 프라이빗 저장소를 제공하므로, 비용 면에서는 GHCR이 더 나은 선택일 수 있습니다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;만약 GitHub를 자주 사용하고, GitHub Actions를 활용해 코드와 이미지를 한 곳에서 관리하고자 한다면 GHCR이 개인 용도로 적합한 선택입니다. 하지만 Docker 생태계와 도구에 더 익숙하고 퍼블릭 이미지를 많이 활용하고 싶다면 Docker Hub가 더 적합할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Ubuntu DLNA 서버 설정]]></title><description><![CDATA[서론 NAS 서버의 영상을 보는 방법엔 여러가지가 있습니다. 그 중 LG WebOS에서는 서버에 직접적으로 연결할만한 충분한 방법을 제공하지 않기 때문에 어떤 방법이 좋을까 잠깐 고민하다가 DLNA…]]></description><link>https://sharknia.github.io/Ubuntu-DLNA-서버-설정/</link><guid isPermaLink="false">https://sharknia.github.io/Ubuntu-DLNA-서버-설정/</guid><pubDate>Sun, 18 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e2ab75a9376227d9d1f41b5c925d84e8/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpUlEQVR42g3Le08SAQAA8PscfYWm6aQwHwihQr4BFU8P8OR4HieecgcIHtwFKJxnInExgaHDJM9H4UJrS/KxcEq11M2ttrbsv75F/f7/AXU1NeLGZnGz9LG8WzoAKQ1ODTY3jAexIAuTjD2ctIYSIBnpt88qdPZ2NSSSKESNrQ0icV3tA0DSJlf0Dw2MwZoJBzTDYGwGnKbNBOWLsCibdgkVJiMQLO+kY1aK1RPPurTjveoRWbvyYYMI+H9HEQdoc42gHhMdn8wcdoCoK7TIZfMrxZP4xZ9loZQovGFS+ekQZ8AI3XRANYb0akb6+1WAolsF23GYYGa4NEJxbWoYsWHBRFo4Oqve/f1w+f3sx+/cbjHwnKdTecQftc/ziJsBjfauPjUwbLDoHQS5lGF3y9H1XU88mz6/TR+c7BydohiGWYy7xf29o9PQ4vLimsBuf4xsHuALSb2DBA0mQGfBUf/C3MtNbu/YFeXpZC7I50qVr5A3du++ZEg1pkRcpc/Vt8cVG07ECiW+fOVLbli9YesUCfQM6QyTXpRe8vIFW4CF4Yn5xGq6sJdcL4z6ljWuWGpr/+zbdXZrzzu/NLOSn80WLRQHmp3dai3wVAUiJDPuoh3hJBaMOT1+z1xgp1w5v/15cXVdqX65+XXndpPeyOJcJIYGou61Q6M7rDVN9w5BgLSzz0ItQ5Ne0DEbTuWZ1YLVFyF8VPHsMrO9vxDn31dvWlulOjMaTL+G/dx4IAGhZJcGkskVQFOTpE2p6lDrlaBlEJ21hV4MGCzQBPKqfEmEOCoWX333SfZErjXa8ZWNYcwvHzYpB/UdPZo2iRQQ1YtE4pZHEkWzclCmgRX6qR6zxxRZxXmBSAlUrjiVFCAyrMXpTiPZ1DMq7hgQy7rELbL62rp/BB42mJSVcCcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/e2ab75a9376227d9d1f41b5c925d84e8/ca1dc/image1.png&apos; srcset=&apos;/static/e2ab75a9376227d9d1f41b5c925d84e8/e7570/image1.png 170w,
/static/e2ab75a9376227d9d1f41b5c925d84e8/f46e7/image1.png 340w,
/static/e2ab75a9376227d9d1f41b5c925d84e8/ca1dc/image1.png 680w,
/static/e2ab75a9376227d9d1f41b5c925d84e8/02d09/image1.png 1020w,
/static/e2ab75a9376227d9d1f41b5c925d84e8/9d567/image1.png 1360w,
/static/e2ab75a9376227d9d1f41b5c925d84e8/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;NAS 서버의 영상을 보는 방법엔 여러가지가 있습니다. 그 중 LG WebOS에서는 서버에 직접적으로 연결할만한 충분한 방법을 제공하지 않기 때문에 어떤 방법이 좋을까 잠깐 고민하다가 DLNA가 떠올랐습니다. &lt;/p&gt;
&lt;p&gt;서버 설정도 간단하기 때문에 짧게 하고 넘어가려고 합니다. &lt;/p&gt;
&lt;h2&gt;DLNA&lt;/h2&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;호환성: DLNA는 다양한 제조사에서 채택한 표준 프로토콜로, 서로 다른 기기 간에도 원활하게 미디어를 공유할 수 있습니다. 예를 들어, 스마트폰, 태블릿, 스마트 TV, 게임 콘솔 등에서 모두 사용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;편리한 미디어 공유: 복잡한 설정 없이 네트워크에 연결된 기기 간에 미디어 파일을 손쉽게 공유하고 스트리밍할 수 있습니다. 미디어 서버에 파일을 업로드하면 즉시 다른 기기에서 재생이 가능합니다.&lt;/li&gt;
&lt;li&gt;자동 탐지: DLNA 지원 기기는 네트워크 상에 연결된 미디어 서버를 자동으로 탐지하여 사용자가 별도의 설정 없이도 미디어를 쉽게 이용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;저전력 및 경량 운영: minidlna와 같은 경량 서버 프로그램은 서버의 자원을 효율적으로 사용하여 저전력 환경에서도 안정적으로 동작합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;제한된 파일 형식 지원 - DLNA는 모든 파일 형식을 지원하지 않습니다. 특정 비디오, 오디오, 자막 파일 형식은 DLNA를 통해 스트리밍할 때 제대로 지원되지 않을 수 있습니다. 이로 인해 파일을 변환하거나 별도의 코덱을 설치해야 하는 번거로움이 발생할 수 있습니다.&lt;/li&gt;
&lt;li&gt;인증 및 보안 부족 - 앞서 언급한 것처럼 DLNA는 인증 메커니즘이 거의 없기 때문에 보안이 취약합니다. 이를 통해 연결된 장치가 네트워크 내에서 자유롭게 미디어에 접근할 수 있지만, 그만큼 보안 위험도 큽니다. 이는 외부에서 접근 시 더욱 큰 문제가 됩니다.&lt;/li&gt;
&lt;li&gt;제한된 장치 호환성- DLNA는 다양한 기기에서 사용할 수 있지만, 모든 기기에서 동일한 수준의 지원을 제공하지는 않습니다. 일부 기기는 DLNA를 완전히 지원하지 않거나, 특정 기능(예: 자막 지원, 특정 미디어 포맷 재생)이 제대로 작동하지 않을 수 있습니다.&lt;/li&gt;
&lt;li&gt;DLNA 서버는 미디어 파일을 자동으로 인덱싱하지만, 이를 수동으로 관리하기가 어려울 수 있습니다. 미디어 라이브러리가 크거나, 파일이 다양한 폴더에 분산되어 있는 경우, DLNA 서버에서 이를 제대로 탐지하지 못하거나, 잘못된 메타데이터로 인식할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;minidlna&lt;/h2&gt;
&lt;p&gt;minidlna는 DLNA(Digital Living Network Alliance) 표준을 지원하는 경량 미디어 서버 소프트웨어입니다. Linux 기반의 시스템에서 쉽게 설정할 수 있으며, 동영상, 음악, 사진과 같은 다양한 미디어 파일을 네트워크 상에서 DLNA를 지원하는 기기들로 스트리밍할 수 있습니다. 특히 minidlna는 설정이 간편하고, 서버의 자원을 효율적으로 사용하는 것이 큰 장점입니다.&lt;/p&gt;
&lt;h2&gt;설치 및 설정&lt;/h2&gt;
&lt;p&gt;다음의 명령어로 minidlna를 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; minidlna&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설정파일도 간단합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;media_dir&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;A,/var/lib/minidlna/Music
&lt;span class=&quot;token assign-left variable&quot;&gt;media_dir&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;V,/var/lib/minidlna/Video
&lt;span class=&quot;token assign-left variable&quot;&gt;media_dir&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;P,/var/lib/minidlna/Picture&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A가 음악, V가 동영상, P가 사진 폴더입니다. 필요없다면 지정하지 않아도 됩니다. &lt;/p&gt;
&lt;p&gt;설정 적용을 위해 프로그램을 다시 시작합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl restart minidlna.service&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;확인&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;내부아이피:8200&lt;/code&gt;으로 접속하면 현황을 볼 수 있습니다. WebOS에서도 미디어 플레이어를 실행하면 같은 망이라면 자동으로 확인이 됩니다. &lt;/p&gt;
&lt;p&gt;자막 파일도 정상 지원합니다. &lt;/p&gt;
&lt;h2&gt;[중요] 보안 문제&lt;/h2&gt;
&lt;p&gt;DLNA를 포트포워딩을 사용해 외부에서 접근 가능하도록 하는 것은 추천하지 않습니다. &lt;/p&gt;
&lt;p&gt;DLNA 프로토콜은 기본적으로 보안에 취약합니다. 데이터 전송 시 암호화가 이루어지지 않기 때문에, 민감한 정보가 노출될 수 있습니다. 이는 SMB 프로토콜에서 발생하는 보안 문제와 유사합니다.&lt;/p&gt;
&lt;p&gt;또한 단점에서 언급되었듯이 DLNA 서버는 인증 없이 미디어 파일에 접근할 수 있기 때문에 악의적인 사용자가 네트워크에 침투할 위험이 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Install Tailwind CSS with Next.js]]></title><description><![CDATA[Tailwind CSS 소개 Tailwind CSS는 유틸리티 기반의 CSS 프레임워크로, 미리 정의된 클래스를 사용하여 빠르고 쉽게 스타일링할 수 있게 해줍니다. 전통적인 CSS 프레임워크와 달리, Tailwind는 사용자가 CSS…]]></description><link>https://sharknia.github.io/Install-Tailwind-CSS-with-Nextjs/</link><guid isPermaLink="false">https://sharknia.github.io/Install-Tailwind-CSS-with-Nextjs/</guid><pubDate>Sun, 04 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/562bed3808e81bb462e17b68d9fa2d6d/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIElEQVR42j2SfW/SUBTG+5VMNJr5shDEsQHisk3DxsTJdImbQVncv4aNMYYMaWkp60AK7e0Lt+1tGU5B43BTpzExfiRPy1zy5NznpOfXc057qQoyGdmgJUzLJo2sN20DYrGpF0Z6pxVFDCmNCKPaoLJsAMIig1NMqqKAMxmpU5bxW7FjmriG8J6oo16vdzq0j4+l9x9LIs6UhNRGNleTWY1UZJdkFYOqIANgyAFmJEwss9RQ9G735Ofpjz+/zv7+Hnz9gsjhxiYdX1rf5qWqZo/aQjyHwTEyphWyzqit7tGjx+m5+bX4wtpi4kX03nIymZbs7uuKVEYEJuU8wfAUA7DidmZgeGTxMnaGJ5ORp6GxsO/WzOWbD65emopGlgRkraQy+brOaYRFFqdYLuxu763tfjnFVpwjc3g2Of0s5JsJBmJjtxPjN2ajd5Nqf5jnpVLbZFUCJOvqAobm8DKVHPCMMhiGZ1eng/engnFf4GHQH5sILUtOn3zo07IFZZxy0dlbwOMBtpl9oX74OTz3PDIRuxOYv35tevxKxO9fEDSn2sbww7j/MNRT5w4ZvEb2WsaT9O6rXK0gqNl9I7XTernbygl4qyzuNPAKY2brnVrHdhHVFeUdBCKv20XRWFzdytBNeHxg98XB92b/W6P7idfszYaZyMtQAL6qkqrmiuK8g/NyTndoxWH1LoxXEM3tOgaBgYvFqjZcQVZ3RvWe7H+XWoMjtbdrKQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/562bed3808e81bb462e17b68d9fa2d6d/ca1dc/image1.png&apos; srcset=&apos;/static/562bed3808e81bb462e17b68d9fa2d6d/e7570/image1.png 170w,
/static/562bed3808e81bb462e17b68d9fa2d6d/f46e7/image1.png 340w,
/static/562bed3808e81bb462e17b68d9fa2d6d/ca1dc/image1.png 680w,
/static/562bed3808e81bb462e17b68d9fa2d6d/02d09/image1.png 1020w,
/static/562bed3808e81bb462e17b68d9fa2d6d/9d567/image1.png 1360w,
/static/562bed3808e81bb462e17b68d9fa2d6d/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Tailwind CSS 소개&lt;/h2&gt;
&lt;p&gt;Tailwind CSS는 유틸리티 기반의 CSS 프레임워크로, 미리 정의된 클래스를 사용하여 빠르고 쉽게 스타일링할 수 있게 해줍니다. 전통적인 CSS 프레임워크와 달리, Tailwind는 사용자가 CSS를 작성하는 방식에 혁신을 가져왔습니다. 각 클래스는 단일 속성과 값을 가지고 있어, 더 나은 유지보수성과 높은 재사용성을 제공합니다.&lt;/p&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;빠른 개발 속도: 미리 정의된 유틸리티 클래스를 사용하여 빠르게 스타일링할 수 있습니다.&lt;/li&gt;
&lt;li&gt;작은 파일 크기: 사용되지 않는 CSS를 제거하여 최종 CSS 파일 크기를 최소화합니다.&lt;/li&gt;
&lt;li&gt;일관성: 클래스 이름이 직관적이고 일관성이 있어 코드를 쉽게 읽고 이해할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;초기 학습 곡선: Tailwind의 유틸리티 클래스 시스템에 익숙해지기까지 시간이 걸릴 수 있습니다.&lt;/li&gt;
&lt;li&gt;HTML 코드의 가독성 저하: 많은 클래스를 사용할 경우 HTML 코드가 복잡해질 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Tailwind UI&lt;/h2&gt;
&lt;p&gt;Tailwind UI는 Tailwind CSS를 기반으로 구축된 고급 UI 컴포넌트 라이브러리입니다. Tailwind UI는 다양한 범주의 컴포넌트를 제공하여, 개발자가 빠르고 쉽게 아름다운 사용자 인터페이스를 만들 수 있도록 돕습니다. Tailwind UI는 유료 라이브러리지만, 시간과 비용을 절약할 수 있는 강력한 도구입니다.&lt;/p&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;디자인 품질: 고품질의 디자인을 제공하여, 디자이너 없이도 아름다운 UI를 만들 수 있습니다.&lt;/li&gt;
&lt;li&gt;생산성 향상: 미리 준비된 컴포넌트를 사용하여 개발 시간을 단축할 수 있습니다.&lt;/li&gt;
&lt;li&gt;커스터마이징 가능: Tailwind CSS의 모든 유틸리티 클래스를 사용하여 쉽게 커스터마이징할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;비용: Tailwind UI는 유료 라이브러리입니다.&lt;/li&gt;
&lt;li&gt;의존성: Tailwind CSS에 대한 의존성이 있어, Tailwind를 사용하지 않는 프로젝트에서는 사용이 어렵습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Tailwind CSS 설치&lt;/h2&gt;
&lt;p&gt;Tailwind CSS를 Next.js 프로젝트에 설치하려면 다음 명령어를 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-D&lt;/span&gt; tailwindcss postcss autoprefixer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런 다음 Tailwind CSS와 PostCSS의 초기 설정을 수행합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;npx tailwindcss init &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;PostCSS?&lt;/h3&gt;
&lt;p&gt;PostCSS는 CSS를 변환하기 위한 도구로, 다양한 플러그인을 통해 CSS 코드의 처리를 자동화할 수 있습니다. Tailwind CSS는 PostCSS 플러그인을 통해 CSS 파일을 처리하고, 필요한 유틸리티 클래스들을 생성합니다. Tailwind CSS는 PostCSS를 사용하여 컴파일 타임에 유틸리티 클래스들을 자동으로 생성하고, 사용되지 않는 CSS를 제거하는 등 여러 작업을 수행합니다.&lt;/p&gt;
&lt;h3&gt;Autoprefixer?&lt;/h3&gt;
&lt;p&gt;Autoprefixer는 PostCSS 플러그인 중 하나로, CSS에 자동으로 공급 업체 접두사를 추가하여 브라우저 간의 호환성을 보장합니다. 예를 들어, CSS에서 &lt;code class=&quot;language-text&quot;&gt;display: flex&lt;/code&gt;를 사용하면 Autoprefixer가 이를 다양한 브라우저에 맞게 &lt;code class=&quot;language-text&quot;&gt;webkit-&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;ms-&lt;/code&gt;와 같은 접두사를 추가하여 변환해줍니다.&lt;/p&gt;
&lt;h3&gt;globals.css 수정&lt;/h3&gt;
&lt;p&gt;Next.js에서 globals.css 파일은 전역 스타일을 정의하는 데 사용됩니다. 이 파일에 작성된 CSS는 Next.js 애플리케이션의 모든 페이지와 컴포넌트에 적용됩니다. 주로 기본적인 스타일 설정, 공통 레이아웃, 기본 타이포그래피, 공통 유틸리티 클래스 등을 정의하는 데 사용됩니다.&lt;/p&gt;
&lt;p&gt;Tailwind CSS를 사용하기 위해 &lt;code class=&quot;language-text&quot;&gt;globals.css&lt;/code&gt; 파일에 다음 내용을 추가합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@tailwind&lt;/span&gt; base&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@tailwind&lt;/span&gt; components&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@tailwind&lt;/span&gt; utilities&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;tailwind.config.js&lt;/code&gt;  수정&lt;/h3&gt;
&lt;p&gt;또한 &lt;code class=&quot;language-text&quot;&gt;tailwind.config.js&lt;/code&gt; 파일을 수정하여 Tailwind가 CSS 클래스 생성을 위해 검색할 파일 경로를 지정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/** @type {import(&apos;tailwindcss&apos;).Config} */&lt;/span&gt;
module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;./app/**/*.{js,ts,jsx,tsx,mdx}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;./pages/**/*.{js,ts,jsx,tsx,mdx}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;./components/**/*.{js,ts,jsx,tsx,mdx}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Or if using `src` directory:&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;./src/**/*.{js,ts,jsx,tsx,mdx}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;VS Code 확장 설치&lt;/h2&gt;
&lt;p&gt;프로젝트 개발을 더 편리하게 하기 위해 다음 VS Code 확장을 설치합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PostCSS Language Support: PostCSS 파일을 편집할 때 문법 강조와 같은 기능을 제공합니다.&lt;/li&gt;
&lt;li&gt;Tailwind CSS IntelliSense: Tailwind CSS 클래스 이름 자동 완성 및 툴팁을 제공합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://tailwindcss.com/docs/guides/nextjs&quot;&gt;https://tailwindcss.com/docs/guides/nextjs&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Mock과 Stub, Fixture]]></title><description><![CDATA[Fixture Fixture는 테스트 실행 전에 필요한 상태나 객체를 설정하는 데 사용됩니다. 주로 데이터베이스 초기화, 파일 시스템 설정, 특정 객체 생성 등의 작업을 포함합니다. 예제 위의 예제는 Django…]]></description><link>https://sharknia.github.io/Mock과-Stub-Fixture/</link><guid isPermaLink="false">https://sharknia.github.io/Mock과-Stub-Fixture/</guid><pubDate>Thu, 20 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Fixture&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Fixture&lt;/strong&gt;는 테스트 실행 전에 필요한 상태나 객체를 설정하는 데 사용됩니다. 주로 데이터베이스 초기화, 파일 시스템 설정, 특정 객체 생성 등의 작업을 포함합니다.&lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@pytest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fixture&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;user@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        dob&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        gender&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        nickname&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;testnickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 예제는 Django 테스트 환경에서 실제로 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 객체를 데이터베이스에 생성합니다. 이 fixture는 테스트 함수가 실행될 때마다 호출되며, 테스트가 끝나면 데이터베이스 상태를 롤백합니다.&lt;/p&gt;
&lt;h2&gt;Mock&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Mock&lt;/strong&gt;은 테스트 중에 외부 의존성을 대체하는 객체입니다. 실제 객체의 동작을 모방하지만, 더 가볍고 빠르며 예측 가능한 결과를 반환합니다. Mock 객체는 호출된 메서드와 그 인자를 기록할 수 있어서, 테스트 중에 호출 여부와 호출된 인자를 검증할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; unittest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mock &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; MagicMock&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patch

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_s3_upload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    mock_s3_client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; MagicMock&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    mock_s3_client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;upload_file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;return_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;mocked_url&quot;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; patch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;common.S3Client&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;mock_s3_client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        s3_client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; S3Client&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; s3_client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;upload_file&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;fake_path&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;mocked_url&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 예제에서는 &lt;code class=&quot;language-text&quot;&gt;S3Client&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;upload_file&lt;/code&gt; 메서드를 모킹하여 실제로 파일을 업로드하지 않고 가짜 URL을 반환하도록 합니다.&lt;/p&gt;
&lt;h2&gt;Stub&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Stub&lt;/strong&gt;은 테스트 중에 의존성을 대체하는 간단한 구현체입니다. 주로 특정한 메서드 호출에 대해 미리 정의된 값을 반환하도록 설정됩니다. Mock과 비슷하지만, 호출된 메서드와 인자를 기록하지 않으며, 더 단순한 형태입니다.&lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;S3ClientStub&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;upload_file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; file_path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stubbed_url&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_s3_upload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    s3_client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; S3ClientStub&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; s3_client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;upload_file&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;fake_path&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stubbed_url&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 예제에서는 &lt;code class=&quot;language-text&quot;&gt;S3ClientStub&lt;/code&gt;을 사용하여 &lt;code class=&quot;language-text&quot;&gt;upload_file&lt;/code&gt; 메서드를 간단하게 스텁(stub) 처리했습니다.&lt;/p&gt;
&lt;h2&gt;차이점 정리&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Fixture&lt;/strong&gt;: 테스트를 위해 필요한 상태나 객체를 설정합니다. 실제 객체나 데이터베이스 상태를 사용합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mock&lt;/strong&gt;: 외부 의존성을 대체하여 실제 객체 대신 가짜 객체를 사용합니다. 호출된 메서드와 인자를 기록할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stub&lt;/strong&gt;: 특정한 메서드 호출에 대해 미리 정의된 값을 반환하는 간단한 구현체입니다. Mock보다 더 단순한 형태입니다.&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Django REST Framework에서 가상 필드 추가하기]]></title><description><![CDATA[서론 Django REST Framework(DRF…]]></description><link>https://sharknia.github.io/Django-REST-Framework에서-가상-필드-추가하기/</link><guid isPermaLink="false">https://sharknia.github.io/Django-REST-Framework에서-가상-필드-추가하기/</guid><pubDate>Mon, 17 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5fb0849ff13a3e6d6a64bfa0247c6048/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACY0lEQVR42hWRSVPTYABA8xu9edEjBw+My01nKAeUDhWBmqbpAt2SJjTNnjTpl2Zrs6ckpTQWiiCgjHrRn2Cdedd3eQ/Kl4pwo1onWk0Kb/W7HYYkJbqvcgwQWE3mRjKny6wmskBkVEExVVQQ4T7Oq1xvIEAfK6Vy+3it9SSWH3B9hiB7WKfbbmHN2km1XC3XTyrVGlJBi8WjwsHhPkJWTXarL7O4wP2XkUYVrqMMkH7/vPn75/vjw/LuW3Z9NQs9fZmF11dxEmmaIZ5SbVXu2YFu+IYx9czYgfYQuNJpNemeOFKSLBHJ+mzmuKG5WATJ1L5YxlkWzCMwdgEY8ZJMAddQPFPUhaFjQIfHSOl4r0k1JAvcrpJY6/nOkCCa7kT1L6JBEmOamp47tEhJAibQreFkBDxzr7DJKRT0Cd3f3n6Wy23wmrxauPcr/3zuWRMwDQ3KdVTAP914cUIRkT8EYB0O1zy702u83nyyu/sKyqOlMvq+UHjLaMoiNa/OjctlFMdWEuuMpeVK8POXbwSJshxtZ2d7bAnAsyRTRZB8rVGCckdHWRZxPIkJ7CwCl8kwTR2awSNPSacmzlOGrQCFZjkCa8A801Ynhh46FNlAKzBUZ6hoanTwalvkUl9KHS7wVCDinsl6tjANgD3WgD7AsdrY4hWZYMF6vvL54MNW7h309XG9JVt3vrxfncW6opzSLNaqHVB0h2K7NNsl+zhB43D5ECfqzVY5V8gXUBiuIcV6Bbr9cRtfpPPVl4dfd4ubpT+fukk4SUIrcsxgonv2yLU011yjjnXF1gYWMALbSXznzP8HK37PbkrcIRsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/5fb0849ff13a3e6d6a64bfa0247c6048/ca1dc/image1.png&apos; srcset=&apos;/static/5fb0849ff13a3e6d6a64bfa0247c6048/e7570/image1.png 170w,
/static/5fb0849ff13a3e6d6a64bfa0247c6048/f46e7/image1.png 340w,
/static/5fb0849ff13a3e6d6a64bfa0247c6048/ca1dc/image1.png 680w,
/static/5fb0849ff13a3e6d6a64bfa0247c6048/02d09/image1.png 1020w,
/static/5fb0849ff13a3e6d6a64bfa0247c6048/9d567/image1.png 1360w,
/static/5fb0849ff13a3e6d6a64bfa0247c6048/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;Django REST Framework(DRF)를 사용하다 보면, 모델에 없는 가상의 필드를 시리얼라이저에 추가해야 할 때가 있습니다. 이때 유용하게 사용할 수 있는 것이 &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt;입니다. &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt;를 통해 동적으로 계산된 값을 시리얼라이저에 포함할 수 있습니다. 이번 글에서는 이를 구현하는 방법을 간단히 살펴보겠습니다.&lt;/p&gt;
&lt;h2&gt;예제: 가상의 필드 추가하기&lt;/h2&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;Photos&lt;/code&gt; 모델이 아래와 같이 정의되어 있다고 가정해봅시다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; uuid

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Photos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UUIDField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;uuid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;uuid4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; editable&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CASCADE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; related_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;photos&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    match_type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    file_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    updated_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    created_at &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateTimeField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auto_now_add&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 모델을 기반으로 하는 시리얼라이저에 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;match_type&lt;/code&gt;을 조합한 가상의 필드 &lt;code class=&quot;language-text&quot;&gt;id_match_type&lt;/code&gt;을 추가해보겠습니다.&lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt; 사용하기&lt;/h2&gt;
&lt;p&gt;먼저, &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt;를 사용하여 시리얼라이저에 가상의 필드를 추가합니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Photos

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PhotoSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    id_match_type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SerializerMethodField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 가상의 필드 정의&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Photos
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;match_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;file_name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id_match_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_id_match_type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 가상의 필드를 계산하는 메서드 정의&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;match_type&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드에서 &lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;id_match_type&lt;/code&gt;이라는 이름의 필드를 시리얼라이저에 추가합니다. DRF는 자동으로 &lt;code class=&quot;language-text&quot;&gt;get_id_match_type&lt;/code&gt; 메서드를 찾아 이 필드의 값을 계산합니다. 이 메서드는 객체(&lt;code class=&quot;language-text&quot;&gt;obj&lt;/code&gt;)를 인자로 받아, &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;match_type&lt;/code&gt;을 조합한 문자열을 반환합니다.&lt;/p&gt;
&lt;h2&gt;결과&lt;/h2&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;PhotoSerializer&lt;/code&gt;를 사용하여 직렬화된 데이터에는 &lt;code class=&quot;language-text&quot;&gt;id_match_type&lt;/code&gt; 필드가 포함됩니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;123e4567-e89b-12d3-a456-426614174000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;match_type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;CUTE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;file_name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;photo.jpg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2024-06-17T10:26:19Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2024-06-17T10:26:19Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id_match_type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;123e4567-e89b-12d3-a456-426614174000-CUTE&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SerializerMethodField&lt;/code&gt;는 모델에 존재하지 않는 가상의 필드를 시리얼라이저에 추가할 때 매우 유용한 도구입니다. 이를 통해 동적으로 계산된 값을 클라이언트에게 전달할 수 있습니다. 위 예제에서는 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;match_type&lt;/code&gt;을 조합한 가상의 필드를 추가하는 방법을 살펴보았습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[AWS에서 EC2 인스턴스 생성 및 Visual Studio Code로 원격 연결하기]]></title><description><![CDATA[서론 이번 글에서는 AWS에서 VPC를 생성하고, EC2 인스턴스를 설정하며, 터미널과 Visual Studio Code를 통해 원격으로 연결하는 과정을 기록하려고 합니다.  VPC 생성 1. VPC 생성 AWS Management Console…]]></description><link>https://sharknia.github.io/AWS에서-EC2-인스턴스-생성-및-Visual-Studio-Code로-원격-연결하기/</link><guid isPermaLink="false">https://sharknia.github.io/AWS에서-EC2-인스턴스-생성-및-Visual-Studio-Code로-원격-연결하기/</guid><pubDate>Thu, 13 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;이번 글에서는 AWS에서 VPC를 생성하고, EC2 인스턴스를 설정하며, 터미널과 Visual Studio Code를 통해 원격으로 연결하는 과정을 기록하려고 합니다. &lt;/p&gt;
&lt;h2&gt;VPC 생성&lt;/h2&gt;
&lt;h3&gt;1. VPC 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;AWS Management Console에 로그인합니다.&lt;/li&gt;
&lt;li&gt;상단 검색창에 &quot;VPC&quot;를 입력하고 VPC 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;&quot;VPCs&quot;를 선택한 후 &quot;Create VPC&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;VPC 이름, IPv4 CIDR 블록(예: 10.0.0.0/16), IPv6 CIDR 블록 설정, 테넌시 등을 입력합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create VPC&quot; 버튼을 클릭하여 VPC를 생성합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;2 서브넷 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Subnets&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Subnet&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;서브넷 이름, VPC 선택, 가용 영역(AZ) 선택, IPv4 CIDR 블록(예: 10.0.1.0/24)을 입력합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Subnet&quot; 버튼을 클릭하여 서브넷을 생성합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3. 인터넷 게이트웨이 생성 및 연결&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Internet Gateways&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create internet gateway&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;인터넷 게이트웨이 이름을 입력하고 &quot;Create internet gateway&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;생성된 인터넷 게이트웨이를 선택하고 &quot;Actions&quot; 메뉴에서 &quot;Attach to VPC&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;앞서 생성한 VPC를 선택하고 &quot;Attach internet gateway&quot;를 클릭합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;4. 라우팅 테이블 생성 및 설정&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Route Tables&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create route table&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;라우팅 테이블 이름과 VPC를 선택한 후 &quot;Create route table&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;생성된 라우팅 테이블을 선택하고 &quot;Routes&quot; 탭을 클릭한 후 &quot;Edit routes&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;기본 경로(0.0.0.0/0)에 인터넷 게이트웨이를 대상으로 추가합니다.&lt;/li&gt;
&lt;li&gt;&quot;Save routes&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Subnet associations&quot; 탭을 클릭하고 &quot;Edit subnet associations&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;앞서 생성한 서브넷을 선택하고 &quot;Save&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;EC2 인스턴스 생성&lt;/h2&gt;
&lt;h3&gt;1. SSH 키 페어 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;상단 검색창에 &quot;EC2&quot;를 입력하고 EC2 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;왼쪽 사이드바에서 &quot;Key Pairs&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create key pair&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;키 페어 이름을 입력하고, 키 파일 형식을 선택한 후 &quot;Create key pair&quot; 버튼을 클릭합니다. 이때, PEM 형식을 선택하는 것을 권장합니다.&lt;/li&gt;
&lt;li&gt;키 페어가 생성되면 자동으로 .pem 파일이 다운로드됩니다. 이 파일을 안전한 위치에 저장합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;2. EC2 인스턴스 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;EC2 대시보드에서 &quot;Instances&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Launch instances&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Name and tags&quot; 섹션에서 인스턴스 이름을 입력합니다.&lt;/li&gt;
&lt;li&gt;&quot;Application and OS Images (Amazon Machine Image)&quot; 섹션에서 사용할 AMI를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Instance type&quot; 섹션에서 원하는 인스턴스 유형을 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Key pair (login)&quot; 섹션에서 앞서 생성한 키 페어를 선택합니다.&lt;/li&gt;
&lt;li&gt;&quot;Network settings&quot; 섹션에서 편집을 눌러 1에서 생성한 VPC와 서브넷을 선택합니다.&lt;/li&gt;
&lt;li&gt;보안 그룹 설정에서 기존 보안 그룹을  새로 생성합니다. SSH (22번 포트)를 허용하는 규칙이 포함되어야 SSH로 접근할 수 있습니다. 허용할 IP는 내 아이피를 선택하거나 IPv4 Anywhere을 선택하는데, IPv4 Anywhere을 선택한 경우에는 모든 IP에서 접근이 가능함에 주의해야 합니다. &lt;/li&gt;
&lt;li&gt;&quot;Launch instance&quot; 버튼을 클릭하여 인스턴스를 생성합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;터미널에서 연결&lt;/h2&gt;
&lt;h3&gt;1. SSH 키 파일 권한 설정&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;터미널을 엽니다 (Windows의 경우 Git Bash 또는 PuTTY 사용).&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;다운로드한 .pem 파일의 권한을 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;400&lt;/span&gt; path/to/your-key-pair.pem&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;2. SSH를 사용하여 인스턴스에 연결&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;SSH를 사용하여 인스턴스에 연결합니다. 아래 명령어를 사용하시면 됩니다. &lt;code class=&quot;language-text&quot;&gt;instance-public-dns&lt;/code&gt;는 EC2 인스턴스의 퍼블릭 DNS 이름입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ssh&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-i&lt;/span&gt; path/to/your-key-pair.pem ec2-user@instance-public-dns&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3. EC2 인스턴스의 퍼블릭 DNS 확인 방법&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;EC2 대시보드에서 &quot;Instances&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;연결하려는 인스턴스를 선택합니다.&lt;/li&gt;
&lt;li&gt;하단에 인스턴스 세부 정보가 나타나며, &quot;Public DNS (IPv4)&quot; 항목에서 퍼블릭 DNS 이름을 확인할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;VS Code에서 연결&lt;/h2&gt;
&lt;h3&gt;1. Visual Studio Code 설치 및 설정&lt;/h3&gt;
&lt;h4&gt;Remote - SSH 확장 설치&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Visual Studio Code를 열고, 왼쪽 사이드바에서 확장 아이콘(네모 모양)을 클릭합니다.&lt;/li&gt;
&lt;li&gt;검색창에 &lt;code class=&quot;language-text&quot;&gt;Remote - SSH&lt;/code&gt;를 입력하고 &lt;code class=&quot;language-text&quot;&gt;Remote - SSH&lt;/code&gt; 확장을 설치합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2. Visual Studio Code에서 SSH 구성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;VS Code에서 Command Palette 열기&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Ctrl+Shift+P&lt;/code&gt; (또는 &lt;code class=&quot;language-text&quot;&gt;Cmd+Shift+P&lt;/code&gt; on Mac)을 눌러 Command Palette를 엽니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SSH 구성 파일 편집&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Command Palette에서 &lt;code class=&quot;language-text&quot;&gt;Remote-SSH: Open SSH Configuration File...&lt;/code&gt;을 입력하고 선택합니다.&lt;/li&gt;
&lt;li&gt;로컬의 SSH 설정 파일 경로를 선택합니다 (보통 &lt;code class=&quot;language-text&quot;&gt;~/.ssh/config&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SSH 호스트 추가&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;구성 파일에 다음 내용을 추가합니다. &lt;code class=&quot;language-text&quot;&gt;Host&lt;/code&gt; 부분은 원하는 이름으로 설정하고, &lt;code class=&quot;language-text&quot;&gt;HostName&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;IdentityFile&lt;/code&gt; 부분을 자신의 정보로 변경합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;Host your-instance-name
    HostName instance-public-dns
    User ec2-user
    IdentityFile /path/to/your-key-pair.pem&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;3. Visual Studio Code에서 원격 연결&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;VS Code의 Remote Explorer 열기&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Visual Studio Code의 왼쪽 사이드바에서 &quot;Remote Explorer&quot; 아이콘을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SSH Targets 섹션에서 호스트 선택&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;SSH Targets&lt;/code&gt; 섹션에서 추가한 호스트를 선택하고 &lt;code class=&quot;language-text&quot;&gt;Connect to Host in New Window&lt;/code&gt;를 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;호스트 키 확인&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;연결할 때 처음으로 호스트 키를 신뢰할 것인지 묻는 창이 나타날 수 있습니다. &quot;Yes&quot;를 클릭하여 신뢰합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;원격 서버에 연결&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;연결이 성공하면 새로운 VS Code 창이 열리며, 원격 서버의 파일 시스템에 접근할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[AWS 활용 테스트 서버 구현 (1)]]></title><description><![CDATA[서론 ngrok을 이용하는 등 로컬에서만 개발을 하다 테스트 서버를 꾸며야 하는 때가 왔습니다. AWS를 이용하기로 했고, 그 과정을 진행했던 기록을 남기려고 합니다.  외부에서는 API Gateway에만 접근이 가능하며, DB…]]></description><link>https://sharknia.github.io/AWS-활용-테스트-서버-구현-1/</link><guid isPermaLink="false">https://sharknia.github.io/AWS-활용-테스트-서버-구현-1/</guid><pubDate>Sun, 09 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e6bd8508c639af0de6f56f073f84cfa3/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfklEQVR42iWNW0/TYByH+w28N16oCQIy0EEcGBCEbYwdgHFUEwFJCAZmHFG31TGkIBC2QTe69TDajsMO6TbWri1li3EoI1Eg8Uou/AAmXvAFjFe+g+R5f8mbPE/+kCEsmgjJTEoWSrJu7g8ySh+tWCP7/YzizJXe8UdPo/kBWhlmD4YYBQjdlGwhZZCAEALPiItmQrSQUjcp9VLy+G5hq3T2Jn4wHkpNUvwQwSNSaWw7b43IvZQENDNepgvEXVfxZT/AHBjR9Lr4ufD99Pky/WGbt+FJ8yzO5r/6xC/PKMEYBppkISRj+PKyHhMMIcGEizosZ9uWaaWotvlujiEP7euHP8///b3YPyqZnEGdG9chjD1e6KEkcKwrlNOHcpB2g+/E+M6Q0EuKU2TGEeHmdoSK8cWVVF4+OeOKx38ufqPZvGraP4rGR4PcE0bRY+VEhwmQNsjrguAjdHiT02HuMRwye4iJYCJ38uP013lA+OSh9zSvvFVTfi3C9gVSJpBtlAEh1B7gOwLZjgDfvpaeoPgmF3FtcBZqmVzlZDRbaH25cL1n5sbIQo19YwDlooff+nGhDc2CEoRQsy/zyJdq8aXBauZYy2o8Xjw2vfVXDjtuD7lUI54m+9qtFx9ntqQpas8RFfRoptmbavWlm71pSLOUaFxOgm1aTj5AdnoCmRWhiOwKjdOrOhdmI1JaR7ATxgwI049yFc5NzVIcmI1LCZBA6vlYPRJTI7EGwEJMPb9T+55un4vU2dHKiZWG12sGD6lfZO/PMvc8W5rFBNDq53fVSBmoykVXA+Ayd2GmBmZU7mg1WJiucUbq4EiDJ3rHuVnrZlVuFgiAK7naRf8Hpu5NEAB3zCsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/e6bd8508c639af0de6f56f073f84cfa3/ca1dc/image1.png&apos; srcset=&apos;/static/e6bd8508c639af0de6f56f073f84cfa3/e7570/image1.png 170w,
/static/e6bd8508c639af0de6f56f073f84cfa3/f46e7/image1.png 340w,
/static/e6bd8508c639af0de6f56f073f84cfa3/ca1dc/image1.png 680w,
/static/e6bd8508c639af0de6f56f073f84cfa3/02d09/image1.png 1020w,
/static/e6bd8508c639af0de6f56f073f84cfa3/9d567/image1.png 1360w,
/static/e6bd8508c639af0de6f56f073f84cfa3/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/ngrok-%EB%A1%9C%EC%BB%AC-%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%89%BD%EA%B2%8C-%EA%B3%B5%EA%B0%9C%ED%95%98%EB%8A%94-%EB%8F%84%EA%B5%AC&quot;&gt;ngrok&lt;/a&gt;을 이용하는 등 로컬에서만 개발을 하다 테스트 서버를 꾸며야 하는 때가 왔습니다. AWS를 이용하기로 했고, 그 과정을 진행했던 기록을 남기려고 합니다. &lt;/p&gt;
&lt;p&gt;외부에서는 API Gateway에만 접근이 가능하며, DB나 백엔드 서버는 직접 접근이 불가능하도록 구현하려고 합니다. &lt;/p&gt;
&lt;h2&gt;VPC (Virtual Private Cloud)&lt;/h2&gt;
&lt;h3&gt;VPC 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;VPC 서비스로 이동: 상단 검색창에서 &quot;VPC&quot;를 검색하여 VPC 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VPC 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Your VPCs&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create VPC&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;VPC 이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyVPC&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;IPv4 CIDR 블록을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;10.0.0.0/16&lt;/code&gt;). &lt;/li&gt;
&lt;li&gt;기타 옵션은 기본값으로 두고 &quot;Create&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;IPv4 CIDR 블록이란?&lt;/h3&gt;
&lt;h4&gt;CIDR (Classless Inter-Domain Routing)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;CIDR은 IP 주소를 효율적으로 할당하고 라우팅하기 위한 방법입니다.&lt;/li&gt;
&lt;li&gt;CIDR 표기법은 IP 주소 뒤에 슬래시(&lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;)와 숫자를 붙여서 사용합니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;10.0.0.0/16&lt;/code&gt;입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;구성 요소&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;네트워크 주소: &lt;code class=&quot;language-text&quot;&gt;10.0.0.0&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;네트워크의 시작 주소를 나타냅니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;서브넷 마스크: &lt;code class=&quot;language-text&quot;&gt;/16&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;네트워크와 호스트 부분을 구분하는 비트 수를 나타냅니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/16&lt;/code&gt;은 처음 16비트가 네트워크 주소를, 나머지 16비트가 호스트 주소를 의미합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;의미&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;10.0.0.0/16은 IP 주소 범위를 나타냅니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;시작 주소는 &lt;code class=&quot;language-text&quot;&gt;10.0.0.0&lt;/code&gt;입니다.&lt;/li&gt;
&lt;li&gt;끝 주소는 &lt;code class=&quot;language-text&quot;&gt;10.0.255.255&lt;/code&gt;입니다.&lt;/li&gt;
&lt;li&gt;총 65,536개의 IP 주소를 포함합니다 (2^16).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;예시&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;공용 서브넷: &lt;code class=&quot;language-text&quot;&gt;10.0.1.0/24&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;시작 주소: &lt;code class=&quot;language-text&quot;&gt;10.0.1.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;끝 주소: &lt;code class=&quot;language-text&quot;&gt;10.0.1.255&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;총 256개의 IP 주소를 포함합니다 (2^8).&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/24&lt;/code&gt;는 처음 24비트가 네트워크 주소를, 나머지 8비트가 호스트 주소를 의미합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;프라이빗 서브넷: &lt;code class=&quot;language-text&quot;&gt;10.0.2.0/24&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;시작 주소: &lt;code class=&quot;language-text&quot;&gt;10.0.2.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;끝 주소: &lt;code class=&quot;language-text&quot;&gt;10.0.2.255&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;총 256개의 IP 주소를 포함합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;설정 예시&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;VPC CIDR 블록: &lt;code class=&quot;language-text&quot;&gt;10.0.0.0/16&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;공용 서브넷 CIDR 블록: &lt;code class=&quot;language-text&quot;&gt;10.0.1.0/24&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;프라이빗 서브넷 CIDR 블록: &lt;code class=&quot;language-text&quot;&gt;10.0.2.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이와 같이 CIDR 블록을 설정하면 VPC 내에서 사용할 수 있는 IP 주소의 범위를 지정하고, 공용 및 프라이빗 서브넷을 나누어 관리할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;서브넷 생성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Subnets&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Subnet&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;서브넷 이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;PublicSubnet1&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;PrivateSubnet1&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;VPC를 선택합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyVPC&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;서브넷의 가용 영역을 선택합니다.&lt;/li&gt;
&lt;li&gt;각 서브넷의 IPv4 CIDR 블록을 입력합니다 (예: 공용 서브넷은 &lt;code class=&quot;language-text&quot;&gt;10.0.1.0/24&lt;/code&gt;, 프라이빗 서브넷은 &lt;code class=&quot;language-text&quot;&gt;10.0.2.0/24&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&quot;Create Subnet&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;인터넷 게이트웨이 생성 및 연결&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;인터넷 게이트웨이 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Internet Gateways&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Internet Gateway&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyInternetGateway&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&quot;Create&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인터넷 게이트웨이 연결:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;생성한 인터넷 게이트웨이를 선택하고 &quot;Actions&quot;를 클릭한 후 &quot;Attach to VPC&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;VPC를 선택하고 &quot;Attach&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;라우팅 테이블 설정&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;라우팅 테이블 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VPC 대시보드에서 &quot;Route Tables&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Route Table&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;PublicRouteTable&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;VPC를 선택하고 &quot;Create&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;라우팅 테이블 편집:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;생성한 라우팅 테이블을 선택하고 &quot;Routes&quot; 탭으로 이동합니다.&lt;/li&gt;
&lt;li&gt;&quot;Edit Routes&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&quot;Add route&quot;를 클릭하여 다음을 추가합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;목적지: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;타겟: 인터넷 게이트웨이 (예: &lt;code class=&quot;language-text&quot;&gt;MyInternetGateway&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&quot;Save routes&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;서브넷 연결:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;라우팅 테이블을 선택하고 &quot;Subnet associations&quot; 탭으로 이동합니다.&lt;/li&gt;
&lt;li&gt;&quot;Edit subnet associations&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;공용 서브넷을 선택하고 &quot;Save&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;보안 그룹 및 네트워크 ACL&lt;/h2&gt;
&lt;h3&gt;보안 그룹 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;EC2 대시보드로 이동: 상단 검색창에서 &quot;EC2&quot;를 검색하여 EC2 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;보안 그룹 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;EC2 대시보드에서 &quot;Security Groups&quot; 클릭:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&quot;Security Groups&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create security group&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;보안 그룹 이름 및 설명 입력:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;보안 그룹 이름을 입력합니다.&lt;/li&gt;
&lt;li&gt;설명을 입력합니다.&lt;/li&gt;
&lt;li&gt;VPC를 선택합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyVPC&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;보안 그룹은 서비스 별로 구분하여 만들어주는게 관리하기가 쉽습니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인바운드 규칙 설정:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;API Gateway 보안 그룹 (APIGatewaySG):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Type: HTTP, Protocol: TCP, Port range: 80, Source: 0.0.0.0/0 (모든 IP 허용)&lt;/li&gt;
&lt;li&gt;Type: HTTPS, Protocol: TCP, Port range: 443, Source: 0.0.0.0/0 (모든 IP 허용)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Auth Server 보안 그룹 (TestServerSG):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Type: Custom TCP, Protocol: TCP, Port range: 8000 (예제 포트), Source: APIGatewaySG (API Gateway 보안 그룹에서만 접근 허용)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DB 보안 그룹 (DBSG):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Type&lt;/strong&gt;: PostgreSQL, &lt;strong&gt;Protocol&lt;/strong&gt;: TCP, &lt;strong&gt;Port range&lt;/strong&gt;: 5432, &lt;strong&gt;Source&lt;/strong&gt;: TestServerSG (TestServerSG 보안 그룹에서만 접근 허용)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;아웃바운드 규칙 설정:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;기본적으로 모든 아웃바운드 트래픽이 허용되지만, 필요에 따라 아웃바운드 규칙을 설정할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;네트워크 ACL 설정&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;VPC 대시보드로 이동: 상단 검색창에서 &quot;VPC&quot;를 검색하여 VPC 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네트워크 ACL 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;VPC 대시보드에서 &quot;Network ACLs&quot; 클릭:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&quot;Network ACLs&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create Network ACL&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네트워크 ACL 이름 및 설명 입력:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;네트워크 ACL 이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;PublicSubnetACL&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;PrivateSubnetACL&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;설명을 입력합니다.&lt;/li&gt;
&lt;li&gt;VPC를 선택합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyVPC&lt;/code&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;서브넷 연결&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;생성한 네트워크 ACL을 선택하고 &quot;Subnet associations&quot; 탭으로 이동합니다.&lt;/li&gt;
&lt;li&gt;&quot;Edit subnet associations&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;공용 서브넷 및 프라이빗 서브넷을 각각 적절한 네트워크 ACL에 연결합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인바운드 및 아웃바운드 규칙 설정:&lt;/p&gt;
&lt;h4&gt;Public 서브넷 (PublicSubnetACL)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;인바운드 규칙&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rule #100: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;80&lt;/code&gt;, Source: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt; (모든 IP)&lt;/li&gt;
&lt;li&gt;Rule #110: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;443&lt;/code&gt;, Source: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt; (모든 IP)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;아웃바운드 규칙&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rule #100: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;80&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Rule #110: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;443&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Rule #120: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;1024-65535&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Private 서브넷 (PrivateSubnetACL)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;인바운드 규칙&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rule #100: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;5432&lt;/code&gt;, Source: &lt;code class=&quot;language-text&quot;&gt;10.0.0.0/16&lt;/code&gt; (프라이빗 서브넷이 위치한 VPC의 CIDR 블록, 내부 통신 허용)&lt;/li&gt;
&lt;li&gt;Rule #110: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;1024-65535&lt;/code&gt;, Source: &lt;code class=&quot;language-text&quot;&gt;10.0.0.0/16&lt;/code&gt; (이 규칙은 내부 통신을 위한 포트 범위 허용)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;아웃바운드 규칙&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rule #100: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;80&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Rule #110: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;443&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Rule #120: &lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt;, Protocol: &lt;code class=&quot;language-text&quot;&gt;TCP&lt;/code&gt;, Port range: &lt;code class=&quot;language-text&quot;&gt;1024-65535&lt;/code&gt;, Destination: &lt;code class=&quot;language-text&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;RDS&lt;/h2&gt;
&lt;h3&gt;PostgreSQL RDS 인스턴스 생성&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;RDS 서비스로 이동: 상단 검색창에서 &quot;RDS&quot;를 검색하여 RDS 대시보드로 이동합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DB 인스턴스 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDS 대시보드에서 &quot;Databases&quot;를 클릭합니다.&lt;/li&gt;
&lt;li&gt;&quot;Create database&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;데이터베이스 생성 방법&lt;/strong&gt;: &quot;Standard Create&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;엔진 옵션&lt;/strong&gt;: &quot;PostgreSQL&quot;을 선택합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;버전&lt;/strong&gt;: 원하는 PostgreSQL 버전을 선택합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DB 인스턴스 설정:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DB 인스턴스 식별자: 인스턴스의 이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;MyPostgreSQLDB&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;마스터 사용자 이름: 기본 관리자 계정 이름을 입력합니다 (예: &lt;code class=&quot;language-text&quot;&gt;admin&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;마스터 암호: 관리자 계정의 암호를 입력합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인스턴스 사양:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DB 인스턴스 클래스: 요구사항에 맞는 인스턴스 클래스를 선택합니다 (예: &lt;code class=&quot;language-text&quot;&gt;db.t3.micro&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;스토리지 유형: 일반적인 용도로 &quot;General Purpose (SSD)&quot;를 선택합니다.&lt;/li&gt;
&lt;li&gt;할당된 스토리지: 필요에 따라 스토리지 크기를 설정합니다 (예: 20GB).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;가용성 및 내구성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;필요에 따라 Multi-AZ 배포를 설정합니다 (고가용성을 위해 권장).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네트워크 및 보안:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VPC 선택: 생성한 VPC (&lt;code class=&quot;language-text&quot;&gt;MyVPC&lt;/code&gt;)를 선택합니다.&lt;/li&gt;
&lt;li&gt;서브넷 그룹: RDS 서브넷 그룹을 선택합니다 (RDS 인스턴스를 배치할 서브넷 그룹).&lt;/li&gt;
&lt;li&gt;퍼블릭 액세스 가능성: &quot;No&quot;를 선택하여 인스턴스를 프라이빗 서브넷에 배치합니다.&lt;/li&gt;
&lt;li&gt;보안 그룹: 이전에 생성한 &lt;code class=&quot;language-text&quot;&gt;DBSG&lt;/code&gt; 보안 그룹을 선택합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터베이스 옵션:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;기본 설정을 사용하거나, 필요에 따라 데이터베이스 이름을 입력합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;백업 설정:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;자동 백업: 자동 백업을 활성화하고 보관 기간을 설정합니다 (예: 7일).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;모니터링:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;필요에 따라 Amazon CloudWatch Enhanced Monitoring을 활성화합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;암호화:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;필요에 따라 암호화를 활성화합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;추가 구성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;필요에 따라 로깅 및 유지관리 옵션을 설정합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DB 인스턴스 생성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;모든 설정을 확인한 후 &quot;Create database&quot; 버튼을 클릭합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이로써 DB를 포함한 서버 인프라가 일단 구성됐습니다. 다음 글에서는 이미지를 빌드해서 Push한 후, ECS에 배포를 해보겠습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[DRF의 API View]]></title><description><![CDATA[DRF에서 다양한 HTTP 메서드(, , , , )를 처리하기 위한 여러 가지 API 뷰 클래스들을 소개하고, 이를 효과적으로 사용하는 방법을 안내하겠습니다. 또한, 를 활용하여 직접 뷰를 구현하는 방법도 다룹니다. DRF…]]></description><link>https://sharknia.github.io/DRF의-API-View/</link><guid isPermaLink="false">https://sharknia.github.io/DRF의-API-View/</guid><pubDate>Wed, 05 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7bee8657fcdf499656fa1963da5d26d2/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AFV+jGmPmnaaooKjqZCtr6K7ubPHwK27s8rXzb7HvMza0dPi2cjYz7rLwqzCvZm0tIqprX2fpW2SnFmCkABehpN1maGGp6uWsrSpv7vD1c1gZ2FZXlqXrKwwTVe0w8KBiISSl5Lj8erD0si2ysSgurqQrbB9nqZkipcAZoyZgKKolrO0qMC9xdfOxNLJSU5L1N3akayxAB0ou8XEWnN5gZmeen16k5mR1ejessfCobq6iaisa5CcAG6TnYyqrqa+vL/Ryczd1Y+/y0JTVG5xbmVsaG9vaZSYlVBxeXW+0jtga5OwuOf27cXWzK/FwJOwsnOXoQByl6CTsLGwxsHM3dLP4NmkxcybqaiIlpaXtLmAiIgsW2pCa3dLZWxolKFScXnl8u3R4di5zcabtrZ5nKQAdZmjlrKztsrEzdzS4vLtqraytbSthKu1gcTaP05SNm2Bc7TJHz5IrrSxvsnG4O/t1ePbvNDInLe2ep2lAHSYopSwsrLHwcnZz97v6F5ubx4bFTFOV73b4niFhQgaISM3PkhWWb/My4WPjtXj39Tj2rjLxJmztHebpABvlZ+OrK+pwL3B08nU49marKhodHKEiIR9fHiZo6Kcr69hcnRgY199hYJ3gX7H083N3tSvxMCTr7J0mKEAaI6ZhKSqnLa2ssbCytrQtMS9cnhyUlZUQmFqTllb1eblRGNsPmNwSFxgdIOCusi+vdDKobq4iqisbpKcAGCHlHeao4uqrZ64t7TIwpKmoV5pZVViYBkkJVpgXdLi3DhMUBQWFUpRTcXXzrjLwqO7uZKusXyepWSLlwBWfo1pj5p4mqOGpquXsrKpv7u/0sq6zcaWp6HE0cbS4dWXrKd8k5OoubKzyMKdtbWLqa18nqVtkpxZgpASbJJQ+RpYKAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/7bee8657fcdf499656fa1963da5d26d2/ca1dc/image1.png&apos; srcset=&apos;/static/7bee8657fcdf499656fa1963da5d26d2/e7570/image1.png 170w,
/static/7bee8657fcdf499656fa1963da5d26d2/f46e7/image1.png 340w,
/static/7bee8657fcdf499656fa1963da5d26d2/ca1dc/image1.png 680w,
/static/7bee8657fcdf499656fa1963da5d26d2/02d09/image1.png 1020w,
/static/7bee8657fcdf499656fa1963da5d26d2/9d567/image1.png 1360w,
/static/7bee8657fcdf499656fa1963da5d26d2/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
DRF에서 다양한 HTTP 메서드(&lt;code class=&quot;language-text&quot;&gt;GET&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;POST&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;PUT&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;PATCH&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt;)를 처리하기 위한 여러 가지 API 뷰 클래스들을 소개하고, 이를 효과적으로 사용하는 방법을 안내하겠습니다. 또한, &lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;를 활용하여 직접 뷰를 구현하는 방법도 다룹니다.&lt;/p&gt;
&lt;h2&gt;DRF의 기본 뷰 클래스들을 활용한 구현&lt;/h2&gt;
&lt;h3&gt;공통 속성들에 대한 설명&lt;/h3&gt;
&lt;h4&gt;serializer_class&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;serializer_class&lt;/code&gt;는 뷰에서 사용할 시리얼라이저 클래스를 지정합니다. 시리얼라이저는 Django 모델 인스턴스를 JSON으로 변환하거나, 클라이언트로부터 받은 JSON 데이터를 Django 모델 인스턴스로 변환하는 역할을 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomUserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;nickname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;dob&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;avatar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;queryset&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;queryset&lt;/code&gt;은 뷰에서 처리할 기본 쿼리셋을 지정합니다. 이는 데이터베이스에서 특정 모델의 인스턴스를 선택하는 데 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;permission_classes&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;permission_classes&lt;/code&gt;는 뷰에 대한 접근 권한을 제어합니다. 예를 들어, 인증된 사용자만 접근할 수 있도록 설정할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;UpdateAPIView: PUT, PATCH 요청 처리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;UpdateAPIView&lt;/code&gt;는 객체를 업데이트하는 데 사용됩니다. &lt;code class=&quot;language-text&quot;&gt;PUT&lt;/code&gt; 요청은 객체의 모든 필드를 업데이트하고, &lt;code class=&quot;language-text&quot;&gt;PATCH&lt;/code&gt; 요청은 일부 필드만 업데이트합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;permissions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; IsAuthenticated
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UpdateCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UpdateAPIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;CreateAPIView: POST 요청 처리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;CreateAPIView&lt;/code&gt;는 새로운 객체를 생성하는 데 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CreateCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CreateAPIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;RetrieveAPIView: GET 요청 처리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;RetrieveAPIView&lt;/code&gt;는 단일 객체를 가져오는 데 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RetrieveCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RetrieveAPIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;DestroyAPIView: DELETE 요청 처리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;DestroyAPIView&lt;/code&gt;는 객체를 삭제하는 데 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DestroyCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DestroyAPIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ListAPIView: 다수의 객체를 GET 요청으로 가져오기&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ListAPIView&lt;/code&gt;는 여러 객체를 리스트 형태로 가져오는 데 사용됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ListCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ListAPIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;GenericAPIView와 Mixins를 활용한 구현&lt;/h2&gt;
&lt;p&gt;DRF는 &lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 여러 &lt;code class=&quot;language-text&quot;&gt;mixins&lt;/code&gt;를 제공하여 보다 유연하게 뷰를 구성할 수 있습니다. 이를 통해 기본 제공되는 뷰 클래스를 사용하지 않고도 비슷한 기능을 구현할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;mixins?&lt;/h3&gt;
&lt;p&gt;Django REST Framework(DRF)에서 &lt;code class=&quot;language-text&quot;&gt;mixins&lt;/code&gt;는 뷰 클래스에 특정한 기능을 추가하는 작은 모듈입니다. 여러 &lt;code class=&quot;language-text&quot;&gt;mixins&lt;/code&gt;를 조합하여 하나의 뷰에서 다양한 기능을 구현할 수 있습니다. DRF의 &lt;code class=&quot;language-text&quot;&gt;mixins&lt;/code&gt;는 특히 &lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 함께 사용되어 CRUD(Create, Read, Update, Delete) 작업을 수행하는 데 유용합니다.&lt;/p&gt;
&lt;h3&gt;UpdateAPIView를 GenericAPIView로 구현&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;UpdateModelMixin&lt;/code&gt;을 사용하여 &lt;code class=&quot;language-text&quot;&gt;PUT&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;PATCH&lt;/code&gt; 요청을 처리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;permissions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; IsAuthenticated
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UpdateCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenericAPIView&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UpdateModelMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;partial_update&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;CreateAPIView를 GenericAPIView로 구현&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;CreateModelMixin&lt;/code&gt;을 사용하여 &lt;code class=&quot;language-text&quot;&gt;POST&lt;/code&gt; 요청을 처리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CreateCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenericAPIView&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CreateModelMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;RetrieveAPIView를 GenericAPIView로 구현&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;RetrieveModelMixin&lt;/code&gt;을 사용하여 &lt;code class=&quot;language-text&quot;&gt;GET&lt;/code&gt; 요청을 처리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RetrieveCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenericAPIView&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RetrieveModelMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retrieve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;DestroyAPIView를 GenericAPIView로 구현&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;DestroyModelMixin&lt;/code&gt;을 사용하여 &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt; 요청을 처리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DestroyCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenericAPIView&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DestroyModelMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;destroy&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ListAPIView를 GenericAPIView로 구현&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GenericAPIView&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;ListModelMixin&lt;/code&gt;을 사용하여 여러 객체를 가져오는 &lt;code class=&quot;language-text&quot;&gt;GET&lt;/code&gt; 요청을 처리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; generics&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CustomUserSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ListCustomUserView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generics&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenericAPIView&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mixins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ListModelMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserSerializer

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Django의 사용자 인증 시스템 커스터마이징]]></title><description><![CDATA[서론 Django에서 사용자 인증 시스템을 커스터마이징해야 하는 경우가 있습니다. 이때 Django…]]></description><link>https://sharknia.github.io/Django의-사용자-인증-시스템-커스터마이징/</link><guid isPermaLink="false">https://sharknia.github.io/Django의-사용자-인증-시스템-커스터마이징/</guid><pubDate>Mon, 03 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0683326ecf1e06749e6068923d9eff40/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9APHs1/bqz/nkw/jhv/bjxPPlyu7mzuffxefexObfyOHgzOfl0fPw3NXVwOXk0e/v2+zr1+7u2u7t2e/t2QD36s7+3rT+zpz/1qn42bLu2Lfm0K3kxaHlwqTIqY7Z0L7V0ryeuaiqsJvFw6/Rzbnl5NDm6tbr7dnv7dkA+OfJ/tKh/ciS782i3tC11r6j2bCK4bmarYRpiGtTtb6x1uLWlaSPm6KSfn56Qz4wsrGb1uHM3ubS7u7aAPbkxP/Jk9qaZNvDpsS7o6iIZdmoh7CHaoZTOW9CK1NJNFGAdZ6rm4qKc2lsaDo0JaanjcHWws/fy+rt2QD248P5vIf5toPe1rvFybaed1epgGOZblJkJQ+UenDAuLAEGAx7pZ6alYJNT0NjZE28zbeyz77C2MXm69gA9eDB77uL07SVupyAoHdWrY5/dWBQc1I5ZEQvmIuCoJuLHyEUi56UrLClhox/fJ6Re5uPhqCRvdjH4enXAPLixt66k7WFYs5jO690V3NvYltPPnFgS3OCcz5XTistIVxZRG1sXmx7eJu4sm+emXipo4urnbXUx+Ho1gDu6tPpx6LzqHvWeFXLb1JrRC1sVUKAb1hbXEkyamRndmSLgmeAgHSMh4GfsqdTgHxzrqmRxb6wz8Pj5tQA7u3Z7+TJ7NCr2rKLyJFqxJh5k39mdGtUhn1henNdenhlmJiDdX5rcIh6eo2BOYiNWbG5ks3LyOPX7+/cAO7t2e7s1+vjyOTXuL6vjqmcfKKXdXVvUZ6gg3+Cbnd5Z5ubh4CXhlSamjWAgkucoH/ExbPYz9/p2e/t2QDu7dnu7Nnt6tbv7Nbn5M7Z1LvY1bjLx6jT1LfIzba9x7KttZ+yw7K00MS72c7A2c7N39Le6Nfs7dvu7dnsTbOW13tEvAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/0683326ecf1e06749e6068923d9eff40/ca1dc/image1.png&apos; srcset=&apos;/static/0683326ecf1e06749e6068923d9eff40/e7570/image1.png 170w,
/static/0683326ecf1e06749e6068923d9eff40/f46e7/image1.png 340w,
/static/0683326ecf1e06749e6068923d9eff40/ca1dc/image1.png 680w,
/static/0683326ecf1e06749e6068923d9eff40/02d09/image1.png 1020w,
/static/0683326ecf1e06749e6068923d9eff40/9d567/image1.png 1360w,
/static/0683326ecf1e06749e6068923d9eff40/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;Django에서 사용자 인증 시스템을 커스터마이징해야 하는 경우가 있습니다. 이때 Django는 두 가지 주요 클래스(&lt;code class=&quot;language-text&quot;&gt;AbstractUser&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;AbstractBaseUser&lt;/code&gt;)를 제공하여 커스텀 유저 모델을 쉽게 만들 수 있게 해줍니다.  이 글에서는 이 두 클래스의 차이점과 각각의 사용 예시를 소개하겠습니다.&lt;/p&gt;
&lt;h2&gt;Django 사용자 인증 시스템&lt;/h2&gt;
&lt;h3&gt;기본 모델과 필드&lt;/h3&gt;
&lt;p&gt;Django는 기본적으로 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델을 제공하여 사용자 정보를 저장하고 관리합니다. &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델에는 다음과 같은 필드가 포함되어 있습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt;: 사용자 이름 (필수)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;password&lt;/code&gt;: 암호화된 비밀번호 (필수)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt;: 이메일 주소 (선택)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;first_name&lt;/code&gt;: 이름 (선택)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;last_name&lt;/code&gt;: 성 (선택)&lt;/li&gt;
&lt;li&gt;기타 인증 및 권한 관련 필드 (&lt;code class=&quot;language-text&quot;&gt;is_staff&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;is_superuser&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;is_active&lt;/code&gt; 등)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;인증 뷰와 URL&lt;/h3&gt;
&lt;p&gt;Django는 사용자 인증과 관련된 기본 뷰를 제공합니다. 이 뷰들은 &lt;code class=&quot;language-text&quot;&gt;django.contrib.auth.views&lt;/code&gt; 모듈에 포함되어 있으며, 다음과 같은 뷰들이 있습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;LoginView&lt;/code&gt;: 사용자가 로그인할 수 있는 뷰&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;LogoutView&lt;/code&gt;: 사용자가 로그아웃할 수 있는 뷰&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PasswordChangeView&lt;/code&gt;: 사용자가 비밀번호를 변경할 수 있는 뷰&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PasswordResetView&lt;/code&gt;: 사용자가 비밀번호를 재설정할 수 있는 뷰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 뷰들은 설정된 URL에 매핑하여 사용할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Form Class&lt;/h3&gt;
&lt;p&gt;Django는 사용자 인증과 관련된 여러 폼 클래스를 제공하여 사용자 입력을 처리합니다. 대표적인 폼 클래스로는 다음이 있습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;UserCreationForm&lt;/code&gt;: 새로운 사용자를 생성하는 폼&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;AuthenticationForm&lt;/code&gt;: 사용자가 로그인할 때 사용하는 폼&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PasswordChangeForm&lt;/code&gt;: 사용자가 비밀번호를 변경할 때 사용하는 폼&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PasswordResetForm&lt;/code&gt;: 사용자가 비밀번호를 재설정할 때 사용하는 폼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;AbstractUser&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;AbstractUser&lt;/code&gt;는 Django의 기본 User 모델을 확장하는 가장 간단한 방법입니다. 이 클래스는 기본 User 모델의 모든 필드와 메서드를 상속하므로, 추가적인 필드를 정의하거나 메서드를 추가하는 데 적합합니다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;기본 필드 제공: &lt;code class=&quot;language-text&quot;&gt;AbstractUser&lt;/code&gt;는 Django의 기본 User 모델에서 제공하는 모든 필드를 포함합니다. 이를 통해 사용자 이름, 이메일, 비밀번호, 이름 및 성과 같은 필드를 쉽게 사용할 수 있습니다.&lt;/li&gt;
&lt;li&gt;편리한 확장성: 기존 필드를 유지하면서 필요한 추가 필드만 확장할 수 있어, 대부분의 기본적인 사용자 정보 요구 사항을 충족할 수 있습니다.&lt;/li&gt;
&lt;li&gt;간단한 설정: 커스터마이징이 쉬우며, 기본적인 인증 기능을 사용하기 위한 추가적인 설정이 거의 필요하지 않습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;제한된 유연성: 기본 User 모델의 필드와 구조를 유지해야 하므로, 사용자 모델을 처음부터 완전히 재정의하고자 할 때는 적합하지 않습니다.&lt;/li&gt;
&lt;li&gt;불필요한 필드: 모든 기본 필드가 포함되어 있으므로, 불필요한 필드가 있을 수 있습니다. 예를 들어, 이메일을 기본 로그인 필드로 사용하고 싶을 때 사용자 이름 필드가 불필요하게 포함될 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# models.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AbstractUser
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AbstractUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    date_of_birth &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    profile_picture &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ImageField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;upload_to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;profiles/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; null&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# settings.py&lt;/span&gt;
AUTH_USER_MODEL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;yourapp.CustomUser&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;AbstractBaseUser&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;AbstractBaseUser&lt;/code&gt;는 사용자 모델을 처음부터 완전히 커스터마이징하고자 할 때 사용합니다. 이 클래스는 인증에 필요한 기본 필드와 메서드만 제공하며, 나머지 필드는 직접 정의해야 합니다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;완전한 커스터마이징: &lt;code class=&quot;language-text&quot;&gt;AbstractBaseUser&lt;/code&gt;를 사용하면 사용자 모델의 모든 필드를 처음부터 완전히 정의할 수 있습니다. 이를 통해 로그인 필드, 필수 필드 등을 자유롭게 설정할 수 있습니다.&lt;/li&gt;
&lt;li&gt;유연성: 사용자 모델의 구조와 필드를 자유롭게 설정할 수 있어, 복잡한 요구 사항이나 특정 비즈니스 로직을 구현하는 데 매우 유용합니다.&lt;/li&gt;
&lt;li&gt;효율성: 필요한 필드만 포함시킬 수 있으므로, 모델의 간결성과 효율성을 유지할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;복잡한 설정: 모든 필드와 매니저를 직접 정의해야 하므로, 설정 과정이 복잡하고 시간이 많이 걸릴 수 있습니다. 특히, 커스텀 사용자 매니저를 작성해야 합니다.&lt;/li&gt;
&lt;li&gt;높은 진입 장벽: 초보자에게는 설정과 구현이 어려울 수 있으며, 기본 User 모델을 사용하는 것보다 더 많은 학습이 필요합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# models.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AbstractBaseUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; BaseUserManager
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomUserManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BaseUserManager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;extra_fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;The Email field must be set&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;normalize_email&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;extra_fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_password&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;using&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_db&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; user

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create_superuser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;extra_fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        extra_fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setdefault&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;is_staff&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        extra_fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setdefault&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;is_superuser&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;extra_fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CustomUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AbstractBaseUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    first_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    last_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blank&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_active &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_staff &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_superuser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BooleanField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    objects &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; CustomUserManager&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    USERNAME_FIELD &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;
    REQUIRED_FIELDS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__str__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;email

&lt;span class=&quot;token comment&quot;&gt;# settings.py&lt;/span&gt;
AUTH_USER_MODEL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;yourapp.CustomUser&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Go 입문]]></title><description><![CDATA[Install 맥에서는 다음의 명령어로 간단하게 Go를 설치할 수 있습니다.  설치 확인 다음의 명령어로 설치를 확인합니다.  또는 다음의 명령어로 설치를 확인합니다.  Go의 Workspace Go…]]></description><link>https://sharknia.github.io/Go-입문/</link><guid isPermaLink="false">https://sharknia.github.io/Go-입문/</guid><pubDate>Tue, 28 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/a2a29d840c081afb240755c11bad84b8/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVR42mPYceMTKvq48yaIsfPm5x03P8PZu29/BTK2oypmQNO89dqnjZc/brv+cdul19suvdp8+e2Wax+3Xnmz7vSTHdc/7AKaiFXz9usfD977uvH0462nHuw4//jQ+TsXbjxeuOdq+7pz64/dXr3zxK5rb/fd/QJUhl3zvjtft196ueXE7Z4le1oW7OpavKdu3u7SmbsmrD2xYM+1dace7b2DQzPQh5suvNh9/uGsnVfYNX359PyFjINlLCMF9P249YNnbji++ej1vbexa/644+aXDWefbj95a+Heq6zqnglFrfNXbWvonx+Z08BvGDhly7kVB6/vu/NlG1abgQG788an5s23Fhy6xybnIGsWaB6YZeCdKmXox63ivvDAraLJG7vXnt537zvccga4h3ff/tK/41bi1ANVS06U9Cwq71uU1jA9tX5aZf+S0r4lxYtPpbQvr196dN+9H9g1J/Rv619xIL9zcXzH6sJJ61ftPrt67/ncCWtyJ28Mb1szaeWexmVHt9/4DPIjeoBd/zhn7635+29P33m1f9OFiZsvTt9+afqOy30bz0/cfGnO7muTt12at/82jtC+8WnPna9A+/fe+bb37rc9d6BoLxjtgQiC0xlcMwDUIOiPrcAkMAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/a2a29d840c081afb240755c11bad84b8/ca1dc/image1.png&apos; srcset=&apos;/static/a2a29d840c081afb240755c11bad84b8/e7570/image1.png 170w,
/static/a2a29d840c081afb240755c11bad84b8/f46e7/image1.png 340w,
/static/a2a29d840c081afb240755c11bad84b8/ca1dc/image1.png 680w,
/static/a2a29d840c081afb240755c11bad84b8/02d09/image1.png 1020w,
/static/a2a29d840c081afb240755c11bad84b8/9d567/image1.png 1360w,
/static/a2a29d840c081afb240755c11bad84b8/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Install&lt;/h2&gt;
&lt;p&gt;맥에서는 다음의 명령어로 간단하게 Go를 설치할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; go&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;설치 확인&lt;/h3&gt;
&lt;p&gt;다음의 명령어로 설치를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ go version
go version go1.22.3 darwin/arm64&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또는 다음의 명령어로 설치를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ go &lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GO111MODULE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOARCH&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;arm64&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOBIN&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOCACHE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/Users/furychick/Library/Caches/go-build&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOENV&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/Users/furychick/Library/Application Support/go/env&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOEXE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOEXPERIMENT&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOHOSTARCH&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;arm64&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOHOSTOS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;darwin&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOINSECURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOMODCACHE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/Users/furychick/go/pkg/mod&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GONOPROXY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GONOSUMDB&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOOS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;darwin&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOPATH&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/Users/furychick/go&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOPRIVATE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOPROXY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://proxy.golang.org,direct&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOROOT&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/opt/homebrew/Cellar/go/1.22.3/libexec&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOSUMDB&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sum.golang.org&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOTMPDIR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOTOOLCHAIN&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;auto&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOTOOLDIR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/opt/homebrew/Cellar/go/1.22.3/libexec/pkg/tool/darwin_arm64&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOVCS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOVERSION&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;go1.22.3&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GCCGO&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;gccgo&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;AR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ar&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cc&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;c++&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_ENABLED&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;1&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOMOD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/dev/null&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOWORK&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_CFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-O2 -g&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_CPPFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_CXXFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-O2 -g&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_FFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-O2 -g&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CGO_LDFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-O2 -g&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;PKG_CONFIG&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pkg-config&apos;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;GOGCCFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-fPIC -arch arm64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -ffile-prefix-map=/var/folders/55/rk2pgkpj32d494v1hkj7j5zc0000gn/T/go-build2326145907=/tmp/go-build -gno-record-gcc-switches -fno-common&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Go의 Workspace&lt;/h2&gt;
&lt;p&gt;Go의 워크스페이스와 프로젝트 관리는 다른 언어와 비교했을 때 독특한 면이 있습니다. Go의 워크스페이스는 Go 언어에서 소스 코드와 컴파일된 바이너리, 패키지를 관리하는 디렉터리 구조를 의미합니다. &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;기본 워크스페이스 구조&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Go의 워크스페이스는 보통 세 가지 주요 디렉터리로 구성됩니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;src: 소스 코드 파일이 위치하는 디렉터리입니다. 각 프로젝트는 src 디렉터리 하위에 폴더로 존재하며, 폴더 구조는 패키지 경로를 반영합니다.&lt;/li&gt;
&lt;li&gt;pkg: 패키지가 컴파일된 결과물이 저장되는 디렉터리입니다. 이는 src 디렉터리의 코드가 컴파일될 때 생성되는 파일들이 위치하는 곳입니다.&lt;/li&gt;
&lt;li&gt;bin: 실행 파일이 저장되는 디렉터리입니다. src 디렉터리의 코드가 컴파일되어 생성된 실행 파일이 여기 저장됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;strong&gt;Go Modules&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Go 1.11 이후로는 Go Modules가 도입되어, GOPATH의 중요성이 줄어들었습니다. Go Modules는 프로젝트별로 의존성을 관리할 수 있도록 하며, 프로젝트 디렉터리 내에서 독립적으로 동작합니다. Go Modules를 사용하면 go.mod 파일을 통해 의존성을 명시하고 관리할 수 있습니다. &lt;/p&gt;
&lt;p&gt;고로, 예전처럼 반드시 워크스페이스 안에 프로젝트가 위치할 필요가 없으며 여타 언어처럼 아무 곳에나 프로젝트를 생성할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;예제 프로젝트 생성&lt;/h3&gt;
&lt;h4&gt;프로젝트 디렉토리 생성&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; myproject
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; myproject&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;모듈 초기화&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;go mod init myproject&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;의존성 관리&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;go mod tidy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;go mod tidy&lt;/code&gt; 명령어는 Go Modules와 관련된 명령어로, &lt;code class=&quot;language-text&quot;&gt;go.mod&lt;/code&gt; 파일과 &lt;code class=&quot;language-text&quot;&gt;go.sum&lt;/code&gt; 파일을 정리하고 최신 상태로 유지하는 데 사용됩니다. 이 명령어는 다음과 같은 작업을 수행합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;사용되지 않는 의존성 제거: 프로젝트 코드에서 더 이상 사용되지 않는 패키지를 &lt;code class=&quot;language-text&quot;&gt;go.mod&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;go.sum&lt;/code&gt; 파일에서 제거합니다.&lt;/li&gt;
&lt;li&gt;필요한 의존성 추가: 코드에서 사용하고 있지만 &lt;code class=&quot;language-text&quot;&gt;go.mod&lt;/code&gt;에 명시되지 않은 패키지를 찾아서 추가합니다.&lt;/li&gt;
&lt;li&gt;정확한 버전 관리: 모든 의존성이 올바른 버전으로 명시되어 있는지 확인하고, 이를 &lt;code class=&quot;language-text&quot;&gt;go.sum&lt;/code&gt; 파일에 기록합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;실행&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;go run main.go&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;go run&lt;/code&gt; 명령어는 지정된 Go 소스 파일을 컴파일하고 즉시 실행합니다. &lt;/p&gt;
&lt;p&gt;컴파일된 실행 파일을 디스크에 저장하지 않고, 메모리에서 직접 실행합니다. 따라서 빠르게 코드를 테스트하거나 간단한 스크립트를 실행하는 데 유용합니다.&lt;/p&gt;
&lt;p&gt;배포하거나 다른 시스템에서 실행할 프로그램을 만들 때에는 &lt;code class=&quot;language-text&quot;&gt;go build&lt;/code&gt; 명령어를 사용해야 합니다. &lt;/p&gt;
&lt;h2&gt;Hello World 찍어보기&lt;/h2&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;main.go&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello, World!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;파일 실행&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ go run main.go&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Go의 메서드 선언 기본 형식&lt;/h2&gt;
&lt;p&gt;Go 언어에서 메서드는 다음과 같은 형식을 가집니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;receiver ReceiverType&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MethodName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parameters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;returnTypes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 메서드 본문&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;receiver: 메서드가 호출될 때, 해당 타입의 인스턴스를 참조할 수 있는 변수입니다.&lt;/p&gt;
&lt;p&gt;ReceiverType: 메서드가 속하는 타입입니다. 구조체 타입일 때가 많지만, 기본 타입일 수도 있습니다.&lt;/p&gt;
&lt;p&gt;MethodName: 메서드의 이름입니다.&lt;/p&gt;
&lt;p&gt;parameters: 메서드에 전달되는 인수입니다.&lt;/p&gt;
&lt;p&gt;returnTypes: 메서드가 반환하는 값의 타입입니다.&lt;/p&gt;
&lt;h3&gt;receiver(수신자)&lt;/h3&gt;
&lt;p&gt;수신자는 메서드가 어떤 타입에 속하는지 지정합니다. 수신자는 값 수신자와 포인터 수신자로 나눌 수 있습니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;값 수신자(Value Receiver)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;값 수신자는 메서드가 호출될 때, 수신자의 복사본을 사용합니다. 수신자의 필드를 변경하더라도 원본에는 영향을 미치지 않습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 값 수신자 메서드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;포인터 수신자(Pointer Receiver)&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;포인터 수신자는 메서드가 호출될 때, 수신자의 포인터를 사용합니다. 수신자의 필드를 변경하면 원본에도 영향을 미칩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 포인터 수신자 메서드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SetName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;예시&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt; 구조체를 사용하여 값 수신자와 포인터 수신자의 예시입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Person 구조체 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
    Age  &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 값 수신자 메서드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 포인터 수신자 메서드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SetAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; age
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Person 인스턴스 생성&lt;/span&gt;
    person &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Person&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Age&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 값 수신자 메서드 호출&lt;/span&gt;
    greeting &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;greeting&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &quot;Hello, Alice&quot;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 포인터 수신자 메서드 호출&lt;/span&gt;
    person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 35&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 예시에서 &lt;code class=&quot;language-text&quot;&gt;Greet&lt;/code&gt; 메서드는 값 수신자를 사용하여 &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt;의 이름을 반환합니다. 반면, &lt;code class=&quot;language-text&quot;&gt;SetAge&lt;/code&gt; 메서드는 포인터 수신자를 사용하여 &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt;의 나이를 변경합니다.]&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;메서드와 함수의 차이점&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Go에서 메서드와 일반 함수의 주요 차이점은 메서드는 특정 타입에 속한다는 점입니다. 일반 함수는 특정 타입에 속하지 않으며, 메서드는 특정 타입의 인스턴스에서 호출됩니다.&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;일반 함수 예시&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;메서드 예시&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;파이썬과의 비교로 Go 이해하기&lt;/h2&gt;
&lt;p&gt;클래스(구조체)의 메소드가 클래스(구조체) 바깥에서 정의되는 느낌이라고 이해했습니다. 파이썬과 비교하며 코드를 다시 살펴보겠습니다. &lt;/p&gt;
&lt;h3&gt;구조체(클래스) 정의&lt;/h3&gt;
&lt;h4&gt;파이썬&lt;/h4&gt;
&lt;p&gt;클래스 내부에 초기화 메서드(&lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt;)를 정의합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Go&lt;/h4&gt;
&lt;p&gt;구조체를 정의하여 데이터를 저장합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;메서드 정의&lt;/h3&gt;
&lt;h4&gt;파이썬&lt;/h4&gt;
&lt;p&gt;파이썬에서는 클래스 내부에서 메서드를 정의합니다. 메서드는 클래스의 인스턴스에서 호출되며, &lt;code class=&quot;language-text&quot;&gt;self&lt;/code&gt; 키워드를 사용하여 인스턴스 변수와 다른 메서드에 접근합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Hello, &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Person&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;greet&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# &quot;Hello, Alice&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Go&lt;/h4&gt;
&lt;p&gt;Go에서는 메서드를 구조체 바깥에서 정의하지만, 해당 구조체와 연관시키기 위해 수신자(Receiver)를 사용합니다. 수신자는 메서드가 호출될 때, 해당 구조체의 인스턴스를 참조할 수 있게 해줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Person 구조체 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Person &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 수신자를 사용하는 메서드 정의&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    person &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Person&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// &quot;Hello, Alice&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;메서드 호출&lt;/h3&gt;
&lt;h4&gt;파이썬&lt;/h4&gt;
&lt;p&gt;인스턴스를 생성하고 메서드를 호출합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Person&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;greet&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# &quot;Hello, Alice&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Go&lt;/h4&gt;
&lt;p&gt;구조체 인스턴스를 생성하고 메서드를 호출합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;person &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Person&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// &quot;Hello, Alice&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Go를 활용한 OAuth 2.0 구현]]></title><description><![CDATA[필요 라이브러리 설치 Go 프로젝트를 생성한 후 OAuth 인증을 위한 라이브러리를 설치해야 합니다.  Server.go 작성 기본 그리고 나서 해당 파일을 run 합니다.  이 이후에 http://localhost:9096/token?grant…]]></description><link>https://sharknia.github.io/Go를-활용한-OAuth-20-구현/</link><guid isPermaLink="false">https://sharknia.github.io/Go를-활용한-OAuth-20-구현/</guid><pubDate>Tue, 28 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/489019627bd2880ae2cc677e702d8984/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACf0lEQVR42hVS3WvTcBTtPzV9mRs4GZPOKVvXzc0iioKITOrEDmRUtGhxK1vBreuydelHmjZNmo9fkrZpk+ajadKmn6vOiSAi+LhH3/0VLhfuw7nnnnOuS5NympTVx5WzNXrolPu20LOFrlVyTN42uE6TH9h8zwLdJtu3eafBwD5oC8O26JKYhMydyQBVS5hSyqeO91oGMBS6SGYAk63LrFol63xSE9MdndKlfJk+G7SEfmuMd1VBqsahMkhaSqHMZsKhYBGPdy1BV1hI/vOb9uNc6Zmco1FaCasBrMKgcDzviGNmWcjUhbRRweslHEscfHq//WXvM8/meCZbJJI5DCHwUxHkORoDBAIJtEpOlUhLB72W6KqBVKOaa8oFXSJsnRfZjMezOu++MzU9611Z928G/P7NmRm3Z2lFYtGmQtUreUOmerYI3XFBqY0aYWvF8UoxjZ/sej3e5cWlG1MzR7HYn1+jbPJwbm5hbXWdQ95y+CFDJi+H6qgrDZ2Sy5QpWy22dAY6Vy0iWWR38d6yd9E7OXkzGHz37+o7IJHr16YfPvARiUgdoJqQ/H1pthvcAJ7dNlhLYyyV0cQUje5GQ4HZW2737YWJiUksk7r6e2HLuae+NUMi2iod3noeDW5oAuoY3AAa1m6Ajgn6tqhJ1EHoNZmM5tNINnEQi4a/diRHJYYmHdneONkPpeP7Lx+tx8KBcuGoa4IR1NyzYGgifI8qFYt/fBUJ+vkCIpCnyP4HMrFzsrMV2X7x5smK//F93935wDMfgYTh8Rd9adQpuyCy3xZbBguVq0KqRJ81lGJTZaCxCp8WyGMGj4H8UY1LiIW4wqOOTsGEzzuVUVf6D7rfr4WPlp/EAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/489019627bd2880ae2cc677e702d8984/ca1dc/image1.png&apos; srcset=&apos;/static/489019627bd2880ae2cc677e702d8984/e7570/image1.png 170w,
/static/489019627bd2880ae2cc677e702d8984/f46e7/image1.png 340w,
/static/489019627bd2880ae2cc677e702d8984/ca1dc/image1.png 680w,
/static/489019627bd2880ae2cc677e702d8984/02d09/image1.png 1020w,
/static/489019627bd2880ae2cc677e702d8984/9d567/image1.png 1360w,
/static/489019627bd2880ae2cc677e702d8984/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;필요 라이브러리 설치&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Go-%EC%9E%85%EB%AC%B8&quot;&gt;Go 프로젝트를 생성&lt;/a&gt;한 후 OAuth 인증을 위한 라이브러리를 설치해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ go get &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-v&lt;/span&gt; github.com/go-oauth2/oauth2/v4/&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Server.go 작성&lt;/h2&gt;
&lt;h3&gt;기본&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;log&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;net/http&quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/errors&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/manage&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/models&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/server&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/store&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	manager &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; manage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// token memory store&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MustTokenStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMemoryTokenStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// client memory store&lt;/span&gt;
	clientStore &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewClientStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	clientStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ID&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;999999&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Domain&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MapClientStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetAllowGetAccessRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetClientInfoHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientFormHandler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserAuthorizationHandler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userID &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetInternalErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Internal Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetResponseErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Response Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/authorize&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleAuthorizeRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusBadRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleTokenRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;:9096&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 나서 해당 파일을 run 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ go run server.go &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 이후에 &lt;a href=&quot;http://localhost:9096/token?grant_type=client_credentials&amp;#x26;client_id=000000&amp;#x26;client_secret=999999&amp;#x26;scope=read&quot;&gt;http://localhost:9096/token?grant_type=client_credentials&amp;#x26;client_id=000000&amp;#x26;client_secret=999999&amp;#x26;scope=read&lt;/a&gt;로 접속하면 token을 발급 받을 수 있습니다. &lt;/p&gt;
&lt;h3&gt;심화 - JWT 토큰 생성 추가&lt;/h3&gt;
&lt;p&gt;Server.go를 다음과 같이 수정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;log&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;net/http&quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/errors&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/generates&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/manage&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/models&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/server&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/store&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/golang-jwt/jwt&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	manager &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; manage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// token memory store&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MustTokenStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMemoryTokenStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// client memory store&lt;/span&gt;
	clientStore &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewClientStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	clientStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ID&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;999999&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Domain&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MapClientStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetAllowGetAccessRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetClientInfoHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientFormHandler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MapAccessGenerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;generates&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewJWTAccessGenerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;your_secret_key&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SigningMethodHS512&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserAuthorizationHandler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userID &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetInternalErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Internal Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetResponseErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Response Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/authorize&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleAuthorizeRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusBadRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleTokenRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;:9096&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;MapAccessGenerate 메소드 부분이 추가되었습니다. &lt;code class=&quot;language-text&quot;&gt;your_secret_key&lt;/code&gt;는 jwt 토큰 발급에 사용되는 시크릿 키입니다. HS512 알고리즘을 사용하였습니다. &lt;/p&gt;
&lt;p&gt;이렇게 하면 access token이 HS512 알고리즘을 사용한 jwt 토큰으로 변경됩니다. &lt;/p&gt;
&lt;h3&gt;심화 2 - JWT 토큰 커스텀&lt;/h3&gt;
&lt;p&gt;Server.go를 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre class=&quot;language-go&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;context&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;log&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;net/http&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;time&quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/errors&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/generates&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/manage&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/models&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/server&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/go-oauth2/oauth2/v4/store&quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;github.com/golang-jwt/jwt&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; CustomJWTAccessGenerate &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    generates&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JWTAccessGenerate
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// NewCustomJWTAccessGenerate creates a new CustomJWTAccessGenerate instance&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NewCustomJWTAccessGenerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;secretKey &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;CustomJWTAccessGenerate &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;CustomJWTAccessGenerate&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        JWTAccessGenerate&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; generates&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JWTAccessGenerate&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			SignedKeyID&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            SignedKey&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            SignedMethod&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SigningMethodHS512&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;CustomJWTAccessGenerate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;oauth2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GenerateBasic&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isGenRefresh &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    now &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; time&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    exp &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; now&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TokenInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetAccessExpiresIn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Create custom claims&lt;/span&gt;
    claims &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MapClaims&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;iss&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token string&quot;&gt;&quot;your_service_name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;aud&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;exp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Unix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;iat&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    now&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Unix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserID&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;custom&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;custom_value&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Add custom field here&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    token &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewWithClaims&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SignedMethod&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; claims&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    access&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SignedString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SignedKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; refresh &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; isGenRefresh &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        refresh &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TokenInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetRefresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; access&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; refresh&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	manager &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; manage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// token memory store&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MustTokenStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMemoryTokenStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// client memory store&lt;/span&gt;
	clientStore &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewClientStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	clientStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ID&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;999999&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		Domain&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MapClientStorage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewDefaultServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetAllowGetAccessRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetClientInfoHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientFormHandler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;MapAccessGenerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewCustomJWTAccessGenerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;your_secret_key&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;UserAuthorizationHandler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userID &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetInternalErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Internal Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SetResponseErrorHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Response Error:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/authorize&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleAuthorizeRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusBadRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ResponseWriter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		srv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleTokenRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ListenAndServe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;:9096&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;NewCustomJWTAccessGenerate&lt;/code&gt; 를 선언하고, 해당 구조체를 사용해서 Token을 생성하는 것으로 코드를 수정해주었습니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Token&lt;/code&gt; 메서드에서 원하는대로 JWT 토큰을 커스텀 할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;주의&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;oauth2&lt;/code&gt; 라이브러리는 &lt;a href=&quot;https://github.com/golang-jwt/jwt&quot;&gt;이 라이브러리&lt;/a&gt;를 사용합니다. 해당 라이브러리는 최신 버전이 5.x로, 깃허브에서 설치법을 확인할 수 있습니다. 다만 oauth2 라이브러리에서는 3.2.2 버전을 사용하고 있어 저 설치법대로 설치를 한다면 충돌이 일어나 코드가 제대로 작동하지 않습니다. &lt;/p&gt;
&lt;p&gt;oauth2 라이브러리를 설치한다면 3.2.2 버전이 제대로 설치되므로, 추가로 해당 라이브러리를 설치할 필요가 없습니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/go-oauth2/oauth2/?tab=readme-ov-file&quot;&gt;https://github.com/go-oauth2/oauth2/?tab=readme-ov-file&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django의 Serializers]]></title><description><![CDATA[Serializers란? serializers는 DRF(Django REST Framwork)의 일부입니다. serializers는 Django 모델 인스턴스나 쿼리셋을 JSON과 같은 네이티브 데이터 타입으로 변환해주고(직렬화), 역으로 JSON…]]></description><link>https://sharknia.github.io/Django의-Serializers/</link><guid isPermaLink="false">https://sharknia.github.io/Django의-Serializers/</guid><pubDate>Thu, 23 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/77394a1e11805538370829dc9a77392a/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVR42n2S2UsCURTG++t66NG3oJcg6MWiHloeEs2iRZRoQSk0TGlzbCqXUUcdLcUldZpyS23yIXLL9lJrHG83Aw1S4XK5nPv9znc453RVa+DvYeHNMKVy5fn1vVYDb+8f1+nbj1K5XPlkQVPD1h9dDYyBAQBuM3kr4T44Mh0em6LxpMVs39NiepvPFwzDLFABZQ2kCX9VYWqAWU9H+Kv7hxaSvJyelQj5C6kEbXGeOU79VCQB2sG/zrlMDtXh8i1ErkZ9Hp/R7HC6zpRq7bZGR1JRKKi2hGEUWt9l8+MTwu6eXg1qlKwohCKpAbMPjgpHxmb8AaqtM4ShdYCKy+S7AoEIQU28OSmnb0ihQrR6m8sTfHh6ZjuXbcZPEomUm3AeY/ZlmWpxaQPV22Wbmg0lErmiOznDP68/hJusOE5sI0aaTt/QaQvhnROvr0mVsVjyF2ZbwHB6ANwXHx0eykvGyPOL4cn5Ae6UjXAfYcQOYkimbmr1hrWB4cAYJhyno7FUIHTRz+Vx+oZDZFgiVYvXtkrl+p60LrtZP8swVSgqFJ+yhUcIvLyVfjbsn/IbR6k/AsPoASgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/77394a1e11805538370829dc9a77392a/ca1dc/image1.png&apos; srcset=&apos;/static/77394a1e11805538370829dc9a77392a/e7570/image1.png 170w,
/static/77394a1e11805538370829dc9a77392a/f46e7/image1.png 340w,
/static/77394a1e11805538370829dc9a77392a/ca1dc/image1.png 680w,
/static/77394a1e11805538370829dc9a77392a/02d09/image1.png 1020w,
/static/77394a1e11805538370829dc9a77392a/9d567/image1.png 1360w,
/static/77394a1e11805538370829dc9a77392a/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Serializers란?&lt;/h2&gt;
&lt;p&gt;serializers는 DRF(Django REST Framwork)의 일부입니다. serializers는 Django 모델 인스턴스나 쿼리셋을 JSON과 같은 네이티브 데이터 타입으로 변환해주고(직렬화), 역으로 JSON 데이터를 Django 모델 인스턴스로 변환(역직렬화)하는 역할을 합니다.&lt;/p&gt;
&lt;h2&gt;왜 사용하나요?&lt;/h2&gt;
&lt;p&gt;serializers는 클라이언트와 서버 간의 데이터 교환을 쉽게 해줍니다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;데이터 직렬화: Django 모델 인스턴스나 쿼리셋을 JSON 등으로 변환하여 클라이언트에게 전송할 수 있습니다.&lt;/li&gt;
&lt;li&gt;데이터 역직렬화: 클라이언트로부터 JSON 데이터를 받아 Django 모델 인스턴스로 변환하여 데이터베이스에 저장할 수 있습니다.&lt;/li&gt;
&lt;li&gt;데이터 검증: 클라이언트로부터 받은 데이터를 저장하기 전에 검증하여 올바른 데이터만 데이터베이스에 저장하도록 합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Serializers의 종류와 사용법&lt;/h2&gt;
&lt;h3&gt;Serializer&lt;/h3&gt;
&lt;p&gt;가장 기본적인 형태로, 필드와 메서드를 통해 직접 정의할 수 있습니다.&lt;/p&gt;
&lt;p&gt;각 필드를 명시적으로 정의하므로 데이터 구조가 매우 유연하지만, 코드의 양이 많아질 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Serializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dob &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    gender &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ChoiceField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;choices&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Male&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Female&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    nickname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ModelSerializer&lt;/h3&gt;
&lt;p&gt;Django 모델과 자동으로 매핑되므로, 필드를 일일이 정의할 필요가 없습니다. 이를 통해 코드의 양을 줄이고, 가독성을 높일 수 있습니다. 모델의 모든 필드를 직렬화하고 싶다면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;__all__&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 모델에 정의된 모든 필드가 직렬화에 포함됩니다. 이 방법은 특히 모델의 필드가 자주 변경되거나 많은 필드를 포함하고 있을 때 유용합니다.&lt;/p&gt;
&lt;p&gt;물론 필드를 직접 지정해서 사용할 수도 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;HyperlinkedModelSerializer&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;HyperlinkedModelSerializer&lt;/code&gt;는 객체에 대한 하이퍼링크를 생성하여 응답에 포함시켜 리스트를 자동으로 생성해주는 역할을 할 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;ViewSet&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;Router&lt;/code&gt;를 함께 사용하면, Django REST Framework는 자동으로 API 엔드포인트를 생성해주며, 이를 통해 각 객체에 대한 하이퍼링크를 포함하는 JSON 응답을 만들 수 있습니다.&lt;/p&gt;
&lt;h4&gt;Models.py&lt;/h4&gt;
&lt;p&gt;먼저 다음과 같은 User Model이 있다고 합시다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dob &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    gender &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;choices&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Male&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Female&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    nickname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;serializers.py&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;HyperlinkedModelSerializer&lt;/code&gt;를 사용하여 Serializer를 정의합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileHyperlinkedSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HyperlinkedModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        extra_kwargs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;url&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;view_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;user-detail&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;lookup_field&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pk&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;url&lt;/code&gt; 필드는 각 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 객체를 참조하는 하이퍼링크를 포함합니다. &lt;code class=&quot;language-text&quot;&gt;extra_kwargs&lt;/code&gt;를 사용하여 &lt;code class=&quot;language-text&quot;&gt;view_name&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;lookup_field&lt;/code&gt;를 지정할 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;view_name&lt;/code&gt;은 이 URL이 참조하는 뷰의 이름을 지정하고, &lt;code class=&quot;language-text&quot;&gt;lookup_field&lt;/code&gt;는 URL을 생성할 때 사용할 필드를 지정합니다. 또한 &lt;code class=&quot;language-text&quot;&gt;lookup_field&lt;/code&gt;는 생략이 가능합니다. &lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;views.py&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델에 대한 뷰셋을 정의합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; viewsets
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserProfileHyperlinkedSerializer

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;viewsets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    queryset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    serializer_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileHyperlinkedSerializer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;urls.py&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;적절한 URL 패턴을 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;routers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DefaultRouter
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserViewSet

router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DefaultRouter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;r&apos;users&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; UserViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;결과&lt;/h4&gt;
&lt;p&gt;이제 API를 시작하고 &lt;code class=&quot;language-text&quot;&gt;http://example.com/users/&lt;/code&gt;로 접속하면 다음과 같은 사용자 목록을 하이퍼링크로 포함한 JSON 응답을 받을 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://example.com/users/1/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example1@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user1&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://example.com/users/2/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example2@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1992-02-02&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user2&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;http://example.com/users/1/&lt;/code&gt;로 GET 요청을 보내면 다음과 같은 JSON 응답을 받습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://example.com/users/1/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example1@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user1&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 HyperlinkedModelSerializer를 활용해서 간단하게 리스트-상세페이지를 구현할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;다양한 관계 다루기&lt;/h2&gt;
&lt;p&gt;먼저 모델을 미리 정의하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; models

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    email &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EmailField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dob &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DateField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    gender &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IntegerField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;choices&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Male&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Female&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    nickname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OneToOneField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CASCADE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; related_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;profile&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    bio &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    website &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;URLField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ForeignKey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; related_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;posts&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; on_delete&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CASCADE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    content &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TextField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CharField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ManyToManyField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; related_name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;groups&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;User와 UserProfile은 1:1관계입니다. &lt;/p&gt;
&lt;p&gt;User와 Post는 1:N 관계입니다. &lt;/p&gt;
&lt;p&gt;User와 Group은 N:N 관계입니다. &lt;/p&gt;
&lt;h3&gt;1:1 관계&lt;/h3&gt;
&lt;p&gt;이는 다음과 같이 직렬화 할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; UserProfile

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfile
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;와 연결된 &lt;code class=&quot;language-text&quot;&gt;UserProfile&lt;/code&gt;이 있는 상황에서 &lt;code class=&quot;language-text&quot;&gt;UserSerializer&lt;/code&gt;를 사용하여 직렬화된 JSON 데이터는 다음과 같습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is an example bio.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://example.com&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1:N 관계&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Post
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PostSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt; 모델과 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델이 1:N 관계를 가지고 있는 경우, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;가 여러 &lt;code class=&quot;language-text&quot;&gt;Post&lt;/code&gt;를 가지고 있을 때 직렬화된 JSON의 예시는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;First Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the first post.&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Second Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the second post.&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;N:N 관계&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PrimaryKeyRelatedField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Group
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GroupSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Group&lt;/code&gt; 모델과 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 모델이 N:N 관계를 가지고 있는 경우, &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt;가 여러 &lt;code class=&quot;language-text&quot;&gt;Group&lt;/code&gt;에 속해 있을 때 직렬화된 JSON의 예시는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group One&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group Two&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;p&gt;이를 한 번에 정의하면 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; UserProfile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Group

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfile
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Post
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PrimaryKeyRelatedField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Group
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PostSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GroupSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;strong&gt;Depth 옵션을 활용한 중첩된 관계 직렬화&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;  &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션을 통해 직렬화할 때 중첩된 관계의 깊이를 설정할 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션은 기본적으로 외래 키(ForeignKey), 일대일 관계(OneToOneField), 다대다 관계(ManyToManyField) 등을 직렬화할 때 사용되며, 이를 통해 직렬화된 데이터에서 중첩된 객체의 필드를 포함할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;사용법&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션은 &lt;code class=&quot;language-text&quot;&gt;ModelSerializer&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;Meta&lt;/code&gt; 클래스 내에 설정할 수 있으며, 설정된 깊이만큼 중첩된 관계를 자동으로 직렬화합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serializers
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; UserProfile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Post&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Group

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfile
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PostSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Post
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    members &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PrimaryKeyRelatedField&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Group
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PostSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GroupSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        depth &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 여기서 depth 옵션을 설정합니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt;를 1로 설정하면 &lt;code class=&quot;language-text&quot;&gt;UserSerializer&lt;/code&gt;는 다음과 같은 JSON 응답을 생성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is an example bio.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://example.com&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;First Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the first post.&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Second Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the second post.&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group One&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group Two&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 JSON 응답에서 볼 수 있듯이, &lt;code class=&quot;language-text&quot;&gt;profile&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;posts&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;groups&lt;/code&gt; 필드에 대한 중첩된 관계가 자동으로 직렬화되었습니다. &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션을 더 큰 값으로 설정하면 더 깊이 중첩된 관계까지 직렬화할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어 다음과 같이 depth를 2로 설정하면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserSerializer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelSerializer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PostSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; GroupSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;many&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; read_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User
        fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        depth &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# depth 옵션을 2로 설정합니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같은 응답을 받을 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;profile&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bio&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is an example bio.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;website&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;First Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the first post.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Second Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the content of the second post.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;groups&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group One&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example2@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1992-02-02&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user2&quot;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Group Two&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1990-01-01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user&quot;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example3@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;dob&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1993-03-03&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token property&quot;&gt;&quot;nickname&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;example_user3&quot;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 예제 응답에서 볼 수 있듯이, &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션이 2로 설정되면 &lt;code class=&quot;language-text&quot;&gt;profile&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;posts&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;groups&lt;/code&gt; 필드에 연결된 객체들 뿐만 아니라, 그 객체들과 연결된 다른 객체들까지도 직렬화됩니다. 이는 중첩된 관계를 더욱 깊이 직렬화하여 더 많은 관련 정보를 포함할 수 있게 합니다.&lt;/p&gt;
&lt;p&gt;이처럼 &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션을 통해 중첩된 관계의 깊이를 조절하여 직렬화된 JSON 응답에 포함되는 데이터를 세밀하게 조정할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;주의&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션을 사용할 때 몇 가지 주의할 점이 있습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;퍼포먼스: 너무 깊은 depth를 설정하면 직렬화 과정에서 성능 저하가 발생할 수 있습니다. 필요 이상의 깊이를 설정하지 않는 것이 좋습니다.&lt;/li&gt;
&lt;li&gt;상호 참조: 깊은 관계에서 상호 참조가 발생할 경우 순환 참조 문제가 생길 수 있습니다. 이를 방지하기 위해서는 depth 값을 신중하게 설정해야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이처럼 &lt;code class=&quot;language-text&quot;&gt;depth&lt;/code&gt; 옵션을 통해 중첩된 관계를 직렬화할 때 깊이를 조절할 수 있으며, 이를 통해 간단하고 직관적으로 중첩된 데이터를 다룰 수 있습니다.&lt;/p&gt;
&lt;h2&gt;Pydantic과의 차이점?&lt;/h2&gt;
&lt;p&gt;FastAPI를 사용하면서 &lt;a href=&quot;https://sharknia.github.io/Pydantic-%EB%AA%A8%EB%8D%B8&quot;&gt;Pydantic Model&lt;/a&gt;을 적극 사용한 적이 있습니다. &lt;/p&gt;
&lt;h3&gt;공통점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;직렬화 및 역직렬화: 둘 다 데이터 직렬화와 역직렬화를 지원합니다.&lt;/li&gt;
&lt;li&gt;데이터 검증: 입력 데이터의 유효성을 검사하는 기능을 제공합니다.&lt;/li&gt;
&lt;li&gt;필드 정의: 각 필드의 타입과 제약 조건을 정의할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;차이점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;프레임워크 의존성:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DRF serializers는 Django와 강하게 결합되어 있으며, Django ORM과의 통합을 염두에 두고 설계되었습니다.&lt;/li&gt;
&lt;li&gt;Pydantic은 특정 프레임워크에 의존하지 않으며, 다양한 환경에서 사용할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;타입 힌팅:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pydantic은 Python의 타입 힌팅을 적극 활용하여 더 직관적이고 명시적인 데이터 검증을 제공합니다.&lt;/li&gt;
&lt;li&gt;DRF serializers는 Django 폼 스타일의 검증을 따릅니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;유연성 및 사용 범위:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DRF serializers는 주로 Django 애플리케이션 내에서 사용됩니다.&lt;/li&gt;
&lt;li&gt;Pydantic은 FastAPI뿐만 아니라, 별도의 데이터 검증 라이브러리로도 사용할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결론적으로, Django REST Framework를 사용하는 경우 DRF serializers를 사용하는 것이 자연스럽고 편리합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django Rest Framework에서 JWT를 이용한 사용자 인증 구현]]></title><description><![CDATA[서론 Django Rest Framework(DRF)는 Django에서 RESTful API를 쉽게 구축할 수 있도록 도와주는 도구입니다. JWT(Json Web Token…]]></description><link>https://sharknia.github.io/Django-Rest-Framework에서-JWT를-이용한-사용자-인증-구현/</link><guid isPermaLink="false">https://sharknia.github.io/Django-Rest-Framework에서-JWT를-이용한-사용자-인증-구현/</guid><pubDate>Wed, 22 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7bf7ae53d773eda617e6f836a0e38e51/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AAoYIwoaJgscKQ4lNS1JXbC7xvDy9DlSSi5GPuvu7v///////r/T4Yqhs26NocjW3tLb4oCYq87X3fr+/gAGGCYHHi4MJjgOLUIgQli4wsz5/P+BortkiKDl6/Dq7vH///+80+SCqMJagZvc4+fT4uuDpr+ZsMLr8vQAMUlaN1FjSGN1T2h6ZXuNz9fe8PX5cZq2YIafg5yta42kmrC+lq/BUn+dRWyIwM3Y1eLsZI2pa46m3ujsAJentZmotbnDz8/X4c/W4tPb4vz//56tuRU3TFJ6kZWruV6FnTJXbhQrPENfdLfJ1uzx+I2pvDRigKG1xQB+lql/lqmbr8GluMqarsDg5erO1NsZN001WW5Lc4s3YXp/mKdOanwWKTcIERdtdn/u9P7M2ONujqOBnK8AuM3atsvZtMrYssnXy9zlqLfADTVUKlNwXnaIa4WWbIeZL1JpQ11xSVtqAAoRMkNP3uj15+/5zdrmtsnWAP7///7///3+/v///6CvuQ8/X1eAmD9dcyVIYHaKmnGCkTdRZVdqeQIRHCg9TaS8zejx/ODs+OPt+uDr9wDx+f7w+P30/P/l8fQcOVYIM1RTcohdeY9lgZYMK0JCWmw9VWgACxYrQU+VrsC+zNiZrLvj7vrf6/fg7PgA8vv/8Pv/8vr/6/f/osLXQGF7ABg0Lk1lUGd6VG2BOlNlBxchLkNSmrPFp7jFcYmZusvZ5vL+4Oz43+35APD7/+/5/+74/+/4/+z4/8jh8nydsx83SQAPICg9TgkVICxDUp22yKK0w36VpsPU4ev4/93t+t7u+9zs+gDu+P/t+P/r9//r9v/r9v/w+P/i8v6vzuJdeIobKjUzTV6rwtTp9P+it8e+0d7p9//b6/jc7frb7PrZ6/ruu5tVLHqUdwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/7bf7ae53d773eda617e6f836a0e38e51/ca1dc/image1.png&apos; srcset=&apos;/static/7bf7ae53d773eda617e6f836a0e38e51/e7570/image1.png 170w,
/static/7bf7ae53d773eda617e6f836a0e38e51/f46e7/image1.png 340w,
/static/7bf7ae53d773eda617e6f836a0e38e51/ca1dc/image1.png 680w,
/static/7bf7ae53d773eda617e6f836a0e38e51/02d09/image1.png 1020w,
/static/7bf7ae53d773eda617e6f836a0e38e51/9d567/image1.png 1360w,
/static/7bf7ae53d773eda617e6f836a0e38e51/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;Django Rest Framework(DRF)는 Django에서 RESTful API를 쉽게 구축할 수 있도록 도와주는 도구입니다. JWT(Json Web Token)는 클라이언트와 서버 간의 인증을 안전하게 수행하기 위한 방법으로 널리 사용됩니다. 이번에는 DRF에서 JWT를 이용한 사용자 인증을 구현하고, 이를 위한 커스텀 퍼미션 클래스를 작성해보겠습니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Django Rest Framework(DRF)란?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Django Rest Framework(DRF)는 Django를 위한 강력하고 유연한 도구로, RESTful API를 쉽게 구축하고 관리할 수 있게 해줍니다. DRF는 직관적인 API 개발을 위해 다양한 기능을 제공하며, 대표적인 기능으로는 다음과 같은 것들이 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Serializer: 복잡한 데이터 쿼리셋과 모델 인스턴스를 JSON 등으로 직렬화/역직렬화하는 도구.&lt;/li&gt;
&lt;li&gt;Viewsets: 기본 CRUD 작업을 간편하게 구현할 수 있는 뷰 로직.&lt;/li&gt;
&lt;li&gt;Authentication &amp;#x26; Permissions: 다양한 인증 및 권한 부여 메커니즘을 제공하여 보안 설정을 강화.&lt;/li&gt;
&lt;li&gt;Browsable API: 개발 중에 API를 쉽게 테스트하고 문서화할 수 있는 웹 브라우저 기반 인터페이스.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 모든 기능을 통해 DRF는 백엔드 개발자가 빠르고 효율적으로 웹 API를 구축할 수 있도록 도와줍니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;JWT란?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;JWT는 JSON 형식의 데이터를 사용하여 정보의 무결성과 진위를 검증하는 토큰입니다. 주로 인증과 정보 교환에 사용되며, 클라이언트와 서버 간의 통신에서 사용자가 인증되었음을 보증하는 데 사용됩니다.&lt;/p&gt;
&lt;h2&gt;구현&lt;/h2&gt;
&lt;h3&gt;JWT&lt;/h3&gt;
&lt;p&gt;JWT는 Supabase를 활용한 인증을 거쳐 로그인을 할 때 발급됩니다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/auth/jwts#jwts-in-supabase&quot;&gt;이 페이지&lt;/a&gt;를 참고하면 Supabase에서 생성되는 JWT의 꼴을 알 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;aud&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;authenticated&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;exp&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1615824388&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0334744a-f2a2-4aba-8c8a-6e748f62a172&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;d.l.solove@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;app_metadata&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;provider&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;user_metadata&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;role&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;authenticated&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 중에서 일단 sub, email을 활용해보려고 합니다. &lt;/p&gt;
&lt;p&gt;또한 HS256 알고리즘을 사용하는 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;테스트 코드 작성&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;잘 될지 모르겠지만, 지금 진행하는 프로젝트는 테스트코드를 먼저 작성하는 방향으로 가려고 합니다. &lt;/p&gt;
&lt;p&gt;토큰 검증을 할 것이므로, 예상 시나리오는 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;올바른 토큰&lt;/li&gt;
&lt;li&gt;토큰이 없는 경우 &lt;/li&gt;
&lt;li&gt;토큰이 잘못된 경우&lt;/li&gt;
&lt;li&gt;토큰이 만료된 경우&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;의 네 가지입니다. 해당 케이스의 테스트 코드를 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; datetime &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; datetime&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timezone

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; jwt
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conf &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; settings
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; RequestFactory&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; TestCase
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exceptions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AuthenticationFailed

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; project&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;permission &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; IsAuthenticatedWithJWT


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TestIsAuthenticatedWithJWT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestCase&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;factory &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RequestFactory&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SUPABASE_JWT_SECRET

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_has_permission_with_valid_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;encode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user123&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secret&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            algorithm&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HS256&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;META&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HTTP_AUTHORIZATION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        permission &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IsAuthenticatedWithJWT&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertTrue&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permission&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has_permission&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user123&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_has_permission_with_invalid_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;META&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HTTP_AUTHORIZATION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Bearer invalidtoken&quot;&lt;/span&gt;
        permission &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IsAuthenticatedWithJWT&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertRaises&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            permission&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has_permission&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_has_permission_without_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        permission &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IsAuthenticatedWithJWT&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertRaises&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            permission&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has_permission&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_has_permission_with_expired_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;factory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;encode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user123&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user@example.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;exp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; datetime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;now&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timezone&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;utc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seconds&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secret&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            algorithm&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HS256&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;META&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HTTP_AUTHORIZATION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        permission &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IsAuthenticatedWithJWT&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;assertRaises&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            permission&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has_permission&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;Custom Permission 클래스 작성&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;DRF에서 JWT를 사용한 인증을 처리하기 위해 커스텀 퍼미션 클래스를 작성합니다. 이 클래스는 요청에 포함된 JWT 토큰을 검증하고, 유효한 경우 사용자 정보를 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# project/permissions.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; jwt
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;conf &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; settings
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; permissions
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exceptions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AuthenticationFailed

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IsAuthenticatedWithJWT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BasePermission&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;has_permission&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; view&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        auth_header &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; auth_header&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Authorization header missing&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; auth_header&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;decode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SUPABASE_JWT_SECRET&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; algorithms&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HS256&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sub&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExpiredSignatureError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Token has expired&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; jwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;InvalidTokenError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; AuthenticationFailed&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Invalid token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;View에 Permission Class 적용&lt;/h3&gt;
&lt;p&gt;작성한 커스텀 퍼미션 클래스를 뷰에 적용하여, 해당 뷰에 접근하는 모든 요청이 JWT를 통해 인증되도록 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# views.py&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; status
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Response
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; APIView
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; drf_yasg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;utils &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; swagger_auto_schema

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserProfile
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serializers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UserProfileSerializer
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; project&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;permissions &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; IsAuthenticatedWithJWT

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserProfileUpdateView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    permission_classes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;IsAuthenticatedWithJWT&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@swagger_auto_schema&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        request_body&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        responses&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Not Found&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Bad Request&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            user_profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfile&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; UserProfile&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DoesNotExist&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;UserProfile not found&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_404_NOT_FOUND
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        serializer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; UserProfileSerializer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            user_profile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; partial&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_valid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_200_OK&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serializer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Django 프로젝트에 Swagger 설정하기]]></title><description><![CDATA[소개 Swagger란? Swagger는 RESTful API를 설계, 빌드, 문서화 및 소비하는 데 사용되는 오픈 소스 도구 모음입니다. Swagger는 API…]]></description><link>https://sharknia.github.io/Django-프로젝트에-Swagger-설정하기/</link><guid isPermaLink="false">https://sharknia.github.io/Django-프로젝트에-Swagger-설정하기/</guid><pubDate>Tue, 21 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소개&lt;/h2&gt;
&lt;h3&gt;Swagger란?&lt;/h3&gt;
&lt;p&gt;Swagger는 RESTful API를 설계, 빌드, 문서화 및 소비하는 데 사용되는 오픈 소스 도구 모음입니다. Swagger는 API를 시각적으로 확인하고 테스트할 수 있는 인터페이스를 제공하여 개발자와 사용자 간의 소통을 용이하게 합니다.&lt;/p&gt;
&lt;p&gt;Swagger의 주요 기능:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;API 문서화: 자동으로 API 문서를 생성하여 API 사용법을 쉽게 이해할 수 있도록 합니다.&lt;/li&gt;
&lt;li&gt;API 테스트: 제공된 인터페이스를 통해 API 요청을 직접 테스트할 수 있습니다.&lt;/li&gt;
&lt;li&gt;호환성: 다양한 언어와 프레임워크에서 사용 가능합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;drf-yasg란?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;drf-yasg&lt;/code&gt;(Django REST framework - Yet Another Swagger Generator)는 Django REST Framework(DRF)를 위한 자동 Swagger/OpenAPI 문서 생성을 제공하는 도구입니다. &lt;code class=&quot;language-text&quot;&gt;drf-yasg&lt;/code&gt;를 사용하면 API 엔드포인트를 자동으로 문서화할 수 있으며, Swagger UI와 ReDoc을 통해 웹에서 쉽게 볼 수 있는 인터페이스를 제공합니다.&lt;/p&gt;
&lt;p&gt;이를 통해 개발자는 API 개발 및 유지 보수를 보다 효율적으로 수행할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;drf-yasg를 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; drf-yasg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;settings.py&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일에 &lt;code class=&quot;language-text&quot;&gt;INSTALLED_APPS&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;drf_yasg&lt;/code&gt;를 추가합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 기존 앱들&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;rest_framework&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;drf_yasg&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;static 파일 관련 내용을 설정해야 합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;STATIC_URL&lt;/code&gt; 및 &lt;code class=&quot;language-text&quot;&gt;STATICFILES_DIRS&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;STATIC_ROOT&lt;/code&gt;를 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;BASE_DIR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__file__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parent

&lt;span class=&quot;token comment&quot;&gt;# Static files (CSS, JavaScript, Images)&lt;/span&gt;
STATIC_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/static/&apos;&lt;/span&gt;
STATICFILES_DIRS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BASE_DIR&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;static&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
STATIC_ROOT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BASE_DIR&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;staticfiles&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;urls.py&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;urls.py&lt;/code&gt; 파일을 수정하여 Swagger UI 및 ReDoc을 위한 URL 패턴을 추가합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; admin
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; re_path
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; permissions
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; drf_yasg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; get_schema_view
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; drf_yasg &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; openapi

schema_view &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; get_schema_view&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
   openapi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Info&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Your API Title&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      default_version&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;v1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      description&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Test description&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      terms_of_service&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://www.google.com/policies/terms/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      contact&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;openapi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Contact&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;contact@yourapi.local&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      license&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;openapi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;License&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;BSD License&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   public&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   permission_classes&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AllowAny&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 추가되는 내용
    re_path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;r&apos;^swagger(?P&amp;lt;format&gt;\.json|\.yaml)$&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; schema_view&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;without_ui&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;schema-json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;swagger/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; schema_view&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;with_ui&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;swagger&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cache_timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;schema-swagger-ui&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redoc/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; schema_view&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;with_ui&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redoc&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cache_timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;schema-redoc&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 추가되는 내용 끝
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DEBUG&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    urlpatterns &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; static&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STATIC_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; document_root&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;STATIC_ROOT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;정적 파일 수집&lt;/h2&gt;
&lt;p&gt;다음 명령어를 실행하여 정적 파일을 모읍니다. 이 명령어는 모든 앱의 정적 파일을 &lt;code class=&quot;language-text&quot;&gt;STATIC_ROOT&lt;/code&gt; 디렉터리에 복사합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;python manage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;py collectstatic &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;noinput&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;확인&lt;/h2&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;/swagger&lt;/code&gt; endpoint로 접속해보면 &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/45863281afb6b2e481eb1d72a8156053/45647/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 65.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxElEQVR42qWS3UrjQBTH8xy+hndeL3qxwq5IBb9as81sdRHbKuIi+ASaG9lncEFt00bi1urDyLKUVbRJWjPpfOV4plEXUbFlB36ZhJz8OOc/MTIZa3Q2W9ifX1jZm57O25+mcnbOLD1hmmU7TzZsUthMIZtP94XlLXt1ddv+UijtLZjf9jOZlVFjbjFH1nfWoFgsq2zWhLz1FY6dKlTrNajUHHDcOpyeNaBx3nyFM2ieX8CPn7b8vluG2Zkly6hUXOv6+gZarb/s8vcfEYShAFBCKSkk0t+leBMhONaJHuMMnPpp3qhWPXIb3EHrylc37Q70GAOsAs41vL/r59fgCMMaiStJAFz3l4XCExJGHLoR0808SAZD6B0b0M0mKnkUeoRGMcQxVVIpUAOC80LEe0A1kkmOLXpuMxVGKIyiSOnCBF8MKuxwCl0eQ1fEEvt8FJ4QxjhQGisax/0M+UM+74HHhWMLwNGeZ0hpD4IgVH4QanGazYCw9BAxreSfUNvxF1Dp6fKheCGs1RoE0qW0eNiVpB9JffE8zPDg4Ih0Onc4cqB8P4Bhabd9HZfUjsNDxzLGxj6MjI9/npyYmPr4P2iHdt0D9NVhd6Iw71UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/45863281afb6b2e481eb1d72a8156053/ca1dc/image1.png&apos; srcset=&apos;/static/45863281afb6b2e481eb1d72a8156053/e7570/image1.png 170w,
/static/45863281afb6b2e481eb1d72a8156053/f46e7/image1.png 340w,
/static/45863281afb6b2e481eb1d72a8156053/ca1dc/image1.png 680w,
/static/45863281afb6b2e481eb1d72a8156053/02d09/image1.png 1020w,
/static/45863281afb6b2e481eb1d72a8156053/9d567/image1.png 1360w,
/static/45863281afb6b2e481eb1d72a8156053/45647/image1.png 3248w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이 화면을 확인할 수 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Next.js + Supabase 회원가입 구현]]></title><description><![CDATA[서론 갈 길이 멀지만 하나씩 해보겠습니다. 만들고자 하는 프로젝트는 있지만 아직 확정은 나지 않았고, 어떤 프로젝트를 하게 되더라도 로그인은 필수이지 않을까 싶습니다.  기술스택? Supabase…]]></description><link>https://sharknia.github.io/Nextjs-Supabase-회원가입-구현/</link><guid isPermaLink="false">https://sharknia.github.io/Nextjs-Supabase-회원가입-구현/</guid><pubDate>Mon, 20 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/43bc8613c4ee7814949f060491787186/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmElEQVR42mNgmNOJhpjmdjGCGN2Mc7uZpjUzzGxnnNPFNKcbUyUDw+wONCHGWe0Ms7tY57ROLow/XZzvtmImw7x2pjmtRGie3SG1ciLLoqmGs2L/H0rbduS/6+zLrDOmis1eB1KJphiZD3LtrDbvo4s0Ni9iazjttLLPf+MipvIrOlMvxq15xzAD6BE0zXNQ+MxzujgXdDLV9nLV/RDv/CzSeout/CtD83ymaZMZ5/agKUZzdgfT3B7eFXNCIooMmp5zNvy3n/ojZMGnmI37nJfNYZjcxDivC7fm2e0MCyYqT58eHl8n1PeIY+KDKcdfX331+////70b9zF0tTDP78Lt7FntrIsn8cXVMygG8ScttTt2t//47QVH7u05e8dvwVrGNbNBEYHkTCTNszsZ5nUyTOpg9WpnsC0zcUiaWNgWXzPZIqaJwbNYp3oq+4R2hrmdaJpRo25WB0NdE0NxHVNeOWtqLmdqLlNWMWNBGXNhKcOEZgagn2ejOBsj6hd0MSzoZAB6b34Pw4JuEFrYzbCoG+Qu1NAGAPnUD97UEi4mAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/43bc8613c4ee7814949f060491787186/ca1dc/image1.png&apos; srcset=&apos;/static/43bc8613c4ee7814949f060491787186/e7570/image1.png 170w,
/static/43bc8613c4ee7814949f060491787186/f46e7/image1.png 340w,
/static/43bc8613c4ee7814949f060491787186/ca1dc/image1.png 680w,
/static/43bc8613c4ee7814949f060491787186/02d09/image1.png 1020w,
/static/43bc8613c4ee7814949f060491787186/9d567/image1.png 1360w,
/static/43bc8613c4ee7814949f060491787186/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    천리길도 한걸음부터. 시작이 반이다. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;갈 길이 멀지만 하나씩 해보겠습니다. 만들고자 하는 프로젝트는 있지만 아직 확정은 나지 않았고, 어떤 프로젝트를 하게 되더라도 로그인은 필수이지 않을까 싶습니다. &lt;/p&gt;
&lt;h3&gt;기술스택?&lt;/h3&gt;
&lt;p&gt;Supabase를 한동안 사용해본 결과 큰 규모의 프로젝트에는 맞지 않는다고 뼈저리게 느꼈습니다. &lt;/p&gt;
&lt;p&gt;그런가하면, 소규모 1인 프로젝트에는 더할나위없이 적합하다고 느꼈습니다. 가격에 비해서 기능이 강력하고 서버를 꾸미는 수고로움을 엄청나게 축소시켜줍니다. &lt;/p&gt;
&lt;p&gt;Next.js도 마찬가지로, 하나의 프로젝트에서 백과 프론트를 모두 구현할 수 있다는게 큰 장점으로 느껴졌고 개인적으로 Typescript가 이유를 모르게 호감이어서 선택했습니다. &lt;/p&gt;
&lt;p&gt;따라서 이번 사이드 프로젝트의 기술 스택은 Next.js + Supabase로 꾸며보려고 합니다. &lt;/p&gt;
&lt;p&gt;Next.js도 그렇지만, 특히 프론트엔드는 완전히 새로운 경험이므로 초짜나 다름없습니다. 천천히 빠르게(? 해보려고 합니다. &lt;/p&gt;
&lt;h2&gt;Google 설정&lt;/h2&gt;
&lt;p&gt;구글 OAuth 2.0을 활용한 구글 로그인을 구현할 예정입니다. 추후 어떤 서비스가 되더라도 구글 로그인을 폐기할 일은 없을 것 같아 이것부터 구현해보려고 합니다. &lt;/p&gt;
&lt;h4&gt;프로젝트 생성&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://console.cloud.google.com/&quot;&gt;구글 클라우드 콘솔&lt;/a&gt;에서 프로젝트를 생성합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/95fc5ec2e2d45a741eeac65b8aa3b49d/bb03a/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABp0lEQVR42p2Ty06DQBSGeSN9EeMr6EaXxr2JUdsuTIyXxI0Y1ro1voCxsWpSFS9pqfGCIiLQIkMLDjPDcWbwVq2JdsKfM5A5H+c/B5RtfWdYvzM2DOdmXTcNre7caiZytUvvXu4N15TxXRcPV9rZw6123bKlDMfUak/X6v59Y3N1d2tIqTT0EuSLUEohxSlAlvHrU70WowwwxiBygDEinu01TueUnfOjAqYZ4JRihCLq+x5N01QKi0gI5dAu8VzKYdSyLKkkTl4EsFKrznDgcZHxG14YieMEHp+agNoxdDodiCIEL/nZnxUyBmEYSvGXywr3a8ezykHjpPhuuR1jsGwHXNfN5T1DsxX1BBJCwLZtQAgJ+znQ+Aa03BicZsy3GTDZP9nOX4HcLnieB0mSvFVY7QaKATCW/Qr5DvR9XwqFYe8Ks7+Q3paYbhAE0nLQCiTw0ND7B4oKRZ+jKAJKaO+h/AeYt4dJidzccneFqZxGf0o/LJfrVfmnUGCE8G+Wxz/p61kCueVy/WhOmZifHiyoy2OFtcWRkro02o9EblFdGZ9cmBp4BQbZtQYc3n6mAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/95fc5ec2e2d45a741eeac65b8aa3b49d/ca1dc/image2.png&apos; srcset=&apos;/static/95fc5ec2e2d45a741eeac65b8aa3b49d/e7570/image2.png 170w,
/static/95fc5ec2e2d45a741eeac65b8aa3b49d/f46e7/image2.png 340w,
/static/95fc5ec2e2d45a741eeac65b8aa3b49d/ca1dc/image2.png 680w,
/static/95fc5ec2e2d45a741eeac65b8aa3b49d/02d09/image2.png 1020w,
/static/95fc5ec2e2d45a741eeac65b8aa3b49d/9d567/image2.png 1360w,
/static/95fc5ec2e2d45a741eeac65b8aa3b49d/bb03a/image2.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
상단에 oauth를 검색하면 OAuth 동의 화면 메뉴가 나옵니다. 외부를 선택하고 만들기를 실행합니다. &lt;/p&gt;
&lt;p&gt;필수 입력값(앱 이름, 사용자 지원 이메일, 개발자 이메일)만 입력한 후 다음을 선택합니다. 이후에도 계속 다음을 선택하고, 대시보드로 돌아가기를 클릭하면 완료됩니다. &lt;/p&gt;
&lt;h4&gt;각종 키 값 획득&lt;/h4&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/06402310386ab0347c07edb0d2501c57/bb03a/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVR42tWTTUvDQBCG84/0j4h/QS96FO+CaNMeBPEDvBjZs17FqwexWi1qGyWSpFjbSmsvsZeSJvuRcWbtimIF25tDnmRnZved95C1TtyzWbcVHgad5wO3WWN+t8FqUZe57Sbz2k/ssdNgHkJ1gmoP7Qarv3U0lHuvdaf8EhztnR/PWKXQLcBHCKUUCCGAS4ABz0Aq+GsIel2G9znrtHpjxygQJzKNBwNJCME1KecySRKJCT5C8mGu19jneh/1eEKCpaCyZl34lbwegfU0TSGKIkBRUAodSqkdS7RK7k1Oa5MP0Q6vgsq6dR1W88Z2HMfQ6/UAXeiN6AhoiBEyGCHqEYKKowSp2e/3v07+dnhUXQ/jvwhmWQaGMUMLlgP3p+CE8U8FOZJNCP8ULPq3+qZIUEJkkr5jgz+Sdlj073LW0sbqtO3sLNj7W3MFZ3t+Euhs3tldXN5cmXoHyZ24+VScDioAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/06402310386ab0347c07edb0d2501c57/ca1dc/image3.png&apos; srcset=&apos;/static/06402310386ab0347c07edb0d2501c57/e7570/image3.png 170w,
/static/06402310386ab0347c07edb0d2501c57/f46e7/image3.png 340w,
/static/06402310386ab0347c07edb0d2501c57/ca1dc/image3.png 680w,
/static/06402310386ab0347c07edb0d2501c57/02d09/image3.png 1020w,
/static/06402310386ab0347c07edb0d2501c57/9d567/image3.png 1360w,
/static/06402310386ab0347c07edb0d2501c57/bb03a/image3.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
바로 좌측의 사용자 인증 정보 메뉴로 이동합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5f0f1e4ffdbe3dc3add727f41b45271f/bb03a/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVR42rWRS0vDQBSF84/0j6gbdeFCGyi6U0Rx5UKtLW5EUNz4yFoXbsSFGxfio1qkSRr6SMRqldYiNK195DWTXGemjYRaEQUvfMmZeycnZxjuRD4fkp+1A7X0uCcX7oVc+Ul4qJQFpfgiSAWVvPNCplxgfUqGkC49CXm9xEgXH4T0a3438aIebl8cD3BxTY5Bu5DruoAxBtN2oWV5RHvgecD4oRB9XGupCHcm3a0aGMCwsG2YJrYsC1f1Cn57K+Nms4nr9TrpmRghhB3HYXOmkcOgGiHHooZxVVzmrnJilP2C9C3bBl3XoVZ7B71ahUajAa2WQWYI/PS+9tcdWMIbVVzhbjUp6sc2DIOY1cA0TbCJOUnDNDUJ4hvRPRREm70M6ZAck23uSsA+DK6DIOcbQ8+jl9Dml8UME6r81fCP9Y+G8YAhu73AsbtxuwgE6JnQIXh/xPk0PLo8jWnFPEhZBYlZBaScAiIlm2prv5ftQHQyI0NCSULlvdo5WvuWL3PJCDc2H+4fmQtPjsxMhIZned5ntIcO9ganx/mF9SV+bX+LX93ZCEV3N6dm1xf7PgDkx6hvqZu6WwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/5f0f1e4ffdbe3dc3add727f41b45271f/ca1dc/image4.png&apos; srcset=&apos;/static/5f0f1e4ffdbe3dc3add727f41b45271f/e7570/image4.png 170w,
/static/5f0f1e4ffdbe3dc3add727f41b45271f/f46e7/image4.png 340w,
/static/5f0f1e4ffdbe3dc3add727f41b45271f/ca1dc/image4.png 680w,
/static/5f0f1e4ffdbe3dc3add727f41b45271f/02d09/image4.png 1020w,
/static/5f0f1e4ffdbe3dc3add727f41b45271f/9d567/image4.png 1360w,
/static/5f0f1e4ffdbe3dc3add727f41b45271f/bb03a/image4.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
상단의 사용자 인증 정보 만들기를 선택하고 OAuth 클라이언트 ID를 선택합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/4a42b753dddef24c084d85bf5bb92ca5/bb03a/image5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABj0lEQVR42qWTWy8DQRSA9x/xR8Rf4IVH8S4RqiVEXBIvyj7zLt48iFs0biWtWtGg6aLsttqd2dmdy3FmqETqYctJvknOZOebc+Zkra38bn/+0dm4dstrV5Vbu/R8b5e9qn33+mAXqrd20S2bvTZFpODiN75rKFTv7MJTOZurOJsre9t91pGTz4AOCVwqBXEUQxRFIKUEhbkmQXC9HDqXKWvn4mSKCoAwkpFfbwjXdUX9PRDNViAIZSIgoUC5QPEPpJJfKDwNTAuPb84nrIPSedpcwSWnlILv1yEMQ4RBiDljDFTCCnM3+Unr2LlItzd1q7VaDd7ePGg0CTTrLQiCIHHLHUJKCVboG4lS0mx284YdQsYiIDQ0EiGkQQ/nz0LOBTCcshACuozfhYQQ8DwPCKGmSinV/1rGAC3VE9ZVaqHmr8K48hIqtxYoyWMVx1ybkhJ/C/dLp5nPH0VyEnNg+I7YKOY4GFyTwEGYCvdLZylrZHa8dzq7NDS1ujAwt744OINkst2hz6azy8Oj82M9HxzIt5T8N+M9AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image5&apos; title=&apos;&apos; src=&apos;/static/4a42b753dddef24c084d85bf5bb92ca5/ca1dc/image5.png&apos; srcset=&apos;/static/4a42b753dddef24c084d85bf5bb92ca5/e7570/image5.png 170w,
/static/4a42b753dddef24c084d85bf5bb92ca5/f46e7/image5.png 340w,
/static/4a42b753dddef24c084d85bf5bb92ca5/ca1dc/image5.png 680w,
/static/4a42b753dddef24c084d85bf5bb92ca5/02d09/image5.png 1020w,
/static/4a42b753dddef24c084d85bf5bb92ca5/9d567/image5.png 1360w,
/static/4a42b753dddef24c084d85bf5bb92ca5/bb03a/image5.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이름을 적당히 입력하고, 승인된 자바스크립트 원본에는 서버의 주소를, 승인된 리디렉션 URI에는 콜백으로 호출될 URI를 입력합니다. &lt;/p&gt;
&lt;p&gt;여기까지 완료하면 클라이언트 ID와 클라이언트 보안 비밀번호를 얻을 수 있습니다. &lt;/p&gt;
&lt;h2&gt;Supabase 설정 및 설치&lt;/h2&gt;
&lt;h3&gt;프로젝트 설정&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/&quot;&gt;Supabase&lt;/a&gt;에 프로젝트를 생성한 후, Authentication 메뉴에서 Provider를 선택해 구글 토글을 켜주고, 위에서 획득한 클라이언트 아이디와 클라이언트 보안 비밀번호를 입력합니다. &lt;/p&gt;
&lt;p&gt;아래쪽에서 &lt;code class=&quot;language-text&quot;&gt;https://[project-id].supabase.co/auth/v1/callback&lt;/code&gt; 꼴의 콜백 URI를 얻을 수 있습니다. 구글 OAuth2.0의 리디렉션 UI에 해당 주소를 넣어줍니다. &lt;/p&gt;
&lt;h3&gt;Install&lt;/h3&gt;
&lt;p&gt;Supabase를 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; @supabase/supabase-js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;코드 작성&lt;/h2&gt;
&lt;h3&gt;supabase.ts&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;common/supabase.ts&lt;/code&gt; 파일을 생성하고 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createClient &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@supabase/supabase-js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; supabaseUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;YOUR_SUPABASE_URL&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; supabaseAnonKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;YOUR_SUPABASE_ANON_KEY&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; supabase &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;supabaseUrl&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; supabaseAnonKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;supabaseUrl&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;supabaseAnonKey&lt;/code&gt;는 Supabase의 Project Setting - API 메뉴에서 획득할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;googleLoginButton&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pages/main/googleLoginButton.tsx&lt;/code&gt;파일을 생성하고 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; supabase &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../../common/supabase&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; GoogleLoginButton&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleGoogleLogin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; error &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; supabase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;signInWithOAuth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            provider&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;google&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Login Failed:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 로그인 실패 시 처리 로직을 여기에 추가하세요.&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Login Success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 로그인 성공 시 처리 로직을 여기에 추가하세요.&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Login&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleGoogleLogin&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                Sign &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Google
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    container&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        display&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;flex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        flexDirection&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;column&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        justifyContent&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        alignItems&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;100vh&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    button&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        padding&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;10px 20px&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        fontSize&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;16px&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        cursor&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pointer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; GoogleLoginButton&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;login.tsx&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pages/main/login.tsx&lt;/code&gt; 파일을 생성하고, 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; GoogleLoginButton &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./GoogleLoginButton&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Login&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;GoogleLoginButton &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Login&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;회원가입 테스트&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:3000/main/login&quot;&gt;http://localhost:3000/main/login&lt;/a&gt; 으로 접속해봅니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/f9371355a584a750dde7c41bd53fe257/747a0/image6.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 69.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVR42tWQz0rDQBDG9xkUPHnzkFPAQxPWEkIJJbH24BsIpm/SPfRh2oM+Q44lIQSV5o+SvEBCchBNsxl30yjxUJBUBD/47QwD38fMIlHE4mAwXmB8Ncd4QjjDFixPiDa6Jpo6JYp8SVS8Y9QyVqZEPteIIKhz4UxZnJ6IIlqt7mdRlMBm80wZvILfIfBfIGQEvO8QMiI2958ieHwIaOjHsFzemch1XRN2emdse8K94HneLVqv17M2kNZ1DX3gXv7Ytm0ix3G+AmGPOsZ9arz82r8N/AwpigLyPP82671hVVWQJAnEcdz0B59MKYWyLBt4/yt/+AP9k0CehSzLuknTFLIse2X1rQ+tF3gWkiTpWNf1oWEYF4eCMT76AKMzvTbLoc5hAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image6&apos; title=&apos;&apos; src=&apos;/static/f9371355a584a750dde7c41bd53fe257/ca1dc/image6.png&apos; srcset=&apos;/static/f9371355a584a750dde7c41bd53fe257/e7570/image6.png 170w,
/static/f9371355a584a750dde7c41bd53fe257/f46e7/image6.png 340w,
/static/f9371355a584a750dde7c41bd53fe257/ca1dc/image6.png 680w,
/static/f9371355a584a750dde7c41bd53fe257/02d09/image6.png 1020w,
/static/f9371355a584a750dde7c41bd53fe257/9d567/image6.png 1360w,
/static/f9371355a584a750dde7c41bd53fe257/747a0/image6.png 2922w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
버튼을 눌러서 구글 로그인을 해본 후에 Supabase의 Authentication - Users 메뉴로 들어가면 정상적으로 회원가입이 된 것을 확인할 수 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django Discord 소셜 회원가입 및 로그인 구현]]></title><description><![CDATA[지난 시간에는 django를 설치하고 DB 세팅까지 완료했습니다. 이번에는 소셜 로그인 기능을 붙여보겠습니다.  django-allauth vs dj-rest-auth 와 는 모두 Django…]]></description><link>https://sharknia.github.io/Django-Discord-소셜-회원가입-및-로그인-구현/</link><guid isPermaLink="false">https://sharknia.github.io/Django-Discord-소셜-회원가입-및-로그인-구현/</guid><pubDate>Fri, 17 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEhklEQVR42iWS21MTVxjA9w/oax+cTh86nU4f+tLOdPrkjNqLM+pYp6MOpWhtHUerjtiWq1gVCwZQgyhpIoragIpJFkyEoKJAQgiQxBJI5BICSTa33U32vns22Q3LdtUzvznzzZnv933nnPmgNENmOQrl6bzIkyJHAIqXBb4kgHWwrsqquq6oJVEROZlnJY4usqTI5ACNCZpCQW9NigBsisiGoqG5SBBjMEktSiUxnk37FpYX43FQYCWlqPmc5hfod/4bOcOSuEDRRS4vEHE8EYrOkwIpyrxl3N9kn293p5uHl0xDUyiJympRkAWhBOgCg3N5ssBBeZElAL2SikaQCFNgeImXN0S7119vnYNDtOM19WSBaRxcMTxxCwUSyCDP5iYCLuf4YDAyByH5rNbQ/tx+p+/ucmIpEluKrIaaLS79syhGsZkcQbPc/WmkyuyemfMhqbUR97A/PJPAEMtgHxTLIAk84Xjp6IF7osnI66XQlM9V0z1sm14jGW4ytJrE8sFY7phxeMQzuhiZ9wWnTPeuGW5dfvTYDNESp31smkglsBgLKFDgOTbd0ms/2g7fMPedbmrXd/dUG+BKAxxe8HEizQikP+gZGHqIYAkoisYozSkJRVkUizzDEYpSCAQnys8btlRe31rZsaWyY3edAXb2vw5P50iUA1QaS7KA1hQoSaRIgcgz2PziLE5kSkoBFLkNRfBOOi52dlbpTQ3XDI8d5iLAwgtzFI0VZWHmP082lxQkFsJoVLtMCo+vxBdwMh0IzYx6RyiG0MZjddHtm7CGXjk5FlVVNRicxvNJisHRHJLGEhkcgXIMrk1SjsjIpQIrELYnD2+a/8niiKqWUtmYx+deXAlxPK3JydRKFo0BQFIMSlLZbD4JLccj9X/VtOobH1rvKIqEEakUurahyiSF/l574syF6hb9xWm/S5MxPMmyaEkmSiWeIDMMyEEev+eDD9/ftOm98ordGxtSscRKsqClUlSqtv74vV7j4SP75oIT2gmOI5qsKIATEIpGGEBAkz7P9p3byip2tl49r2VoJhBJwOOqKsMW4+dffNTYcFRZZ7VX4FiM53IMnzQP7g9H+wsSgLK59He7vt22Y/O+it3PR52CJM56+8N+x9tC4rR3iGO1Qm8WkcdEAKR14U7fsdVkYENVIEakKw7srT/yTWfD3q6mQ47b9dbLB17+WzXr1L8aurLsuhl8eu3VYNus8+rMQLPf0To73O59cM43oFsLj0CBhdmfyvdU/fBp+def/Lj14193fdZnqIa76q3GGqup9lHnn1pgM9XZjHU2Uy18s65Xf0pf/f2tC2X222cgeNhitZk6zpaV/7y3seWc2Xrvhff5mG/UHRh7h0vDPzbuHxvzvRgPuIZeDOh1f/TbjJauGsjQ3dbWUtlw8Mv9e746WLH9zNnDurZTzboTl1pO6lpO6Fq14A261pMarVdONzX/VnV8R9vfv3RdOgh5g1MWuLu98dD5xlMXdVUdxkvwUM+As8fu7LU/va/hePrgHXZtf9YHO+7euHG2t6fNabv+PzkclR6hQGdvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/31ee4579cf5196e450d4bbac3763ed5d/ca1dc/image1.png&apos; srcset=&apos;/static/31ee4579cf5196e450d4bbac3763ed5d/e7570/image1.png 170w,
/static/31ee4579cf5196e450d4bbac3763ed5d/f46e7/image1.png 340w,
/static/31ee4579cf5196e450d4bbac3763ed5d/ca1dc/image1.png 680w,
/static/31ee4579cf5196e450d4bbac3763ed5d/02d09/image1.png 1020w,
/static/31ee4579cf5196e450d4bbac3763ed5d/42a19/image1.png 1024w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
    &lt;/span&gt;
&lt;a href=&quot;https://sharknia.github.io/docker-compose%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-postgresql%EA%B3%BC-django-%EC%BB%A4%EB%84%A5%EC%85%98-%EB%A7%8C%EB%93%A4%EA%B8%B0&quot;&gt;지난 시간&lt;/a&gt;에는 django를 설치하고 DB 세팅까지 완료했습니다. 이번에는 소셜 로그인 기능을 붙여보겠습니다. &lt;/p&gt;
&lt;h2&gt;django-allauth vs dj-rest-auth&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;django-allauth&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;dj-rest-auth&lt;/code&gt;는 모두 Django 애플리케이션에서 인증 및 사용자 관리를 쉽게 할 수 있도록 도와주는 패키지입니다. 하지만 이 두 패키지는 약간 다른 목적과 사용 사례를 가지고 있습니다. 둘을 비교해보면 다음과 같습니다.&lt;/p&gt;
&lt;h2&gt;Discord 세팅&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://discord.com/developers/applications&quot;&gt;Discord Developer Portal&lt;/a&gt;에서 Application을 생성합니다. &lt;/p&gt;
&lt;p&gt;첫 페이지에서 APPLICATION ID, PUBLIC KEY를 기록합니다. &lt;/p&gt;
&lt;p&gt;좌측의 OAuth2 메뉴로 이동합니다. &lt;/p&gt;
&lt;p&gt;CLIENT SECRET을 얻고 기록합니다. &lt;/p&gt;
&lt;p&gt;일단 여기까지만 먼저 해두겠습니다. &lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;h3&gt;패키지 설치&lt;/h3&gt;
&lt;p&gt;먼저 패키지를 설치합니다.  위에서 언급한 두 패키지 이외에도 &lt;code class=&quot;language-text&quot;&gt;allauth&lt;/code&gt;는 jwt 토큰은 생성해주지 않기 때문에 &lt;code class=&quot;language-text&quot;&gt;djangorestframework-simplejwt&lt;/code&gt; 라이브리러도 필요합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; django-allauth djangorestframework-simplejwt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;패키지를 설치한 후엔 반드시 이미지를 다시 빌드해줍니다. &lt;/p&gt;
&lt;h3&gt;settings.py&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일을 열고, 다음의 내용을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
    &lt;span class=&quot;token string&quot;&gt;&quot;allauth&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;allauth.account&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;allauth.socialaccount&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;allauth.socialaccount.providers.discord&quot;&lt;/span&gt;,  &lt;span class=&quot;token comment&quot;&gt;# 디스코드 소셜 로그인 추가&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;rest_framework&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;rest_framework.authtoken&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;dj_rest_auth&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;dj_rest_auth.registration&quot;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&quot;django.contrib.sites&quot;&lt;/span&gt;,
    &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

SITE_ID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;

AUTHENTICATION_BACKENDS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;django.contrib.auth.backends.ModelBackend&apos;&lt;/span&gt;,
    &lt;span class=&quot;token string&quot;&gt;&apos;allauth.account.auth_backends.AuthenticationBackend&apos;&lt;/span&gt;,
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

REST_FRAMEWORK &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;DEFAULT_AUTHENTICATION_CLASSES&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;rest_framework.authentication.TokenAuthentication&apos;&lt;/span&gt;,
        &lt;span class=&quot;token string&quot;&gt;&apos;rest_framework.authentication.SessionAuthentication&apos;&lt;/span&gt;,
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;,
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 이메일 인증 설정&lt;/span&gt;
ACCOUNT_EMAIL_VERIFICATION &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 이메일 확인 비활성화&lt;/span&gt;
ACCOUNT_EMAIL_REQUIRED &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; True  &lt;span class=&quot;token comment&quot;&gt;# 회원가입 시 이메일 주소 필수&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 로그인 후 리디렉션 URL&lt;/span&gt;
LOGIN_REDIRECT_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;

MIDDLEWARE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
    &lt;span class=&quot;token string&quot;&gt;&quot;allauth.account.middleware.AccountMiddleware&quot;&lt;/span&gt;,  &lt;span class=&quot;token comment&quot;&gt;# 이 줄을 추가&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;마이그레이션 적용&lt;/h3&gt;
&lt;p&gt;여기까지 마친 후 마이그레이션을 진행합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; web python manage.py migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;urls.py&lt;/h3&gt;
&lt;p&gt;urls.py를 열어 urlpattern에 다음의 endpoint를 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;accounts/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;allauth.urls&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# allauth URL 패턴 추가&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 로그인을 위한 Callback URL을 Discord에 정의할 수 있습니다. Callback URL은 &lt;code class=&quot;language-text&quot;&gt;/accounts/discord/login/callback/&lt;/code&gt; 입니다. &lt;/p&gt;
&lt;p&gt;Discord의 Redirects에 해당 주소를 추가합니다. &lt;a href=&quot;http://127.0.0.1:8000/accounts/discord/login/callback/&quot;&gt;http://127.0.0.1:8000/accounts/discord/login/callback/&lt;/a&gt;로 적어주어도 좋고, 저는 ngrok을 이용중이므로 해당 주소를 입력해주었습니다. &lt;/p&gt;
&lt;h3&gt;관리자 페이지 접속&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:8000/admin&quot;&gt;관리자 페이지&lt;/a&gt;에 Social Application을 생성해줘야 합니다. 해당 페이지에 접속하여 로그인합니다. 계정이 없다면 다음의 명령어를 사용하여 계정을 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; docker/docker-compose.yml &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; web python manage.py createsuperuser&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Sites 추가&lt;/h4&gt;
&lt;p&gt;먼저 Sites를 추가해야 합니다. Sites-sites에서 추가를 해주면 되는데, &lt;a href=&quot;http://localhost/&quot;&gt;localhost&lt;/a&gt; 또는 ngrok 주소 중 사용하는 것을 입력해줍니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/ba839d1070028404bfa7d5e4c385de0d/bb03a/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABr0lEQVR42q3QWU/iUBTA8T4TCnSztEBbLy24YAsoxJWoM0PcEKLGNYY1muiTH8GlfglNX818w9HbeDzUxGhGE0N8+OW0vcm/914mv9Col3/vPcyvHtxPrxx50yvH3twaWm+hJj43vcV6z1vAWXlnES3j+p9ax6tUj+/s2d2/2amNGuNsHN1WTy7gV/uczhyeQWnnFIpbPZioNcHebIFTb0Oh0YV8vfNBodGB0nYX9WByq0vL++cwVt27ZuSEdmMWZ0DJ2I9xw/StNPG1VNJPJRO+qsT9aIRFkU9FcC3Asv9keQg4jrtk5KThDtslULM5qhALSNqElKaDlcmCPkxAGpJBEMRPiSJOMZhUkaR+8IqJa4Zr2UUgI+NUt7JAcgVI25NgjDlAJnCO5EBV1S8pKKWqtKLrIAnCFSMT01UKZRByRSplRoHnOOB4Hv/GB5P/HioKAnDRKAYN4lqzS5BwylS2XoP890NvQQGD0SAox11z3IGkZtD+9geIfQziRbp8cESODhj7P9h/6X/86eATeh7Q0/vg7Q/u8JoJhUL5cDh8wrJsC7UH1MLGaSwWc14Ayqc8IQW7O/MAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/ba839d1070028404bfa7d5e4c385de0d/ca1dc/image2.png&apos; srcset=&apos;/static/ba839d1070028404bfa7d5e4c385de0d/e7570/image2.png 170w,
/static/ba839d1070028404bfa7d5e4c385de0d/f46e7/image2.png 340w,
/static/ba839d1070028404bfa7d5e4c385de0d/ca1dc/image2.png 680w,
/static/ba839d1070028404bfa7d5e4c385de0d/02d09/image2.png 1020w,
/static/ba839d1070028404bfa7d5e4c385de0d/9d567/image2.png 1360w,
/static/ba839d1070028404bfa7d5e4c385de0d/bb03a/image2.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;Social Application 추가&lt;/h4&gt;
&lt;p&gt;여기까지 완료해야 Social Application을 추가할 수 있습니다. &lt;/p&gt;
&lt;p&gt;Social Accounts 메뉴의 Social Application를 선택하고, &lt;code class=&quot;language-text&quot;&gt;ADD SOCIAL APPLICATION&lt;/code&gt; 버튼을 눌러 추가합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1cb49695e5a4d2454fbe21df696d4f03/bb03a/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDklEQVR42n2Sa0/TYBTH+3pZ7/d269q5MWFj62ROHI4QL4siZIskohDCLoCJvPIjKJYvoelb4zdU2+x4nm7rWhRe/HL6nOc8//zPOaXc7qDffn7448mr9983Xx77m7snfgfZ2j2N2emf+V2M2wl2kKevT/0X+2N/u3fyrd55+7PS2tunGnvH172LT/BseBlsHX2EjYPzCHcwhkZ/DC7SHEyimKSJ9w8PJsgZbLyZBO13l7DWO7yiVNP6WnrwGPSV+m+jWA7tghUahh4qshSyDB2yLHMrDBPzS9NU4Hn+M6XmLM+pt8BYqQV6sQyGYYAgiiDLMkiSFCEI4g2EGVg3JxAxsiz7hdKsoldqtMBZXQ8KlVUwTTMScxwHFEUBUniTWHDJUlDN2V6uUgOtWAl0pxSJSJIMtm2DruuROCleuCX8RzTt8P6jLuRrzUC/VwGFCOAjTdNSAimHdwmKOMNCuwNKdT2QsE1xXoQDjiFnjmWBY2jgWSZCmOf/EWR53hNECThMkrhwZFlW1DJxquIY8ui+UHXBKK/hAqsga0ZSdCmIDjxRnCWTbaiqmmrZzFuQtx0wrQKoRg6EaPvCbYLRTP4g0wWYjyFnHMUU/70ph/A8N03WkrdJweu5YMohcUZczrYuxZsmY7hjy1dUJpNxs9nsBU3TQ2REwIsR/uAxKDxa3OHj+DvBEDU+cBzX+Av5OzxOasvcDgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/1cb49695e5a4d2454fbe21df696d4f03/ca1dc/image3.png&apos; srcset=&apos;/static/1cb49695e5a4d2454fbe21df696d4f03/e7570/image3.png 170w,
/static/1cb49695e5a4d2454fbe21df696d4f03/f46e7/image3.png 340w,
/static/1cb49695e5a4d2454fbe21df696d4f03/ca1dc/image3.png 680w,
/static/1cb49695e5a4d2454fbe21df696d4f03/02d09/image3.png 1020w,
/static/1cb49695e5a4d2454fbe21df696d4f03/9d567/image3.png 1360w,
/static/1cb49695e5a4d2454fbe21df696d4f03/bb03a/image3.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
사이트는 여러개 등록해둘 수 있지만 일단 하나만 추가해줍니다. 아까 기록해두었던 키 들을 적절한 곳에 입력하면 됩니다. &lt;/p&gt;
&lt;h3&gt;로그인 테스트&lt;/h3&gt;
&lt;p&gt;이제 로그인을 테스트 해볼 수 있습니다. Discord의 OAuth2 메뉴에 가서 OAuth2 URL Generator에서&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/720bc13153407ea6c83aaff59e02c900/c3a54/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABjklEQVR42mVTWXaDMBDjNmmahBDAZjFmX0rTvtf7X2Y6GjAPkg9hLMuyZjCesQ0ZW5OtWkZHOjGkU6CgWOcCxZxKlhHz+0NRGKeieUSaPq8BXW4PgdePMzXdRLd7zIhYrDdgc6Qy8gO1cdBN8y/lRXPgAcw9JOzHJ6Wm5lMzPjHdYGxLaV6J2HF4b/svqtvpTR+ECXkQ2Kpn0Uy2Hg4CpKiakZMaETs+VLmsZS8hxBAEkhRlRyq1B0Okw2HY6AwxqqSgXHrfch/tYc1D3djUDd9iujeEkeNdEjFkE+xJOSXWUMFmWNY9DdOPLECkduXBsGwGKU/v0iNhye0B3gzxhefnH1XcZBhG3J99woZ7i9JeS5YW8Yj5oWR8lIwT4DQIMHci18OqHblnrZTtDMtqSQfNISEeSGDWxSQrBZo3RdpIqXrlXB8xggf3ZoiLW5St3HrcfpQMDu9+EAtw4a9+uF7+BVc/WhHK6HgPG/Oi5o/BvQs1hRH6kSzmDPwtAf9qp48rnc63Az52wPx8udM/qxeKRJjqMN4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/720bc13153407ea6c83aaff59e02c900/ca1dc/image4.png&apos; srcset=&apos;/static/720bc13153407ea6c83aaff59e02c900/e7570/image4.png 170w,
/static/720bc13153407ea6c83aaff59e02c900/f46e7/image4.png 340w,
/static/720bc13153407ea6c83aaff59e02c900/ca1dc/image4.png 680w,
/static/720bc13153407ea6c83aaff59e02c900/02d09/image4.png 1020w,
/static/720bc13153407ea6c83aaff59e02c900/9d567/image4.png 1360w,
/static/720bc13153407ea6c83aaff59e02c900/c3a54/image4.png 2226w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
위와 같이 선택을 하고 Redirect URL을 선택하면 GENERATED URL이 생성됩니다. &lt;/p&gt;
&lt;p&gt;해당 URL로 접속 후, Discord로 로그인을 하면 &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/699cee0b9081424e28decd3386f0d687/bb03a/image5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7UlEQVR42mMoL2/xb2qZuKKtfcqc9vYp8zo7p83r6poOxi2tk+YB5fBikJqOrumz29unrqyqavdl2LPnUNvfv/////oNAn/+I4N//4jDQPAbRJw6daGZ4eD+oy2fPnz5//nz55/v37/78/PnT5CppOIfIAPPnj3fyHD48PHWP3/+/H/37u3vN2/egAz+/+vXr/8kArALz5w538Rw+vT5VmRBiFf/UddAMsCogTQyEJRW/pGJf8ENPH78bBuI8/fv399A/J8cDEzHYBeeOHGmmaGkpMqgs3NiWnt7f0JHx4REcjBIb1fXpPTCwhp9AHm/pVCAnV/kAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image5&apos; title=&apos;&apos; src=&apos;/static/699cee0b9081424e28decd3386f0d687/ca1dc/image5.png&apos; srcset=&apos;/static/699cee0b9081424e28decd3386f0d687/e7570/image5.png 170w,
/static/699cee0b9081424e28decd3386f0d687/f46e7/image5.png 340w,
/static/699cee0b9081424e28decd3386f0d687/ca1dc/image5.png 680w,
/static/699cee0b9081424e28decd3386f0d687/02d09/image5.png 1020w,
/static/699cee0b9081424e28decd3386f0d687/9d567/image5.png 1360w,
/static/699cee0b9081424e28decd3386f0d687/bb03a/image5.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이렇게 로그인이 된 화면을 확인할 수 있습니다. Third-Party Login Failure라고 나오지만, 가장 위쪽의 Message에 주목하면 됩니다. 로그인이 잘 된 것이 맞습니다. &lt;del&gt;(여기서 100년 헤맸습니다. 누군가 왜 이런 화면이 나오는지 아시는 분 계신가요)&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;이 화면을 보고 나면 관리자 페이지에서 User 또는 Social Users를 확인하면 제대로 가입이 된 것을 볼 수 있습니다. 성공 여부는 해당 페이지에서 확인하시면 됩니다. &lt;/p&gt;
&lt;h2&gt;Restful한 로그인을 위한 API 구현&lt;/h2&gt;
&lt;p&gt;짠! 완료입니다! 면 좋겠지만 사실은 그렇지 않습니다. 위에서 짧게 언급했듯이 allauth는 JWT TOKEN 발급까지는 해주지 않습니다. 클라이언트와의 협의에 따라 달라지겠지만 REST한 JWT 토큰 생성을 위한 별도의 API가 필요합니다. &lt;/p&gt;
&lt;h3&gt;모듈 생성&lt;/h3&gt;
&lt;p&gt;authentication 이라는 모듈을 만들어서 해당 앱에서 로그인을 관리하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; docker/docker-compose.yml &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; web python manage.py startapp authentication&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Settings.py&lt;/h3&gt;
&lt;p&gt;생성한 앱을 추가해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;INSTALLED_APPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;authentication&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 인증 관련 모듈&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;views.py&lt;/h3&gt;
&lt;p&gt;authetication의 views.py에 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; os

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; requests
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; allauth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;socialaccount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;helpers &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; complete_social_login
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; allauth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;socialaccount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; SocialLogin&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SocialToken
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; allauth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;socialaccount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;providers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;discord&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DiscordOAuth2Adapter
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; status
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Response
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; APIView
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework_simplejwt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tokens &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; RefreshToken


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DiscordRestCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;APIView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GET&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; code&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;No code provided&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_400_BAD_REQUEST
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        access_token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_access_token&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        user_info &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_user_info&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;access_token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        jwt_tokens &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;perform_login&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; access_token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jwt_tokens&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; status&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HTTP_200_OK&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;perform_login&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; access_token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        adapter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DiscordOAuth2Adapter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        provider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; adapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_provider&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; provider&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app
        token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SocialToken&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;access_token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 유저 정보를 사용하여 소셜 로그인 객체를 생성&lt;/span&gt;
        login &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; adapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;complete_login&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; app&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; response&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;user_info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        login&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; token
        login&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SocialLogin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state_from_request&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        complete_social_login&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; login&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; login&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;is_existing&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            login&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; connect&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# JWT 토큰 생성&lt;/span&gt;
        user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; login&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;account&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user
        refresh &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RefreshToken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;for_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;refresh&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;refresh&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;access&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;refresh&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;access_token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_access_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        API_ENDPOINT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://discord.com/api/v10&quot;&lt;/span&gt;
        CLIENT_ID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DISCORD_CLIENT_ID&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        CLIENT_SECRET &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DISCORD_CLIENT_SECRET&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        REDIRECT_URI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getenv&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DISCORD_REDIRECT_URI&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;grant_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;authorization_code&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;redirect_uri&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; REDIRECT_URI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        headers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;application/x-www-form-urlencoded&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; requests&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;API_ENDPOINT&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/oauth2/token&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            headers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            auth&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CLIENT_ID&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; CLIENT_SECRET&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;raise_for_status&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        access_token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;access_token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; access_token

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_user_info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; access_token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        API_ENDPOINT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://discord.com/api/v10&quot;&lt;/span&gt;
        headers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;access_token&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; requests&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;API_ENDPOINT&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/users/@me&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; headers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;raise_for_status&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Discord의 API들을 활용해 access token을 얻고, 해당 access_token을 사용해서 유저 정보를 Discord로부터 받아옵니다. 그리고 해당 정보들을 이용해 로그인(회원가입)을 한 후 jwt token을 만들어 클라이언트에게 응답합니다. &lt;/p&gt;
&lt;h3&gt;urls.py&lt;/h3&gt;
&lt;p&gt;소셜 로그인 관련 URL을 추가해야 합니다. authentication 안에 urls.py를 생성하고 다음의 코드를 입력합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;views &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; DiscordRestCallback

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;discord/login/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        DiscordRestCallback&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;as_view&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;discord_rest_callback&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# JWT 토큰 설정&lt;/span&gt;
SIMPLE_JWT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;ACCESS_TOKEN_LIFETIME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;minutes&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;REFRESH_TOKEN_LIFETIME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;days&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;ROTATE_REFRESH_TOKENS&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;BLACKLIST_AFTER_ROTATION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;UPDATE_LAST_LOGIN&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;ALGORITHM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;HS256&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;SIGNING_KEY&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; SECRET_KEY&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;VERIFYING_KEY&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;AUDIENCE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;ISSUER&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;AUTH_HEADER_TYPES&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Bearer&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;AUTH_HEADER_NAME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;HTTP_AUTHORIZATION&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;USER_ID_FIELD&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;USER_ID_CLAIM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;AUTH_TOKEN_CLASSES&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;rest_framework_simplejwt.tokens.AccessToken&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;TOKEN_TYPE_CLAIM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;token_type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;JTI_CLAIM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jti&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;SLIDING_TOKEN_REFRESH_EXP_CLAIM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;refresh_exp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;SLIDING_TOKEN_LIFETIME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;minutes&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;SLIDING_TOKEN_REFRESH_LIFETIME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; timedelta&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;days&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 프로젝트 메인의 urls.py를 넣어 authentication의 url을 추가해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;authentication/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;authentication.urls&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 Discord OAuth2 페이지로 이동해서 Callback URL을 &lt;code class=&quot;language-text&quot;&gt;/authentication/discord/login/&lt;/code&gt;로 교체합니다. &lt;/p&gt;
&lt;p&gt;그 후 로그인을 시도하면,&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/9a830726925bc0514645543b5bb6a854/bb03a/image6.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWElEQVR42u2SO0/CUBTH+430KwBWG7W0C6OJLjqTMBkXX7wWH6ums34DBjdNIOESHHQgIVJK1YQgfV4K9LbHewExGB0kcfMkv9z/ucn55QyHk1dlKR5duYpHli7lGK8kBJGypsi8oIhR/kcSgqBsiJLCZuIR/kKKLV9LwrrIFQo3acsw4EVv+brWhHqtNqVRr0NLVUFTGzOojSe4Qw9wix6hqTbhuaX5rm0DdR1yCN0fwbgGFGJYNjEth5i2Q1zcIz4JSEj/4Qtat0/UjkeCcd9ngkqlus+Vy9XjidAnhICuv0K7bYJrYcA2Bsd0aHZHGX+8lCHugd/zIAgChs8ECFUPZoQhWxN7MDAc6L9ZY7r2Z+6YU7wJYRCOZr8Vwvz1L/wj4ZASzslwKiwWK2nWsFua3NSvofc72rBUQodcKrW7mMudbWcyJ5vZ7OnWPLDZfP58J5ncW3gHxIeMZPw3IHYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image6&apos; title=&apos;&apos; src=&apos;/static/9a830726925bc0514645543b5bb6a854/ca1dc/image6.png&apos; srcset=&apos;/static/9a830726925bc0514645543b5bb6a854/e7570/image6.png 170w,
/static/9a830726925bc0514645543b5bb6a854/f46e7/image6.png 340w,
/static/9a830726925bc0514645543b5bb6a854/ca1dc/image6.png 680w,
/static/9a830726925bc0514645543b5bb6a854/02d09/image6.png 1020w,
/static/9a830726925bc0514645543b5bb6a854/9d567/image6.png 1360w,
/static/9a830726925bc0514645543b5bb6a854/bb03a/image6.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
아까처럼 로그인 성공 화면이 아니라 JWT 토큰을 발급 받을 수 있습니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://discord.com/developers/docs/topics/oauth2&quot;&gt;https://discord.com/developers/docs/topics/oauth2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.allauth.org/en/latest/introduction/index.html&quot;&gt;https://docs.allauth.org/en/latest/introduction/index.html&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ngrok: 로컬 서버를 쉽게 공개하는 도구]]></title><description><![CDATA[서론 로컬에서 개발할 때, 종종 외부에서 로컬 서버에 접근해야 하는 상황이 발생합니다. 예를 들어, 웹훅(Webhook…]]></description><link>https://sharknia.github.io/ngrok-로컬-서버를-쉽게-공개하는-도구/</link><guid isPermaLink="false">https://sharknia.github.io/ngrok-로컬-서버를-쉽게-공개하는-도구/</guid><pubDate>Tue, 14 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;로컬에서 개발할 때, 종종 외부에서 로컬 서버에 접근해야 하는 상황이 발생합니다. 예를 들어, 웹훅(Webhook)을 테스트하거나, 클라이언트에게 데모를 보여주기 위해 로컬 서버를 공개해야 할 때가 있습니다. 이러한 상황에서 매우 유용한 도구가 바로 ngrok입니다.&lt;/p&gt;
&lt;h2&gt;ngrok 소개&lt;/h2&gt;
&lt;p&gt;ngrok은 로컬에서 실행 중인 서버를 공용 인터넷에 노출시켜주는 역방향 프록시 도구입니다. 이를 통해 로컬에서 개발 중인 애플리케이션을 외부에서도 접근할 수 있게 됩니다. ngrok은 다음과 같은 주요 기능을 제공합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTPS 터널링: 로컬 서버를 HTTPS를 통해 안전하게 노출합니다.&lt;/li&gt;
&lt;li&gt;인스펙션 인터페이스: 요청과 응답을 실시간으로 확인할 수 있는 웹 인터페이스를 제공합니다.&lt;/li&gt;
&lt;li&gt;포트 포워딩: 특정 포트를 지정하여 외부에서 접근할 수 있게 합니다.&lt;/li&gt;
&lt;li&gt;자동 재연결: 연결이 끊어질 경우 자동으로 다시 연결합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ngrok 설치 및 기본 사용법&lt;/h2&gt;
&lt;p&gt;ngrok을 사용하기 위해서는 먼저 설치가 필요합니다. 다음은 ngrok 설치 및 기본 사용법에 대한 단계별 설명입니다.&lt;/p&gt;
&lt;h4&gt;1. ngrok 다운로드 및 설치&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://ngrok.com/&quot;&gt;ngrok 공식 웹사이트&lt;/a&gt;에서 운영체제에 맞는 ngrok을 설치합니다. &lt;/p&gt;
&lt;p&gt;맥에서는 간단하게 다음의 명령어를 통해 설치할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; ngrok/ngrok/ngrok&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정상적인 실행을 위해서는 토큰을 등록해야 합니다. 사이트에 회원가입을 합니다. &lt;/p&gt;
&lt;p&gt;로그인 까지 마친 후 &lt;a href=&quot;https://dashboard.ngrok.com/get-started/setup/macos&quot;&gt;이 페이지&lt;/a&gt;의 installation 섹션에서 auth-token을 얻을 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;ngrok config add-authtoken &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 명령어를 실행하면 토큰이 저장됩니다. &lt;/p&gt;
&lt;h4&gt;2. ngrok 실행&lt;/h4&gt;
&lt;p&gt;ngrok 설치가 완료되면, 다음 명령어를 사용하여 로컬 서버를 공개할 수 있습니다. 여기서 &lt;code class=&quot;language-text&quot;&gt;8080&lt;/code&gt;은 로컬 서버가 실행 중인 포트 번호입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ngrok http &lt;span class=&quot;token number&quot;&gt;8080&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령어를 실행하면 다음과 같은 출력이 나타납니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ngrok by @inconshreveable                                      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Ctrl+C to quit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Session Status                online
Account                       YourAccount &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Plan: Free&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Version                       &lt;span class=&quot;token number&quot;&gt;2.3&lt;/span&gt;.40
Region                        United States &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;us&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Web Interface                 http://127.0.0.1:4040
Forwarding                    http://abcdefgh.ngrok.io -&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; http://localhost:8080
Forwarding                    https://abcdefgh.ngrok.io -&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; http://localhost:8080

Connections                   ttl     opn     rt1     rt5     p50     p90
                              &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;       &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;       &lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;https://abcdefgh.ngrok.io&lt;/code&gt; URL을 통해 외부에서 로컬 서버에 접근할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이제 ngrok을 사용하여 로컬 서버의 내용을 https로 접근할 수 있습니다. 무료 플랜의 단점(껐다 킬 때마다 주소가 바뀌는 등)도 있지만, 간단한 테스트를 수행하기에는 더 없이 적절합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Next.js 소개와 설치, 간단 예제]]></title><description><![CDATA[Next.js? 개요 Next.js는 React 기반의 프레임워크로, 웹사이트와 애플리케이션을 구축하기 위해 사용됩니다. 서버 사이드 렌더링(SSR), 정적 사이트 생성(SSG…]]></description><link>https://sharknia.github.io/Nextjs-소개와-설치-간단-예제/</link><guid isPermaLink="false">https://sharknia.github.io/Nextjs-소개와-설치-간단-예제/</guid><pubDate>Mon, 13 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/b16c9b216102b4c8eaa6ef08685afaca/42a19/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEv0lEQVR42h1Ua0zadxT9gYLVgrWUIdY5C5Ty0goKylsK8hBR/jwUEQQE1KqAoEXFFrQqKFapm8GqtdJ2dbbdXPdoa7d0Tbd1ydZm3SNpsmxZtqxLarak2Zdt6Zc5aHI+3Nycc+/JuckF4MixDKhSQK1LA0ZTwBlK2EsAuhJGVwKaHFBkGQ65FhCFgCSEpQuSEBAFAEaVp0mAoQLl9bCjGhizCRxtBCwIVELwSh2MBaU78IpGREVTTqU2j61DlqlAKS8z6LAYpKkwpjarpjlP2pEldiAkzkO2U8i6LrSyO0fm3qsNoi0TOYYQe/AN/ujKEddUgaKzsMkLL1dl9IClx2t9OHNIO32J2p/Iaxkp8ZwpsEZwHVG0KVRgPrm/fbygZQhv8GFVzr01OoZnhre9gxRYX25mN1O9idLQxeK+BDeyblu+3ZK8Y1z8UB3f5AVfp3eEiUY/Tu4iQj5Ge5gE+bA8aG97DMExAIoUAK5VEL/a9+nT3vvPoMVt95WHzs3HLcm7yuj1Ms9ZijtK75w8oO6p8CyoEzd5oxfyWSqkxJHNNYF0ooBv063dm/lxN/Ldv9LZ90RT79RNbwlG1hhds6XWSEGDDyVzItgQ1TYmPf0WwTGZx5DChW3ZbH0mVyBy1i3cGvjiufvjHd741bLAEmtoheKOHXbPsH0J8eTlEvMokgMRrWMVzims3FXhionjHxFdcyB9F3Csmx5KydcfVp97ROxZKNGP4PVBlKKX4pyq7JzghtfIvfNZdHmVb/GIcQAvMNTHrjne/40SuACq9ACo+nMsE4WBFeLYJqFzmqgbPKg6nieyk+1j5JbBIk1PMeTNocsxUide7sKLzZUj6/YbP9D7k4BjBEDRX9g1Wz52mTZ5PR86geFZsGIrusZQqPWT3TFCx+T+WgvsEBfF1HDMAxxDzyvqHmZko8g2AXhtGTHWPlXUt4AZSO2HgjihtYDXiq4x5nEM+6qN+Sw1ksTPeq0az24iSdoIQkOpzCYaXsPqhwDfkhb7MNaJg55FdODyHmlPXpURxW9DHtWAYm42rR7Bad4ntmN4Jly1jtTYxzQHG4bPbd77XjUwBzgmAOQ+rPX0we6zB7wrmvH1QHy1I7JgGoxpuk8qukZrHUP89iCnue+wSEcQ6nBMJY6r5wbmCeZhwE/bVvr3GMMoaxRujrnX73zyy7Mvd57/9PeLZ7u7f/y3++s/L578+dfXT3ce/Pz7ncdP7j76piN8BnAduUoPELWn0/bDtaO5pomy0MV853z5aIo2sk4LrjJOJDmnztviqwOJ5NDiang5NXlla+7mfeXIvNgbO2T0g5rWzJ2LXLMY55kS79I+x3yxM55vjGSrgxRXVBZa6ppOmv1DDc7jIoO5RFAPaOqcquaxc6lScSOg1QO0JiCIXbMvfRDZehDa+rzz/G1t/Grv2nZi+6uztx4Mp941nJojNblLFI7CYw6Uoj9XclwfjOKqlOBVLsjmteGUnYLu8Ybh+bbosje5Mbz2dii1FX7zxonlDUMwhpHZrTMblz77lm3x7FF50h5zxRZEuTLzWwATAhUQoDdmwGgC5RBgGeA1rShJe76wFVGpRVa3yPyxMrMXEETwMjWSZ4JRZYAsAWTJ/wtEibkQTAiZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/b16c9b216102b4c8eaa6ef08685afaca/ca1dc/image1.png&apos; srcset=&apos;/static/b16c9b216102b4c8eaa6ef08685afaca/e7570/image1.png 170w,
/static/b16c9b216102b4c8eaa6ef08685afaca/f46e7/image1.png 340w,
/static/b16c9b216102b4c8eaa6ef08685afaca/ca1dc/image1.png 680w,
/static/b16c9b216102b4c8eaa6ef08685afaca/02d09/image1.png 1020w,
/static/b16c9b216102b4c8eaa6ef08685afaca/42a19/image1.png 1024w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Next.js?&lt;/h2&gt;
&lt;h3&gt;개요&lt;/h3&gt;
&lt;p&gt;Next.js는 React 기반의 프레임워크로, 웹사이트와 애플리케이션을 구축하기 위해 사용됩니다. 서버 사이드 렌더링(SSR), 정적 사이트 생성(SSG), 그리고 클라이언트 사이드 렌더링을 지원하며, 개발자가 사용하기 편리한 기능들을 제공합니다.&lt;/p&gt;
&lt;h3&gt;특징 및 장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;파일 기반 라우팅: &lt;code class=&quot;language-text&quot;&gt;pages&lt;/code&gt; 디렉토리 내의 파일 구조를 기반으로 자동 라우팅을 생성합니다.&lt;/li&gt;
&lt;li&gt;자동 코드 분할과 서버 사이드 렌더링을 통해 빠른 페이지 로드를 제공합니다. &lt;/li&gt;
&lt;li&gt;또한 SSR을 통해 SEO에 최적화 되어 있어 검색 엔진 최적화가 용이합니다. &lt;/li&gt;
&lt;li&gt;데이터 가져오기: &lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt; 같은 데이터 페칭 함수를 제공하여 데이터 관리를 간소화합니다.&lt;/li&gt;
&lt;li&gt;API 라우트: 서버사이드 로직을 쉽게 구현할 수 있는 API 경로를 지원합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;h3&gt;Node.js 설치&lt;/h3&gt;
&lt;p&gt;nvm은 설치되어있다고 가정합니다. &lt;/p&gt;
&lt;p&gt;오늘(2024년 5월 13일) 기준 가장 최신의 20.13.1 버전을 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;nvm &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20.13&lt;/span&gt;.1
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;20.13.1&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; .nvmrc
nvm use&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Next.js 설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx create-next-app@latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 설정은 기본값으로 해주었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;user@MacBook-Pro nextjs % npx create-next-app@latest
Need to &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; the following packages:
create-next-app@14.2.3
Ok to proceed? &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; y
✔ What is your project named? … my-app
✔ Would you like to use TypeScript? … No / Yes
✔ Would you like to use ESLint? … No / Yes
✔ Would you like to use Tailwind CSS? … No / Yes
✔ Would you like to use &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;src/&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;/span&gt; directory? … No / Yes
✔ Would you like to use App Router? &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;recommended&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; … No / Yes
✔ Would you like to customize the default &lt;span class=&quot;token function&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;@/*&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;? … No / Yes
Creating a new Next.js app &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; /Users/user/Develop/nextjs/my-app.

Using npm.

Initializing project with template: app-tw 


Installing dependencies:
- react
- react-dom
- next

Installing devDependencies:
- typescript
- @types/node
- @types/react
- @types/react-dom
- postcss
- tailwindcss
- eslint
- eslint-config-next


added &lt;span class=&quot;token number&quot;&gt;358&lt;/span&gt; packages, and audited &lt;span class=&quot;token number&quot;&gt;359&lt;/span&gt; packages &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; 32s

&lt;span class=&quot;token number&quot;&gt;133&lt;/span&gt; packages are looking &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; funding
  run &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; fund&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; details

found &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; vulnerabilities
Initialized a &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; repository.

Success&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; Created my-app at /Users/user/Develop/nextjs/my-app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 my-app 디렉토리로 이동하고, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; my-app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 코드를 실행하면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:3000/&quot;&gt;http://localhost:3000&lt;/a&gt;에서 바로 웹페이지를 확인할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;간단 예제&lt;/h2&gt;
&lt;h3&gt;Hello World 출력하기&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/hello&lt;/code&gt; 경로에 접속하면 &lt;code class=&quot;language-text&quot;&gt;Hello World&lt;/code&gt; 가 출력되도록 해보겠습니다. Next.js는 파일 기반 라우팅 시스템을 사용하기 때문에 간단히 &lt;code class=&quot;language-text&quot;&gt;pages&lt;/code&gt; 디렉토리 내에 &lt;code class=&quot;language-text&quot;&gt;hello.js&lt;/code&gt; 파일을 생성하고 그 안에 적절한 코드를 작성하면 됩니다.&lt;/p&gt;
&lt;p&gt;프로젝트의 &lt;code class=&quot;language-text&quot;&gt;pages&lt;/code&gt; 디렉토리 내에 &lt;code class=&quot;language-text&quot;&gt;hello.js&lt;/code&gt; 파일을 생성합니다. 이 파일이 &lt;code class=&quot;language-text&quot;&gt;/hello&lt;/code&gt; 경로에 대응됩니다. &lt;code class=&quot;language-text&quot;&gt;hello.js&lt;/code&gt; 파일을 열고 다음과 같은 코드를 작성합니다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hello World&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:3000/test/hello&quot;&gt;http://localhost:3000/test/hello&lt;/a&gt;로 접속해보면 Hello World 문구를 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0156c9ce7f0c915509b9194f5d98620a/bb03a/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArklEQVR42mMoL2/xb22dvKKza8acltZJ85paJpKEQXo6uqbPbm+furKqqt2X4ejRk23/IeD3v3///5ODQXpBxKlTF5oZzpy50AI18CcQ/yET/wAZcPbs+UaG06fPt8Jc+J98ANZ75sz5plEDR5qBv4D4H5n4F9zA48fPgnPK379/fwPxf3Lwnz9/wC48ceJMM0NJSZVBZ+fEtPb2/oSOjgmJ5GCQ3q6uSemFhTX6ABaQpr61HNY5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/0156c9ce7f0c915509b9194f5d98620a/ca1dc/image2.png&apos; srcset=&apos;/static/0156c9ce7f0c915509b9194f5d98620a/e7570/image2.png 170w,
/static/0156c9ce7f0c915509b9194f5d98620a/f46e7/image2.png 340w,
/static/0156c9ce7f0c915509b9194f5d98620a/ca1dc/image2.png 680w,
/static/0156c9ce7f0c915509b9194f5d98620a/02d09/image2.png 1020w,
/static/0156c9ce7f0c915509b9194f5d98620a/9d567/image2.png 1360w,
/static/0156c9ce7f0c915509b9194f5d98620a/bb03a/image2.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;API Route 방식을 사용해서 Hello World 출력하기&lt;/h3&gt;
&lt;h4&gt;API Route?&lt;/h4&gt;
&lt;p&gt;Next.js의 API 라우트는 &lt;code class=&quot;language-text&quot;&gt;pages/api&lt;/code&gt; 디렉토리 내에 정의된 서버사이드 코드를 통해 구현됩니다. 이 기능을 통해 개발자는 RESTful API를 손쉽게 구현할 수 있으며, 이 API는 데이터 처리, 데이터베이스 쿼리, 외부 API 호출 등 서버사이드 로직을 실행하는 데 사용됩니다.&lt;/p&gt;
&lt;p&gt;API 라우트를 설정할 때 파일 위치는 반드시 &lt;code class=&quot;language-text&quot;&gt;pages/api&lt;/code&gt; 디렉토리 안에 있어야 합니다. 이 구조는 Next.js의 컨벤션을 따르는 것으로, Next.js는 이 디렉토리 내의 파일들을 서버사이드 로직으로 처리하고 자동으로 해당 파일 경로에 매칭되는 API 엔드포인트를 생성합니다.&lt;/p&gt;
&lt;h4&gt;왜 &lt;code class=&quot;language-text&quot;&gt;pages/api&lt;/code&gt; 디렉토리인가?&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;자동화된 API 엔드포인트: &lt;code class=&quot;language-text&quot;&gt;pages/api&lt;/code&gt; 내부에 파일을 배치함으로써, Next.js는 해당 파일의 경로를 기반으로 자동으로 API 엔드포인트를 설정합니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;pages/api/user.js&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;/api/user&lt;/code&gt;로 접근할 수 있습니다.&lt;/li&gt;
&lt;li&gt;서버 사이드 실행: 이 디렉토리 내의 코드는 클라이언트 사이드가 아닌 서버 사이드에서 실행됩니다. 이는 보안 상 중요한 데이터를 클라이언트에 노출하지 않고 처리할 수 있게 합니다.&lt;/li&gt;
&lt;li&gt;분리된 로직: &lt;code class=&quot;language-text&quot;&gt;pages/api&lt;/code&gt;는 UI와 관련 없이 데이터 처리나 서버 로직을 관리하는 데 사용되므로, 프론트엔드와 백엔드 로직을 명확하게 분리할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;경로 및 파일 구조&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;파일 이름과 디렉토리 구조가 URL 경로로 직접 매핑됩니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;pages/api/products/list.js&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;/api/products/list&lt;/code&gt; 경로에 매핑됩니다.&lt;/li&gt;
&lt;li&gt;파일 내에서는 기본으로 내보내는 함수(&lt;code class=&quot;language-text&quot;&gt;export default function&lt;/code&gt;)를 사용하여 API의 로직을 처리합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;API 생성&lt;/h4&gt;
&lt;p&gt;/pages/api 경로에 hello.js 파일을 생성하고 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello World&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;a href=&quot;http://localhost:3000/api/hello&quot;&gt;http://localhost:3000/api/hello&lt;/a&gt;로 접속하면 api가 정상적인 응답값을 내려주는 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;API의 호출&lt;/h4&gt;
&lt;p&gt;API 라우트의 결과를 페이지에 표시하려면 클라이언트 측 JavaScript를 사용하여 API 라우트를 호출하고, 응답을 상태로 관리하여 렌더링해야 합니다. React의 &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; 훅을 활용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/test/hello.js&lt;/code&gt; 를 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useEffect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setMessage&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Loading...&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/api/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Failed to fetch data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;api response &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;useState 사용: &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; 상태를 선언하여 API 호출의 결과를 저장합니다. 초기값은 &apos;Loading...&apos;으로 설정하여 API 응답을 기다리는 동안 사용자에게 보여집니다.&lt;/li&gt;
&lt;li&gt;useEffect 사용: 컴포넌트가 마운트될 때 &lt;code class=&quot;language-text&quot;&gt;/api/hello2&lt;/code&gt; 엔드포인트를 호출합니다. &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt; 함수를 사용하여 API를 호출하고, 응답이 돌아오면 JSON으로 변환 후 &lt;code class=&quot;language-text&quot;&gt;setMessage&lt;/code&gt;를 통해 상태를 업데이트합니다. 에러가 발생하면 메시지를 &apos;Failed to fetch data&apos;로 설정합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이제 &lt;a href=&quot;http://localhost:3000/test/hello&quot;&gt;http://localhost:3000/test/hello&lt;/a&gt;로 접속하면 다음과 같은 화면을 볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d4fbbeca000351b9e3bdb88a1d1f8c71/bb03a/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAs0lEQVR42mMoL2/xr6/vXdHY2DenqWXiPFJxS+ukeR1d02e3t09dWVXV7stw9Pjptv9A8Ovn79///v3/Tw4Ggt8g4tSpC80MZ85caPkPAT+B+A+Z+AfIgLNnzzcynD59vhVq4O//5AOw3jNnzjeNGjjSDPwFxP/IxL/gBh4/fhacU/7+/fsbiP+Tg//8+QN24YkTZ5oZSkqqDDo7J6a1t/cndHRMSCQHg/R2dU1KLyys0QcAJW6mgpvg9L0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/d4fbbeca000351b9e3bdb88a1d1f8c71/ca1dc/image3.png&apos; srcset=&apos;/static/d4fbbeca000351b9e3bdb88a1d1f8c71/e7570/image3.png 170w,
/static/d4fbbeca000351b9e3bdb88a1d1f8c71/f46e7/image3.png 340w,
/static/d4fbbeca000351b9e3bdb88a1d1f8c71/ca1dc/image3.png 680w,
/static/d4fbbeca000351b9e3bdb88a1d1f8c71/02d09/image3.png 1020w,
/static/d4fbbeca000351b9e3bdb88a1d1f8c71/9d567/image3.png 1360w,
/static/d4fbbeca000351b9e3bdb88a1d1f8c71/bb03a/image3.png 3824w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;getStaticProps&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;는 빌드 시에 데이터를 불러와 페이지를 미리 생성하는 데 사용됩니다. 이는 주로 변경되지 않는 데이터가 필요한 페이지에 적합합니다.&lt;/p&gt;
&lt;p&gt;간단한 getStaticProps 예제를 구현해보겠습니다. &lt;/p&gt;
&lt;p&gt;먼저, data로 사용될 json 파일을 작성합니다. 위치는 &lt;code class=&quot;language-text&quot;&gt;data/&lt;/code&gt; 입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;First Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the first post.&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Second Post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This is the second post.&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 &lt;code class=&quot;language-text&quot;&gt;pages/posts.js&lt;/code&gt; &lt;strong&gt;에 다음의 내용을 작성합니다.&lt;/strong&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getStaticProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 가정: 데이터는 로컬 JSON 파일에서 불러옴&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;../data/post.json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Posts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Blog Posts&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ul&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;li key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h2&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;li&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ul&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt; 함수는 Next.js 애플리케이션을 빌드할 때 호출됩니다. 이는 개발 모드에서는 페이지에 처음 접근할 때 한 번, 프로덕션 모드에서는 빌드 과정에서 실행됩니다.&lt;/p&gt;
&lt;p&gt;또한 이 함수는 서버 사이드에서만 실행됩니다. 즉, 클라이언트 사이드 또는 브라우저에서는 실행되지 않습니다. 이는 보안 상 중요한 작업을 수행하거나 외부 API, 데이터베이스 등 서버 측 리소스에 접근할 때 유용합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;에서 반환된 데이터는 React 컴포넌트의 props로 전달됩니다. 이를 통해 사전에 정의된 데이터를 이용하여 페이지를 렌더링할 수 있으며, 이 페이지는 HTML 파일로 생성되어 클라이언트에게 제공됩니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;에서 반환하는 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 객체의 키 이름과, 페이지 컴포넌트의 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 매개변수에서 받는 이름이 일치해야 합니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;getServerSideProps&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;는 각 페이지 요청 시 서버에서 데이터를 불러와 렌더링하는 데 사용됩니다. 동적인 데이터가 필요한 페이지에 적합합니다.&lt;/p&gt;
&lt;p&gt;아까 useEffect를 사용했던 코드를 개선해보겠습니다.  test/hello.js를 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getServerSideProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3000/api/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// API 엔드포인트 호출&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 페이지 컴포넌트로 props 전달&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Failed to fetch data&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; message &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 서버에서 받은 메시지 출력&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;는 페이지가 렌더링될 때마다 서버에서 실행되어, 서버 사이드에서 필요한 데이터를 사전에 불러오고, 이 데이터를 페이지 컴포넌트로 직접 전달할 수 있습니다. 이 방법은 페이지 로드 시 클라이언트 사이드에서 추가적인 API 요청을 방지하므로 초기 렌더링 속도를 개선할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt; 사용 시 고려할 점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;서버 부하: &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;는 페이지 요청이 있을 때마다 서버에서 실행되므로, 트래픽이 많은 사이트에서는 서버에 상당한 부하가 가해질 수 있습니다.&lt;/li&gt;
&lt;li&gt;응답 시간: 클라이언트 사이드에서 데이터를 가져오는 것보다는 빠를 수 있지만, 서버 사이드에서 모든 데이터를 처리하고 완성된 페이지를 전송해야 하므로 응답 시간이 길어질 수 있습니다.&lt;/li&gt;
&lt;li&gt;SEO 최적화: &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;를 사용하면 서버에서 렌더링된 페이지가 클라이언트에게 전송되기 때문에, 검색 엔진 최적화(SEO)에 유리합니다. 모든 콘텐츠가 HTML로 서버에서 미리 생성되어 전달되기 때문입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;사실 &lt;code class=&quot;language-text&quot;&gt;/api/hello&lt;/code&gt; API는 고정된 결과(Hello World)만들 반환하므로, getServerSideProps 메소드로 구현할 필요가 없습니다. &lt;/p&gt;
&lt;p&gt;데이터가 변경되지 않는다면, &lt;code class=&quot;language-text&quot;&gt;getStaticProps&lt;/code&gt;를 사용하여 빌드 시점에 데이터를 미리 불러와서 정적 페이지를 생성하는 것이 매우 효율적입니다. 이 방법은 로딩 시간을 단축시키고 서버 부하를 줄이는 데 도움을 줄 수 있습니다.&lt;/p&gt;
&lt;p&gt;API의 결과가 항상 동일하다면 해당 데이터를 빌드 시 한 번만 불러오고, 생성된 HTML 파일을 사용하여 모든 사용자 요청을 처리할 수 있기 때문에, 웹사이트의 성능을 크게 향상시킬 수 있습니다. 이런 접근 방식은 특히 고정된 콘텐츠를 다루는 블로그, 문서화 사이트, 제품 정보 페이지 등에서 유리합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[docker-compose를 활용한 postgresql과 django 커넥션 만들기]]></title><description><![CDATA[이전 포스팅에서 간단하게 django 프로젝트를 설치하고 구동해봤습니다. 이번 시간에는 postgresql과 django 프로젝트를 연결해보려고 합니다.  .env 파일 작성 DB 설정을 위한 환경변수 파일을 작성합니다.  해당 파일을 docker…]]></description><link>https://sharknia.github.io/docker-compose를-활용한-postgresql과-django-커넥션-만들기/</link><guid isPermaLink="false">https://sharknia.github.io/docker-compose를-활용한-postgresql과-django-커넥션-만들기/</guid><pubDate>Sat, 11 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACoElEQVR42mP4uiH0dKrOVHedDDs9F0sjI3NTDRMTQxdnUx8ffTd3IEPNylrdylrF3FJcW19Sx1BIQ49XRZtHSYdLUYfhRqHBIm+dQifDMCdzFxc7Mxcn86Bgr7QUv8zM4OLimMLckMRoNx/XkIgAJx93OQNDKT1DfjVdXmWw5qVuGhWOepEu5t5eTrY+nu6JCVENjZEtHV3rNkzevS993sq6qZP7azNbciPKc2Ot3ZxkjU1FtAz5VPW4lXQY0sw1Am0NXV1s3YN8PRPj4tvb8/p6e7btnrj/hH5Jn3JM6ezJE3/e3HtyUWNrVlBMlJ+Gnb2Yvgm/OlCzNoOVvqapuYmZi7NzTHRCeUlZe1P+9JkxBYVJOWn67n4Ozm7TfcxvT84/tmVhZXFyaHy4poOzuLGlgJoet6I2g6KOrpqFlaGXj0dyUlJz+5qZ5RNXLVNy8QX6U8vCWkZDz05dNdXbtWv2jMb2yqCsdL2AEAUHNyFdUx5lHQYhdT0pEyt1d2/fzIzY5sZJG1et3rRCxNrNOcBX39peTNOQXVbDwMVzwoy+vknN3hnp6j5B0tZO/FrG3Eq6DHzKOsK6JkDDTMMiA3Iz26b3LV4xR8XZwy440DEkWMfFQ8zIyjUk+PyhtQV1pRbRsUquPiJGVrwqYGfzqeiI6JnI2TobBYf55GZOntq6aMn0jOrynLrytPLcjPKC2Pwsz6T4CbN681sqLaNjlJw9hA0teCGhzauiK6xjJGlqperuYx6XkFuUllqWm9ZUk91cvWD1/ClL56Q21fkVF7tnZVhGRqi5ukuaWgtoG/Go6nEBNXMr6vAo6/Kp6QloGgjpmoiYWsvZuyg6uat7B1hExWn7h8m7+ck5ekhY2AnoGPOpG/Co6nIr63KBUpg2ABNyyr6m/7hQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/578c0d78f9aa0bccfd8dbad58732a8ad/ca1dc/image1.png&apos; srcset=&apos;/static/578c0d78f9aa0bccfd8dbad58732a8ad/e7570/image1.png 170w,
/static/578c0d78f9aa0bccfd8dbad58732a8ad/f46e7/image1.png 340w,
/static/578c0d78f9aa0bccfd8dbad58732a8ad/ca1dc/image1.png 680w,
/static/578c0d78f9aa0bccfd8dbad58732a8ad/02d09/image1.png 1020w,
/static/578c0d78f9aa0bccfd8dbad58732a8ad/9d567/image1.png 1360w,
/static/578c0d78f9aa0bccfd8dbad58732a8ad/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
    &lt;/span&gt;
&lt;a href=&quot;https://sharknia.github.io/Django-%EC%84%A4%EC%B9%98&quot;&gt;이전 포스팅&lt;/a&gt;에서 간단하게 django 프로젝트를 설치하고 구동해봤습니다. 이번 시간에는 postgresql과 django 프로젝트를 연결해보려고 합니다. &lt;/p&gt;
&lt;h2&gt;.env 파일 작성&lt;/h2&gt;
&lt;p&gt;DB 설정을 위한 환경변수 파일을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;POSTGRES_DB&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;POSTGRES_USER&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;POSTGRES_PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;DATABASE_URL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;postgres://&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;db-url&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;/&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;db-name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 파일을 docker-compose.yml 파일과 같은 곳에 위치시킵니다. &lt;/p&gt;
&lt;p&gt;이 파일은 보안에 유의하여, git과 같은 곳에 올라가지 않도록 주의합니다. &lt;/p&gt;
&lt;h2&gt;Makefile 작성&lt;/h2&gt;
&lt;p&gt;원활한 테스트를 위해 Makefile을 미리 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;makefile&quot;&gt;&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;&lt;span class=&quot;token target symbol&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	docker-compose -f docker/docker-compose.yml up -d

&lt;span class=&quot;token target symbol&quot;&gt;down&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	docker-compose -f docker/docker-compose.yml down

&lt;span class=&quot;token target symbol&quot;&gt;ps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	docker-compose -f docker/docker-compose.yml ps

&lt;span class=&quot;token target symbol&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 
	docker-compose -f docker/docker-compose.yml logs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;make up&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;make down&lt;/code&gt; 명령어를 통해 간단하게 컨테이너를 재시작 할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;docker-compose.yml 파일 수정&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;해당 파일을 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;3.8&apos;&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postgres
        &lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; postgres_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/var/lib/postgresql/data
        &lt;span class=&quot;token key atrule&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_DB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_DB&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_USER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_USER&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_PASSWORD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;5432:5432&apos;&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ..
            &lt;span class=&quot;token key atrule&quot;&gt;dockerfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; docker/Dockerfile
        &lt;span class=&quot;token key atrule&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gunicorn project.wsgi&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;application &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;bind 0.0.0.0&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;8000 &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;reload
        &lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; ../&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/app
        &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;8000:8000&apos;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;depends_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; db
        &lt;span class=&quot;token key atrule&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;DATABASE_URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_DB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_DB&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_USER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_USER&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;POSTGRES_PASSWORD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;POSTGRES_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    postgres_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;port는 원하는대로 수정하면 됩니다. &lt;/p&gt;
&lt;h2&gt;dj-database-url 설치&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;dj-database-url&lt;/code&gt;는 Django 프로젝트에서 데이터베이스 설정을 간편하게 관리할 수 있도록 도와주는 파이썬 라이브러리입니다. 이 라이브러리를 사용하면, 표준 데이터베이스 연결 URL을 파싱하여 Django의 데이터베이스 설정 형식으로 변환할 수 있습니다. 즉, &lt;code class=&quot;language-text&quot;&gt;DATABASE_URL&lt;/code&gt; 환경 변수에서 데이터베이스 연결 문자열을 읽어 Django에서 사용할 수 있게 설정하는 역할을 합니다. &lt;/p&gt;
&lt;p&gt;간단한 연결을 위해 해당 라이브러리를 설치하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;poetry shell
poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; dj-database-url&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 설치를 한 후, 이미지를 다시 빌드합니다. &lt;/p&gt;
&lt;h2&gt;Setting.py 수정&lt;/h2&gt;
&lt;p&gt;DATABASE 부분을 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dj_database_url

DATABASES &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; dj_database_url&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;DATABASE_URL&lt;/code&gt; 환경변수를 사용하므로, 반드시 해당 환경변수가 설정되어 있어야 합니다. &lt;/p&gt;
&lt;h2&gt;연결 확인&lt;/h2&gt;
&lt;p&gt;DB 연결이 잘 됐는지 테스트 해볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;다음의 명령어를 사용해 파이썬 Shell을 실행하고, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; docker/docker-compose.yml run web python manage.py shell&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 파이썬 코드를 입력합니다. 오류가 없다면 연결이 잘 된 것입니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; connection
cursor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cursor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;psql을 이용해 DB에 직접 연결해 DB를 테스트 해볼수도 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;psql &lt;span class=&quot;token parameter variable&quot;&gt;-h&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-U&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dbname&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5432&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Django 설치]]></title><description><![CDATA[설치할 버전의 선택 오늘 날짜(2024년 5월 10일) 기준 Django 4.2 버전이 가장 최신의 LTS 버전이며, 해당 Django 버전에서는 4.2.8 버전부터 파이썬 3.12를 지원하며 그 미만 버전은 파이썬 3.1…]]></description><link>https://sharknia.github.io/Django-설치/</link><guid isPermaLink="false">https://sharknia.github.io/Django-설치/</guid><pubDate>Fri, 10 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;설치할 버전의 선택&lt;/h2&gt;
&lt;p&gt;오늘 날짜(2024년 5월 10일) 기준 &lt;a href=&quot;https://docs.djangoproject.com/en/5.0/releases/4.2/&quot;&gt;Django 4.2 버전&lt;/a&gt;이 가장 최신의 LTS 버전이며, 해당 Django 버전에서는 4.2.8 버전부터 파이썬 3.12를 지원하며 그 미만 버전은 파이썬 3.11까지 지원합니다. &lt;/p&gt;
&lt;p&gt;따라서 저는 파이썬 3.11, Django 4.2.13 버전을 설치하겠습니다. &lt;/p&gt;
&lt;h2&gt;파이썬 설치&lt;/h2&gt;
&lt;p&gt;장고를 설치할 디렉토리로 이동한 다음, &lt;a href=&quot;https://sharknia.github.io/Apple-Silicon%EA%B3%BC-pyenv&quot;&gt;Pyenv&lt;/a&gt;를 사용해서 파이썬을 설치하겠습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pyenv &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8
pyenv &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 명령어를 사용해 파이썬 3.11.8 버전을 설치 및 세팅합니다. &lt;/p&gt;
&lt;p&gt;만약 python 버전이 바뀌지 않았다면 &lt;a href=&quot;https://sharknia.github.io/Pyenv-local-%EC%8B%A4%ED%96%89%EC%9D%84-%ED%96%88%EB%8A%94%EB%8D%B0-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EB%B2%84%EC%A0%84%EC%9D%B4-%EB%B0%94%EB%80%8C%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4&quot;&gt;이 링크&lt;/a&gt;를 참고합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;user@MacBook-Pro django % python &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;
Python &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파이썬이 설치되었습니다. &lt;/p&gt;
&lt;h2&gt;Django 설치&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Poetry&quot;&gt;poetry&lt;/a&gt;를 사용해 설치합니다. &lt;/p&gt;
&lt;p&gt;poetry에서 pyenv에서 설치된 파이썬 3.11을 사용한 가상환경을 만들도록 해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; use &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;pyenv &lt;span class=&quot;token function&quot;&gt;which&lt;/span&gt; python3.11&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 명령어를 사용해 poetry init 후 django를 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;poetry init
poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; django^4.2.13&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그 다음 poetry 가상 환경을 시작합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;poetry shell&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;django-example-py3.11&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; user@MacBook-Pro django % python &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt; 
Python &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;django-example-py3.11&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; user@MacBook-Pro django % python &lt;span class=&quot;token parameter variable&quot;&gt;-m&lt;/span&gt; django &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4.2&lt;/span&gt;.13&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정상적으로 원하는 버전이 설치된 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;이제 기본 django 프로젝트를 세팅합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;django-admin startproject project &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;기타 라이브러리 설치&lt;/h2&gt;
&lt;p&gt;Postgresql을 사용할 것이므로, &lt;code class=&quot;language-text&quot;&gt;psycopg2-binary&lt;/code&gt;를 설치합니다. 또한 &lt;code class=&quot;language-text&quot;&gt;gunicorn&lt;/code&gt;도 설치합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; psycopg2-binary gunicorn&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Docker 이미지 및 컨테이너 생성과 실행&lt;/h2&gt;
&lt;p&gt;여기까지만 해도 로컬에서 Django 프로젝트를 구동할 수 있습니다. 하지만 저는 일관된 개발 환경을 위해 Docker를 사용하려고 합니다. &lt;/p&gt;
&lt;p&gt;다음과 같이 Dockerfile을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 베이스 이미지를 Python 3.11로 설정&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; python:3.11-slim&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 시스템 의존성 패키지 설치&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; apt-get update &amp;amp;&amp;amp; apt-get install -y &lt;span class=&quot;token operator&quot;&gt;\&lt;/span&gt;
    build-essential &lt;span class=&quot;token operator&quot;&gt;\&lt;/span&gt;
    libpq-dev &lt;span class=&quot;token operator&quot;&gt;\&lt;/span&gt;
    &amp;amp;&amp;amp; apt-get clean&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 환경 변수 설정&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ENV&lt;/span&gt; PYTHONUNBUFFERED=1&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 작업 디렉토리 설정&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WORKDIR&lt;/span&gt; /app&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Poetry 설치&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; pip install --upgrade pip &amp;amp;&amp;amp; pip install poetry&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Poetry 설정 (가상환경을 컨테이너 외부로 생성하지 않도록)&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; poetry config virtualenvs.create false&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 프로젝트 파일 복사&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; pyproject.toml poetry.lock /app/&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 의존성 설치&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;RUN&lt;/span&gt; poetry install --no-root&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 나머지 프로젝트 파일 복사&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; . /app/&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 장고 애플리케이션 실행&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&quot;python&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;manage.py&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;runserver&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;0.0.0.0:8000&quot;&lt;/span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이미지를 빌드합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;docker build -t my-django-app .&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컨테이너를 실행합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;docker&quot;&gt;&lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;docker run -d -p 8000:8000 my-django-app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;a href=&quot;http://localhost:8000/&quot;&gt;http://localhost:8000&lt;/a&gt; 에서 장고 프로젝트가 실행된 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/072283441d07d602ca7aca559fddb046/c2d10/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 71.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFklEQVR42q2SfVODMAzG+f4fxtNDxcF2vn4N/UcFbUuZepMy2jymMLnhBnPT3P2ubdo8JCTBJL7GbHqHMJriKJzgIrpCFF2Ocn42w3EY4+Q0afZeI0luEcc3CLCyT1thwfzKiFCRZWpYa/lI3VXgnIPHOz3f512A0MWsx3UZEqj3pX5Cm3e04qcF45W1IfcfOR6Ydd+QBWNizv8rs0Q618iYZVVzWTQqOihYliWUUkizDLlUEELgkfdCiuZub0HfPS+YM1JKvCiJJ/WKXGvY2u4veKjtbMo2Dhb89wz/JOhLseSaUfFrW1o7Ops+1/kHBX1XxTxHVig8a4GFKUE8c+q9QKolUvbXzjYdFm8Fv5OQvBpjeoJfPidD9p7fuDwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/072283441d07d602ca7aca559fddb046/ca1dc/image1.png&apos; srcset=&apos;/static/072283441d07d602ca7aca559fddb046/e7570/image1.png 170w,
/static/072283441d07d602ca7aca559fddb046/f46e7/image1.png 340w,
/static/072283441d07d602ca7aca559fddb046/ca1dc/image1.png 680w,
/static/072283441d07d602ca7aca559fddb046/02d09/image1.png 1020w,
/static/072283441d07d602ca7aca559fddb046/9d567/image1.png 1360w,
/static/072283441d07d602ca7aca559fddb046/c2d10/image1.png 2562w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Docker Compose&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;짠! 하고 글이 종료됐다면 좋았겠지만 그렇지 않습니다. &lt;/p&gt;
&lt;h3&gt;Docker Compose란?&lt;/h3&gt;
&lt;p&gt;Docker Compose는 멀티 컨테이너 Docker 애플리케이션을 정의하고 실행하기 위한 도구입니다. 각 서비스의 컨테이너 설정을 하나의 YAML 파일 (&lt;code class=&quot;language-text&quot;&gt;docker-compose.yml&lt;/code&gt;)에 정의하고, 단일 명령어로 모든 컨테이너를 쉽게 시작, 중지 및 관리할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;왜 사용하나요?&lt;/h3&gt;
&lt;p&gt;환경의 일관성을 위해 컨테이너를 통해 서비스를 실행하게 되는데, 이렇게 하면 로컬에서 코드를 수정하고 테스트 할 때마다 이미지를 다시 말고 컨테이너를 다시 실행해야 하는 번거로움이 발생합니다. &lt;/p&gt;
&lt;p&gt;이를 방지하기 위해 docker-compose의 volumes 옵션으로 프로젝트 디렉토리를 마운트해 로컬의 코드 변경 사항이 컨테이너에 즉시 반영되도록 할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;개발 환경을 위한 docker-compose&lt;/h3&gt;
&lt;h4&gt;docker-compose.yml 파일 작성&lt;/h4&gt;
&lt;p&gt;루트 디렉토리에 docker-compose.yml 파일을 생성하고 다음의 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;3.8&apos;&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;web&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; .
        &lt;span class=&quot;token key atrule&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gunicorn project.wsgi&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;application &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;bind 0.0.0.0&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;8000 &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;reload
        &lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; .&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/app
        &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;8000:8000&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;volumes&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;.:/app&lt;/code&gt; 설정은 로컬 디렉토리 &lt;code class=&quot;language-text&quot;&gt;.&lt;/code&gt;(현재 디렉토리)를 컨테이너의 &lt;code class=&quot;language-text&quot;&gt;/app&lt;/code&gt; 디렉토리로 마운트합니다. 이렇게 하면 로컬 코드 변경 사항이 컨테이너 내부에서도 반영됩니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gunicorn project.wsgi:application&lt;/code&gt; 명령을 통해 애플리케이션 서버가 실행되며, 코드를 변경하면 해당 변경 사항이 컨테이너에 즉시 적용됩니다.&lt;/li&gt;
&lt;li&gt;Note: 하지만 Gunicorn은 자체적으로 코드 변경 사항을 감지하고 다시 시작하지 않으므로, 개발 환경에서는 Gunicorn 대신 &lt;code class=&quot;language-text&quot;&gt;runserver&lt;/code&gt;를 사용하거나 Gunicorn에 &lt;code class=&quot;language-text&quot;&gt;-reload&lt;/code&gt; 옵션을 추가할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;strong&gt;Docker Compose 실행&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;여기까지 완료되면 다음의 명령어를 사용해 서비스를 실행합니다. 위에서 테스트를 위해 실행했던 컨테이너는 중지해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 빌드와 서비스 시작&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; up &lt;span class=&quot;token parameter variable&quot;&gt;--build&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 서비스 상태 확인&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 로그 확인&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; logs

&lt;span class=&quot;token comment&quot;&gt;# 모든 서비스 중지&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker-compose&lt;/span&gt; down&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:8000/&quot;&gt;http://localhost:8000&lt;/a&gt; 에서 장고 프로젝트가 실행된 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;코드 즉시 반영 테스트&lt;/h4&gt;
&lt;p&gt;코드가 즉시 반영 되는지 테스트를 하기 위해 &lt;code class=&quot;language-text&quot;&gt;project&lt;/code&gt; 디렉토리 내에 &lt;code class=&quot;language-text&quot;&gt;views.py&lt;/code&gt; 파일을 생성하고 다음과 같이 내용을 작성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# project/views.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; HttpResponse


&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hello_world&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; HttpResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;helloworld&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;project/urls.py&lt;/code&gt; 을 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# project/urls.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contrib &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; admin
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; path
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; views

urlpatterns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;admin/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; admin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;hello/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; views&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hello_world&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# /hello로 요청 시 helloworld 출력&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 바로 &lt;code class=&quot;language-text&quot;&gt;http://localhost:8000/hello&lt;/code&gt;로 접근하면 &lt;code class=&quot;language-text&quot;&gt;helloworld&lt;/code&gt;라는 메시지가 출력됩니다. 별도의 과정 없이 코드가 바로 반영됨을 확인할 수 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Pyenv local 실행을 했는데 파이썬 버전이 바뀌지 않는다]]></title><description><![CDATA[문제 이 링크를 참조해 Pyenv를 설치했습니다. 이후, python 3.11버전을 추가로 설치하고 새로 시작하는 프로젝트에서 python 3.11 버전을 사용하기 위해 pyenv local 명령어를 사용했는데, python…]]></description><link>https://sharknia.github.io/Pyenv-local-실행을-했는데-파이썬-버전이-바뀌지-않는다/</link><guid isPermaLink="false">https://sharknia.github.io/Pyenv-local-실행을-했는데-파이썬-버전이-바뀌지-않는다/</guid><pubDate>Thu, 09 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;문제&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Apple-Silicon%EA%B3%BC-pyenv&quot;&gt;이 링크&lt;/a&gt;를 참조해 Pyenv를 설치했습니다. 이후, python 3.11버전을 추가로 설치하고 새로 시작하는 프로젝트에서 python 3.11 버전을 사용하기 위해 pyenv local 명령어를 사용했는데,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;user@MacBook-Pro django % pyenv &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8
user@MacBook-Pro django % pyenv versions    
  system
  &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.18
* &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8 &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;set by /Users/user/Develop/django/.python-version&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
user@MacBook-Pro django % python3 &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt; 
Python &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.18&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;python 버전이 바뀌지 않은 것을 확인했습니다. &lt;/p&gt;
&lt;h2&gt;원인&lt;/h2&gt;
&lt;p&gt;이는 &lt;code class=&quot;language-text&quot;&gt;pyenv&lt;/code&gt; 셈(shim) 경로 설정이 제대로 되어 있지 않아서 발생하는 문제입니다.&lt;/p&gt;
&lt;h2&gt;해결&lt;/h2&gt;
&lt;p&gt;.zshrc에 다음의 내용을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# pyenv 설정&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;PYENV_ROOT&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token environment constant&quot;&gt;$HOME&lt;/span&gt;/.pyenv&quot;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PATH&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$PYENV_ROOT&lt;/span&gt;/bin:&lt;span class=&quot;token environment constant&quot;&gt;$PATH&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;pyenv init &lt;span class=&quot;token parameter variable&quot;&gt;--path&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;shims는 사용자가 설정한 특정 Python 버전 및 가상환경을 가리키는 링크를 포함한 디렉토리입니다.
이를 통해 python, pip, pytest 등의 명령어를 실행할 때 shims에 설정된 Python 버전을 자동으로 사용하게 됩니다.&lt;/p&gt;
&lt;p&gt;다음 명령어로 변경 사항을 적용합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; ~/.zshrc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pyenv rehash 명령어를 사용해 재해시를 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pyenv rehash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 다시 pyenv local을 사용하면 제대로 버전이 바뀐것을 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pyenv &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.11&lt;/span&gt;.8
python3 &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Supabase를 위한 Bitbucket Pipelines CI/CD 워크플로우 구축하기]]></title><description><![CDATA[서론 이제 작업이 막바지에 이르러 실서버를 꾸며야 하는 날이 왔습니다. 로컬에서 명령어를 입력해서 실서버에 배포를 하는 일은 절대로 사양이기 때문에 Bitbucket의 Pipelines를 활용해서 태그가 달리는 순간 자동적으로 Supabase…]]></description><link>https://sharknia.github.io/Supabase를-위한-Bitbucket-Pipelines-CICD-워크플로우-구축하기/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase를-위한-Bitbucket-Pipelines-CICD-워크플로우-구축하기/</guid><pubDate>Mon, 29 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/383c67707281f22904006f0ce5c4cb89/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ABcyPS06NSRBTBErOAkYHQspPRk9Ux49TDhebZ64vZy2uzlfbSBAThw/UwwsPwsYHRIsOyhIVzxHQRIwQAAbO0kSHiAeP040UVolPkYQKjceSWEnVGlJcX3B0tTD09RPdoEsWnAfSmIPKTcmP0g4VmIeP1EVISIXOEgAJ2B+CiIxKFNqLFVnQVxmS2FlKFBhTYScSGRnusW+o66oTWhrVo6lKVJlSmBlR2JtK1FkI01kCiMzIlx9ACdjhBI4UDFohSxfeCZNYjBXaypRYnulsVBudYuor1Z1gVBxfoGptChQYitRZidPZi1eeCxlhBI7VihlhwA3eJgXS2o7eZc4hKopaIw2aYJEd451oq9EZHFUiZ43YndDZnZrmqpBd481Z4IqaI44gag1dJIWTW44eZkADCo+DiEsE0JgHFN0LmSCOneVZKS+rtvoU36TQIGdKFp0TnuTntDgXp23Qn+eMmuJIFZ1F0ZmECQvCy1DAB1YexEyRxhHZiJWdiZbezh3lmSkwJ3V5kh5kzR4mh9WdUV3kpLM4GKjvDx7miligyZdfhtObxM3TR1cfwAhYIMMLUIaSGQhVHQkXn85eZo9fp1lork1ZYA0gKYiXYAwXnhbmLA6epk4d5gnYoUlXX4cTWsNL0QhYIQAHUphGCw1DDZTFEJgDDNPG09vTIqmoNfnSnCFKGuPGE5wSG6CkMjbS4eiGEhmCzRRFkZkDDhWGS43IU1lABpJZQwuRQ0yTA0xSSdceFehwGiuyIW80EBcaAorQQssP0ljbXuyx2arxlmhwC9mgQsvSg80TgwxShlMawAJIzMGGSYKK0QWSms6eJU7eJU1aYZOgJQuT2IqfaUseqAxTl5IeY41aIRCfJlDg6AVS20LMEgFGCUIJThmGeW7aUwYJwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/383c67707281f22904006f0ce5c4cb89/ca1dc/image1.png&apos; srcset=&apos;/static/383c67707281f22904006f0ce5c4cb89/e7570/image1.png 170w,
/static/383c67707281f22904006f0ce5c4cb89/f46e7/image1.png 340w,
/static/383c67707281f22904006f0ce5c4cb89/ca1dc/image1.png 680w,
/static/383c67707281f22904006f0ce5c4cb89/02d09/image1.png 1020w,
/static/383c67707281f22904006f0ce5c4cb89/9d567/image1.png 1360w,
/static/383c67707281f22904006f0ce5c4cb89/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;이제 작업이 막바지에 이르러 실서버를 꾸며야 하는 날이 왔습니다. 로컬에서 명령어를 입력해서 실서버에 배포를 하는 일은 절대로 사양이기 때문에 Bitbucket의 Pipelines를 활용해서 태그가 달리는 순간 자동적으로 Supabase 내용이 실서버에 적용되도록 CI/CD 워크플로우를 구축하려고 합니다. &lt;/p&gt;
&lt;p&gt;이 포스팅은 해당 과정을 기록한 것입니다. &lt;/p&gt;
&lt;h2&gt;워크플로우 파일 작성&lt;/h2&gt;
&lt;p&gt;우선 워크플로우 파일을 작성해야 합니다. Github Action과 다르게 Bitbucket Pipelines를 위한 yml 파일은 루트 폴더에 바로 위치합니다. &lt;code class=&quot;language-text&quot;&gt;bitbucket-pipelines.yml&lt;/code&gt; 파일입니다. &lt;/p&gt;
&lt;h3&gt;환경변수 정의&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/cli/managing-environments?queryGroups=environment&amp;#x26;environment=production&quot;&gt;이 링크&lt;/a&gt; 를 보면 필요한 환경변수들이 정의되어 있습니다. Github Action을 위한 페이지이지만, Bitbucket에서도 해당 내용은 동일하게 적용됩니다. &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SUPABASE&lt;em&gt;ACCESS&lt;/em&gt;TOKEN&lt;/th&gt;
&lt;th&gt;Supabase Access Token입니다.&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SUPABASE&lt;em&gt;DB&lt;/em&gt;PASSWORD&lt;/td&gt;
&lt;td&gt;DB 비밀번호입니다. 각 프로젝트의 Setting - Database 메뉴 - Database password 섹션에서 재발급 받을 수 있습니다.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SUPABASE&lt;em&gt;PROJECT&lt;/em&gt;ID&lt;/td&gt;
&lt;td&gt;각 프로젝트의 Setting - General 메뉴 - Reference ID 섹션에서 확인할 수 있습니다.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 454px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/8921c42d8482ddb1a9494343367d3815/d0486/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 157.05882352941177%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAAAsTAAALEwEAmpwYAAADcUlEQVR42p1W2XLbMAz0/39Vpy99aKeTadJJ0iR2bOu2Dsu6KUooFqJou3FzcQYWRZHLJRYAvcjympxdSUFSUZpXtEv2FO0yCqKULaEsL6ismnfb4skt6MuvhL7epOSEB3reePSwcuhx5dLd44ZCBsfEoqzfNAHcFw1FWUVx3tChbKhTPbWdkufcf6/VTUeLsqpp4/jkBRGt1p7Y1g3pntkt1y45XkjDMNBbrTOgi6bteMFIuh9ID7BRAFTfs2l5zmxfs57nNmCIs1/dPJAfxMwyZh/68hzHkT7SFIDBEDTzQ0mHomIfVpTtC+6Xwgy79oalNdXbb51S1h14gukCPzGHSrhLxbxgx2GT0i7O7BgMcyIe88NYvuPd9SOq6uaMpTDEYgBtnEBiz/V3LI5r+1s3YnEiAVjzHIi23vqyLs1ymTOzXqgThvgAYF986ZHH7y4DOQwA9QGycQPZePnsEiIEQgLDMoQjAejxUdLsQE88Eaw/0wQQP9gp2x9YjFrAe6YPlWcbTCidjr0K2LRKUgcCIQ67HmMd7Q9QvjYZw996RWExkpPy/KLg6KgECFGSsC+h+gLBm+WlHLlkxeZArpuWAvZrwm7otaaWx0bd0yYjuvcbCoKQ1yQCGHIhcVg4y1COQfPxBjZNg4yROB0uACg2w/s0m+RXG1dI+oHhHLxQEVmC8IAfN6wsVEaTIDZCYe1g/TgBpuz/nBPjCMi7X98+icEfEGmyRhaCWcs+vVgU+IQrJoI6KsVhjqF/GwgImxN1J3e8tNFMtqkHhSTlJLWm7JhAx3fZDGoBEdAARCrFaS4+/HRgAxD3RsDMAPTRsnUxsLUepJhOoaFtoitl+lobmwJfi29HURtN8zeYHBkLEbxbDpdC7hQtWVFVrRTaKN7LWN32NHCm3EVEP58rcl1PqhCay+5acTGxPpTsYMlnlmKmgLZdJ8/JOgHvhL2SdVJYsdbMsWGDVEOxLMtjDKL/8oIy6krvPBKmI+uJybfv1/Tj6lYyBYpPhTWcSj4bNhv/c9v94RsSlfwssMEILC81sMTGlxNgFCAryrHaHi9slC4Y+h8JIzWrDPt9t5SyjjsD6iI/cWywAzD8egkcrJZcWLzTI2Mirk/EFhlPnS6e0+tSQ7XJuZ525u+L3HpgKD7oemPK9mdRXjMkBqxtFf0F0E5qpwGFO64AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/8921c42d8482ddb1a9494343367d3815/d0486/image2.png&apos; srcset=&apos;/static/8921c42d8482ddb1a9494343367d3815/e7570/image2.png 170w,
/static/8921c42d8482ddb1a9494343367d3815/f46e7/image2.png 340w,
/static/8921c42d8482ddb1a9494343367d3815/d0486/image2.png 454w&apos; sizes=&apos;(max-width: 454px) 100vw, 454px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
Bitbukcet 콘솔의 Pipelines를 정의하는 곳에서 위와 같이 설정해주면 됩니다. SUPABASE_ACCESS_TOKEN는 모든 환경에서 공통적으로 쓰이기 때문에 Repository 영역에 정의해주고, 나머지 두 환경변수는 각 환경 (dev, prod, staging 등.. ) 마다 다를 것이므로 Deployments 영역에 정의해주었습니다. &lt;/p&gt;
&lt;h3&gt;bitbucket-pipelines.yml&lt;/h3&gt;
&lt;p&gt;완성된 코드는 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;pipelines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;&apos;v*&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 태그 이름이 &apos;v&apos;로 시작하는 경우&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Edge function Deploy and DB Update
                  &lt;span class=&quot;token key atrule&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; node
                  &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npm i supabase
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase link &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ref $SUPABASE_PROJECT_ID
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase functions deploy
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
                  &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker
                  &lt;span class=&quot;token key atrule&quot;&gt;deployment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; production&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;tags가 달렸을 때, 그 태그의 이름이 v로 시작한다면 production deployment의 워크플로우가 실행됩니다. &lt;/p&gt;
&lt;p&gt;supabase를 설치해주고, 실서버 프로젝트에 연결해준 후, edge function을 배포하고, 마지막으로 DB의 변경사항을 체크해 db 스키마를 업데이트 합니다. &lt;/p&gt;
&lt;h2&gt;Troubleshooting&lt;/h2&gt;
&lt;p&gt;처음에는 &lt;a href=&quot;https://supabase.com/docs/guides/functions/cicd-workflow#bitbucket-pipelines&quot;&gt;해당 가이드&lt;/a&gt;를 보고 코드를 작성하였습니다. &lt;/p&gt;
&lt;h3&gt;deployment의 정의&lt;/h3&gt;
&lt;details&gt;
&lt;summary&gt;에러 코드 전문&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;pipelines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Setup
          &lt;span class=&quot;token key atrule&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; node
          &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npm i supabase
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Functions Deploy
          &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase functions deploy
          &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker
          &lt;span class=&quot;token key atrule&quot;&gt;deployment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; production
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; DB Update
          &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase db push
          &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker
          &lt;span class=&quot;token key atrule&quot;&gt;deployment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; production&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;처음 위와 같이 워크플로우를 작성하였을 때, 아래와 같은 오류가 발생했습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Configuration error
The deployment environment &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; your bitbucket-pipelines.yml &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; 
occurs multiple &lt;span class=&quot;token builtin class-name&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; the pipeline. 
Please refer to our documentation &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; valid environments and their ordering.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bitbucket Pipelines에서 발생하는 이 오류 메시지는 특정 단계에서 동일한 배포 환경(여기서는 &apos;production&apos;)이 여러 번 지정되었을 때 나타납니다. 각 파이프라인 구성에서는 각 배포 환경을 한 번만 명시적으로 참조해야 합니다.&lt;/p&gt;
&lt;p&gt;여기서 문제는 &apos;Functions Deploy&apos; 단계와 &apos;DB Update&apos; 단계 모두에서 &lt;code class=&quot;language-text&quot;&gt;deployment: production&lt;/code&gt;이 사용되었다는 것입니다. 이러한 중복을 해결하기 위해 다음과 같은 방법들을 고려할 수 있습니다. &lt;/p&gt;
&lt;p&gt;어차피 모두 실행되어야 하는 코드 조각이므로, 여러 스텝을 단일 배포 단계로 통합해주었습니다. &lt;/p&gt;
&lt;h3&gt;npm i supabase를 했는데도 npx에서 다시 설치하려고 하는 문제&lt;/h3&gt;
&lt;details&gt;
&lt;summary&gt;문제 코드 전문&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;pipelines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;&apos;v*&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 태그 이름이 &apos;v&apos;로 시작하는 경우&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Setup
                  &lt;span class=&quot;token key atrule&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; node
                  &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npm i supabase
                  &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker
            &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Edge function Deploy and DB Update
                  &lt;span class=&quot;token key atrule&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; node
                  &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase link &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ref $SUPABASE_PROJECT_ID
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase functions deploy
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
                  &lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker
                  &lt;span class=&quot;token key atrule&quot;&gt;deployment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; production&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;위와 같이 작성하면, 첫번째 스텝에서 npm i 를 통해 supabase를 저장하고 캐싱 해주었는데도 두번째 스텝에서 패키지를 찾지 못하고 npx에서 다시 인스톨을 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;npx supabase &lt;span class=&quot;token function&quot;&gt;link&lt;/span&gt; --project-ref &lt;span class=&quot;token variable&quot;&gt;$SUPABASE_PROJECT_ID&lt;/span&gt;
1s
+ npx supabase &lt;span class=&quot;token function&quot;&gt;link&lt;/span&gt; --project-ref &lt;span class=&quot;token variable&quot;&gt;$SUPABASE_PROJECT_ID&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; WARN &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; The following package was not found and will be installed: supabase@1.163.6&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결국 Step을 나누지 않고 한 Step에 합쳐주었습니다.&lt;/p&gt;
&lt;h3&gt;프롬포트에 응답이 필요한 경우&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npm i supabase
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase link &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ref $PRODUCTION_PROJECT_ID &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;debug
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase db push &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;debug&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 스크립트를 작성한 경우, 아래와 같이 출력된 상황에서 무한 로딩이 발생합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Do you want to push these migrations to the remote database?
 • 20240329084939_remote_schema.sql
 • 20240415051605_remote_schema.sql
 • 20240415052055_remote_schema.sql
 • 20240415082434_remote_schema.sql
 • 20240415092355_storage.sql
 • 20240415092443_remote_schema.sql
 • 20240416060241_remote_schema.sql
 • 20240429012631_remote_schema.sql
 • 20240429061821_remote_schema.sql
 • 20240429062003_remote_schema.sql
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Y/n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2024&lt;/span&gt;/04/29 08:30:26 PG Recv: &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Type&quot;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ParameterStatus&quot;&lt;/span&gt;,&lt;span class=&quot;token string&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;application_name&quot;&lt;/span&gt;,&lt;span class=&quot;token string&quot;&gt;&quot;Value&quot;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Supavisor&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배포 작업이 진행되다보면, Y 또는 N 응답을 요구하는 경우가 있습니다. 이 경우가 바로 그 경우입니다. &lt;/p&gt;
&lt;p&gt;CI/CD 파이프라인에서 대화형 프롬프트에 자동으로 응답하는 방법은 일반적으로 스크립트를 사용하여 자동화하는 것입니다. 이 경우, &lt;code class=&quot;language-text&quot;&gt;supabase db push&lt;/code&gt; 명령이 사용자 입력을 요구하는데, 이를 자동화하기 위해 &lt;code class=&quot;language-text&quot;&gt;yes&lt;/code&gt; 명령을 사용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;yes&lt;/code&gt; 명령은 반복적으로 &lt;code class=&quot;language-text&quot;&gt;y&lt;/code&gt;를 출력하여, 대화형 프롬프트에 자동으로 &apos;yes&apos;를 입력하는 데 사용됩니다. 이 명령을 &lt;code class=&quot;language-text&quot;&gt;supabase db push&lt;/code&gt;와 파이프라인하면 사용자 입력을 요구하는 모든 질문에 자동으로 &lt;code class=&quot;language-text&quot;&gt;y&lt;/code&gt;를 제공할 수 있습니다.&lt;/p&gt;
&lt;p&gt;Bitbucket Pipelines의 스크립트를 다음과 같이 수정합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npm i supabase
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; npx supabase link &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ref $PRODUCTION_PROJECT_ID &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;debug
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;debug&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    물론, 무조건 Y를 연타하게 되기 때문에 주의해서 사용해야 합니다!&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Supabase Migration 버전 맞추기&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
2s
+ yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
Connecting to remote database&lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
Do you want to push these migrations to the remote database&lt;span class=&quot;token punctuation&quot;&gt;?&lt;/span&gt;
 • 20240329084939_remote_schema.sql
 • 20240415051605_remote_schema.sql
 • 20240415052055_remote_schema.sql
 • 20240415082434_remote_schema.sql
 • 20240415092355_storage.sql
 • 20240415092443_remote_schema.sql
 • 20240416060241_remote_schema.sql
 • 20240429012631_remote_schema.sql
 • 20240429061821_remote_schema.sql
 • 20240429062003_remote_schema.sql
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Y/n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; y
Applying migration 20240329084939_remote_schema.sql&lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; type &quot;action_type_enum&quot; already exists (SQLSTATE 42710)    
&lt;span class=&quot;token key atrule&quot;&gt;At statement 24&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CREATE TYPE &quot;public&quot;.&quot;action_type_enum&quot; AS ENUM (
    &apos;pending&apos;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                                                    
    &lt;span class=&quot;token string&quot;&gt;&apos;skipped&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                                                    
    &lt;span class=&quot;token string&quot;&gt;&apos;disliked&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                                                   
    &lt;span class=&quot;token string&quot;&gt;&apos;proposed&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                                                   
    &lt;span class=&quot;token string&quot;&gt;&apos;blocked&apos;&lt;/span&gt;                                                     
)                                                                 
Try rerunning the command with &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;debug to troubleshoot the error.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이미 존재한다는 오류가 발생하고 있습니다. 로컬에서 remote의 마이그레이션 상태를 확인해봅시다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;supabase link &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ref &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ProjcetId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 통해 실서버 프로젝트와 연결한 후 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;supabase migration list   &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령어를 사용하면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;        LOCAL      │ REMOTE │     TIME (UTC)
  ─────────────────┼────────┼──────────────────────
    20240329084931 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;03&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 08&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;49:39&lt;/span&gt;
    20240415051602 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 05&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;16:05&lt;/span&gt;
    20240415052053 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 05&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;20:55&lt;/span&gt;
    20240415082434 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 08&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;24:34&lt;/span&gt;
    20240415092355 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 09&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;23:55&lt;/span&gt;
    20240415092447 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 09&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;24:43&lt;/span&gt;
    20240416060241 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;16 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;02:41&lt;/span&gt;
    20240429012631 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 01&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;26:31&lt;/span&gt;
    20240429061821 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;18:21&lt;/span&gt;
    20240429062003 │        │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;20:03&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게, 마이그레이션 버전이 로컬과 원격이 맞지 않는 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;왜냐면 제가 실서버에 DB를 세팅할 때에 supabase migration 명령어를 사용한 것이 아니라 직접 생성된 쿼리문을 실서버에 실행시켰기 때문입니다. &lt;/p&gt;
&lt;p&gt;DB 상태가 이미 강제로 맞춰져 있을 것이므로(작업이 끝난 후 혹시 몰라 한 번 더 확인 하였습니다), 다음의 명령어를 통해 강제로 마이그레이션이 적용된 상태로 수리합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;supabase migration repair &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;status applied&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 한 후, 다시 migration list 명령어를 사용하면 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;Connecting to remote database&lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;

  
        LOCAL      │     REMOTE     │     TIME (UTC)
  ─────────────────┼────────────────┼──────────────────────
    20240329084939 │ 20240329084939 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;03&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 08&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;49:39&lt;/span&gt;
    20240415051605 │ 20240415051605 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 05&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;16:05&lt;/span&gt;
    20240415052055 │ 20240415052055 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 05&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;20:55&lt;/span&gt;
    20240415082434 │ 20240415082434 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 08&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;24:34&lt;/span&gt;
    20240415092355 │ 20240415092355 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 09&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;23:55&lt;/span&gt;
    20240415092443 │ 20240415092443 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;15 09&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;24:43&lt;/span&gt;
    20240416060241 │ 20240416060241 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;16 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;02:41&lt;/span&gt;
    20240429012631 │ 20240429012631 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 01&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;26:31&lt;/span&gt;
    20240429061821 │ 20240429061821 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;18:21&lt;/span&gt;
    20240429062003 │ 20240429062003 │ 2024&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;04&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;29 06&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token datetime number&quot;&gt;20:03&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정상적으로 마이그레이션이 적용되었고, CI/CD를 다시 태워보면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
2s
+ yes &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; npx supabase db push
Connecting to remote database&lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
Remote database is up to date.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정상적으로 원격 DB가 최신화된 로그를 확인할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;(Option) Edge Function의 배포&lt;/h2&gt;
&lt;p&gt;Edge Function의 배포는 다음의 명령어를 통해 이뤄집니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;supabase functions deploy &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Option: 함수명&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 인증 jwt 토큰이 없어도 실행이 가능해야 하는 Edge function이 있을 수 있습니다. 이때에는 옵션값을 추가해줘야 합니다. 옵션은 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;supabase functions deploy hello-world --no-verify-jwt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;함수명을 입력하지 않고, deploy 까지만 했을 때에는 전체 함수를 한 번에 배포하게 되는데 기본적으로 jwt 토큰이 필요한 상태로 배포되게 됩니다. 따라서 특히 웹훅을 위한 함수 같은 경우 인증 오류가 발생하게 되므로, &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Supabase Console에서 하나하나 토글을 해주거나&lt;/li&gt;
&lt;li&gt;다시 하나하나 옵션을 붙여 특정 함수를 배포해주거나 &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;해야 하지만, &lt;a href=&quot;https://supabase.com/docs/guides/functions/cicd-workflow#declarative-configuration&quot;&gt;이 방법&lt;/a&gt;을 사용하면 supabase functions deploy 명령어만 사용해서 jwt 토큰 미사용 옵션값과 함께 한 번에 배포가 가능합니다. CI/CD를 위해서는 사실상 필수라고 할 수 있습니다. &lt;/p&gt;
&lt;p&gt;config.toml 파일에 다음과 같이 작성해주면 됩니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;functions.hello-world&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
verify_jwt &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[supabase-custom-claims를 활용한 관리자 권한 관리]]></title><description><![CDATA[서론 Supabase에서 특정 edge function이나 db function, 또는 뷰나 테이블의 CRUD…]]></description><link>https://sharknia.github.io/supabase-custom-claims를-활용한-관리자-권한-관리/</link><guid isPermaLink="false">https://sharknia.github.io/supabase-custom-claims를-활용한-관리자-권한-관리/</guid><pubDate>Thu, 25 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/8dbf137890b1ec7bd17c4e5aaf936f80/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACmklEQVR42gXB608SAQAA8Psr+lRrLT+1PqRzazk3M1dpNoaJkYoeKsgznoc8lLfcyVM4Do6nwHHHceeFvFz4BBdpumqtjfXv9PsB/3qxs6qFxhV4ULy3u7TjXFRtLYBa/rKKv2ZYer/OE6hEU4uzo7w3M6BgemluaOz5g+GRR6MvHj4dBQY32cs2csQ6yOJWOm0IolpfVLcT0hoQ1fa+WepU2nA/aFEIPoPzapAnX51c/jj8bnpmHfwg2wQGd0TvDG01A81GMFNy4wScqgRRMmBPuIRbBmPEqfJDMtjCNxr4GsWcRiK06MfFq5My5csNOTD4y97eEhe9/HmvUD/JNi/LzEmhfJxXRQNgKCz0etL1rDgctBbys5DVlo1qktFlP6LA0HmXF/j1m+72K+ffaeaUPOoyfwbH7BmVrmW9LGnjDtV4DK+nbUROFEmuIH6J37MRQiY0On0YWbGYgOs7+uqG7fbpVq/a6pExMlpq5jp9mr7kbNRBqVPOtQto7cDHFKyFhCkdX3R7BbbtWcg8JlUBl32i/4PKcZkUi1fbKQgLBSuJbz+Pal2yc81yXfrLVS3ZKGGNMkJnTLmMBA6IXJ63ZscziQ5odYvNizxRT1SaKPc1jeTgPBf/clrEajniOI8eZpKNg0yrGK8TWJt1MRWIrG7mKG35cB0vA74klCDcOLWbrO5nmEi5EU/S4RARz3DxvUJIDvus2F6omgpzxUq3ZSYpPcWomaa/cxHunAMq55olqLajkDfl8OBWOOty4w5Hwu5I7EARm8QJSd0GedgDBuAFl+OVzjih1o2IFU/W9I+FSgA0ifS7SnvUjKRdkSISpyI4gyZZLErHQyQKl2IQhkgD7gWX/TVkHtcYR6TaoU+y+zzw3pTwP6o6YAz3PQOJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/8dbf137890b1ec7bd17c4e5aaf936f80/ca1dc/image1.png&apos; srcset=&apos;/static/8dbf137890b1ec7bd17c4e5aaf936f80/e7570/image1.png 170w,
/static/8dbf137890b1ec7bd17c4e5aaf936f80/f46e7/image1.png 340w,
/static/8dbf137890b1ec7bd17c4e5aaf936f80/ca1dc/image1.png 680w,
/static/8dbf137890b1ec7bd17c4e5aaf936f80/02d09/image1.png 1020w,
/static/8dbf137890b1ec7bd17c4e5aaf936f80/9d567/image1.png 1360w,
/static/8dbf137890b1ec7bd17c4e5aaf936f80/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;Supabase에서 특정 edge function이나 db function, 또는 뷰나 테이블의 CRUD에 있어서도 계정에 따라 다른 결과물을 내놔야 하는 경우가 아주 많습니다. 쉽게 예를 들자면 특정 유저에게 내부 재화를 부여하는 기능이 관리자 계정은 가능하지만 일반 사용자 계정은 불가능해야 하는 경우가 있을 수 있겠네요. &lt;/p&gt;
&lt;p&gt;User 데이터가 저장된 테이블에 해당 유저의 권한을 저장해두고 이를 읽어서 사용한다면 쉽게 구현할 수 있겠지만, Supabase에서는 이를 더 효과적으로 구현하기 위한 방법을 준비해두었습니다. &lt;/p&gt;
&lt;h2&gt;supabase-custom-claims?&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;supabase-custom-claims를 사용해 인증된 사용자가 앱에 로그인할 때 받는 액세스 토큰에 JSON 데이터를 임의로 추가 또는 삭제할 수 있습니다. &lt;/p&gt;
&lt;p&gt;사용자의 계획, 레벨, 그룹, 가입 일자, 권한 등 다양한 정보를 포함시킬 수 있어 이를 사용해 애플리케이션의 특정 부분에 대한 Access 권한을 세밀하게 조정할 수 있습니다. &lt;/p&gt;
&lt;p&gt;문자열/숫자/Boolean/배열/JSON 객체등을 모두 저장할 수 있습니다. 저장된 데이터는 사용자 테이블의 raw_app_meta_data 컬럼에 저장됩니다. &lt;/p&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;p&gt;사용자 정의 클레임은 사용자가 로그인할 때 받는 보안 토큰에 저장되며 이 클레임은 PostgreSQL 데이터베이스가 즉시 접근할 수 있도록 구성 매개변수로 제공됩니다. 따라서 데이터베이스의 디스크 입출력 없이 즉시 이 값을 사용할 수 있습니다. 특히 RLS에서 클레임을 사용하면 데이터베이스 호출을 크게 줄일 수 있어 크게 성능을 개선할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;p&gt;자동으로 업데이트 않으며 로그아웃 후 다시 로그인 해야 새 클레임이 적용됩니다. 따라서 자주 변경되는 데이터를 저장하기에는 적합하지 않습니다. supabase.auth.refreshSession()를 호출하여 강제로 새로 고칠 수는 있습니다. 다만 서버나 클레임 관리자의 수동 변경 이후 이를 알릴 수 있는 방법은 없습니다. &lt;/p&gt;
&lt;h4&gt;주의&lt;/h4&gt;
&lt;p&gt;Supabase 인증 시스템에서 &lt;code class=&quot;language-text&quot;&gt;provider&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;providers&lt;/code&gt;라는 사용자 정의 클레임을 이미 사용하므로 이 이름은 사용하지 않아야 합니다. &lt;/p&gt;
&lt;h2&gt;특정 유저에게 권한 부여하기&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;set_claim&lt;/code&gt; 함수는 특정 유저의 권한 정보를 사용자 정의 클레임(custom claims)으로 추가하거나 업데이트하는 데 사용됩니다. 이 함수는 Supabase에서 제공하는 사용자 관리 기능과 연동하여, &lt;code class=&quot;language-text&quot;&gt;raw_app_meta_data&lt;/code&gt; 필드를 업데이트합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- 특정 유저에게 claims_admin 권한 부여&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_claim&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  user_id :&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;user_id&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;        &lt;span class=&quot;token comment&quot;&gt;-- 유저의 UUID&lt;/span&gt;
  claim :&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;app_metadata.claims_admin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;value&lt;/span&gt; :&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;true&apos;&lt;/span&gt;               &lt;span class=&quot;token comment&quot;&gt;-- 권한 값 (true/false, 숫자 등)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;strong&gt;매개변수 설명&lt;/strong&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;user_id&lt;/code&gt;: 권한을 부여할 사용자의 고유 ID(UUID). Supabase의 &lt;code class=&quot;language-text&quot;&gt;auth.users&lt;/code&gt; 테이블에서 확인할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;claim&lt;/code&gt;: 부여할 클레임의 이름입니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;app_metadata.claims_admin&lt;/code&gt;은 관리자로 설정할 때 사용됩니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt;: 클레임의 값으로, &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;, 숫자, 문자열 등 다양한 데이터 타입을 사용할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;특정 유저의 권한 확인하기&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;is_claims_admin()&lt;/code&gt; 함수는 현재 사용자 세션에서 &lt;code class=&quot;language-text&quot;&gt;claims_admin&lt;/code&gt; 권한이 있는지를 확인하는 데 사용됩니다. 이를 통해 관리 권한이 있는 사용자만 특정 기능을 사용할 수 있도록 제한할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;REPLACE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FUNCTION&lt;/span&gt; is_claims_admin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;RETURNS&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BOOLEAN&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;LANGUAGE&lt;/span&gt; plpgsql
&lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; $$
&lt;span class=&quot;token keyword&quot;&gt;BEGIN&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;-- 세션의 JWT 클레임에서 claims_admin 값 확인&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;RETURN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;coalesce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;current_setting&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;request.jwt.claims&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::jsonb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;app_metadata&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;claims_admin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;false&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
$$&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;DB Function에서의 활용&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; is_claims_admin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt;
        RAISE EXCEPTION &lt;span class=&quot;token string&quot;&gt;&apos;AccessDenied&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;RLS에서의 활용&lt;/h2&gt;
&lt;p&gt;이 두 기능은 Supabase의 RLS 정책과 함께 사용되며, 아래와 같이 &lt;code class=&quot;language-text&quot;&gt;is_claims_admin()&lt;/code&gt;를 활용해 RLS 정책을 정의할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; POLICY &lt;span class=&quot;token string&quot;&gt;&quot;Allow claims_admin&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; sensitive_table
&lt;span class=&quot;token keyword&quot;&gt;FOR&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ALL&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;TO&lt;/span&gt; authenticated
&lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  is_claims_admin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;기타 : Supabase 대시보드에서의 is_claims_admin()&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;REPLACE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FUNCTION&lt;/span&gt; is_claims_admin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;RETURNS&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;bool&quot;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;LANGUAGE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;plpgsql&quot;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; $$
  &lt;span class=&quot;token keyword&quot;&gt;BEGIN&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;session_user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;authenticator&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;--------------------------------------------&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;-- To disallow any authenticated app users&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;-- from editing claims, delete the following&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;-- block of code and replace it with:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;-- RETURN FALSE;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;--------------------------------------------&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; extract&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;epoch &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;coalesce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;current_setting&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;request.jwt.claims&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::jsonb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;exp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::&lt;span class=&quot;token keyword&quot;&gt;numeric&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- jwt expired&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;If&lt;/span&gt; current_setting&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;request.jwt.claims&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::jsonb&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;role&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;service_role&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;RETURN&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- service role users have admin rights&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;coalesce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;current_setting&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;request.jwt.claims&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::jsonb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;app_metadata&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;claims_admin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;false&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- user has claims_admin set to true&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;ELSE&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- user does NOT have claims_admin set to true&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;--------------------------------------------&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;-- End of block &lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;--------------------------------------------&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- not a user session, probably being called from a trigger or something&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
$$&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Supabase 대시보드에서 is_claims_admin()을 실행하면 반드시 true로 떨어집니다! Role을 바꿔서 시뮬레이션 하더라도 그렇습니다. 왜냐하면 대시보드에서 실행한 경우, &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt; 가 &lt;code class=&quot;language-text&quot;&gt;postgres&lt;/code&gt; 이기 때문입니다. 실제 작동은 원하는대로 작동하지만, 대시보드에서의 테스트가 실제 실행 결과값과 달라져 테스트가 어려워지게 됩니다. Role을 바꾸는게 어떻게 작동하길래 이런 결과가 나올까요?&lt;/p&gt;
&lt;h3&gt;Supabase의 Role 변경 기능&lt;/h3&gt;
&lt;p&gt;Supabase SQL Editor에서는 데이터베이스의 다양한 Role을 사용하여 쿼리를 실행할 수 있는 기능이 제공됩니다. 이는 PostgreSQL의 Role-Based Access Control (RBAC) 기능을 활용한 것으로, 서로 다른 Role을 적용하여 데이터베이스 접근을 시뮬레이션하고, 특정 Role이 어떤 데이터에 접근할 수 있는지 테스트할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이 Role 변경 기능은 주로 보안 설정을 테스트하거나 다양한 사용자 권한을 시뮬레이션하는 데 사용됩니다. 예를 들어, 어떤 Role이 특정 테이블에 대한 접근 권한을 가지고 있는지, 또는 특정 작업을 수행할 수 있는지 등을 확인할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Role 변경과 session_user&lt;/h3&gt;
&lt;p&gt;하지만 이때 Role을 변경하더라도 &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;는 변경되지 않습니다. &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;는 데이터베이스에 연결된 사용자의 로그인 이름을 반영하며, 세션의 생애 주기 동안 고정됩니다. Role을 변경한다고 해서 세션을 시작한 사용자가 변경되는 것은 아닙니다. Role은 현재 세션에서 실행 권한을 임시로 변경하는 것에 불과하므로, 이는 &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;의 값을 바꾸지 않습니다.&lt;/p&gt;
&lt;p&gt;이 기능은 데이터베이스의 보안 설정을 테스트하거나 다른 사용자의 권한으로 쿼리를 실행해 보려는 개발자에게 유용합니다. 하지만 &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;는 데이터베이스 세션의 보안 컨텍스트를 유지하는 중요한 요소로, 이를 통해 누가 실제로 데이터베이스에 접근하고 있는지 확인할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;current_user&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Edge funcion이나 DB Function을 사용한 경우, 관리자 계정 또는 사용자 계정 둘 모두 &lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;authenticator&lt;/code&gt; 이며, &lt;code class=&quot;language-text&quot;&gt;current_user&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;authenticated&lt;/code&gt; 입니다. &lt;/p&gt;
&lt;h4&gt;session_user vs current_user&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;session_user&lt;/code&gt;: 데이터베이스 세션을 시작할 때 설정된 사용자 신원을 나타냅니다. 이 값은 세션 동안 변경되지 않습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;current_user&lt;/code&gt;: 현재 실행 중인 명령이나 쿼리의 맥락에서 적용되는 사용자를 나타냅니다. &lt;code class=&quot;language-text&quot;&gt;SET ROLE&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;SET SESSION AUTHORIZATION&lt;/code&gt;과 같은 명령을 사용하여 세션 중에 변경될 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결국 큰 차이는 변경할 수 있냐, 없냐에 있다고 할 수 있습니다. &lt;/p&gt;
&lt;p&gt;하지만 current_user를 변경하는 것은 클라이언트에서 거의 불가능한 작업입니다. &lt;code class=&quot;language-text&quot;&gt;SET ROLE&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;SET SESSION AUTHORIZATION&lt;/code&gt; 같은 명령을 통해 변경을 시도한다고 해도, 본인이 가지지 않은 권한으로의 변경은 사실상 불가능합니다. &lt;/p&gt;
&lt;p&gt; 특히 Supabase는 인증 토큰과 서버 사이드의 보안 설정을 통해 사용자 신원을 관리하며, 클라이언트에서 &lt;code class=&quot;language-text&quot;&gt;current_user&lt;/code&gt;를 임의로 변경할 수 없도록 합니다. 따라서, Supabase를 사용하는 경우 &lt;code class=&quot;language-text&quot;&gt;current_user&lt;/code&gt;를 기반으로 하는 보안 체크도 충분히 안전합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Supabase에서 뷰에도 RLS 적용하기]]></title><description><![CDATA[Supabase 특성 상, RLS와 뷰를 적극 활용해야 합니다. 그런데 create or replace 명령어를 사용해서 뷰를 생성하면 뷰의 생성에 사용된 테이블들의 RLS가 적용되지 않는 문제가 있습니다. 
예를 들어,  purchases…]]></description><link>https://sharknia.github.io/Supabase에서-뷰에도-RLS-적용하기/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase에서-뷰에도-RLS-적용하기/</guid><pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Supabase 특성 상, RLS와 뷰를 적극 활용해야 합니다. 그런데 create or replace 명령어를 사용해서 뷰를 생성하면 뷰의 생성에 사용된 테이블들의 RLS가 적용되지 않는 문제가 있습니다.
예를 들어, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;REPLACE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;VIEW&lt;/span&gt; v_user_data &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
  id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  user_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  purchase_date&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  amount
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt;
  purchases
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt;
  valid_until &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt;
  purchase_date&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;purchases등의 테이블에 RLS를 설정해서 본인의 것만 조회를 할 수 있도록 설정해두고 뷰를 생성한다면, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; v_user_data &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 사용해서 조회한다면 RLS가 적용되지 않고 모든 ROW가 조회되는 것을 볼 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
      id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      user_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      purchase_date&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      amount
    &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt;
      purchases
    &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt;
      valid_until &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt;
      purchase_date
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; T&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 조회를 한다면 정상적으로 RLS가 적용되어 본인의 것만 조회가 됨을 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;이는 제가 의도한 작동이 아니며, 뷰에도 RLS가 적용되게 할 필요가 있습니다. &lt;/p&gt;
&lt;h2&gt;security invoker&lt;/h2&gt;
&lt;p&gt;이를 위해 security invoker 옵션이 PostgreSQL v15부터 도입되었습니다. 이를 통해 뷰를 통해 데이터에 접근할 때 원본 테이블의 행 레벨 보안(Row-Level Security, RLS) 정책이 호출자(invoker) 기준으로 적용됩니다. 사용법은 다음과 같습니다. &lt;/p&gt;
&lt;p&gt;뷰를 생성한 후에, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;view&lt;/span&gt; v_user_data &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;security_invoker&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 &lt;code class=&quot;language-text&quot;&gt;security_invoker&lt;/code&gt; 옵션을 on으로 설정해주면 원본 테이블들의 RLS가 뷰에도 적용된 것을 확인할 수 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[ Deno에서 URL의 쿼리 스트링(Query String) 다루기]]></title><description><![CDATA[정답 URL 객체를 활용하면 됩니다.  자세히! Deno는 웹 표준 API를 지원하기 때문에,   객체와  객체를 제공합니다. 이를 활용하면 쿼리 스트링을 쉽게 다룰 수 있습니다. 먼저  객체에서 URL…]]></description><link>https://sharknia.github.io/Deno에서-URL의-쿼리-스트링Query-String-다루기/</link><guid isPermaLink="false">https://sharknia.github.io/Deno에서-URL의-쿼리-스트링Query-String-다루기/</guid><pubDate>Tue, 02 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;정답&lt;/h2&gt;
&lt;p&gt;URL 객체를 활용하면 됩니다. &lt;/p&gt;
&lt;h2&gt;자세히!&lt;/h2&gt;
&lt;p&gt;Deno는 웹 표준 API를 지원하기 때문에,  &lt;code class=&quot;language-text&quot;&gt;URL&lt;/code&gt; 객체와 &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; 객체를 제공합니다. 이를 활용하면 쿼리 스트링을 쉽게 다룰 수 있습니다. 먼저 &lt;code class=&quot;language-text&quot;&gt;Request&lt;/code&gt; 객체에서 URL을 가져온 후, &lt;code class=&quot;language-text&quot;&gt;URL&lt;/code&gt; 객체를 생성하고 이 객체의 &lt;code class=&quot;language-text&quot;&gt;searchParams&lt;/code&gt; 프로퍼티를 통해 쿼리 파라미터에 접근할 수 있습니다.아래는 GET 방식으로 넘어온 쿼리 스트링 변수를 어떻게 처리하는지에 대한 예시입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Deno.serve() 안에 있는 async 함수 내부에 추가합니다.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// req 객체에서 URL을 가져온 후 URLSearchParams 객체를 사용하여 쿼리 파라미터에 접근합니다.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryParams &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;searchParams&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 예를 들어, &quot;user_id&quot;라는 쿼리 파라미터 값을 얻고 싶다면&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; userId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; queryParams&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;user_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &quot;user_id&quot; 쿼리 스트링의 값을 가져옵니다.&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 이제 userId 변수를 사용하여 필요한 로직을 구현할 수 있습니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;URLSearchParams?&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; 객체는 URL의 쿼리 스트링을 편리하게 다룰 수 있는 다양한 메서드를 제공합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;get(name)&lt;/code&gt;: 지정된 이름의 첫 번째 값을 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;getAll(name)&lt;/code&gt;: 지정된 이름의 모든 값을 배열로 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;has(name)&lt;/code&gt;: 지정된 이름의 쿼리 파라미터가 있는지 확인합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;set(name, value)&lt;/code&gt;: 지정된 이름과 값으로 새 쿼리 파라미터를 설정합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;append(name, value)&lt;/code&gt;: 지정된 이름과 값으로 새 쿼리 파라미터를 추가합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;delete(name)&lt;/code&gt;: 지정된 이름의 쿼리 파라미터를 제거합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; 객체를 활용하여 여러 개의 값을 가진 쿼리 파라미터를 처리할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://example.com/?tags=javascript&amp;amp;tags=deno&amp;amp;tags=nodejs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryParams &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;searchParams&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; tags &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; queryParams&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;tags&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;// [&quot;javascript&quot;, &quot;deno&quot;, &quot;nodejs&quot;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[RLS에 대한 궁금증 모음]]></title><description><![CDATA[1. 조인 postgresql RLS에서 A테이블은 모두가 읽을 수 있고, B테이블은 나만 읽을 수 있다고 합시다. 
그럼 A와 B…]]></description><link>https://sharknia.github.io/RLS에-대한-궁금증-모음/</link><guid isPermaLink="false">https://sharknia.github.io/RLS에-대한-궁금증-모음/</guid><pubDate>Thu, 21 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1. 조인&lt;/h2&gt;
&lt;p&gt;postgresql RLS에서 A테이블은 모두가 읽을 수 있고, B테이블은 나만 읽을 수 있다고 합시다.
그럼 A와 B를 조인해서 만들어진 뷰는 어떻게 될까요? 내가 아닌 유저가 이 뷰를 읽으려고 시도하면 어떻게 될까요? &lt;/p&gt;
&lt;h3&gt;정답&lt;/h3&gt;
&lt;p&gt;이 사용자는 A 테이블에는 접근할 수 있지만, B 테이블에 대한 접근 권한이 없습니다. 따라서, RLS 정책에 의해 B 테이블에서의 데이터 접근이 제한됩니다. 결과적으로, 조인된 뷰를 조회하려고 할 때 두 가지 가능한 결과가 있습니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;접근 거부: B 테이블에 접근할 수 없기 때문에, RLS 정책이 매우 엄격하게 설정되어 있어 전체 뷰에 대한 접근이 거부될 수 있습니다.&lt;/li&gt;
&lt;li&gt;부분적 결과: RLS 정책이나 쿼리 구조에 따라, B 테이블과 관련 없는 데이터(즉, A 테이블에서만 오는 데이터)만 조회할 수 있게 될 수도 있습니다. 이는 RLS 정책 구현 방법과 쿼리의 구체적인 세부 사항에 따라 달라집니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;해설&lt;/h3&gt;
&lt;h4&gt;RLS와 뷰의 작동 원리&lt;/h4&gt;
&lt;p&gt;PostgreSQL에서 RLS는 테이블 레벨에서 설정되며, 해당 테이블에 대한 쿼리가 실행될 때마다 RLS 정책이 적용됩니다. 이 정책은 &lt;code class=&quot;language-text&quot;&gt;SELECT&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;INSERT&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;UPDATE&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt; 명령에 대해 설정할 수 있으며, 사용자가 명령을 실행할 때마다 정책에 정의된 조건에 따라 접근이 허용되거나 거부됩니다.&lt;/p&gt;
&lt;p&gt;뷰는 기본적으로 하나 이상의 테이블에서 데이터를 검색하기 위한 쿼리를 저장한 객체입니다. 뷰 자체에는 데이터가 저장되어 있지 않으며, 뷰를 쿼리할 때마다 저장된 쿼리가 실행되어 결과가 반환됩니다.&lt;/p&gt;
&lt;h4&gt;조인된 뷰의 접근 제어&lt;/h4&gt;
&lt;p&gt;A와 B를 조인해서 만들어진 뷰에 대한 접근 권한은, 뷰를 구성하는 기본 테이블의 RLS 정책과 해당 사용자의 권한에 따라 달라집니다. 즉, 뷰를 통해 데이터에 접근하려 할 때, 뷰에 포함된 각 테이블에 대한 접근 권한이 평가되고, 모든 관련 RLS 정책이 적용됩니다.&lt;/p&gt;
&lt;h2&gt;2. 아무 권한 설정도 없다면?&lt;/h2&gt;
&lt;p&gt;PostgreSQL의 행 레벨 보안(Row-Level Security, RLS)가 enable 되어있는데, 예를 들어 INSERT에 대해서 아무 policy가 정의되어 있지 않은데 내가 이 테이블에 Insert를 시도한다면 어떻게 될까요?&lt;/p&gt;
&lt;h3&gt;정답&lt;/h3&gt;
&lt;p&gt;PostgreSQL에서 행 레벨 보안(Row-Level Security, RLS)이 활성화되어 있고, 특정 작업(예를 들어 INSERT)에 대한 정책이 정의되어 있지 않다면, 그 작업에 대한 기본 정책은 &quot;DENY&quot;가 됩니다. 즉, 아무런 INSERT 정책이 설정되어 있지 않으면, 해당 테이블에 대한 INSERT 시도는 기본적으로 거부됩니다.&lt;/p&gt;
&lt;h2&gt;3. 지금까지 설정한 RLS를 조회하는 방법은?&lt;/h2&gt;
&lt;p&gt;다음의 쿼리문으로 여태 설정한 RLS들을 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
  pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; policy_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  nsp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nspname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; schema_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; table_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polcmd &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; command&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  pg_get_expr&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polqual&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polrelid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  pg_get_expr&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polwithcheck&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polrelid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; with_check
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt;
  pg_policy pol
  &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_class tab &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; pol&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;polrelid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid
  &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_namespace nsp &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relnamespace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nsp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt;
  tab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;테이블 이름&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[PostgreSQL에서 테이블 로우를 JSON으로 변환하기]]></title><description><![CDATA[서론 PostgreSQL에서는 관계형 데이터를 JSON 형식으로 변환하거나 JSON 데이터를 관계형 테이블로 저장할 수 있는 다양한 기능을 제공합니다. 이번 글에서는 JSON…]]></description><link>https://sharknia.github.io/PostgreSQL에서-테이블-로우를-JSON으로-변환하기/</link><guid isPermaLink="false">https://sharknia.github.io/PostgreSQL에서-테이블-로우를-JSON으로-변환하기/</guid><pubDate>Wed, 20 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/24e3c9ff86c253f531ff5dcd99b99af0/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVR42m1Sa2/SYBTm96nxEt0HF7eEDRB2YxMsbLPQG6ytRUkpHZCxcQmXZYw7tGWUDXCAhMtGncv8ZvwJ+gNsqWI0Jid53/PmPM/zPuccDcyPYX6kBsSNXOLkbeN6O9MyHxSXicia7xjMtOjuF7z5GTm7nlUqIYw1f+X8aDdccDCJeTNm9cReLAFbCGtwMCsQo7O4gVAOEyWIG86KNTKBcuOGMjFU6CyYnObXe3i8Uv723e2N+mtDrzB20olQomzBWLQ+UcGIMEZmykpSu4ILnefL2yYbBQaywWo/mKkHi5dIjH9X6mFxwUweEY3/gWVlonX7Eg08W3gV7dyZ7B7D4kY6mceQ9w/mVqlcm4xXllYdYFrE6hMVPPU85YCqg73mrcHJ3LuvpYrdXdd+Plvxn55jqXPtjg+g03S1//CxfsUTc13c/FFWD/kzLlEyEodzWhv39QeIh8TGh7DQx9IX85sky/VS3btHT43rzLFcpjRImDZsBiYaElXtaQEq1v4EYGw4EI2IQzQhPjFAeLRSvJSssA/NtlBlYFPwTFmmUczk23jqzBUuguESnW3avEn7fu7NYcXqpJlg0mj37MiexX89/2o4VO6jcc5KxdYgdos4WrSQm+6DdZjVAR49QJmwEMwNFDEVrMxZ3S1hBMlPtSu0OnCXPkKnbT0Z2fCf6JQlOyH4EcEPcFFSxvkbCfPjn95NnFiHq57XAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/24e3c9ff86c253f531ff5dcd99b99af0/ca1dc/image1.png&apos; srcset=&apos;/static/24e3c9ff86c253f531ff5dcd99b99af0/e7570/image1.png 170w,
/static/24e3c9ff86c253f531ff5dcd99b99af0/f46e7/image1.png 340w,
/static/24e3c9ff86c253f531ff5dcd99b99af0/ca1dc/image1.png 680w,
/static/24e3c9ff86c253f531ff5dcd99b99af0/02d09/image1.png 1020w,
/static/24e3c9ff86c253f531ff5dcd99b99af0/9d567/image1.png 1360w,
/static/24e3c9ff86c253f531ff5dcd99b99af0/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;PostgreSQL에서는 관계형 데이터를 JSON 형식으로 변환하거나 JSON 데이터를 관계형 테이블로 저장할 수 있는 다양한 기능을 제공합니다. 이번 글에서는 JSON 데이터를 생성하고 다루는 세 가지 유용한 함수인 &lt;code class=&quot;language-text&quot;&gt;row_to_json&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;json_agg&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;json_build_object&lt;/code&gt;에 대해 알아보겠습니다.&lt;/p&gt;
&lt;h2&gt;row_to_json&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;row_to_json&lt;/code&gt; 함수는 관계형 데이터의 단일 행(row)을 JSON 객체로 변환합니다. 이 함수는 테이블의 모든 컬럼을 자동으로 JSON 키-값 쌍으로 매핑하므로, 컬럼을 하나씩 지정할 필요가 없어 편리합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; row_to_json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 쿼리는 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt; 테이블에서 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt; 컬럼을 선택하고, 이를 JSON 객체로 변환합니다.&lt;/p&gt;
&lt;h2&gt;json_agg&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;json_agg&lt;/code&gt; 함수는 여러 행을 JSON 배열로 집계합니다. 이 함수는 하위 쿼리에서 생성된 행 집합을 JSON 배열로 반환합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; json_agg&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;row_to_json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 쿼리는 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt; 테이블의 모든 행을 JSON 객체로 변환한 다음, 이러한 JSON 객체들을 JSON 배열로 집계합니다.&lt;/p&gt;
&lt;h2&gt;json_build_object&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;json_build_object&lt;/code&gt; 함수는 키-값 쌍을 입력받아 JSON 객체를 생성합니다. 이 함수는 동적으로 JSON 객체를 구성할 때 유용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; json_build_object&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; email
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 쿼리는 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt; 컬럼 값을 사용하여 JSON 객체를 동적으로 생성합니다.&lt;/p&gt;
&lt;p&gt;이들 함수를 조합하면 더욱 복잡한 JSON 데이터 구조를 생성할 수 있습니다. 예를 들어, 다음 쿼리는 사용자별 주문 내역을 JSON 형식으로 반환합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; json_build_object&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; row_to_json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;u&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;orders&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; json_agg&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;row_to_json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users u
&lt;span class=&quot;token keyword&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; orders o &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id
&lt;span class=&quot;token keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 쿼리는 &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt; 테이블과 &lt;code class=&quot;language-text&quot;&gt;orders&lt;/code&gt; 테이블을 조인하여, 각 사용자의 정보와 해당 사용자의 주문 내역을 JSON 객체로 반환합니다. &lt;code class=&quot;language-text&quot;&gt;row_to_json&lt;/code&gt;은 사용자 정보와 각 주문 정보를 JSON 객체로 변환하고, &lt;code class=&quot;language-text&quot;&gt;json_agg&lt;/code&gt;는 주문 내역을 JSON 배열로 집계합니다. 마지막으로 &lt;code class=&quot;language-text&quot;&gt;json_build_object&lt;/code&gt;는 사용자 정보와 주문 내역 JSON 배열을 포함하는 최종 JSON 객체를 생성합니다.&lt;/p&gt;
&lt;h2&gt;다른 함수들&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;json_object_agg(key, value)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;json_agg&lt;/code&gt; 함수와 유사하지만, 키-값 쌍으로 구성된 JSON 객체를 생성합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_object_agg(id, name) FROM users;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_populate_record(base_record, json)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 데이터를 PostgreSQL 레코드 타입으로 변환합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_populate_record(null::users, &apos;{&quot;id&quot;:1, &quot;name&quot;:&quot;John&quot;}&apos;::json);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_to_record(json)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 데이터를 레코드 타입으로 변환하고, 필드 이름을 키로 사용합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT * FROM json_to_record(&apos;{&quot;id&quot;:1, &quot;name&quot;:&quot;John&quot;}&apos;) AS x(id int, name text);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_array_elements(json)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 배열의 각 요소를 별도의 행으로 반환합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_array_elements(&apos;[1,2,3]&apos;);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_array_elements_text(json)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 배열의 각 요소를 텍스트로 반환합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_array_elements_text(&apos;[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]&apos;);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_extract_path(json, path)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 데이터에서 지정된 경로의 값을 추출합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_extract_path(&apos;{&quot;a&quot;: [1,2,3], &quot;b&quot;: 4}&apos;, &apos;$.a[0]&apos;);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;json_extract_path_text(json, path)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON 데이터에서 지정된 경로의 값을 텍스트로 추출합니다.&lt;/li&gt;
&lt;li&gt;예시: &lt;code class=&quot;language-text&quot;&gt;SELECT json_extract_path_text(&apos;{&quot;a&quot;: [1,2,3], &quot;b&quot;: 4}&apos;, &apos;$.b&apos;);&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;관계형 데이터 조인 vs JSON 데이터 변환&lt;/h2&gt;
&lt;p&gt;관계형 데이터를 클라이언트에게 제공할 때, 데이터를 그대로 조인하여 내려주는 방식과 JSON 형식으로 변환하여 내려주는 방식 중 선택할 수 있습니다. 각 방식의 장단점은 다음과 같습니다.&lt;/p&gt;
&lt;h3&gt;관계형 데이터 조인&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;별도의 데이터 변환 과정이 필요 없어 처리 속도가 빠름&lt;/li&gt;
&lt;li&gt;관계형 데이터베이스의 성능 최적화 기능을 그대로 활용할 수 있음&lt;/li&gt;
&lt;li&gt;클라이언트에서 데이터 구조 변경이 필요 없음&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터베이스 스키마 구조에 따라 데이터 형태가 고정됨&lt;/li&gt;
&lt;li&gt;계층적 데이터 구조를 표현하기 어려움&lt;/li&gt;
&lt;li&gt;클라이언트 측에서 추가 데이터 가공이 필요할 수 있음&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;JSON 데이터 변환&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터 구조를 유연하게 표현할 수 있음&lt;/li&gt;
&lt;li&gt;계층적 데이터 구조를 쉽게 표현 가능&lt;/li&gt;
&lt;li&gt;클라이언트 측에서 추가 데이터 가공이 필요 없음&lt;/li&gt;
&lt;li&gt;다양한 클라이언트(웹, 모바일 앱 등)에 호환 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터 변환 과정에서 추가 처리 비용 발생&lt;/li&gt;
&lt;li&gt;대량 데이터 처리 시 성능 이슈 발생 가능&lt;/li&gt;
&lt;li&gt;데이터베이스 최적화 기능을 활용하기 어려움&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;일반적으로 관계형 데이터를 직접 내려주는 방식이 더 간편하고 성능이 좋습니다. 하지만 데이터 구조가 복잡하거나 다양한 클라이언트에 대응해야 하는 경우, JSON으로 변환하여 내려주는 방식이 유리할 수 있습니다.&lt;/p&gt;
&lt;p&gt;따라서 데이터의 양과 복잡성, 클라이언트 유형, 성능 요구 사항 등을 종합적으로 고려하여 적절한 방식을 선택해야 합니다. 또한 두 가지 방식을 혼합하여 사용할 수도 있습니다. 예를 들어, 대량의 단순 데이터는 관계형 데이터로 내려주고, 복잡한 구조의 데이터는 JSON으로 변환하여 내려주는 식입니다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;이번 글에서는 PostgreSQL에서 관계형 데이터를 JSON으로 변환하는 방법과 관련 함수들에 대해 알아보았습니다. &lt;code class=&quot;language-text&quot;&gt;row_to_json&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;json_agg&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;json_build_object&lt;/code&gt; 등의 함수를 활용하면 간단한 단일 행부터 복잡한 계층적 구조까지 다양한 형태의 JSON 데이터를 생성할 수 있습니다.&lt;/p&gt;
&lt;p&gt;하지만 실제 프로젝트에서는 단순히 JSON 데이터를 생성하는 것 이상의 고려 사항이 있습니다. 먼저 JSON 변환 작업에 따른 성능 오버헤드를 염두에 두어야 합니다. 대량의 데이터를 JSON으로 변환할 경우 성능 이슈가 발생할 수 있으므로, 필요에 따라 적절한 인덱싱이나 파티셔닝 등의 최적화 작업이 수반되어야 합니다.&lt;/p&gt;
&lt;p&gt;또한 JSON 데이터를 활용하는 클라이언트 유형과 요구 사항을 파악하는 것도 중요합니다. 웹 API와 모바일 앱의 요구 사항이 다를 수 있으므로, 클라이언트 측에서 추가 작업이 필요한지 여부를 고려해야 합니다. 이를 위해 프론트엔드 개발자와의 긴밀한 협업이 필수적입니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Postgresql에서 ENUM 타입에서 값 삭제하기]]></title><description><![CDATA[서론 PostgreSQL의 ENUM 타입은 유연성이 제한적이라는 단점이 있습니다. 일단 생성되면 ENUM 타입에 값을 직접 추가하거나 삭제할 수 없기 때문입니다. 하지만 간단한 우회 방법을 통해 ENUM…]]></description><link>https://sharknia.github.io/Postgresql에서-ENUM-타입에서-값-삭제하기/</link><guid isPermaLink="false">https://sharknia.github.io/Postgresql에서-ENUM-타입에서-값-삭제하기/</guid><pubDate>Tue, 19 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/6853fc2c1ff7507cc028f67c44f0807e/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVR42mP4/+s9DL0Dkv9+vv3/99PfP59/fX/75+f7f78//v75/u/fr//+fPr/+wOSYhBiQOH/fAdU9PDxnYcPrj96en/nof3rd+34/OL2lavnnj2///vbazT9CM3/fr77///z5WvnV23ZtOvc5fnrN67atOnm3Zun7t7fd+rkwhVLX7x8+P/v538/cdn8+8Ovj8+279/dunH/kVMn5i9dtHjt6nn7TszZuvvw/u33H9/7/w+i+QMYodj8Hih37cqZtkmTzaNSYyrqM9omuGUUxxRX1re379i15daDu0g2g/QzwFkg0T8f37x+OH3ZUq3QJLekLI+E9OSyquVrV7dMnLxu68a7jyCa36Hb/A9Mfvv65vbLF/XT56p4R6j5RTvGp1d29SaUVsfkl+w7uPfp84f//30Ca0b1M8ja3x9evX+x7vzNurnLjIKirMLjo/JLfRJSSlq7aju79xzcve/IAZx+/vsDGNrf5m3cFFtWk1hQHJWdbxGVXD9rwYKVK9KraosnzT5y/hxQ81+M0H4HtfzPx5sPbm89uL9/zty127ecvnp53oplU5csXbj3yMwtux88BUYVurPfQTTDPQ9MW0An/Pz54fePd3+Ayebft78/3/0Fyv799B9J5/9f7wHIjygdsdv/xAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/6853fc2c1ff7507cc028f67c44f0807e/ca1dc/image1.png&apos; srcset=&apos;/static/6853fc2c1ff7507cc028f67c44f0807e/e7570/image1.png 170w,
/static/6853fc2c1ff7507cc028f67c44f0807e/f46e7/image1.png 340w,
/static/6853fc2c1ff7507cc028f67c44f0807e/ca1dc/image1.png 680w,
/static/6853fc2c1ff7507cc028f67c44f0807e/02d09/image1.png 1020w,
/static/6853fc2c1ff7507cc028f67c44f0807e/9d567/image1.png 1360w,
/static/6853fc2c1ff7507cc028f67c44f0807e/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;PostgreSQL의 ENUM 타입은 유연성이 제한적이라는 단점이 있습니다. 일단 생성되면 ENUM 타입에 값을 직접 추가하거나 삭제할 수 없기 때문입니다. 하지만 간단한 우회 방법을 통해 ENUM 타입 값 삭제가 가능합니다.&lt;/p&gt;
&lt;p&gt;이 포스트에서는 기존에 정의된 ENUM 타입에서 하나의 값만 삭제하는 방법에 대해 알아보겠습니다.&lt;/p&gt;
&lt;h3&gt;시나리오&lt;/h3&gt;
&lt;p&gt;기존에 정의된 &lt;code class=&quot;language-text&quot;&gt;mood&lt;/code&gt; ENUM 타입이 아래와 같이 있다고 가정해봅시다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;sqlCopy codeCREATE &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; mood &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ENUM&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sad&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ok&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;happy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &apos;ok&apos; 값을 삭제하고자 한다면 어떻게 해야할까요?&lt;/p&gt;
&lt;h2&gt;값 삭제 절차&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;새 ENUM 타입 생성&lt;/strong&gt;: 삭제하려는 값을 제외한 새 ENUM 타입을 생성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; mood_new &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ENUM&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sad&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;happy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;컬럼 타입 변경&lt;/strong&gt;: 기존 컬럼의 타입을 새로 생성한 ENUM 타입으로 변경합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; your_table
&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;COLUMN&lt;/span&gt; your_column &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; mood_new
&lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; your_column::&lt;span class=&quot;token keyword&quot;&gt;text&lt;/span&gt;::mood_new&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;기존 ENUM 타입 삭제&lt;/strong&gt;: 기존 ENUM 타입을 DROP 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; mood&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;새 ENUM 이름 변경(옵션)&lt;/strong&gt;: 필요하다면 새 ENUM 타입의 이름을 기존 이름으로 변경할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; mood_new &lt;span class=&quot;token keyword&quot;&gt;RENAME&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TO&lt;/span&gt; mood&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;주의사항&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;삭제하려는 ENUM 값이 기존 데이터에 사용되고 있다면, 이 절차를 진행하기 전에 해당 데이터를 먼저 변경하거나 삭제해야 합니다.&lt;/li&gt;
&lt;li&gt;이 작업은 ENUM 타입을 사용하는 모든 테이블과 뷰에 영향을 미칠 수 있으므로, 실행 전 데이터베이스 백업을 진행하는 것이 안전합니다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[postgresql의 pg_jsonschema]]></title><description><![CDATA[JSON 데이터와 스키마 유효성 검사의 필요성 데이터베이스에서 데이터 무결성을 보장하기 위해서는 데이터에 대한 제약조건을 정의하고 검사하는 것이 필수적입니다. 관계형 데이터베이스에서는 테이블 스키마를 정의하여 열 데이터 타입, NOT NULL…]]></description><link>https://sharknia.github.io/postgresql의-pg_jsonschema/</link><guid isPermaLink="false">https://sharknia.github.io/postgresql의-pg_jsonschema/</guid><pubDate>Mon, 18 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/bffffa9208b950a61b0ee80fec1390d7/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVR42g2RyW8SARSH5/8wetWkUS+eNOnFGE2PRmPixSZ68GIbq1ZjY7eU9oBdaGmlCEwFBso6LKXDPgxD2QsMw1IGZhiWwrC3VROPzuFdXn4v733fA9bANYlJoXXZj0KhQCZ7SleZfp/7c8X2u8N/f4kKRdCV5uWI6fVipbI3nrQEUA1i2TVIBeAqsKnZBm2HfMufJlI0yw768WJOabehifgKePBhc+uH1erAMb0frY9G/LwnkYRRH2jTbUIiYOdQokGszmgsekaVOhzTacF+75ddiQ3HjyPReI5MZjNGr2deoUyWS4VWCyfzjpOwFrGJdRJgzyAz+lxoOpuusu3fl99Eoql1Uapc1mCR5HkzUaf1maInX3ZGw6fUGdPr8FzeZMroc+8bQWDfdMDfHMoXC612Y9QX63TSI6fedXx7TvYqdj5fG9yX+YWQYQNULCmUrauLbKPBq7FiAZkFAviyBYPhQonqdulOGw6dhPO5j4LFW48nFiC70I4+nZp5+3V2CdQsw+7zi0Gu2cKInBXD5BYNIDX/4jfjuWKxzTUGXakTRdLkzMrCtfGH74SiDZXyxeLqs+npWJ6kahW63yHrDZ7RjPqkZiXP/NPgRfwpIlOrs4OeO4xDXq9QsgfcGBtf3vvkcN59vzA5O4tEw1osyPZ7yQrjTpzqPYjEKAdEWjGEwEgkEilSJY7LMHSoUIySxJPJ1zdfvnm+tT7xec7kdmVZJkZTFMed5M9422oE3uFtC5XrMovK5PPwDlNMtTYc1gddpsv5ssmxRw+u37tjCwebF0N20K0NB3yAj5n9HrlF/V21AQjkAv5jKofJGkDRNJGpsimWwfNZSygg1qq3ITWMBzAyk6CpVJXFCNIWxKBjWKzbF8gF/wFXtdlwDUI0dQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/bffffa9208b950a61b0ee80fec1390d7/ca1dc/image1.png&apos; srcset=&apos;/static/bffffa9208b950a61b0ee80fec1390d7/e7570/image1.png 170w,
/static/bffffa9208b950a61b0ee80fec1390d7/f46e7/image1.png 340w,
/static/bffffa9208b950a61b0ee80fec1390d7/ca1dc/image1.png 680w,
/static/bffffa9208b950a61b0ee80fec1390d7/02d09/image1.png 1020w,
/static/bffffa9208b950a61b0ee80fec1390d7/9d567/image1.png 1360w,
/static/bffffa9208b950a61b0ee80fec1390d7/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;JSON 데이터와 스키마 유효성 검사의 필요성&lt;/h2&gt;
&lt;p&gt;데이터베이스에서 데이터 무결성을 보장하기 위해서는 데이터에 대한 제약조건을 정의하고 검사하는 것이 필수적입니다. 관계형 데이터베이스에서는 테이블 스키마를 정의하여 열 데이터 타입, NOT NULL 제약조건 등을 설정할 수 있습니다. 하지만 JSON 데이터 타입의 경우, 스키마가 존재하지 않기 때문에 유연성은 높지만 데이터 무결성 보장이 어렵습니다.&lt;/p&gt;
&lt;p&gt;따라서 JSON 데이터에 대해서도 스키마를 정의하고 유효성 검사를 수행할 수 있다면, 데이터 무결성을 높이고 애플리케이션의 안정성을 향상시킬 수 있습니다. 여기에서 JSON 스키마와 pg_jsonschema 확장 기능이 등장합니다.&lt;/p&gt;
&lt;h2&gt;JSON 스키마란?&lt;/h2&gt;
&lt;p&gt;JSON 스키마는 JSON 데이터의 구조와 형식을 정의하는 스키마입니다. 키-값 쌍의 데이터 타입, 필수 필드, 허용되는 값의 범위 등을 지정할 수 있습니다. JSON 스키마는 JSON 데이터 포맷으로 작성되며, 다양한 규칙과 제약조건을 정의할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, 다음과 같은 JSON 스키마를 정의할 수 있습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;properties&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;string&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;minimum&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;required&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 스키마는 JSON 객체여야 하며, name 필드는 문자열이어야 하고 필수 필드이며, age 필드는 0 이상의 숫자여야 함을 정의합니다.&lt;/p&gt;
&lt;h2&gt;pg_jsonschema 소개&lt;/h2&gt;
&lt;p&gt;pg_jsonschema는 PostgreSQL에서 JSON 데이터에 대한 스키마 유효성 검사를 지원하는 확장 기능입니다. 이 확장 기능을 사용하면 JSON 스키마를 정의하고, 해당 스키마에 따라 JSON 데이터의 유효성을 검사할 수 있습니다. pg_jsonschema는 오픈 소스 프로젝트로, Supabase에서 개발 및 유지보수하고 있습니다.&lt;/p&gt;
&lt;h2&gt;pg_jsonschema의 설치&lt;/h2&gt;
&lt;h3&gt;Supabase의 경우&lt;/h3&gt;
&lt;p&gt;만약 supabase를 사용하고 있다면, 다음의 명령어만으로 간단하게 확장을 활성화 할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; EXTENSION pg_jsonschema&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;만약 supabase가 아니라면 설치가 필요합니다. &lt;/p&gt;
&lt;h3&gt;Supabase가 아닌 경우&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;사전 요구사항&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQL 12 이상 버전&lt;/li&gt;
&lt;li&gt;PostgreSQL 데이터베이스 관리자 권한&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;소스 코드를 다운로드 합니다. pg_jsonschema 소스 코드는 GitHub 저장소에서 다운로드할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/supabase/pg_jsonschema.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;빌드 및 설치 소스 코드 디렉터리로 이동한 후, 다음 명령어를 실행하여 확장 기능을 빌드하고 설치합니다.이 명령은 pg_jsonschema 확장 기능을 PostgreSQL 데이터베이스에 설치합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; pg_jsonschema
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;확장 기능 활성화 PostgreSQL 데이터베이스에 접속한 후, 다음 SQL 문을 실행하여 pg_jsonschema 확장 기능을 활성화합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; EXTENSION pg_jsonschema&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;성공적으로 활성화되면 다음과 같은 메시지가 표시됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;CREATE EXTENSION&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이제 pg_jsonschema 확장 기능을 사용할 수 있게 되었습니다.&lt;/p&gt;
&lt;h2&gt;pg_jsonschema 기능 및 활용&lt;/h2&gt;
&lt;p&gt;pg_jsonschema는 다음과 같은 두 가지 주요 함수를 제공합니다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;json_matches_schema(schema json, instance json)&lt;/code&gt;: JSON 데이터와 JSON 스키마를 입력받아, 해당 데이터가 스키마를 만족하는지 여부를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;jsonb_matches_schema(schema json, instance jsonb)&lt;/code&gt;: JSONB 데이터와 JSON 스키마를 입력받아, 해당 데이터가 스키마를 만족하는지 여부를 반환합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 함수들을 사용하여 PostgreSQL 테이블의 CHECK 제약조건을 정의할 수 있습니다. 예를 들어, 다음과 같이 제약조건을 추가할 수 있습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; users &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    id &lt;span class=&quot;token keyword&quot;&gt;SERIAL&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;data&lt;/span&gt; JSONB &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;CHECK&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jsonb_matches_schema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;schema&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;name&quot;: { &quot;type&quot;: &quot;string&quot; },
                &quot;age&quot;: { &quot;type&quot;: &quot;number&quot;, &quot;minimum&quot;: 0 }
            },
            &quot;required&quot;: [&quot;name&quot;]
        }&apos;&lt;/span&gt;::json&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;data&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 users 테이블의 data 열에 저장되는 JSONB 데이터가 반드시 지정된 스키마를 만족해야 합니다. 스키마를 위반하는 데이터를 INSERT 또는 UPDATE하려고 하면 오류가 발생합니다.&lt;/p&gt;
&lt;h2&gt;pg_jsonschema를 활용한 실제 예제&lt;/h2&gt;
&lt;p&gt;실제 예제를 통해 pg_jsonschema를 어떻게 활용할 수 있는지 살펴보겠습니다. 여기서는 게시물 데이터를 저장하는 posts 테이블을 예로 들겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    id &lt;span class=&quot;token keyword&quot;&gt;SERIAL&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    author_id UUID &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    content JSONB &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;CHECK&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jsonb_matches_schema&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;schema&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;title&quot;: { &quot;type&quot;: &quot;string&quot; },
                &quot;body&quot;: { &quot;type&quot;: &quot;string&quot; },
                &quot;tags&quot;: {
                    &quot;type&quot;: &quot;array&quot;,
                    &quot;items&quot;: { &quot;type&quot;: &quot;string&quot; },
                    &quot;minItems&quot;: 1
                }
            },
            &quot;required&quot;: [&quot;title&quot;, &quot;body&quot;, &quot;tags&quot;]
        }&apos;&lt;/span&gt;::json&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; content
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 테이블에서는 content 열에 JSONB 데이터가 저장되며, 이 데이터는 반드시 title(문자열), body(문자열), tags(문자열 배열, 최소 1개 이상의 항목) 필드를 포함해야 합니다.&lt;/p&gt;
&lt;p&gt;다음과 같이 유효한 데이터를 INSERT할 수 있습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INTO&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;author_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;8c189b74-9865-4e0b-9bfd-a1a6a3e7fcc0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;{ &quot;title&quot;: &quot;Hello, World!&quot;, &quot;body&quot;: &quot;This is my first post.&quot;, &quot;tags&quot;: [&quot;hello&quot;, &quot;world&quot;] }&apos;&lt;/span&gt;::jsonb
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하지만 다음과 같이 스키마를 위반하는 데이터를 INSERT하려고 하면 오류가 발생합니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INTO&lt;/span&gt; posts &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;author_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;8c189b74-9865-4e0b-9bfd-a1a6a3e7fcc0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;{ &quot;title&quot;: 123, &quot;body&quot;: &quot;Invalid data&quot; }&apos;&lt;/span&gt;::jsonb
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- ERROR:  23514: check constraint &quot;posts_content_check&quot; of relation &quot;posts&quot; is violated by some row&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이처럼 pg_jsonschema를 활용하면 PostgreSQL 데이터베이스 내에서 JSON 데이터에 대한 스키마 유효성 검사를 수행할 수 있습니다. 이를 통해 데이터 무결성을 높이고, 잘못된 데이터로 인한 애플리케이션 오류를 방지할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이 글에서는 PostgreSQL 확장 기능인 pg_jsonschema에 대해 알아보았습니다. JSON 데이터의 스키마 유효성 검사 필요성과 JSON 스키마의 개념, pg_jsonschema의 기능과 활용 방법, 실제 예제를 통해 실습해보는 과정을 다루었습니다.&lt;/p&gt;
&lt;p&gt;pg_jsonschema를 사용하면 유연한 JSON 데이터의 장점을 그대로 활용하면서도, 데이터 무결성을 보장할 수 있습니다. 이를 통해 데이터베이스 애플리케이션의 안정성과 신뢰성을 높일 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Postgresql Function, Trigger 생성 쿼리문 확인하기]]></title><description><![CDATA[서론 어떤 함수를 만들었었는지, 어떤 트리거를 만들었었는지가 관리하기가 어렵다고 느낍니다. 현재 개발 상황 상 따로 백엔드 서버도 없는 상황이어서 쿼리문을 관리하려고 합니다.  Supabase Dashboard…]]></description><link>https://sharknia.github.io/Postgresql-Function-Trigger-생성-쿼리문-확인하기/</link><guid isPermaLink="false">https://sharknia.github.io/Postgresql-Function-Trigger-생성-쿼리문-확인하기/</guid><pubDate>Fri, 15 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;어떤 함수를 만들었었는지, 어떤 트리거를 만들었었는지가 관리하기가 어렵다고 느낍니다. 현재 개발 상황 상 따로 백엔드 서버도 없는 상황이어서 쿼리문을 관리하려고 합니다. &lt;/p&gt;
&lt;p&gt;Supabase Dashboard에서도 확인이 가능하긴 하지만, 제한적인 부분이 있어 깔끔하게 쿼리문으로 확인하는 방법을 기록해두려고 합니다. &lt;/p&gt;
&lt;h2&gt;Function 생성 쿼리문 확인하기&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; pg_get_functiondef&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_proc f
&lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_namespace n &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pronamespace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nspname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;스키마명&apos;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;-- 함수가 위치한 스키마명&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;proname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;함수명&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;-- 확인하고 싶은 함수명&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Trigger 생성 쿼리문 확인하기&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; 
    t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tgname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; trigger_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_get_triggerdef&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; trigger_definition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;proname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; trigger_function&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; table_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    n&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nspname &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; schema_name
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; 
    pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_trigger t
    &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_proc p &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tgfoid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid
    &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_class c &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tgrelid &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid
    &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; pg_catalog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_namespace n &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relnamespace &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; 
    c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;relname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;테이블명&apos;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;-- 트리거가 설정된 테이블명&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nspname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;스키마명&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;-- 테이블이 위치한 스키마명&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;뷰 생성 쿼리문 확인하기&lt;/h2&gt;
&lt;p&gt;사실 뷰 생성 쿼리문은 전문을 supabase에서 확인할 수 있습니다. 근데 그냥 서비스로 같이 기록합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; pg_get_viewdef&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&quot;스키마명&quot;.&quot;뷰명&quot;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Supabase EdgeFunction  - Deno 개발환경 꾸미기]]></title><description><![CDATA[개요 Edge function을 열심히 개발하고 있었는데, 코드 자동완성이나 줄바꿈이나 이런것들이 적용되지 않았습니다.  Edge function은 Deno…]]></description><link>https://sharknia.github.io/Supabase-EdgeFunction---Deno-개발환경-꾸미기/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase-EdgeFunction---Deno-개발환경-꾸미기/</guid><pubDate>Thu, 14 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e3a5c6869b825a7dbb0b935dff823dba/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACa0lEQVR42mMQVNITVNIVAiJlAyFlfSApqWMtZ+ggqGYuqWurYuEmomklqWMjpWPFK68NUqBiIATSAkIMgkr6IM3KQP16AkoGVr4xcQW1Homls5ZvLGqZ4h5f0jdnBZDhl1qRUFAjrmnOr6gLMkJJT0hJn0FAGahZT0hZj19Bx9Q30Tep0N4/KqN+8uptexunLs1rnnrs/LW6yYsre2Yv3rDTNiRNUAXkQGGQG/UZQCwVfT55LVUrr8jClsz6iZV981pnrW6ZtqRj1ooJC9bU9s1qmbG8bvKSrLq+zMapWg6B/HKawmDLwZqV9QQVdV1i8is6Z1T3L1i243hD96T4zJyo1OyQhPTIlKzu6fNW7TpW0NCdWdvjl1bFJ68tDPYmA9gMXSFVw5Cc+toJ8xZu2HP+5qOyxg47r4Cyps7Ktn5DB/fG7sknLt9ds/vY1JU7oopbhVWNwAEMcbaSHp+CTkBmzfTVuyqaO3YfPtk0YXpgbKpXRGJgfLpHWGzHlLnnrj+o65rYNGWhX0Y1vwIwjPSBnmcA2g50Np+cpp5rRN2U5d7RadOXrH/y4tWK9Ztq2nubeiau2bT13qMnmw6cKWufUtQ5W8ctik9OCxSvEM2geFPUEVU3CcyoKmyb3jtn+dGTp9Zv2+UZFucTmbB2y47DJ041TJjTNm1xdH69uLaVoIIOMHbAAQbWDHSGgKKujJ6Ne3xBaE5dQHp5aE5tYnFjclkTkOGRUAw01yuxSN7YCWgNWCcoXQE160NSDFA/v4K2mLqJuo03MD50nYKsfWPcIlJ1HAJ0HAO1bH3FNc345XVAvlUGpyslPQB+pNyaDQ8c2AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/e3a5c6869b825a7dbb0b935dff823dba/ca1dc/image1.png&apos; srcset=&apos;/static/e3a5c6869b825a7dbb0b935dff823dba/e7570/image1.png 170w,
/static/e3a5c6869b825a7dbb0b935dff823dba/f46e7/image1.png 340w,
/static/e3a5c6869b825a7dbb0b935dff823dba/ca1dc/image1.png 680w,
/static/e3a5c6869b825a7dbb0b935dff823dba/02d09/image1.png 1020w,
/static/e3a5c6869b825a7dbb0b935dff823dba/9d567/image1.png 1360w,
/static/e3a5c6869b825a7dbb0b935dff823dba/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;Edge function을 열심히 개발하고 있었는데, 코드 자동완성이나 줄바꿈이나 이런것들이 적용되지 않았습니다. &lt;/p&gt;
&lt;p&gt;Edge function은 Deno를 사용하는데, 이것때문인 것 같긴 했는데 짬이 안나 살펴보지 못하다가 이제서야 살펴보니, 뭔가를 하지 않아서였습니다. &lt;/p&gt;
&lt;h2&gt;Deno 설치&lt;/h2&gt;
&lt;p&gt;정말 당연하게도 Deno를 먼저 설치해야 합니다. 이런것도 하지 않고 개발을 하고 있었습니다.. 맥 기준으로 설치 방법을 정리하겠습니다. &lt;/p&gt;
&lt;h3&gt;Deno 설치&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 통해 설치 여부를 먼저 확인해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;deno &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 되어있지 않다면 설치를 진행합니다. &lt;a href=&quot;https://docs.deno.com/runtime/manual&quot;&gt;공식사이트&lt;/a&gt;에서 자세한 설치법을 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-fsSL&lt;/span&gt; https://deno.land/install.sh &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 이용해 설치를 해줍니다. &lt;/p&gt;
&lt;p&gt;그 다음, ~/.zshrc 를 수정해 환경변수에 deno 실행 명령어를 등록합니다. &lt;/p&gt;
&lt;h3&gt;Deno VS Code 확장 설치&lt;/h3&gt;
&lt;p&gt;vscode를 사용하고 있으므로 deno 확장을 설치해줍니다. &lt;/p&gt;
&lt;h3&gt;Deno 확장 활성화 및 설정&lt;/h3&gt;
&lt;p&gt;확장 설치 후, Deno를 사용할 프로젝트 폴더에 대해 Deno 확장을 활성화해야 합니다. 프로젝트의 루트 디렉토리에 &lt;code class=&quot;language-text&quot;&gt;.vscode&lt;/code&gt; 폴더를 생성하고, 그 안에 &lt;code class=&quot;language-text&quot;&gt;settings.json&lt;/code&gt; 파일을 만들어 다음 설정을 추가합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;deno.enable&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;deno.lint&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;deno.unstable&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지 해주고 vs code를 재실행하면 이제 개발환경이 잘 꾸며진 것을 확인할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;오류&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Uncached or missing remote URL&lt;/code&gt; 오류가 발생할때가 있습니다. 이 오류는 지정된 URL에서 모듈을 캐시할 수 없거나 URL이 잘못되었을 때 발생합니다. 이 오류는 Deno가 모듈을 다운로드하고 캐싱하는 방식과 관련이 있습니다. 오류 메시지는 &lt;code class=&quot;language-text&quot;&gt;https://esm.sh/@supabase/supabase-js@2&lt;/code&gt;로 지정된 모듈을 Deno가 찾지 못했거나 캐시하지 못했다는 것을 나타냅니다. &lt;/p&gt;
&lt;h3&gt;해결법&lt;/h3&gt;
&lt;p&gt;Deno는 모듈을 한 번 다운로드하면 로컬에 캐시합니다. 캐시된 모듈이 문제를 일으킬 수 있으므로, 모듈 캐시를 강제로 업데이트해 볼 수 있습니다. 다음 명령어를 사용하여 모듈을 강제로 캐시에서 업데이트하고 다시 로드할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;deno cache &lt;span class=&quot;token parameter variable&quot;&gt;--reload&lt;/span&gt; https://esm.sh/@supabase/supabase-js@2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;캐시 초기화&lt;/h3&gt;
&lt;p&gt;외부 모듈이 자동으로 캐시되지 않거나 오래된 버전의 캐시가 문제를 일으킬 수 있습니다. Deno 캐시를 갱신하려면, 터미널에서 &lt;code class=&quot;language-text&quot;&gt;deno cache --reload&lt;/code&gt; 명령어를 사용할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Supabase CLI db migration 이력 초기화하기]]></title><description><![CDATA[서론 supabase에는 DB 마이그레이션 기능이 있어, 연결된 프로젝트의 스키마를 그대로 로컬 supabase DB…]]></description><link>https://sharknia.github.io/Supabase-CLI-db-migration-이력-초기화하기/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase-CLI-db-migration-이력-초기화하기/</guid><pubDate>Thu, 14 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;supabase에는 DB 마이그레이션 기능이 있어, 연결된 프로젝트의 스키마를 그대로 로컬 supabase DB에 적용할 수 있습니다. 버전관리도 가능합니다. &lt;/p&gt;
&lt;p&gt;근데 이것도 완벽한 기능은 아니어서, 꼬일때가 있고 그래서 다시 마이그레이션을 실행해야 할 수도 있습니다. 그 방법을 기록합니다. &lt;/p&gt;
&lt;h2&gt;마이그레이션 기록 초기화하기&lt;/h2&gt;
&lt;h3&gt;로컬 마이그레이션 파일 삭제&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 입력해 로컬 마이그레이션 파일들을 삭제합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; supabase/migrations/*&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;마이그레이션 기록 삭제&lt;/h3&gt;
&lt;p&gt;기록을 하나하나 reverted 해줘야 합니다. &lt;code class=&quot;language-text&quot;&gt;supabase migration list&lt;/code&gt; 명령어로 초기화 할 마이그레이션 리스트와 REMOTE 키값을 확인합니다. &lt;/p&gt;
&lt;p&gt;다음의 명령어로 한땀 한땀 삭제합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;supabase migration repair &lt;span class=&quot;token parameter variable&quot;&gt;--status&lt;/span&gt; reverted &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;키값&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 모든 기록을 삭제 후, &lt;code class=&quot;language-text&quot;&gt;supabase db pull&lt;/code&gt; 을 실행해 다시 DB를 덤프하면 됩니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Supabase Local 개발 환경 꾸미기 - DB 세팅]]></title><description><![CDATA[개요 지난 시간에 Egde Function을 만들어서 배포하는 것까지 진행해봤습니다. 하지만 저기서 끝낸다면 로컬에 DB가 없으므로 DB에 접근을 필요로 하는 Edge Function…]]></description><link>https://sharknia.github.io/Supabase-Local-개발-환경-꾸미기---DB-세팅/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase-Local-개발-환경-꾸미기---DB-세팅/</guid><pubDate>Wed, 13 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/152c2bb9c5f2591e1bf22e1a25800d4a/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ABQpSxIyVQ87YAxGbApUfQ90nh+XviipzUTO6EW/10rF3DrE4SqpyxqNtwpqlgpWfwxIbg89YhIyVhUpSwAULlEQOV0LRm0JWIEVgakvpspIrsOG8vR9zNILSGY9pLR61txXwdE3sMszsdEXgqwJW4YLR20ROV0VLlEAEjFVDUFnCVN7DXejKYWkKV9wHl5znNHVTZ2vJr7TedXdhKmxdK23QpKiPY6jKY+xE3+pCFV/DUJnEjJWABA3WgpNdApqlSOhyC9thQddbiugtbPZ136zuWGOmCJIY3KVok2Vq364wCyHohNacyacwQtvmwpMcxA4XAAPO2AJV4EWjbgmi6ogbYVcsr+O5OdhfYwMM08aSl8NWHZXi5wLWG9puL5Tt8sNfZ06vNgWibQKWIEQPWIAD0BlCmCLIqDHTsPSZaStV4CSd6SvOWF2El14KYScGJq6DWOEF2d6GImdmdPXQ3+VKJGsIaDICmCKD0FlAA8/YwpiiySmzFTG1BxhfwxZdHmmrUmAkQx1lByQsBONryJ3jyBbbni5u7vi3lmqtTKTqSKgyAphiw9AZQAQO18LW4Qblr8wnLgVX38aepii09g/gZodaIQ1c4lglaVHna58srXK4tWv4Nmv6+tbu9ERjbgMW4QRPGAAEjZZDE11FHumHHWZFz5aDTxbQp60hLG3V4GMTau7Y7XCtuTcndTWM4+nFVZud5OdQZy5DHejDUxyEjdZABQwUw8+ZAxYgRqEriuLrSx7lk2TpWC0vaTPxy15iIaxsZvNyVqgqlKVqh1hfxhniRp/pg1YgA88YBQwUwAVKkwSNVgOP2QMTXURcJwnmsQlgKYslbNZyNoxs8dcz91UvNUgfqAui60nm8MVeKINUnoNP2QRNFgVK00sNRrs1cLQjwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/152c2bb9c5f2591e1bf22e1a25800d4a/ca1dc/image1.png&apos; srcset=&apos;/static/152c2bb9c5f2591e1bf22e1a25800d4a/e7570/image1.png 170w,
/static/152c2bb9c5f2591e1bf22e1a25800d4a/f46e7/image1.png 340w,
/static/152c2bb9c5f2591e1bf22e1a25800d4a/ca1dc/image1.png 680w,
/static/152c2bb9c5f2591e1bf22e1a25800d4a/02d09/image1.png 1020w,
/static/152c2bb9c5f2591e1bf22e1a25800d4a/9d567/image1.png 1360w,
/static/152c2bb9c5f2591e1bf22e1a25800d4a/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Supabase-Local-Dev-%ED%99%98%EA%B2%BD-%EA%BE%B8%EB%AF%B8%EA%B8%B0&quot;&gt;지난 시간&lt;/a&gt;에 Egde Function을 만들어서 배포하는 것까지 진행해봤습니다. 하지만 저기서 끝낸다면 로컬에 DB가 없으므로 DB에 접근을 필요로 하는 Edge Function은 로컬에서의 정상적인 테스트가 불가능합니다. &lt;/p&gt;
&lt;p&gt;따라서 이번에는 테스트에 필요한 환경을 구성하는 방법을 정리합니다. &lt;/p&gt;
&lt;h2&gt;사전 작업&lt;/h2&gt;
&lt;p&gt;테스트를 한다는 것은 실제 개발 또는 Production 서버와 같은 환경을 꾸며야 한다는 것이고, 이는 데이터나 스키마가 동일해야 한다는 것으로, 현재로서는 개발 환경 프로젝트와 동일한 DB 환경을 꾸미는 것을 목표로 합니다. 따라서, &lt;code class=&quot;language-text&quot;&gt;supabase link ..&lt;/code&gt; 작업까지는 완료가 되어있어야 합니다. &lt;/p&gt;
&lt;h2&gt;DB 스키마 맞추기&lt;/h2&gt;
&lt;h3&gt;supabase db pull&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 통해 연결된 프로젝트의 스키마를 모두 생성하는 쿼리문을 생성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;supabase db pull &lt;span class=&quot;token parameter variable&quot;&gt;--linked&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 supbase/migrations 디렉토리 안에 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;timestamp&gt;_remote_schema.sql&lt;/code&gt; 꼴의 쿼리문 파일이 생성됩니다. 해당 쿼리문은 자동으로 실행되지는 않으며, 직접 쿼리문을 실행해줘야 합니다. &lt;/p&gt;
&lt;p&gt;초기 설정 이후에는 &lt;code class=&quot;language-text&quot;&gt;supabase db pull --linked&lt;/code&gt;를 실행하면 변경된 사항만 자동으로 쿼리문을 생성합니다. 스키마를 지정해 특정 스키마만 pull 할 수도 있습니다. &lt;/p&gt;
&lt;p&gt;로컬에서 DB가 돌게 되므로, 대시보드는 없지만 pgAdmin등을 통해 로컬 DB에도 연결할 수 있습니다. 연결 정보가 생각나지 않는다면 &lt;code class=&quot;language-text&quot;&gt;supabase status&lt;/code&gt; 명령어를 통해 다시 확인할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;supabase migration&lt;/h3&gt;
&lt;p&gt;버전 관리 기능도 갖추고 있습니다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;supabase migration list : 마이그레이션 상태를 확인합니다. &lt;/li&gt;
&lt;li&gt;supabase migration up : 보류 중인 마이그레이션을 로컬 데이터베이스에 적용합니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;supabase db reset&lt;/h3&gt;
&lt;p&gt;여기까지 해두면, supabase db reset을 할 때마다 데이터베이스를 지웠다가 스키마를 다시 생성합니다. 언제든지 초기 상태로 돌아올 수 있습니다. &lt;/p&gt;
&lt;h2&gt;테스트 데이터 맞추기&lt;/h2&gt;
&lt;p&gt;원활한 테스트를 위해서는 스키마는 물론이고 테스트 데이터도 들어있어야 합니다. db reset를 할 때마다 테스트 데이터를 넣기가 여간 번거로운 일이 아닐텐데, seed.sql 파일에 insert 구문을 미리 작성해두면 db reset에서 데이터베이스 삭제 후, migration 쿼리문을 통해 스키마를 맞춘 후 seed.sql의 insert 구문을 실행해 테스트 데이터까지 삽입한 깔끔한 테스팅 상태로 맞춰줍니다. &lt;/p&gt;
&lt;h2&gt;참고&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/cli/local-development&quot;&gt;https://supabase.com/docs/guides/cli/local-development&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/reference/cli/supabase-db-pull&quot;&gt;https://supabase.com/docs/reference/cli/supabase-db-pull&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/cli/seeding-your-database&quot;&gt;https://supabase.com/docs/guides/cli/seeding-your-database&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Supabase와 Row-Level Security (RLS) ]]></title><description><![CDATA[Row-Level Security (RLS) 란? Row-Level Security (RLS)는 데이터베이스 시스템에서 제공하는 보안 기능 중 하나로, 데이터베이스의 각 행(row)에 대한 접근을 제어하는 세밀한 방법을 제공합니다. RLS…]]></description><link>https://sharknia.github.io/Supabase와-Row-Level-Security-RLS/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase와-Row-Level-Security-RLS/</guid><pubDate>Tue, 12 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/723a1b2259ca35d62aed131c5ab01ec9/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AA1BcQ5Aag4+ZQ48YBA8Xww3VRA7XCJYiS1qqC1rrC1srCtnoyFUgw44Vww0UQ44Vg44Vg46XA8+YRBAaQAkWYYiVn8iVHsjVHkfUHMpXohAgLwzdLEnYpMgWIQjWoUmYJEzc7A7ercmWH4eS2kgTm8hT3EkU3YmVnsAPnOgOW6YOGuTNGaOOm+aTIzGOHGeK15+LV58N2V8NGN7L2B8KFt7NW6cSIjANmeNMmCDNmWJOWmNPm+WAF+VxleLuFCDrkx+qluXzkaArEFzkkZ2j0VzhTZnfThofkdziER1jT1uikR9q1aRxUd2mkx9o1OFrF2RvACDvPJ0rN5nnMlons5modJTh6lXiKNYhJZKd4g1Z343Z35PeopVgJFRf5dLfJxjncxilb9hk7ltos+At+kAtev/mc/8grjngbnocqjQZ5ixY5KlZI6cNmiBJlt6Jlp4QHCFZ5CcX4yfXYykbqTJe7Hdea3XjsT0ruL/ANv//7nt/5fM95LI8Xuv0HOhtHWeq3ScpCNVcgI1XQE1XDVlfnefp3ScqG6aq3eqyIvC6Y/E7q7j/9X9/wDz///S/f+q4Pye0/eMvtiBrbiErLKKsLIsVW0JMFAKMVFCanyMs7SBqrB+qrSLvtWZz/Cj2PnJ+P/t//8AzfT/uez+pdryndDlksPQhbG5gay0g6yzJ0lfDCpDDChCPmBzha2zf6mvgq2zk8POmsvdoNTrsej8yPP/AFSZzlaTv1ySsWCSqF6Nn12Kl1qFkVV+ikpueUNmb0FlcElwfFR8iVmCi1qFjl6KllyMnlaLpVGMs06SwwAUWJMXWIwbWoceWoQiW4AmXXspXXgrXXYtX3YuYHYuYHYtX3UqXHQnW3UkWncgV3gcVXoaVHwWVH8TVIYQ9UGsZqHSMgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/723a1b2259ca35d62aed131c5ab01ec9/ca1dc/image1.png&apos; srcset=&apos;/static/723a1b2259ca35d62aed131c5ab01ec9/e7570/image1.png 170w,
/static/723a1b2259ca35d62aed131c5ab01ec9/f46e7/image1.png 340w,
/static/723a1b2259ca35d62aed131c5ab01ec9/ca1dc/image1.png 680w,
/static/723a1b2259ca35d62aed131c5ab01ec9/02d09/image1.png 1020w,
/static/723a1b2259ca35d62aed131c5ab01ec9/9d567/image1.png 1360w,
/static/723a1b2259ca35d62aed131c5ab01ec9/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Row-Level Security (RLS) 란?&lt;/h2&gt;
&lt;p&gt;Row-Level Security (RLS)는 데이터베이스 시스템에서 제공하는 보안 기능 중 하나로, 데이터베이스의 각 행(row)에 대한 접근을 제어하는 세밀한 방법을 제공합니다. RLS를 사용하면 데이터베이스 사용자나 응용 프로그램이 특정 조건을 만족하는 행에만 접근하거나 그러한 행을 변경할 수 있도록 정책을 설정할 수 있습니다. 이는 사용자별 데이터 접근 제한, 다중 사용자 환경에서의 데이터 격리, 그리고 민감한 정보의 보호와 같은 목적을 위해 중요합니다.&lt;/p&gt;
&lt;h3&gt;특징&lt;/h3&gt;
&lt;h4&gt;세밀한 접근 제어&lt;/h4&gt;
&lt;p&gt;RLS는 사용자 또는 사용자 그룹별로 데이터베이스 행에 대한 접근 권한을 설정할 수 있게 해줍니다. 이를 통해 특정 데이터에 대한 접근을 정밀하게 제한할 수 있습니다.&lt;/p&gt;
&lt;h4&gt;정책 기반 보안&lt;/h4&gt;
&lt;p&gt;RLS는 데이터베이스 레벨에서 정책(policy)을 정의하여 작동합니다. 이 정책들은 데이터에 대한 &lt;code class=&quot;language-text&quot;&gt;SELECT&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;INSERT&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;UPDATE&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt;와 같은 작업 수행 시 적용되어, 해당 작업이 정책에 정의된 규칙을 충족시킬 때만 수행될 수 있습니다.&lt;/p&gt;
&lt;h4&gt;투명성&lt;/h4&gt;
&lt;p&gt;RLS는 데이터베이스 시스템 내에서 자동으로 적용되므로, 응용 프로그램 코드를 변경하지 않고도 데이터 접근 제어를 강화할 수 있습니다. 사용자는 자신이 접근 권한을 가진 데이터만 볼 수 있으며, RLS 정책에 의해 접근이 제한된 데이터는 &lt;em&gt;존재하지 않는 것처럼&lt;/em&gt; 처리됩니다.&lt;/p&gt;
&lt;h2&gt;예제 파헤쳐보기&lt;/h2&gt;
&lt;p&gt;먼저 RLS를 하나 설정해보고, 이 구문이 뭘 의미하는지 한 번 살펴보겠습니다. &lt;/p&gt;
&lt;p&gt;우선, 특정 테이블에 대해 RLS를 활성화 해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; my_table &lt;span class=&quot;token keyword&quot;&gt;ENABLE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ROW&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;LEVEL&lt;/span&gt; SECURITY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;특정 조건에 따라 데이터 접근을 제어하는 정책을 추가합니다. 예를 들어, 사용자가 자신의 데이터에만 접근할 수 있도록 하는 정책을 추가할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; POLICY my_policy &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; my_table &lt;span class=&quot;token keyword&quot;&gt;FOR&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; current_user_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러한 방식으로 RLS를 구성함으로써, 데이터베이스 관리자는 데이터의 보안과 무결성을 유지하면서도 필요한 사용자에게 필요한 데이터에 대한 접근을 허용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이는 모든 쿼리에 WHERE 절을 추가하는 것으로 생각하면 좀 더 쉽습니다. 예를 들어 위 정책의 경우, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; my_table
&lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; current_user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; my_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;-- Policy is implicitly added.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 정책이 where 절에 암묵적으로 추가된다고 생각하면 이해하기 쉽습니다. &lt;/p&gt;
&lt;h3&gt;Supabase에서의 RLS&lt;/h3&gt;
&lt;p&gt;좀 더 복잡하고, Supabase에 특화된 예제를 보면 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;create policy &lt;span class=&quot;token string&quot;&gt;&quot;Allow authenticated uploads&quot;&lt;/span&gt;
on storage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; insert
to authenticated
&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; check &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;storage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;foldername&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;uid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;text
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 설정한 정책은 &quot;Allow authenticated uploads&quot;라는 이름으로, &lt;code class=&quot;language-text&quot;&gt;storage.objects&lt;/code&gt; 테이블에 대한 &lt;code class=&quot;language-text&quot;&gt;insert&lt;/code&gt; 작업에 적용됩니다. 이 정책은 다음과 같은 조건을 충족시키는 경우에만 삽입 작업을 허용합니다:&lt;/p&gt;
&lt;p&gt;객체의 이름에서 파생된 폴더 이름 (&lt;code class=&quot;language-text&quot;&gt;storage.foldername(name)&lt;/code&gt; 함수를 통해 추출)의 첫 번째 요소가 현재 인증된 사용자의 ID (&lt;code class=&quot;language-text&quot;&gt;auth.uid()&lt;/code&gt;)와 일치해야 합니다. 이는 사용자가 자신의 고유 폴더에만 파일을 업로드할 수 있도록 제한하는 조건입니다.&lt;/p&gt;
&lt;p&gt;요약하자면, 이 RLS 정책은 인증된 사용자가 &apos;profile_images&apos; 버킷 내에 자신의 사용자 ID에 해당하는 폴더에만 파일을 업로드할 수 있게 합니다.&lt;/p&gt;
&lt;h2&gt;Using과 Check&lt;/h2&gt;
&lt;p&gt;위의 두 예제를 살펴보면 각각 Using과 Check를 사용한 것을 볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;PostgreSQL의 행 수준 보안(Row-Level Security, RLS) 정책을 사용할 때, &lt;code class=&quot;language-text&quot;&gt;WITH CHECK&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt; 절은 서로 다른 목적으로 사용됩니다. 이들의 주요 차이점은 정책이 적용되는 시점과 데이터 조작 작업(DML) 유형에 따라 달라집니다.&lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;WITH CHECK&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;WITH CHECK&lt;/code&gt; 절은 &lt;code class=&quot;language-text&quot;&gt;INSERT&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;UPDATE&lt;/code&gt; 작업에 대해 사용됩니다.&lt;/li&gt;
&lt;li&gt;이 절은 새로운 데이터가 삽입되거나 기존 데이터가 업데이트될 때 적용되어야 하는 조건을 정의합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;WITH CHECK&lt;/code&gt;은 해당 작업이 실행된 후 최종적으로 데이터가 정책에 정의된 조건을 만족하는지 검증합니다. 만약 조건을 만족하지 않는다면, 작업은 거부됩니다.&lt;/li&gt;
&lt;li&gt;예를 들어, 사용자가 자신의 폴더에만 파일을 삽입하거나 업데이트할 수 있도록 제한하는 정책을 설정할 때 사용됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt; 절은 &lt;code class=&quot;language-text&quot;&gt;SELECT&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt; 작업에 대해 사용됩니다.&lt;/li&gt;
&lt;li&gt;이 절은 해당 작업을 수행할 때 접근이 허용되는 행을 결정하는 조건을 정의합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;SELECT&lt;/code&gt; 작업에 대해, &lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt; 조건을 만족하는 행만 조회될 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;DELETE&lt;/code&gt; 작업에 대해, &lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt; 조건을 만족하는 행만 삭제될 수 있습니다.&lt;/li&gt;
&lt;li&gt;예를 들어, 사용자가 자신의 폴더에 있는 파일만 조회하거나 삭제할 수 있도록 제한하는 정책을 설정할 때 사용됩니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;예시&lt;/h3&gt;
&lt;p&gt;결론적으로, &lt;code class=&quot;language-text&quot;&gt;WITH CHECK&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;USING&lt;/code&gt;의 차이는 적용되는 데이터 조작 작업의 유형과 해당 조건이 검증되는 시점에 있습니다.&lt;/p&gt;
&lt;h2&gt;Roles&lt;/h2&gt;
&lt;h3&gt;to authenticated&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;to authenticated&lt;/code&gt; 구문은 해당 정책이 인증된 사용자, 즉 로그인한 사용자에게만 적용됨을 의미합니다. Supabase 및 PostgreSQL의 Row-Level Security (RLS) 정책에서는, 특정 데이터베이스 작업(예: 삽입, 조회, 수정, 삭제)에 대한 접근 권한을 세밀하게 제어할 수 있습니다. 여기서 &lt;code class=&quot;language-text&quot;&gt;to authenticated&lt;/code&gt;는 인증 과정을 성공적으로 마친 사용자, 즉 시스템이 식별하고 인증한 사용자에게만 해당 작업을 허용한다는 것을 명시합니다.&lt;/p&gt;
&lt;h3&gt;to anon&lt;/h3&gt;
&lt;p&gt;이와 반대되는 개념으로는 &lt;code class=&quot;language-text&quot;&gt;to anon&lt;/code&gt;이 있습니다. Supabase Auth는 모든 요청을 &lt;code class=&quot;language-text&quot;&gt;authenticated&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;anon&lt;/code&gt; 에 매핑합니다. &lt;code class=&quot;language-text&quot;&gt;authenticated&lt;/code&gt; 이 로그인한 유저라면, anon은 로그인 하지 않은 유저를 의미합니다. &lt;/p&gt;
&lt;h3&gt;예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt; policy &lt;span class=&quot;token string&quot;&gt;&quot;Profiles are viewable by everyone&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; profiles &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; authenticated&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; anon
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- OR&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt; policy &lt;span class=&quot;token string&quot;&gt;&quot;Public profiles are viewable only by authenticated users&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; profiles &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; authenticated
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;“Profiles are viewable by everyone” 정책은 인증된 유저와 인증되지 않은 유저 모두에게 읽기를 허용하며, &quot;Public profiles are viewable only by authenticated users&quot; 정책은 오직 인증된 유저에게만 읽기를 허용합니다. &lt;/p&gt;
&lt;h3&gt;service_role&lt;/h3&gt;
&lt;p&gt;Supabase는 &lt;code class=&quot;language-text&quot;&gt;service_role&lt;/code&gt; 같은 특별한 &quot;서비스&quot; 키를 제공하는데, 이는 RLS를 우회할 수 있어 관리 작업에 유용하나, 클라이언트 사이드나 고객에게 노출되어서는 안 됩니다. 이는 반드시 백엔드 단에서만 사용해야 합니다. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Supbase는 클라이언트 라이브러리가 Service Key로 초기화된 경우에도 서명한 사용자의 RLS 정책을 준수합니다.&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;auth 모듈&lt;/h2&gt;
&lt;h3&gt;auth.uid()&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;auth.uid()&lt;/code&gt;는 현재 인증된 사용자의 고유 식별자(ID)를 반환하는 함수입니다. Supabase는 내부적으로 사용자 인증 시스템을 갖추고 있으며, 사용자가 로그인할 때 각 사용자에게 고유한 ID를 할당합니다. 이 ID는 사용자의 세션 및 인증 정보와 연결되어 있으며, &lt;code class=&quot;language-text&quot;&gt;auth.uid()&lt;/code&gt;를 통해 현재 세션의 사용자 ID를 쉽게 조회할 수 있습니다. 이를 통해 데이터베이스 내에서 사용자별 데이터 접근을 제어하거나 사용자 식별 정보를 기반으로 한 작업을 수행할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, 사용자가 파일을 업로드할 때, &lt;code class=&quot;language-text&quot;&gt;auth.uid()&lt;/code&gt;를 사용하여 해당 파일이 특정 사용자에게 속함을 식별하거나, 사용자별로 데이터를 격리하여 보안을 강화하는 데 활용할 수 있습니다. 사용자가 로그인 상태가 아니라면, &lt;code class=&quot;language-text&quot;&gt;auth.uid()&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;이나 유효하지 않은 값을 반환할 수 있으므로, &lt;code class=&quot;language-text&quot;&gt;to authenticated&lt;/code&gt; 구문과 함께 사용하여 인증된 사용자에게만 특정 작업을 허용하는 방식으로 보안을 관리합니다.&lt;/p&gt;
&lt;h3&gt;auth.jwt()&lt;/h3&gt;
&lt;p&gt;현재 요청을 하는 사용자의 JWT(Json Web Token)를 반환합니다. JWT 내에는 사용자의 &lt;code class=&quot;language-text&quot;&gt;app_metadata&lt;/code&gt; 및 &lt;code class=&quot;language-text&quot;&gt;user_metadata&lt;/code&gt; 컬럼에 저장된 정보가 포함될 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;user_metadata&lt;/code&gt;: 사용자가 &lt;code class=&quot;language-text&quot;&gt;supabase.auth.update()&lt;/code&gt; 함수를 통해 업데이트할 수 있는 메타데이터입니다. 사용자 관련 정보(예: 선호 설정)를 저장하는 데 적합하지만, 인증 데이터를 저장하기에는 적합하지 않습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;app_metadata&lt;/code&gt;: 사용자가 업데이트할 수 없기 때문에 인증 데이터를 저장하는 데 적합한 메타데이터입니다. 예를 들어, 사용자가 특정 팀에 속해 있는지 여부를 판단하는 데 사용할 수 있는 팀 데이터를 여기에 저장할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt; policy &lt;span class=&quot;token string&quot;&gt;&quot;User is in team&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; my_table
&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; authenticated
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; team_id &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jwt&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;app_metadata&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;teams&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어, 사용자가 어떤 팀에 속해 있는지 확인하는 데 &lt;code class=&quot;language-text&quot;&gt;app_metadata&lt;/code&gt; 내에 저장된 팀 데이터(팀 ID 배열 등)를 사용할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;Supabase에서는 항상 RLS를 사용할 것을 권장하고 있습니다. 만약 모두의 접근이 필요한 경우에도, RLS를 활성화하고 인증된 유저와 인증되지 않은 유저에게 권한을 부여하는 방식을 사용할 것을 권장합니다. &lt;/p&gt;
&lt;h2&gt;참고&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/database/postgres/row-level-security&quot;&gt;https://supabase.com/docs/guides/database/postgres/row-level-security&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Supabase Local Dev 환경 꾸미기]]></title><description><![CDATA[Supabase CLI 설치 우선 supabase CLI를 설치해야 합니다.  제대로 설치가 되면 다음의 명령어를 통해 설치가 된 것을 확인합니다.  login…]]></description><link>https://sharknia.github.io/Supabase-Local-Dev-환경-꾸미기/</link><guid isPermaLink="false">https://sharknia.github.io/Supabase-Local-Dev-환경-꾸미기/</guid><pubDate>Mon, 11 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e3c0c47432605f545dff1780b1f37d46/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ABAfICJJVRVGXBhEVzg4RxsyPRYoLBMaGgkZIBEpMhUxPBAtNBEzQRdSbxdggyplfCRmiAg9aQwnOQwTEgAZKCk6ZWsnY28nXW5FOT8tSlcuREQiND0oVGUjTVkbSFgufqEVSmIgW3IhXHI1anQpXG4NPF0NMEQQHR4AJSYkbX95V3VrX3pzYFtWhXBrcWFaTU5bX5+4RpGrQ4WYT6CuMm58OFNOHS4jNlFKP15WMUtQKEZMOEQ9ACQkH4F7ZXl7YpJ8W7qEZfHIo92ZjpWFpF2qyjSStUSMqkhrZF9/cFJrVENhS12Jhm+cmGN+cGd3bFRLOAAbFhBCMR9aRS1/Si+xQiHzq4TPn7Ffd52G5flez+grrdsve5hZZ1F+fllcZk1jhnxTeXBJUz5kVjhIQjIAHxsTUT4pRCoTYiAPkC4I6LCQmlpXHzRGabvTXb7aP6jQVo2ke1NHLz8zLT81XGpnOEtJHT0+MUxPEyQkACAeFVQ/JDEoDUw4C8S4geGtkEIHABgeJkhhc198jVN0gjNCPVMvHTIrHSNFPittfB5ndS1TXD1mchAlKQAWHRIuPBg/TyWdp4Tjqo2oSCgjFQwNGyEhKjVuPi82LSEFEQ8TMTAYOzsNJCkgaXcsoLVOhY1QU04LHR8AExYLMzoddn9qkYh2bks3UlZKQkk6Li0bOjknSEMrJiccAwgFM11gN36OFE5nMX2dMoeoIWeCFT1KDhQSABYoKDpTT1FyckVoa2mLl5V8e35IMk41KzFBPzM6MyQnHgoOChszMx5Xaw5FaBNQdyRymhZbgg01Sw0UEwAIJ0ELJzUSLjQcTFs+a4aAeI13RE8lOkoZSFgNJzEMGh4LFRgKERIIGCAFFyYGMVQVVHgMMUgIGycLFxrLIcbrH8e15QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/e3c0c47432605f545dff1780b1f37d46/ca1dc/image1.png&apos; srcset=&apos;/static/e3c0c47432605f545dff1780b1f37d46/e7570/image1.png 170w,
/static/e3c0c47432605f545dff1780b1f37d46/f46e7/image1.png 340w,
/static/e3c0c47432605f545dff1780b1f37d46/ca1dc/image1.png 680w,
/static/e3c0c47432605f545dff1780b1f37d46/02d09/image1.png 1020w,
/static/e3c0c47432605f545dff1780b1f37d46/9d567/image1.png 1360w,
/static/e3c0c47432605f545dff1780b1f37d46/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Supabase CLI 설치&lt;/h2&gt;
&lt;p&gt;우선 supabase CLI를 설치해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; supabase/tap/supabase&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;제대로 설치가 되면 다음의 명령어를 통해 설치가 된 것을 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase &lt;span class=&quot;token builtin class-name&quot;&gt;help&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;login을 진행합니다. 터미널의 다음의 명령어를 입력한 후, 로그인은 웹에서 이뤄집니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase login&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Project를 연결해야 합니다. 먼저 다음의 명령어를 통해 프로젝트 리스트를 확인합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase projects list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같은 결과가 출력됩니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;    LINKED │        ORG ID        │     REFERENCE ID     │   NAME   │         REGION         │  CREATED AT &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UTC&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  ─────────┼──────────────────────┼──────────────────────┼──────────┼────────────────────────┼──────────────────────
           │ &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ORG ID        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;     │ &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;REFERENCE ID     &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;  │ &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;NAME&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;   │ Northeast Asia &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Seoul&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; │ &lt;span class=&quot;token number&quot;&gt;2024&lt;/span&gt;-02-17 04:10:12&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 중에서 REFERENCE ID를 사용해 project에 연결할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase &lt;span class=&quot;token function&quot;&gt;link&lt;/span&gt; --project-ref &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;REFERENCE ID&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;참고&lt;/h4&gt;
&lt;h2&gt;Edge Function 로컬에서 개발하기&lt;/h2&gt;
&lt;p&gt;로컬에 supabase project를 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음의 명령어를 사용하면 예제 Edge function을 만들 수 있습니다. 이 명령어는 함수를 로컬에 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions new hello-world&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같은 구조로 Edge Function이 생성됩니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;└── supabase
    ├── functions
    │   └── hello-world
    │   │   └── index.ts &lt;span class=&quot;token comment&quot;&gt;## Your function code&lt;/span&gt;
    └── config.toml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;예제 코드&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;Deno&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;serve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    message&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Hello &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; headers&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string-property property&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Edge Function은 native Deno.serve를 사용합니다. &lt;/p&gt;
&lt;h2&gt;Edge Function 로컬에서 실행하기&lt;/h2&gt;
&lt;p&gt;start 명령어를 사용하면, 도커를 이용해서 로컬에서 supabase service를 실행할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase start&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;성공적으로 실행되면 다음과 같은 내용이 출력됩니다. 해당 내용은 &lt;code class=&quot;language-text&quot;&gt;supabase status&lt;/code&gt; 명령어를 사용해 다시 볼 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;Started supabase &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; development setup.

         API URL: http://localhost:54321
          DB URL: postgresql://postgres:postgres@localhost:54322/postgres
      Studio URL: http://localhost:54323
    Inbucket URL: http://localhost:54324
        anon key: eyJh&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;
service_role key: eyJh&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;supabase stop&lt;/code&gt; 명령을 사용하여 로컬 데이터베이스를 재설정하지 않고 언제든지 모든 서비스를 중지할 수 있습니다. 또한 &lt;code class=&quot;language-text&quot;&gt;supabase stop --no-backup&lt;/code&gt;을 사용하여 모든 서비스를 중지하고 로컬 데이터베이스를 재설정할 수 있습니다.&lt;/p&gt;
&lt;p&gt;다음의 명령어를 사용해 Function Watcher를 실행합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions serve&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어는 hot-reloading 기능을 가지고 있어 코드에 수정이 생기면 Deno server를 자동으로 재시작합니다. &lt;/p&gt;
&lt;p&gt;여기까지 마친 후, 다음의 명령어를 통해 방금 만든 Edge Function을 실행해볼 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--request&lt;/span&gt; POST &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:54321/functions/v1/hello-world&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--header&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Authorization: Bearer SUPABASE_ANON_KEY&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--header&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Content-Type: application/json&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--data&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{ &quot;name&quot;:&quot;Functions&quot; }&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SUPABASE_ANON_KEY는 start 이후 생성된 anon key를 사용하면 됩니다. 성공적으로 실행되면 다음과 같은 문구를 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello Functions!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Edge Function 배포하기&lt;/h2&gt;
&lt;p&gt;기본적인 배포는 다음의 명령어를 사용합니다. 모든 Edge Function을 배포합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;특정 Edge function만 배포할 수도 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions deploy hello-world&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본적으로 Edge Function은 JWT 토큰이 필수입니다. 토큰이 필요없는 Edge function을 만들기 위해서는 &lt;code class=&quot;language-text&quot;&gt;--no-verify-jwt&lt;/code&gt; 옵션을 사용합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions deploy hello-world --no-verify-jwt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배포가 성공적으로 이뤄지면 supabase 대쉬보드에서도 이를 확인할 수 있습니다. &lt;/p&gt;
&lt;p&gt;다음의 명령어를 사용해 방금 배포한 Edge Function을 테스트 해볼 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--request&lt;/span&gt; POST &lt;span class=&quot;token string&quot;&gt;&apos;https://[REFERENCE ID].supabase.co/functions/v1/hello-world&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--header&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Authorization: Bearer ANON_KEY&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--header&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Content-Type: application/json&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;--data&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{ &quot;name&quot;:&quot;Functions&quot; }&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;--no-verify-jwt&lt;/code&gt; 옵션을 사용한 경우에는 ANON_KEY가 필요 없으며, ANON_KEY는 Supabase 대시보드에서 확인할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;Edge Function 삭제&lt;/h2&gt;
&lt;p&gt;다음의 명령어를 통해 Edge Function을 삭제할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions delete hello-world --project-ref dcrdrguovpqchlptvlqy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;단 이 명령어는 로컬에서는 작동하지 않습니다. 로컬의 함수는 수동으로 삭제하면 됩니다. &lt;/p&gt;
&lt;h2&gt;기타 Edge Function 관련 CLI 명령어&lt;/h2&gt;
&lt;p&gt;function의 리스트를 확인합니다. 이 코드는 연결된 프로젝트의 함수 리스트를 가져옵니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;특정 function을 다운로드 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions download &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Function name&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;공통적으로 &lt;code class=&quot;language-text&quot;&gt;--project-ref&lt;/code&gt; &lt;strong&gt;옵션을 사용해 특정 project를 명시할 수 있습니다.&lt;/strong&gt; &lt;/p&gt;
&lt;h2&gt;Deno 환경에서 supabase client 사용하기&lt;/h2&gt;
&lt;p&gt;Deno 환경에서는 npm을 사용하지 않으므로, supabase client가 필요할 경우 다음의 방법을 사용해 import 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createClient &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://esm.sh/@supabase/supabase-js@2&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또는 import map을 사용할 수 있습니다. &lt;/p&gt;
&lt;p&gt;supabase/functions/import_map.json 파일을 생성 후, 다음의 내용을 입력해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;imports&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;supabase&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://esm.sh/@supabase/supabase-js@2&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;import map을 사용하면 다음과 같이 쉽게 import 할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createClient &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;supabase&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Deno 환경에서 환경변수 사용하기&lt;/h2&gt;
&lt;p&gt;다음의 코드를 사용해 환경변수를 사용할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;Deno&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MY_SECRET_NAME&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;현재 설정되어있는 환경 변수들은 다음의 명령어를 통해 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase secrets list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본적으로 supabase는 4개의 환경 변수를 설정하지 않아도 지원합니다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SUPABASE_URL&lt;/li&gt;
&lt;li&gt;SUPABASE_ANON_KEY&lt;/li&gt;
&lt;li&gt;SUPABASE_SERVICE_ROLE_KEY&lt;/li&gt;
&lt;li&gt;SUPABASE_DB_URL&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;환경변수 추가하기 - 로컬&lt;/h3&gt;
&lt;p&gt;추가적으로 환경변수를 설정해야 할 때가 있습니다. 이 때 다음의 방법을 사용합니다. &lt;/p&gt;
&lt;p&gt;먼저 환경 변수를 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;MY_NAME=Yoda&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; ./supabase/.env.local&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 로컬에서 serve 시에 다음의 옵션값을 함께 줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase functions serve --env-file ./supabase/.env.local&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 로컬에서 MY_NAME 환경 변수를 사용할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;환경변수 추가하기 - 실서버&lt;/h3&gt;
&lt;p&gt;우선 실서버에 적용할 환경변수 파일을 생성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; ./supabase/.env.local ./supabase/.env&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 다음의 명령어를 사용해 환경변수를 등록합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;supabase secrets &lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; --env-file ./supabase/.env

&lt;span class=&quot;token comment&quot;&gt;# You can also set secrets individually using:&lt;/span&gt;
supabase secrets &lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;MY_NAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;Chewbacca&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;참고&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://supabase.com/docs/guides/functions/secrets&quot;&gt;https://supabase.com/docs/guides/functions/secrets&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SQLModel에서 unique_constraints 설정하기]]></title><description><![CDATA[unique_constraints란? 테이블의 특정 컬럼 또는 컬럼의 조합에 대해 유니크 제약조건을 설정하는 데 사용됩니다. 이는 데이터베이스에 동일한 값을 가진 중복 레코드가 없도록 보장하는 데 유용합니다. unique_constraints…]]></description><link>https://sharknia.github.io/SQLModel에서-unique_constraints-설정하기/</link><guid isPermaLink="false">https://sharknia.github.io/SQLModel에서-unique_constraints-설정하기/</guid><pubDate>Tue, 05 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;unique_constraints란?&lt;/h2&gt;
&lt;p&gt;테이블의 특정 컬럼 또는 컬럼의 조합에 대해 유니크 제약조건을 설정하는 데 사용됩니다. 이는 데이터베이스에 동일한 값을 가진 중복 레코드가 없도록 보장하는 데 유용합니다.&lt;/p&gt;
&lt;h2&gt;unique_constraints 설정하기&lt;/h2&gt;
&lt;p&gt;클래스 내부에 &lt;code class=&quot;language-text&quot;&gt;__table_args__&lt;/code&gt; 속성을 정의하고, unique_constraints 튜플을 이 속성에 할당합니다. 이 튜플 내에서, 각 유니크 제약조건은 컬럼 이름을 담은 튜플로 표현됩니다.&lt;/p&gt;
&lt;h3&gt;예시 코드&lt;/h3&gt;
&lt;p&gt;다음은 User 모델에 대해 &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt; 컬럼 조합에 유니크 제약조건을 설정하는 예시입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlmodel &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Field&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SQLModel

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SQLModel&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; table&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Field&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;default&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    username&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;
    email&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;
    
    __table_args__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        UniqueConstraint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;username&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드는 같은 &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;email&lt;/code&gt; 값을 가진 두 개의 &lt;code class=&quot;language-text&quot;&gt;User&lt;/code&gt; 레코드가 데이터베이스에 존재할 수 없음을 의미합니다.&lt;/p&gt;
&lt;h3&gt;주의 사항&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;__table_args__&lt;/code&gt; 는 SQLAlchemy의 기능을 직접 사용합니다. 따라서, SQLModel을 사용할 때 SQLAlchemy에 대한 기본적인 이해가 필요할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Postgresql의 JSON과 JSONB]]></title><description><![CDATA[서론 JSON은 이제는 아주 익숙한 데이터 저장 형식입니다. Postgresql에서는 JSON 타입을 지원해 이 데이터를 효과적으로 다룰 수 있도록 하는데, JSONB…]]></description><link>https://sharknia.github.io/Postgresql의-JSON과-JSONB/</link><guid isPermaLink="false">https://sharknia.github.io/Postgresql의-JSON과-JSONB/</guid><pubDate>Mon, 04 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;JSON은 이제는 아주 익숙한 데이터 저장 형식입니다. Postgresql에서는 JSON 타입을 지원해 이 데이터를 효과적으로 다룰 수 있도록 하는데, JSONB 타입을 또 지원합니다. &lt;/p&gt;
&lt;p&gt;이 두 타입은 저장 방식과 처리 속도, 기능성 측면에서 차이가 있습니다. 각각의 타입은 특정 사용 사례에 더 적합할 수 있으므로, 차이점을 이해하는 것이 중요합니다.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;JSON&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt; 데이터 타입은 입력된 JSON 데이터를 텍스트 기반의 형식으로 저장합니다.&lt;/li&gt;
&lt;li&gt;데이터는 그대로의 형태로 저장되므로, 입력 시점과 동일한 형태로 데이터를 검색할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt; 타입은 JSON 데이터를 분석하거나 조작할 때 마다 원본 텍스트를 해석해야 하므로, &lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;에 비해 연산이 느릴 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt; 형식은 원본 데이터의 형식을 보존하는 것이 중요할 때 유용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;strong&gt;JSONB&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt; 데이터 타입은 JSON 데이터를 바이너리 형식으로 저장합니다. 이는 데이터를 저장하기 전에 처리(분석 및 재구성)하여 저장 공간을 최적화하고, 검색 및 조작 속도를 향상시킵니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 내부적으로 인덱싱이 가능하므로, 큰 데이터 세트에서 검색과 조작이 훨씬 빠릅니다.&lt;/li&gt;
&lt;li&gt;바이너리 형식으로 인해, 데이터를 저장할 때 순서가 변경되거나 중복 키가 제거될 수 있습니다. 따라서, 원본 데이터의 정확한 형식과 순서를 보존하지 않습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 연산자와 함수를 지원하여, 데이터에 대한 복잡한 쿼리를 수행할 수 있게 해줍니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;주요 차이점 요약 및 결론&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;저장 방식:&lt;/strong&gt;  &lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt;은 텍스트 기반으로, &lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 바이너리 형식으로 데이터를 저장합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;처리 속도:&lt;/strong&gt;  &lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 데이터 처리와 쿼리 수행이 더 빠릅니다, 특히 인덱스를 사용할 때.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;공간 효율:&lt;/strong&gt;  &lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 데이터를 최적화하여 저장하기 때문에, 같은 데이터를 &lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt;보다 적은 공간을 사용해 저장할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;기능성:&lt;/strong&gt;  &lt;code class=&quot;language-text&quot;&gt;JSONB&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;JSON&lt;/code&gt;보다 더 많은 연산자와 함수를 지원합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;사용 사례에 따라, 원본 JSON 데이터의 형식과 순서를 정확히 유지할 필요가 있다면 JSON을, 데이터에 대한 빠른 검색과 조작을 필요로 한다면 JSONB를 선택하는 것이 좋습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Geocoder와 Reverse Geocoder]]></title><description><![CDATA[Geocoder와 Reverse Geocoder란? 간단하게 이야기해 주소로 위도와 경도를 얻거나(Geocoder) 위도와 경도로 주소를 얻는(Reverse Geocoder…]]></description><link>https://sharknia.github.io/Geocoder와-Reverse-Geocoder/</link><guid isPermaLink="false">https://sharknia.github.io/Geocoder와-Reverse-Geocoder/</guid><pubDate>Tue, 27 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/363465acb9640730da588ad37d9dc1a6/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AAeizwqYvgqUsxCTrBGToxCWniSgnyqmnj21pVDDrVnHrFK5kjidciyWcyKRdhSMfQqNiAWTkwKgpAGztwACi78Eh7IMhqkOi6YkmqhOrKZXvK6O3dqr+fZo2+9KqLtvwL+T3LdmtH1SpmkuknIYhnULgX4EiY4BmqIAAX+3CH+oEYWhKpysZrGqn7qcidnKxvTyfNXsoOjobquQHVhes9/Qs9+odrZtYL2cP6eQFoN1DYCAA4uUAAN0rA14nRKQpXWVkLeSfXK7m8HoyKnGrzGMlsHbwciDZzmBipi2k97usZPEgoXJtH64sSaKcRF9eAB8hgADbKENeJocj59Dl5BunIWSzqXU68PGyqFCd2HX7cbExsdhwsvN2rPo7rG604ZqpXdOjnI2km4Xe24Ic3kAAmibGH6aIpKfPbGva76torqNx8GK6MeCd39MN4mEPa+8faiZ5taf29eXys1/l8J5YK53NJBuIntpC2xvAAhjmA9+pSONp0uDe26IcJqWc6yoWMm8V97DdzJoYA5aaKrKrczNlsCsVYSdbn+SbGqRbjOHchZ2bgllaAADYZcIcp0ZlLI4m6Njjn6Him+XpmGztUnswoOTmHkuTkmilmx9s5Zvl3xtinVgk35Kkn0pgXQWcmkDZ20AAHuoBn+fEZOkG7TDN8HIVranZapsfqFFqKVpn41SZ1kvblExinVQfaN+ZrqFRK+BIpd3FoZuCntrAIOBAACcuwKcrAihphGnpBWtoy7DtUHHrkurilmKXWF5SGV2P2GNUWavZ2DGfjq2fyKidBeXcQyUdgWXhQGjmgAAu8kCurkGuK0KuKMQuJkVt4wdtX0hsHEoo2MxiE8xik0xrGQ1tGUmsGkbsHYUsH8PsIcJtZQDuqIBwrEYjEdy/fwshwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/363465acb9640730da588ad37d9dc1a6/ca1dc/image1.png&apos; srcset=&apos;/static/363465acb9640730da588ad37d9dc1a6/e7570/image1.png 170w,
/static/363465acb9640730da588ad37d9dc1a6/f46e7/image1.png 340w,
/static/363465acb9640730da588ad37d9dc1a6/ca1dc/image1.png 680w,
/static/363465acb9640730da588ad37d9dc1a6/02d09/image1.png 1020w,
/static/363465acb9640730da588ad37d9dc1a6/9d567/image1.png 1360w,
/static/363465acb9640730da588ad37d9dc1a6/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Geocoder와 Reverse Geocoder란?&lt;/h2&gt;
&lt;p&gt;간단하게 이야기해 주소로 위도와 경도를 얻거나(Geocoder) 위도와 경도로 주소를 얻는(Reverse Geocoder) 것을 의미합니다. &lt;/p&gt;
&lt;h3&gt;왜 필요할까?&lt;/h3&gt;
&lt;p&gt;주소로는 서로간의 거리를 계산하기 힘들기 떄문에 변환이 필요하고, 위도와 경도는 사람이 읽기 힘들기 때문에 다시 주소로 변환이 필요합니다. 이 때 사용하는 기술입니다. &lt;/p&gt;
&lt;h2&gt;geopy&lt;/h2&gt;
&lt;p&gt;파이썬에서 geopy를 사용하면 간단하게 Reverse Geocoder와 Geocoder를 구현해볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;테스트에 앞서 우선 geopy를 설치해줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; geopy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Geocoder 예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;from geopy.geocoders &lt;span class=&quot;token function&quot;&gt;import&lt;/span&gt; Nominatim

&lt;span class=&quot;token comment&quot;&gt;# Nominatim 서비스 초기화 (user_agent 설정 필요)&lt;/span&gt;
geolocator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Nominatim&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_agent&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;geoapiExercises&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 변환하고자 하는 주소&lt;/span&gt;
address &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;서울특별시 중구 세종대로 110&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 주소를 위도와 경도로 변환&lt;/span&gt;
location &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; geolocator.geocode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;address&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; location:
    print&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;((&lt;/span&gt;location.latitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; location.longitude&lt;span class=&quot;token punctuation&quot;&gt;))&lt;/span&gt;&lt;/span&gt;
else:
    print&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;좌표를 찾을 수 없습니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드를 실행하면 해당 주소에 해당하는 좌표(위도와 경도) 값을 얻을 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Reverse Geocoder 예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; geopy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;geocoders &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Nominatim

geolocator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Nominatim&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_agent&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;geoapiExercises&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 예시 좌표, language 인자를 reverse 메소드 호출 시 사용&lt;/span&gt;
location &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; geolocator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;reverse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;37.541578, 126.840436&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exactly_one&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; location&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;address&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;주소를 찾을 수 없습니다. &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;변환된 주소를 얻을 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;강서로, 화곡1동, 강서구, 서울특별시, 07726, 대한민국&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;reerse method에 language를 함께 넣어주면 한글 주소를 얻을 수 있습니다. &lt;/p&gt;
&lt;h3&gt;이외에는?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;geopy&lt;/code&gt;는 지오코딩과 역 지오코딩 외에도 다양한 기능을 제공합니다:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;거리 계산: &lt;code class=&quot;language-text&quot;&gt;geopy.distance&lt;/code&gt;를 사용하면 두 지점(위도와 경도 좌표) 사이의 거리를 계산할 수 있습니다. 여러 가지 거리 계산 방법(예: Vincenty, Great Circle)을 제공합니다.&lt;/li&gt;
&lt;li&gt;다양한 지오코더 지원: &lt;code class=&quot;language-text&quot;&gt;Nominatim&lt;/code&gt; 외에도 &lt;code class=&quot;language-text&quot;&gt;GoogleV3&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Bing&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;OpenCage&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;ArcGIS&lt;/code&gt; 등 다양한 지오코딩 서비스를 지원합니다. 각 서비스마다 특징과 사용 방법이 다를 수 있습니다.&lt;/li&gt;
&lt;li&gt;유연한 API 사용: &lt;code class=&quot;language-text&quot;&gt;geopy&lt;/code&gt;는 사용자가 다양한 외부 지오코딩 서비스에 쉽게 접근할 수 있도록 돕습니다. 이를 통해 개발자는 특정 서비스의 API 제한이나 사용 제한에 구애받지 않고 서비스를 선택할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Nominatim?&lt;/h3&gt;
&lt;p&gt;위의 예시에서는 &lt;code class=&quot;language-text&quot;&gt;Nominatim&lt;/code&gt; 을 사용했습니다. &lt;code class=&quot;language-text&quot;&gt;Nominatim&lt;/code&gt;은 OpenStreetMap 데이터를 기반으로 하는 지리적 위치 조회 서비스로, 공개된 무료 API 이지만 공정한 사용 정책이 걸려있어 실제 서비스에서 사용하기에는 무리가 있습니다. &lt;/p&gt;
&lt;h2&gt;그 밖에 다른 서비스는?&lt;/h2&gt;
&lt;p&gt;그렇다면 상용화를 위해서는 어떤 서비스를 이용해야 할까요? 간략하게 찾아서 정리해봤습니다. 국내에서는 크게 네이버/카카오/구글을 사용할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Naver Map API&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;월 300만건 무료, REST API 지원, 300만개 초과시 건당 0.5원&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.ncloud.com/product/applicationService/maps&quot;&gt;https://www.ncloud.com/product/applicationService/maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://guide.ncloud-docs.com/docs/maps-reversegeocoding-api&quot;&gt;https://guide.ncloud-docs.com/docs/maps-reversegeocoding-api&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Kakao Map API&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;월 300만건, 하루 30만건, 초과 시 협의 필요&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.kakao.com/docs/latest/ko/getting-started/quota&quot;&gt;https://developers.kakao.com/docs/latest/ko/getting-started/quota&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://apis.map.kakao.com/web/documentation/#services_Geocoder&quot;&gt;https://apis.map.kakao.com/web/documentation/#services_Geocoder&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Google Maps Platform&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;10만회 이하 : 1000회당 5달러&lt;/li&gt;
&lt;li&gt;10만회 ~ 50만회 : 1000회당 4달러&lt;/li&gt;
&lt;li&gt;50만회 이상 : 협의&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://mapsplatform.google.com/pricing/?hl=ko&quot;&gt;월간 200달러의 무료 크레딧을 제공합니다.&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://mapsplatform.google.com/pricing/?hl=ko&quot;&gt;https://mapsplatform.google.com/pricing/?hl=ko&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.google.com/maps/documentation/geocoding/usage-and-billing?hl=ko&quot;&gt;https://developers.google.com/maps/documentation/geocoding/usage-and-billing?hl=ko&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Apple Silicon과 pyenv]]></title><description><![CDATA[서론 새로운 프로젝트의 백엔드 언어가 파이썬으로 확정되었습니다. 파이썬 버전은 추후 머신러닝 사용을 감안하여 현재 라이브러리와 가장 호환성이 좋을 것으로 생각되는 3.9버전을 사용하려고 합니다. 다만, 파이썬 3.…]]></description><link>https://sharknia.github.io/Apple-Silicon과-pyenv/</link><guid isPermaLink="false">https://sharknia.github.io/Apple-Silicon과-pyenv/</guid><pubDate>Mon, 26 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/898b7d30f1f8bb709163a72f9441dd68/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AAELAwELAwEKAwAIARkhGx4oJAwaGhcrMCdJVVyCkHWYpFR6hyVFUBcoLhUhIQ0YFAMMBQEKAwELBAELBAACDAUACgMUHBUvNjErMCo6R0gsPD8tREpBX2lhgo1+nqhff4pDX2gnPUMmOUEkLzEhKSUTGxcHDggFDQYABA4HEBcQQEE6U11fMUZIZnyCTmRqP1xlbYyVoL3DqsfMgqCoZ4eQRGRsS2t4VG11SVJVTk1QISIfDhELAAkRCw0TDk1TUoeTmDFKUD1VXWB9hH2ao3+WmoOSlMDJyc3d3pWxt0ZeZUddakFWXWFscFtdYiUkIRMTDQADDAUSFxIoLys+UFNLV1dTXWdreXh5i5JfcnozSloiNUFgb3OEkJRVY2kyR1VBUFU2QkM+P0EfHxwODwgAFBoVNDw4bHVxmZ+ZQ1RWSFZZdYKDXG10hZabjay6hqe3Yn2KWWdsk5WQXF5ZaGNacXNskZGMWFRNLyohAC83M0tVUGZtbqOrrUJWXj9aZlhzfnaMkm+AhC1NXG2Ci6yxsWdxcZKSi52WjGJnaVdob5SUk2BcX0M6MAAkLSs9RT8lLCklNkAtPkc7TFZUY2qLkpFidn9zjpmToaSXpKZkdX1xfodbaXE2QEReYFl4c2tPSkg4MScAEhgVMDg2TllXRlRVNUBATVpcdYuWRFllQk9SeYCAl6GiwMK7kpaTSE9WKDM3NDYvYFxUfHFnSEE7JSAbAAkQCxwhHjU4N0tXVz1OUDNERjdNVDFNWj9ebUtRT4uOiMHAuLCzsU9SUHJ3b2lzcU1MRUpANCMhGQkPBwABCwUCDAQTFxAnLCcgLzAnOj4yQkNJWVhKWFZ9g3u4urLAwbinqJ+Zn5hveHVETEkpLSgqJx0UFg8BCwMq0NcMppcIqwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/898b7d30f1f8bb709163a72f9441dd68/ca1dc/image1.png&apos; srcset=&apos;/static/898b7d30f1f8bb709163a72f9441dd68/e7570/image1.png 170w,
/static/898b7d30f1f8bb709163a72f9441dd68/f46e7/image1.png 340w,
/static/898b7d30f1f8bb709163a72f9441dd68/ca1dc/image1.png 680w,
/static/898b7d30f1f8bb709163a72f9441dd68/02d09/image1.png 1020w,
/static/898b7d30f1f8bb709163a72f9441dd68/9d567/image1.png 1360w,
/static/898b7d30f1f8bb709163a72f9441dd68/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;새로운 프로젝트의 백엔드 언어가 파이썬으로 확정되었습니다. 파이썬 버전은 추후 머신러닝 사용을 감안하여 현재 라이브러리와 가장 호환성이 좋을 것으로 생각되는 3.9버전을 사용하려고 합니다. 다만, 파이썬 3.9는 그다지 최신 버전은 아닙니다. 최근에 타입스크립트를 만지면서 nvm을 좋게 사용한 경험도 있고, 이번에 내친김에 파이썬에서도 버전관리를 해주는 툴인 pyenv를 사용해서 환경을 꾸며보기로 했습니다. &lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;설치는 아주 간단합니다. homebrew는 미리 설치되어 있어야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; pyenv&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pyenv를 설치해주고,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--list&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어를 사용하면 현재 설치 가능한 파이썬 3.9버전의 리스트를 확인할 수 있습니다. 현재 3.9의 최신 버전은 3.9.18로 보입니다. 해당 버전을 설치해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.18&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;간단하게 파이썬이 설치.. 되지 않았습니다! 오류가 납니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c314b473ea139d35439aa72b775a3a18/c8df6/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 50.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABgklEQVR42o1S2XKDMAz0hySZJFwGcyTB5AIC5Pr/P9pq1dKZdvrQhx3JkrxaWTbv9xvTNOF+v2MYBozjiDzPsdlssN1u1a5Wq3/DPITo8Xgouq7D9XpFWRYIwxBxHCEIAiyXyz+w+PZ/EHZdj9PpjLr28L7B5XJB7gpUZYUoirFeU2mgCIJQFG8V9Nns9wSmrnNUVSqqrNqqstjvLZqmwOHgpEkuZyfIJJZjt/usLYocWZYp6WKxUDKqNd4fRNVJx0ySCGmawLkU1sZqsyz5ilt52wwus1oTRZE8SSy5RC3PhGmaBq/XC33fi7qdKNnL+LWoq/UJvPcSr6RhKbHDt8/F0RJpmioxFRte5kLattWFcDEk58Zvt5uCTSu5yFoSEjMhfeecTGQ1ZoqiUDIu43g8Ks7nM05iScKuLOYl1tLOiujPeZ5pDRWQjH/x+Xzq+LQEG1ExcwRV87+O46DxeYr5u7HecDwWtV2rBUwwNhfxAs/88JOANTM5cyTh2FTN9/4Ao1Y2f092pugAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/c314b473ea139d35439aa72b775a3a18/ca1dc/image2.png&apos; srcset=&apos;/static/c314b473ea139d35439aa72b775a3a18/e7570/image2.png 170w,
/static/c314b473ea139d35439aa72b775a3a18/f46e7/image2.png 340w,
/static/c314b473ea139d35439aa72b775a3a18/ca1dc/image2.png 680w,
/static/c314b473ea139d35439aa72b775a3a18/02d09/image2.png 1020w,
/static/c314b473ea139d35439aa72b775a3a18/9d567/image2.png 1360w,
/static/c314b473ea139d35439aa72b775a3a18/c8df6/image2.png 1778w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;해결&lt;/h2&gt;
&lt;p&gt;챗지피티한테 물어보거나 검색을 해보는 등 여러가지 방법을 써보면 많은 방법이 나옵니다. zshrc에 여러 명령어를 export 해주거나 특정 라이브러리를 설치해주거나.. 또는 파이썬 버전을 바꾸던가 &lt;/p&gt;
&lt;p&gt;여러가지 방법을 시도했지만 잘 되지 않았습니다. 여전히 같은 오류가 발생합니다. &lt;/p&gt;
&lt;p&gt;문제는 홈브루에 있었습니다. &lt;/p&gt;
&lt;h3&gt;Homebrew 버전 확인 및 최신 버전 설치&lt;/h3&gt;
&lt;h4&gt;Homebrew 버전 확인&lt;/h4&gt;
&lt;p&gt;아래 코드로 내 homebrew를 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;which&lt;/span&gt; brew&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드를 실행했을 때에,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;/usr/local/bin/brew&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;가 출력된다면 구버전의 Homebrew가 설치되어 있는 것입니다. &lt;/p&gt;
&lt;h4&gt;Homebrew 구버전 삭제&lt;/h4&gt;
&lt;p&gt;다음의 명령어로 Homebrew를 삭제할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;/bin/bash &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 코드를 실행한 뒤에도 &lt;code class=&quot;language-text&quot;&gt;which brew&lt;/code&gt; 를 실행해보면 여전히 위치가 나옵니다. 이 경우에는 삭제 코드를 다시 실행해주면 됩니다. 정상적으로 삭제 된다면 &lt;code class=&quot;language-text&quot;&gt;command not found&lt;/code&gt; 가 발생합니다. &lt;/p&gt;
&lt;h4&gt;Homebrew 최신 버전 설치&lt;/h4&gt;
&lt;p&gt;아래의 명령어로 최신 버전을 설치할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;/bin/bash &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 완료되면 다음과 같은 문구가 나타납니다. 버전에 따라 다를 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Installation successful&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Homebrew has enabled anonymous aggregate formulae and cask analytics.
Read the analytics documentation &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;and how to opt-out&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; here:
  https://docs.brew.sh/Analytics
No analytics data has been sent yet &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nor will any be during this &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; run&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;.

&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Homebrew is run entirely by unpaid volunteers. Please consider donating:
  https://github.com/Homebrew/brew&lt;span class=&quot;token comment&quot;&gt;#donations&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Next steps:
- Run these two commands &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; your terminal to &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; Homebrew to your &lt;span class=&quot;token environment constant&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;echo&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; /Users/UserName/.zprofile
    &lt;span class=&quot;token builtin class-name&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;/opt/homebrew/bin/brew shellenv&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
- Run brew &lt;span class=&quot;token builtin class-name&quot;&gt;help&lt;/span&gt; to get started
- Further documentation:
    https://docs.brew.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next steps를 보니, 다음의 명령어를 실행하라고 합니다. 위는 제 예시로, 터미널의 명령어를 복사하면 됩니다. 줄의 명령어를 실행하고 &lt;code class=&quot;language-text&quot;&gt;which brew&lt;/code&gt; 를 다시 실행해보면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;/opt/homebrew/bin/brew&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 표시되면 최신 버전의 brew가 설치된 것입니다. &lt;/p&gt;
&lt;h3&gt;다시 pyenv, python 설치&lt;/h3&gt;
&lt;p&gt;다시 위로 돌아가서, pyenv과 python을 설치해주면 이번에는 오류가 발생하지 않습니다. 해~결~&lt;/p&gt;
&lt;h2&gt;pyenv 설치 후&lt;/h2&gt;
&lt;p&gt;설치된 파이썬 버전 리스트를 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv versions&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;현재 사용중인 파이썬 버전을 확인할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv version&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용중인 파이썬을 설치한 버전으로 바꿔줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv global &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.18&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;현재 디렉토리에서만 사용할 파이썬 버전을 지정할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.18&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쉘에만 적용할수도 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pyenv shell &lt;span class=&quot;token number&quot;&gt;3.9&lt;/span&gt;.9&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;참고&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.lainyzine.com/ko/article/how-to-install-homebrew-for-m1-apple-silicon/&quot;&gt;https://www.lainyzine.com/ko/article/how-to-install-homebrew-for-m1-apple-silicon/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI 프로젝트의 시작]]></title><description><![CDATA[서론 FastAPI-Python을 새로운 프로젝트의 백엔드 언어로 선정하였습니다. 프로젝트 초기화 과정을 기록합니다.  poetry…]]></description><link>https://sharknia.github.io/FastAPI-프로젝트의-시작/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI-프로젝트의-시작/</guid><pubDate>Mon, 26 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/adb18d1525c33547b1aa1478dbaf1263/bb4c7/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 35.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42n1Rv0vDQBT+YqstuikILv4HDkJxqmDpoptLpeAgWQSh7m432CQX0oTE3F0JCCkZOuQPkA4d/b/iyxVtq4cPju/d+/V9dw9Ym/ULTbbKVZVl6DNYEByAsab2a2SsbaxjbEdjTvmS7ZmTwu9DegsIN9asyhki9a6QukcIw0Oo4BjS76EgUuUNkPFTut9C8DtIp7ceWJaNFVs8RxbmmMWfeI86mKU2lH9JDS9Q/AmS2yikTYPOyJ8QDlG8jSj3gCK5/6twSmqUt4R0IyTPLfLPEY1PaOAI4rWr1Sh+o0/qd+gl1xBOX3/LlF+gMv3lR9JCOWhsxfK8jYTiNUn2uIuM7W8Isf5byuaWzUXf261xe9M/9gW6imCL+S0CTQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/adb18d1525c33547b1aa1478dbaf1263/ca1dc/image1.png&apos; srcset=&apos;/static/adb18d1525c33547b1aa1478dbaf1263/e7570/image1.png 170w,
/static/adb18d1525c33547b1aa1478dbaf1263/f46e7/image1.png 340w,
/static/adb18d1525c33547b1aa1478dbaf1263/ca1dc/image1.png 680w,
/static/adb18d1525c33547b1aa1478dbaf1263/02d09/image1.png 1020w,
/static/adb18d1525c33547b1aa1478dbaf1263/bb4c7/image1.png 1023w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;FastAPI-Python을 새로운 프로젝트의 백엔드 언어로 선정하였습니다. 프로젝트 초기화 과정을 기록합니다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Poetry&quot;&gt;poetry&lt;/a&gt; 환경 구성은 이미 끝났다고 가정하고, 해당 라이브러리를 활용하여 환경을 꾸미겠습니다. &lt;/p&gt;
&lt;h2&gt;필수라고 생각되는 라이브러리 설치&lt;/h2&gt;
&lt;h3&gt;FastAPI&lt;/h3&gt;
&lt;p&gt;FastAPI를 웹 프레임워크로 선정하였으니, 이를 먼저 설치해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; fastapi&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Uvicorn&lt;/h3&gt;
&lt;p&gt;ASGI 서버로 FastAPI 애플리케이션을 호스팅하는 데 사용됩니다. FastAPI 공식 문서에서도 Uvicorn을 사용하는 것을 권장하고 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; uvicorn&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;SQLAlchemy 2.0&lt;/h3&gt;
&lt;p&gt;이미 직전 회사에서 많은 일을 함께 겪었던 &lt;del&gt;(^^)&lt;/del&gt; 든든한 동지네요. 이번에도 2.0을 설치는 하지만, 비동기 엔진은 절대 사용하지 않을 예정입니다. 아무튼 설치해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; sqlalchemy@^2.0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Alembic&lt;/h3&gt;
&lt;p&gt;SQLAlchemy를 위한 데이터베이스 마이그레이션 도구입니다. 데이터베이스 스키마 변경을 버전 관리할 수 있게 해줍니다. 지난 회사에서는 이 부분을 적용하지 못했었는데, 이번에는 잘 해보려고 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; alembic&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;HTTPX&lt;/h3&gt;
&lt;p&gt;비동기 HTTP 클라이언트 라이브러리입니다. FastAPI 애플리케이션 내부에서 비동기적으로 외부 API 호출을 수행할 때 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; httpx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Passlib &amp;#x26; python-jose&lt;/h3&gt;
&lt;p&gt;보안 및 인증을 위한 라이브러리입니다. Passlib는 비밀번호 해싱을, python-jose는 JWT(JSON Web Tokens) 생성 및 검증을 위해 사용됩니다. 기본적으로 JWT 토큰을 사용하게 될 것 같으므로 설치해줍니다. Zsh가 괄호 &lt;code class=&quot;language-text&quot;&gt;[]&lt;/code&gt;를 특별한 패턴으로 해석하기 때문에 위와는 설치 명령어가 조금 다릅니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;passlib[bcrypt]&apos;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;python-jose[cryptography]&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;테스트 코드를 위한 라이브러리 설치&lt;/h2&gt;
&lt;p&gt;이번에도 프로젝트 작업시간이 굉장히 빡빡한데, 가능하면 TDD를 지켜보고 싶습니다. 가능할지 모르겠지만, 일단 라이브러리 설치는 해두려고 합니다. 해당 라이브러리들은 실서버 환경에서는 필요하지 않으므로 &lt;code class=&quot;language-text&quot;&gt;--dev&lt;/code&gt; 옵션을 붙여주겠습니다. &lt;/p&gt;
&lt;h3&gt;pytest&lt;/h3&gt;
&lt;p&gt;Python에서 가장 널리 사용되는 테스트 프레임워크 중 하나로, 강력한 기능과 플러그인 시스템을 제공합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--dev&lt;/span&gt; pytest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;pytest-asyncio&lt;/h3&gt;
&lt;p&gt;비동기 코드를 위한 pytest 플러그인으로, asyncio를 사용하는 비동기 함수를 테스트할 수 있게 해줍니다. FastAPI는 비동기 프레임워크이므로, 이 플러그인은 비동기 요청 및 비동기 데이터베이스 작업을 테스트하는 데 유용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--dev&lt;/span&gt; pytest-asyncio&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;pytest-cov&lt;/h3&gt;
&lt;p&gt;코드 커버리지를 측정하기 위한 pytest 플러그인입니다. 테스트가 얼마나 많은 코드를 실행하는지를 분석하고, 테스트가 누락된 영역을 식별하는 데 도움을 줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--dev&lt;/span&gt; pytest-cov&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[arc browser]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/arc-browser/</link><guid isPermaLink="false">https://sharknia.github.io/arc-browser/</guid><pubDate>Thu, 22 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;작업을 하다보면 항상 뭔가 찾게 됩니다. 좀 더 편한 것, 좀 덜 귀찮은 것, 좀 더 새로운 것 등등.. &lt;/p&gt;
&lt;p&gt;항상 새로운 것에서 자극을 많이 받는 것 같습니다. 매일 하던 것만 하면 재미 없잖아요. &lt;/p&gt;
&lt;p&gt;접한지는 조금 되었지만 사용하지 않고 있었는데, 이제 새롭게 사용해보려고 하는 건 arc 브라우저 입니다. &lt;/p&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
저는 지금까지는 개인적인 용도로는 사파리를 주로 사용하고 있었습니다. 아이폰-아이패드-맥을 모두 사용하고 있기 때문이기도 하고 딱~히 불편함을 못느끼고 통합성이 너무 좋아서 불편 없이 사용하고 있었습니다. 
&lt;p&gt;업무용으로는 크롬을 사용하고, 개인용 윈도우 데스크탑에서는 엣지를 사용하고 있었는데 왜 그렇냐? 하면 사실 딱히 이유는 없습니다.. 다만 업무용 환경과 개인용 환경이 합쳐지는 걸 좋아하지 않아 구분해서 사용하고 있었다, 정도겠네요. &lt;/p&gt;
&lt;h2&gt;그런데 왜 arc 브라우저를 갑자기?&lt;/h2&gt;
&lt;p&gt;앞에서 언급한대로 새로운게 좋기 때문입니다. 이번에 또 이직을 하게 되면서 환경이 확 바뀌게 되었는데, 뭔가 같이 변화를 가져가면 좋잖아요. &lt;/p&gt;
&lt;p&gt;주변 개발자들이 많이 사용하고 있었기도 합니다. 추천도 받았구요. 자세한 장점은 좀 더 써보면 정리할 수 있지 않을까 합니다. &lt;/p&gt;
&lt;h3&gt;첫인상?&lt;/h3&gt;
&lt;p&gt;일단 디자인이 유려합니다. 주변에서 추천해주신 분들 중에서는 arc 브라우저를 사용하다가 크롬이나 엣지를 보면 촌스러워 보인다고 말씀해주신 분도 있습니다. &lt;del&gt;(사실 엣지는 요즘.. 코파일럿이 지저분하게 붙었다는 느낌이어서 번잡하다는 느낌이 들긴 합니다.)&lt;/del&gt; &lt;/p&gt;
&lt;h2&gt;어떤 기능들을 사용하나요?&lt;/h2&gt;
&lt;h3&gt;Little Arc&lt;/h3&gt;
&lt;p&gt;외부 어플리케이션에서 링크를 클릭하여 브라우저를 여는 경우가 있습니다. 독특하게도 이 때 아크 브라우저에서는 해당 링크가 Little Arc 창에서 열립니다. &lt;/p&gt;
&lt;p&gt;다른 열려있는 탭들에 영향을 주지 않고 모달처럼 더 작은 브라우저 창에서 새로운 링크가 열리게 됩니다. 따라서 산만하지 않게 원래의 작업을 유지할 수 있습니다. 물론 메인 탭에 리틀 아크에서 열린 탭을 포함시킬 수도 있습니다. &lt;/p&gt;
&lt;p&gt;외부 링크가 아니고 직접 실행할 수도 있는데, 브라우저 상에서 뿐만 아니라 시스템 전역 어디에서든 &lt;code class=&quot;language-text&quot;&gt;Cmd&lt;/code&gt; + &lt;code class=&quot;language-text&quot;&gt;Option&lt;/code&gt; + &lt;code class=&quot;language-text&quot;&gt;N&lt;/code&gt; **** 단축키를 통해 리틀 아크를 실행할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;Space&lt;/h3&gt;
&lt;p&gt;Arc 브라우저에서는 Space라는 분리된 공간을 제공합니다. 이는 사파리의 신규 기능인 프로필 기능과 비슷하지만, 더 유려한 UI와 편의성을 제공합니다. &lt;/p&gt;
&lt;p&gt;사용자는 Space를 통해 작업 탭과 개인 또는 프로젝트 별로 관련된 탭을 그룹화 하여 분리할 수 있습니다. 각 Space는 자체적인 탭, 테마, 아이콘 등을 가지며 그러면서도 즐겨찾기는 모든 Space에서 공유되어 편리하게 이용할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;이외에도..&lt;/h3&gt;
&lt;p&gt;이외에도 많은 독특한 기능을 제공합니다. 개인적으로는 Split 기능도 열심히 사용을 해보려고 합니다. &lt;/p&gt;
&lt;p&gt;개인적으로는 한글이 지원이 아직 안된다는 점, 윈도우에서 지원이 아직 제공되지 않는다는 점이 아쉽습니다. &lt;/p&gt;
&lt;p&gt;자세한 내용은 더욱 써보고 정리해보려고 합니다. 해당 페이지에서는 개인 확인 용도로 기록을 늘려가려고 합니다. &lt;/p&gt;
&lt;h2&gt;같이 보기&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.hongkiat.com/blog/arc-browser-keyboard-shortcuts/&quot;&gt;https://www.hongkiat.com/blog/arc-browser-keyboard-shortcuts/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[식별 관계와 비식별 관계, 그리고 CASCADE 옵션의 이해]]></title><description><![CDATA[서론 새로 개발할 서비스의 DB 설계 작업이 시작되었습니다. DB…]]></description><link>https://sharknia.github.io/식별-관계와-비식별-관계-그리고-CASCADE-옵션의-이해/</link><guid isPermaLink="false">https://sharknia.github.io/식별-관계와-비식별-관계-그리고-CASCADE-옵션의-이해/</guid><pubDate>Sun, 18 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/bc310b8110b7cbc64aace68596c6da79/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVR42n2P62vTYBSH85eJf4Ef/ey8CyrIpBOFsQmOqgwcCILVDzKmbnWTzrHWzW00SLPVtUvn0rVNr0ma3nJ/m+RNmryv6TL96OHhcDj8Hg6H8DAO8PF5IYTwf8s/I7SIEcYh/l+zWBPexVOfN8kvW5nVberrj/3YSjKZzo5NhP7lAwgH4wB3DII+0qGXKZSibxbXvpNNXqzUWsub5AaZe/tpQwN24LsIued5TECMA4K1ibCg2NlSG1jwZ55piv1kgT/sOsVmm+U6Yk+udoHujsPhvWAgrND0se6gMq9kS4ICrJbYW03tXbwxE/lIpU8afE8qN9tNyRJ1D/jjfAhh+djyMHCRbHrFlnRQ5AcaMCx75dv2pWuTU6/j5HFN1ozTOs+psK15KkQ2woFl+5gwR3joBq/6fcP9Xe9RDNcUpRzDLq6lLly+feVpLJDpcn3v4FgErqB5kuWbHrZGYwjDQQZEqul1VZtmOxTT6sja++X13X06laF3DhkyzyR2KLrU4DXIKe5g6AEHhxC6jTTLk4HblkC+0k6k8ye1lgmdo9Mq3xmUG0KhVFOM4a9io9ob1vtmH4wM6J+BCM0cqaYjGVCUQIHl41vU1cjcxOTs/en5O09e3JuefzC7EHkeW9qkcmy3LCgScHTL120v6IQyhDKAkmH3NYvrKoUKt7S+e+tRdOLhs+tT0ZuPX96dWXj1IUEesTQrcF1VNqBqusE91XT+AKS9QWOnbG7oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/bc310b8110b7cbc64aace68596c6da79/ca1dc/image1.png&apos; srcset=&apos;/static/bc310b8110b7cbc64aace68596c6da79/e7570/image1.png 170w,
/static/bc310b8110b7cbc64aace68596c6da79/f46e7/image1.png 340w,
/static/bc310b8110b7cbc64aace68596c6da79/ca1dc/image1.png 680w,
/static/bc310b8110b7cbc64aace68596c6da79/02d09/image1.png 1020w,
/static/bc310b8110b7cbc64aace68596c6da79/9d567/image1.png 1360w,
/static/bc310b8110b7cbc64aace68596c6da79/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;새로 개발할 서비스의 DB 설계 작업이 시작되었습니다. DB를 설계하는 것은 많이 해본 일이어서 저도 모르게 무결성이나 관계성 등 중요한 내용을 챙기고 있지만, 이런것들은 말로 설명하라고 하면 어려울 때도 많습니다. &lt;/p&gt;
&lt;p&gt;그래서 이번 기회에 해당 개념들에 대해서 기회가 날때마다 정리하는 습관을 들이려고 합니다. &lt;/p&gt;
&lt;h3&gt;DB가 문서도 없고, 관계성도 정의되어 있지 않다면?&lt;/h3&gt;
&lt;p&gt;전에 있던 회사에서는 정규화는 고사하고 아예  테이블들의 관계를 설정하지 않았었고, 관계성의 정의에 대한 문서화도 되어있지않아 어느 테이블의 어느 컬럼이 다른 어느 테이블과의 관계를 가지는지를 확인하기 위해서는 “감”을 사용하거나 코드를 읽고 파악해야 해 그야말로 전쟁터를 방불케했습니다. 무언가 하나를 수정할 경우 데이터 무결성이 깨지고 오류가 발생하는 것을 막는 일은 전쟁터에서 많아도, 신경을 곤두세워도 피하기 쉽지 않았습니다. &lt;/p&gt;
&lt;p&gt;어떻게 생각하면 이렇게 문서도 없고 관계성도 정의되지 않은데다가 하나의 프로젝트를 여러 개발자가 손 댔을 경우 얼마나 유지보수가 어려워지는지, 개발 생산성이 얼마나 떨어지는지 깨닫게 되는 좋은 경험을 했구나, 하는 생각도 합니다. 그런 아비규환을 겪기 전에는 무결성이나 관계성 정의가 중요하다고 공부를 해도 와닿지 않았었거든요. &lt;del&gt;(역시 사람은 맞아봐야 깨닫습니다)&lt;/del&gt;  &lt;/p&gt;
&lt;p&gt;특히 이번 프로젝트에서는 개인적으로 많은 목적을 담고 있기 때문에 저도 함께 등한시 했던 작업들에 더 주의를 기울이려고 합니다. 오늘은 체계적인 문서화를 위해 DB 설계를 &lt;a href=&quot;https://www.erdcloud.com/&quot;&gt;ERD-Cloud&lt;/a&gt;로 진행했고, 그 과정에서 새롭게 정리된 개념들에 대해 정리하고 넘어가겠습니다. &lt;/p&gt;
&lt;h2&gt;관계 유형&lt;/h2&gt;
&lt;p&gt;먼저 관계 유형에 대해 간단하게 정리하고 넘어가겠습니다. 관계 유형은 테이블 간의 데이터가 어떻게 연결되는지를 정의합니다. 기본적으로 세 가지 관계 유형이 있습니다. &lt;/p&gt;
&lt;h3&gt;1:1 관계&lt;/h3&gt;
&lt;p&gt;이 관계는 한 테이블의 레코드가 다른 테이블의 단 하나의 레코드와만 관련될 때 발생합니다. 예를 들어 사용자 테이블과 사용자 상세 정보 테이블 간의 관계를 생각하면 쉽습니다. 상세 정보는 한 유저 당 하나만 존재합니다. &lt;/p&gt;
&lt;p&gt;종종 데이터를 논리적으로 분리하거나, 특정 정보에 대한 보안 요구 사항이 다를 때 사용됩니다. &lt;/p&gt;
&lt;h3&gt;1:N 관계&lt;/h3&gt;
&lt;p&gt;가장 흔한 관계유형입니다. 외래키를 사용하여 부모 테이블과 자식 테이블 간의 연결을 구현합니다. 한 테이블의 레코드가 다른 테이블의 여러 레코드와 관련될 수 있습니다. 예를 들면 사용자 테이블과 주문 리스트 테이블을 생각하면 쉽습니다. 한 사용자가 주문을 여러번 할 수 있기 때문에, 유저 테이블에는 레코드가 하나지만 주문 테이블에는 여러 레코드가 존재할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;N:N 관계&lt;/h3&gt;
&lt;p&gt;두 테이블 간에 서로 다수의 레코드가 관련될 수 있습니다. 이 관계는 직접적으로 데이터베이스에 표현될 수 없으며, 일반적으로 두 테이블간의 다대다 관계를 1:N으로 분해하는 연결 테이블을 사용하여 구현됩니다. 예를 들어, 학생 테이블과 수업 간의 관계에서 한 학생이 여러 수업을 듣고 하나의 수업에 여러 학생이 등록될 수 있습니다. &lt;/p&gt;
&lt;h2&gt;식별 관계와 비식별 관계&lt;/h2&gt;
&lt;p&gt;식별 관계와 비식별 관계는 데이터베이스 설계에서 테이블 간의 연결 방식을 정의하는 두 가지 방법입니다. &lt;/p&gt;
&lt;h3&gt;식별 관계(Identifying Relationship)&lt;/h3&gt;
&lt;p&gt;이 관계에서는 자식 테이블의 기본키에 부모 테이블의 기본키가 포함됩니다. 이는 자식 테이블의 레코드가 부모 테이블의 레코드 없이는 존재할 수 없음을 의미합니다. &lt;/p&gt;
&lt;p&gt;이 관계는 강한 의존성이 있는 테이블 간에 사용됩니다. 예를 들어 자식 테이블이 부모 테이블의 생명주기에 밀접하게 결합되어 있을 때 적합합니다. &lt;/p&gt;
&lt;h3&gt;비식별 관계 (Non-Identifying Relationship)&lt;/h3&gt;
&lt;p&gt;비식별 관계에서는 자식 테이블이 부모 테이블을 참조하는 외래키를 가지지만 이 외래키가 자식 테이블의 기본 키에는 속하지 않습니다. 자식 테이블의 레코드는 부모 테이블의 레코드와 독립적으로 존재할 수 있습니다. 예를 들어, 직원 테이블에서 부서 테이블을 참조하는 경우 직원은 부서에 속하지 않더라도 독립적으로 존재할 수 있습니다. &lt;/p&gt;
&lt;p&gt;즉 테이블간 서로 관련은 있지만, 서로의 존재에 필수적이지 않을 때 적합합니다. &lt;/p&gt;
&lt;h3&gt;무조건 식별관계로 묶어두는게 정답일까?&lt;/h3&gt;
&lt;p&gt;식별 관계는 테이블간의 강한 연결과 무결성을 보장하는 데 유용합니다. 반면 비식별 관계는 데이터 모델의 확장성과 유연성을 높이는 데 도움이 됩니다. &lt;/p&gt;
&lt;p&gt;그냥 단순하게 생각하면 반드시 가능할때마다 식별관계로 묶어두는게 좋지 않을까? 라고 쉽게 생각이 들기도 합니다. 하지만 식별 관계를 과도하게 사용하면 여러가지 문제가 발생할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;1. 유연성 감소&lt;/h4&gt;
&lt;p&gt;식별 관계는 자식 테이블이 부모 테이블의 존재에 종속되는 것이나 똑같습니다. 이렇게 만들어진 강한 결합도는 요구 사항이 변경될 때 테이블간의 관계를 수정하기 어렵게 만듭니다. &lt;/p&gt;
&lt;p&gt;만약 부모 테이블의 기본 키 구조가 변경되면 이를 참조하는 모든 자식 테이블의 구조가 함께 변경되어야 합니다. 이는 유지보수에 문제를 초래할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;2. 확장성 문제&lt;/h4&gt;
&lt;p&gt;식별 관계는 데이터 모델을 특정 구조에 굳건히 묶어 놓음으로써 시스템의 확장성을 제한할 수 있습니다. 특히 대규모 시스템에서는 요구 사항이 시간에 따라 변할 수 있으므로 유연하게 대응할 수 있는 비식별 관계가 더 유리할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;3. 데이터 모델의 복잡성 증가&lt;/h4&gt;
&lt;p&gt;과도하게 증가한 복잡성은 데이터 모델을 이해하고 관리하는 데 더 많은 노력이 필요함을 의미합니다. &lt;/p&gt;
&lt;h3&gt;그렇다면 싹 다 비식별 관계로 묶으면 되지 않을까?&lt;/h3&gt;
&lt;p&gt;식별 관계를 사용했을 때 발생하는 문제점들은 유연함과 단순함이 너무 없어 어지럽기도 합니다. 그렇다면 비식별 관계만으로 정의를 하면 이 모든 문제들이 해결될까요? 물론 비식별 관계만을 고집하면 발생할 수 있는 문제점들도 있습니다. &lt;/p&gt;
&lt;h4&gt;1. 데이터 무결성의 약화, 데이터 관리의 어려움&lt;/h4&gt;
&lt;p&gt;비식별 관계는 자식 테이블이 부모 테이블에 느슨하게 연결되어 있으므로 데이터의 무결성을 유지하기 위한 추가적인 제약 조건이나 규칙을 구현해야 할 수 있습니다. 즉, 데이터의 일관성과 정확성을 보장하는 데 있어 추가적인 노력이 필요할 수도 있음을 의미합니다. &lt;/p&gt;
&lt;p&gt;이는 데이터 관리의 어려움으로 이어집니다. 예를 들어 부모 테이블이 삭제될 때 자식 테이블에 대한 처리를 비식별관계에서는 수동으로 관리해야 할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;2. 관계의 명확성 감소&lt;/h4&gt;
&lt;p&gt;테이블간의 관계가 덜 명확해지면, 복잡한 데이터 모델에서 테이블간의 관계를 이해하고 추적하기 어렵게 만들 수 있습니다. &lt;/p&gt;
&lt;h4&gt;3. 과도한 유연성의 함정&lt;/h4&gt;
&lt;p&gt;과도한 유연성은 결국 모델의 명확성을 흐리게 하고 미래의 확장성에 대한 고려 없이 단기적인 해결에 치중하게 만들 수 있습니다. 대충 지어진 모래성이 무너지는 느낌이 이런게 아닐까요? 큰 집일수록 기초가 튼튼해야 함을 전 회사에서 느꼈습니다. &lt;/p&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;p&gt;데이터베이스 설계에 있어서 식별 관계와 비식별 관계를 적절히 혼합하여 사용하는 것이 중요합니다. 각각의 관계 유형이 가진 장단점을 이해하고 프로젝트의 요구 사항과 목표에 따라 최적의 접근 방식을 선택해야 합니다. 따라서, 단일한 접근 방식에만 의존하기보다는 유연하게 접근하여, 각 상황에 가장 적합한 데이터 모델링 전략을 개발하는 것이 필요합니다.&lt;/p&gt;
&lt;h2&gt;CASCADE&lt;/h2&gt;
&lt;p&gt;CASCADE는 데이터베이스 관리 시스템에서 외래 키 제약 조건의 일환으로 사용할 수 있는 옵션입니다. 이 옵션은 부모 테이블의 레코드가 업데이트 되거나 삭제될 때 관련된 자식 테이블의 레코드에 대해 자동으로 같은 작업을 수행하도록 설정합니다. &lt;/p&gt;
&lt;h3&gt;CASCADE의 주요 기능&lt;/h3&gt;
&lt;h4&gt;CASCADE DELETE&lt;/h4&gt;
&lt;p&gt;부모 테이블의 레코드가 삭제될 경우 해당 레코드와 연결된 자식 테이블의 레코드도 자동으로 삭제됩니다. 이는 참조 무결성을 유지합니다. &lt;/p&gt;
&lt;h4&gt;CASCADE UPDATE&lt;/h4&gt;
&lt;p&gt;부모 테이블의 기본 키 값이 변경될 경우 해당 변경이 자식 테이블의 관련 외래키 값에도 자동으로 반영됩니다. &lt;/p&gt;
&lt;h3&gt;비식별 관계에서의 CASCADE 사용&lt;/h3&gt;
&lt;p&gt;CASCADE 설정은 식별/비식별 관련없이 모두 적용할 수 있습니다. 따라서 이 설정을 활용해 위에서 살펴봤던 비식별 관계의 약점을 보완할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;비식별 관계의 약점 보완&lt;/h4&gt;
&lt;p&gt;비식별 관계에서 CASCADE를 사용하면 참조하는 부모 테이블이 변경될 때 자식 테이블의 데이터를 자동으로 갱신하여 데이터를 수동으로 관리하는 번거로움을 줄일 수 있으며, 일관성을 유지할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;반드시 CASCADE + 비식별이 식별보다 유리하지 않을까?&lt;/h4&gt;
&lt;p&gt;이 방법을 사용하면 유연성, 무결성 유지, 고아 레코드 방지 등에 있어서 비식별 관계의 약점을 모두 보완하는 것처럼 보이기도 합니다. 따라서 단순히 생각하면 식별 관계를 사용하는 것보다 우월하다고 생각될 수 있습니다. 하지만 데이터 모델의 명확성과 이해도를 유지하는 것 역시 중요한 고려 사항입니다. 따라서, 식별 관계와 비식별 관계의 선택은 각각의 상황에 따라 그 장단점을 잘 이해하고, 프로젝트의 목표와 요구 사항에 가장 잘 맞는 방식을 선택하는 것이 필요합니다.&lt;/p&gt;
&lt;h3&gt;CASCADE 사용시 고려 사항&lt;/h3&gt;
&lt;p&gt;CASCADE도 만능은 아닙니다. 사용시 다음과 같은 점들을 고려해야 합니다. &lt;/p&gt;
&lt;h4&gt;데이터 수정/삭제에서 오는 부작용&lt;/h4&gt;
&lt;p&gt;CASCADE 옵션은 데이터베이스의 무결성을 유지하는 데 유용하지만 데이터를 삭제하거나 업데이트 할 때 예상치 못한 부작용이 발생할 수 있으므로 주의가 필요합니다. &lt;/p&gt;
&lt;p&gt;항상 데이터모델과 비즈니스 로직을 신중하게 고려해야 합니다. 무분별한 사용은 데이터의 실수를 일으킬 수 있습니다. &lt;/p&gt;
&lt;h4&gt;성능 영향&lt;/h4&gt;
&lt;p&gt;대량의 데이터가 관련되어 있는 경우 CASCADE 동작은 데이터베이스의 성능에 영향을 줄 수 있습니다.&lt;/p&gt;
&lt;h2&gt;개인적인 오늘의 결론&lt;/h2&gt;
&lt;p&gt;첫 번째 회사에 오래 있었고, 두 번째 회사에서 일한지는 얼마 되지 않았지만 첫번째 회사에서 “엉망으로 일할 때 발생하는 문제” 들을 몸으로 겪었다면, 두번쨰 회사에서는 그것들을 해결하는 방법들에 대해 고민하는 시간을 많이 가졌던 것 같습니다. &lt;/p&gt;
&lt;p&gt;오늘 살펴본 것도 몸으로는 아는 내용들이었고 자연스럽게 구현하고 중요하게 여기던 내용들입니다. 이런것들을 몰라도 된다고 무심결에 무시하던 때도 있었는데, 이런 내용들을 정리된 이론으로 머릿속에 다시 집어넣는게 중요하다고 요즘에 크게 느낍니다. &lt;/p&gt;
&lt;p&gt;남한테 설명할 때에도 그렇고 결국 내가 꺠달은 것들을 미리 깨달은 사람들이 잘 정리해 둔 것들을 굳이 피해가는 것도 멍청한 일이라는 생각이 듭니다.&lt;/p&gt;
&lt;p&gt;다만, 아예 백지 상태에서 배우는 것보다는 (너무 많은 시간을 고생했지만) 잘못된 반례들을 겪고 공부하니 훨씬 더 잘 다가오는 감이 있습니다. &lt;/p&gt;
&lt;p&gt;앞으로도 여태까지와는 다른 방향으로 더 성장하는 개발자가 되려고 합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[인앱결제에서 백엔드는 무엇을 준비해야 할까?]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/인앱결제에서-백엔드는-무엇을-준비해야-할까/</link><guid isPermaLink="false">https://sharknia.github.io/인앱결제에서-백엔드는-무엇을-준비해야-할까/</guid><pubDate>Sat, 17 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d7213b66afc65609cb206552845e8289/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVR42k3Q/U8SYRwA8Pun+gv6B/qx5Wq1tenKpGhBK4tYxlJHbCxIZ4KWvTjNFjKK6QXyIsPxYghdRrZWS6Hj3u+5e+61vhesddvt9nyf+3zfCEaQWQkJiippmqrrumGYpmVZ9u//Htu2DdPCuoF0XcJYQAonIYAEKyIeKRCCC2wY4BQVH3XpnfredDTuD0bfZgrffx4qigpe1Q1Z0yQVAwEIWHHKYg2wBveW3f76LUXmJiNxX/CRZ+LBqQvXIrFnW6XKIc1qluVgKK44xQlOcrCMsQI9WyY0Xa41VtfTV+9MgonEloZGroRmFjZzpV3qQDUM5GDNwfIAD9o2bRspqNakEunMOdf106Oes2Oei15f/PlqJl+qffwCZf+NDZsazCyqKqSEiVWMqw1qe6fqHp9w37o36rl9csT94lVyI7tdbbVlrIGHn6GsMzMsDbqHTCLG2DSxpr9Opu+HIkPDl1037nr9U+fHvOG5hXdkvtJqiyoGycvOtnq8TPR4qe8hBFmh/Ga2EJ5dPDPs8k2FL90MHDt+YjwQWktuVJqfeRlxAynRnEjA2/cQgmZgYeRWMfr4SSD4cCa2FJ1/6vVPzy4uk4Vy6QPFiDIjOLLHSb9YgegyPHyc898UCGv11v5K6v06WYwtJ+ZfvllL5xJkcW4lBZgV5X5NIACJI5rt9Dg4QIjmwKMOw9c/HeRrreIuVaxTuUozW2mU9/Z/dGiHcWKXEYB0etwfoP4qM5QCwskAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/d7213b66afc65609cb206552845e8289/ca1dc/image1.png&apos; srcset=&apos;/static/d7213b66afc65609cb206552845e8289/e7570/image1.png 170w,
/static/d7213b66afc65609cb206552845e8289/f46e7/image1.png 340w,
/static/d7213b66afc65609cb206552845e8289/ca1dc/image1.png 680w,
/static/d7213b66afc65609cb206552845e8289/02d09/image1.png 1020w,
/static/d7213b66afc65609cb206552845e8289/9d567/image1.png 1360w,
/static/d7213b66afc65609cb206552845e8289/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;현재 개발을 준비중인 서비스에는 인앱결제가 포함되어있습니다. 여태까지 운이 좋았던 것인지, 운이 나빴던 것인지 아무튼 인앱결제를 구현한 적이 없어서 구현 전에 역시 미리 서치해두려고 합니다. &lt;/p&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
이 과정은 크게 각 플랫폼별 인앱 결제 API 연동, 결제 요청 및 검증, 결제 성공 시 내부 재화 충전, 그리고 결제 실패 및 취소 처리로 나눌 수 있습니다.
&lt;p&gt;개발 예정 서비스에서는 내부 재화를 인앱결제로 구매하고 기타 아이템들은 내부 재화로 구매할 수 있게 만들 예정입니다.&lt;/p&gt;
&lt;h2&gt;내부 재화 구매 프로세스&lt;/h2&gt;
&lt;p&gt;구매는 결국 어떻게 이뤄질까? 앱 사용자가 상품 구매를 한다고 하고 어떤 흐름으로 결제가 이뤄져 어떻게 사용자가 내부 재화를 가지게 되는지를 먼저 그려보겠습니다. &lt;/p&gt;
&lt;h3&gt;1. 사용자가 앱에서 내부 재화 구매를 선택&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;사용자가 앱을 열고, 상점 페이지로 이동해 내부 재화를 구매하고자 하는 상품을 선택합니다. &lt;/p&gt;
&lt;p&gt;앱은 사용자가 선택한 상품의 정보를 보여주고 구매 버튼을 노출합니다. &lt;/p&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;백엔드는 상품 정보를 제공합니다. &lt;/p&gt;
&lt;h3&gt;2. 사용자가 구매 버튼을 누름&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;구매 버튼이 눌러지면 앱은 해당 플랫폼의 인앱 결제 프로세스를 시작합니다. (iOS : StoreKit, Android : Google Play Billing Libarary)&lt;/p&gt;
&lt;p&gt;사용자는 구매 확인, 결제 방법 선택(등록된 결제 수단 사용 등) 등의 단계를 수행합니다. &lt;/p&gt;
&lt;h3&gt;3. 결제 프로세스 진행&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;사용자는 결제 과정을 진행하며 이 과정은 앱스토어세서 직접 관리됩니다. &lt;/p&gt;
&lt;p&gt;과정이 종료된 후, 결제 성공/실패/취소 등의 결과가 어플리케이션으로 전달됩니다.&lt;/p&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;결제가 성공한 경우, 어플리케이션에서 결제 성공 정보와 결제 영수증을 백엔드로 전송합니다. &lt;/p&gt;
&lt;p&gt;백엔드는 영수증 정보를 플랫폼의 서버(애플 혹은 구글)에 검증 요청을 합니다. &lt;/p&gt;
&lt;p&gt;검증이 통과하면 백엔드는 사용자의 계정에 해당하는 내부 재화를 충전하고 충전 결과를 앱에 알립니다. &lt;/p&gt;
&lt;h3&gt;4 구매 완료 및 내부 재화 충전&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;백엔드로부터 내부 재화 충전 성공 응답을 받으면 앱은 사용자 인터페이스를 업데이트하여 새로운 재화 잔액을 표시합니다. &lt;/p&gt;
&lt;p&gt;사용자에게 구매 성공 알림을 제공할수도 있습니다. &lt;/p&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;내부 재화 충전과 관련된 모든 정보를 데이터베이스에 기록합니다. &lt;/p&gt;
&lt;p&gt;구매 내역을 로깅하여 추후 문제 해결이나 사용자 문의에 대응하도록 할 수도 있습니다. &lt;/p&gt;
&lt;h2&gt;어플리케이션 안에서의 환불 요청 프로세스&lt;/h2&gt;
&lt;p&gt;환불에도 대응을 해야 할 것이므로, 환불에 관해서도 프로세스를 미리 서치했습니다. &lt;/p&gt;
&lt;h3&gt;1. 사용자가 환불을 요청&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;사용자는 앱 내에서 환불을 요청할 수 있는 UI를 통해 환불을 신청합니다. 앱은 사용자의 환불 요청 정보를 백엔드로 전송합니다. &lt;/p&gt;
&lt;h3&gt;2. 환불 요청 검증&lt;/h3&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;사용자의 구매 내역과 환불 요청을 검증합니다. 구매 영수증, 환불 정책 준수 등을 검증합니다. &lt;/p&gt;
&lt;p&gt;환불 가능 여부를 결정합니다. &lt;/p&gt;
&lt;h3&gt;3.  환불 처리&lt;/h3&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;환불이 가능할 경우, 백엔드는 환불 처리를 진행합니다. 내부 재화를 차감합니다. &lt;/p&gt;
&lt;p&gt;이후 실제 결제가 이루어진 플랫폼(애플, 구글 등)을 통해 환불을 진행해야 합니다. 결제 플랫폼에 환불 요청을 전송합니다. &lt;/p&gt;
&lt;h3&gt;4. 환불 결과 통지&lt;/h3&gt;
&lt;h4&gt;FE&lt;/h4&gt;
&lt;p&gt;백엔드로부터 환불 처리 결과를 전송받습니다. 사용자에게 이를 통지합니다. &lt;/p&gt;
&lt;h2&gt;앱스토어에서 직접 환불 처리 시 프로세스&lt;/h2&gt;
&lt;p&gt;환불에는 앱 내에서 진행하는 경우와 플랫폼을 통해 환불이 진행되는 경우 두 가지가 있습니다. 위에서 알아본 방법은 첫번째 방법이며, 여기서 알아볼 방법은 두 번째 방법입니다. 두 번째 방법의 경우에는 앱 개발자의 개입이 불가능하게 진행이 됩니다.&lt;/p&gt;
&lt;h3&gt;1. 앱스토어에서 환불 처리&lt;/h3&gt;
&lt;p&gt;사용자가 앱스토어의 고객 지원을 통해 환불을 요청합니다. 앱스토어는 이를 진행합니다. &lt;/p&gt;
&lt;h3&gt;2. 환불 통지 수신&lt;/h3&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;앱스토어는 환불 처리 결과를 앱의 백엔드에 통지합니다. 이는 대부분 웹훅 형태로 제공됩니다. &lt;/p&gt;
&lt;p&gt;백엔드는 앱스토어로부터 환불 통지를 받고 해당 정보를 검증합니다. 검증 과정에는 통지의 유효성 확인, 환불된 결제와 연관된 사용자 및 내부 재화 찾기 등이 포함됩니다. &lt;/p&gt;
&lt;h3&gt;3. 내부 재화 상태 업데이트&lt;/h3&gt;
&lt;h4&gt;BE&lt;/h4&gt;
&lt;p&gt;환불 통지가 검증된다면, 사용자의 내부 재화 상태를 업데이트합니다. &lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;길게 적게 되었지만 사실 제가 궁금했던 부분을 “실제 결제 과정을 어디에서 담당하냐” 였습니다. 결제 과정은 앱스토어에서 직접 담당하므로 결국 인앱결제에 있어서 백엔드가 해야 할 가장 핵심 프로세스는 영수증 검증인것으로 보입니다.&lt;/p&gt;
&lt;p&gt;물론, 금전을 직접 다루는 중요한 과정이므로 보안 등의 사항에 특별히 유념해서 더 신경써야 하겟습니다. &lt;/p&gt;
&lt;p&gt;오늘은 이론적인 부분만 미리 살펴봤습니다. 언제나 그렇지만 실재 구현에 들어가면 항상 예외적인 상황이 발생합니다. 나중에 구현을 할 경우에 그 부분에 대해서도 자새히 기록을 해보려고 합니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Sqlalchemy의 index]]></title><description><![CDATA[서론 DB 설계를 하다보면 index를 정의해야 하는 경우가 많습니다. 만약 Sqlalchemy의 create_all() 메소드를 사용해 테이블을 생성하고 있다면 Sqlalchemy에서 동시에 index를 정의할 수 있습니다.  Sqlalchemy…]]></description><link>https://sharknia.github.io/Sqlalchemy의-index/</link><guid isPermaLink="false">https://sharknia.github.io/Sqlalchemy의-index/</guid><pubDate>Tue, 13 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c4d481406cdf76b79bd78dfaaff95aa7/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AAA4VQdNZhpacCljeDNqfThugUB2h0x5hkt7iWOHkJ2trF2EjU56h0l8jDtvgjJpfSVhdxVWbgRJZgA3VgAHUG4ra4JDe49PhplckKCQr7SMsblojZeHmppfiJJJY2pYe4RujZJuhopllqVRiJxLgpY/d40kZn8ETW0AHGF9R36UWo+jaqCycpehUmhtYoWOiK22d5SZjK2zk7K3iq61gKawb46WfKGpqMrRa6CyU4ugQ3uSF157AC5tiFWMoWqhtJa3v5WsrlJzfXCbqIKkrJy2uOvl2cHLx8zZ1Yy4wYi2womhpnR/gHabpnKnuVSKoS5tiAA6dY9flqyDsL9RZGhBZ3KZvsmGq7VvrbuUu8OQt7ucw8SDr7qCtL+BprBqkJtFaHNuhIh1n65knLI6dZAAQnuUbKS6c5aheI2RpLe2nbe7f6WxtMfKpLy9DImZHay/JIeUzdDLlK6zia24lamqsby4ibXEa6K4Q3yWAER9lm+juIOwwH6SlXB7enuYn6bH0IewtoWWlCVeXhppaz9mZaatqaC7wK/N1XqcpjtLUHCSnnKpvkJ7lAA/eZFroLR/qrpUYmQ0VF6gvcGXtr5Wk6RMeIMXW2kNWWUuW2Zyh4yHn6OTqKyPpqpacHV0maZsobY4c40AM26IX5Gleq3AapKgd5KYTGdufpieo7S3kKmqPYeUOYONU42YgpOUnLK1fJujUVtbbI6ae67BXo+jK2mDAB5eeUt+kmOTpn2svYCquVR5iHGEh297em1/gIabnYKLioujpYSanmd0dYGYm3OVn3ysvmOTp0Z5jxhadQAFR2QlYHdCc4dQgJJejZ11oK93nap2mKJdfolnh45kg4hykppli5cxV2ZpjppplqdRgZM8cIQgXnUERGJyl1KVtMDmNQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/c4d481406cdf76b79bd78dfaaff95aa7/ca1dc/image1.png&apos; srcset=&apos;/static/c4d481406cdf76b79bd78dfaaff95aa7/e7570/image1.png 170w,
/static/c4d481406cdf76b79bd78dfaaff95aa7/f46e7/image1.png 340w,
/static/c4d481406cdf76b79bd78dfaaff95aa7/ca1dc/image1.png 680w,
/static/c4d481406cdf76b79bd78dfaaff95aa7/02d09/image1.png 1020w,
/static/c4d481406cdf76b79bd78dfaaff95aa7/9d567/image1.png 1360w,
/static/c4d481406cdf76b79bd78dfaaff95aa7/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;DB 설계를 하다보면 index를 정의해야 하는 경우가 많습니다.&lt;/p&gt;
&lt;p&gt;만약 Sqlalchemy의 &lt;a href=&quot;https://sharknia.github.io/SQLAlchemy-create_all-%EB%A9%94%EC%86%8C%EB%93%9C%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%9E%90%EB%8F%99-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0&quot;&gt;create_all()&lt;/a&gt; 메소드를 사용해 테이블을 생성하고 있다면 Sqlalchemy에서 동시에 index를 정의할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;Sqlalchemy에서의 인덱스 정의&lt;/h2&gt;
&lt;h3&gt;단일 컬럼 인덱스&lt;/h3&gt;
&lt;p&gt;Sqlalchemy의 &lt;code class=&quot;language-text&quot;&gt;Column&lt;/code&gt; 객체를 생성할 때에 &lt;code class=&quot;language-text&quot;&gt;index=True&lt;/code&gt;  플래그를 설정하면 간단하게 단일 컬럼에 대한 인덱스를 생성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;user_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;복합 인덱스&lt;/h3&gt;
&lt;p&gt;두 개 이상의 컬럼을 포함하는 복합 인덱스는 &lt;code class=&quot;language-text&quot;&gt;Index&lt;/code&gt; 객체를 사용하여 생성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Index
Index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;my_index&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;column1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;column2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;desc()&lt;/code&gt; 메소드는 해당 컬럼을 내림차순으로 정렬하도록 지시합니다. 오름차순은 기본값이므로 &lt;code class=&quot;language-text&quot;&gt;asc()&lt;/code&gt;는 일반적으로 생략됩니다.&lt;/p&gt;
&lt;h3&gt;Unique 인덱스&lt;/h3&gt;
&lt;p&gt;Unique 인덱스는 값의 중복을 방지하고 해당 컬럼의 각 값이 유일하다는 것을 보장합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;email&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;복합 Unique 인덱스&lt;/h3&gt;
&lt;p&gt;SqlAlchemy에서는 복합 인덱스에 대해서도 유니크 제약 조건을 적용할 수 있습니다. 이를 통해 테이블 내에서 특정 컬럼 조합의 유니크성을 강제할 수 있습니다. &lt;/p&gt;
&lt;p&gt;SqlAlchemy에서 복합 유니크 인덱스를 정의하는 방법은 두 가지입니다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;UniqueConstraint&lt;/code&gt; 사용&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;UniqueConstraint&lt;/code&gt;는 테이블의 컬럼에 대한 유니크 제약 조건을 정의하는 데 사용됩니다. 이는 &lt;code class=&quot;language-text&quot;&gt;__table_args__&lt;/code&gt; 속성 내부에서 사용될 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; create_engine
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;declarative &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; declarative_base
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;schema &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UniqueConstraint

Base &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; declarative_base&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Base&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    __tablename__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my_model&apos;&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    column1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    column2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    __table_args__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;UniqueConstraint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;column1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;column2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;my_unique_constraint&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Index&lt;/code&gt; 사용 시 &lt;code class=&quot;language-text&quot;&gt;unique=True&lt;/code&gt; 설정&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Index&lt;/code&gt; 객체를 생성할 때 &lt;code class=&quot;language-text&quot;&gt;unique=True&lt;/code&gt; 플래그를 설정하여 복합 유니크 인덱스를 생성할 수 있습니다. 이 방법은 인덱스 생성과 동시에 컬럼 조합의 유니크성도 보장합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MetaData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Table
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;schema &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Index

metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; MetaData&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
my_table &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Table&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;my_table&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; metadata&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;column1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;column2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 복합 유니크 인덱스 생성&lt;/span&gt;
my_unique_index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;my_unique_index&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; my_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;column1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; my_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;column2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unique&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;두 방법 모두 데이터베이스에서 해당 컬럼 조합의 유니크성을 강제합니다. &lt;code class=&quot;language-text&quot;&gt;UniqueConstraint&lt;/code&gt;는 주로 제약 조건을 명시적으로 표현할 때 사용되며, &lt;code class=&quot;language-text&quot;&gt;Index&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;unique=True&lt;/code&gt; 설정은 검색 최적화와 유니크 제약 조건을 동시에 적용하고자 할 때 유용합니다.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;&lt;em&gt;\&lt;/em&gt;table_args__&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;  &lt;code class=&quot;language-text&quot;&gt;__table_args__&lt;/code&gt; 클래스 속성은 튜플이나 사전 형태로 제공될 수 있으며, 테이블 생성 시 추가적인 SQL 제약 조건이나 인덱스를 정의하는데 사용됩니다.  &lt;/p&gt;
&lt;p&gt;예를 들어 복합 인덱스를 &lt;code class=&quot;language-text&quot;&gt;__table_args__&lt;/code&gt; 클래스 속성을 사용해 모델 내부에서 정의한 예제 코드는 다음과 같습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Base&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    __tablename__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;events&apos;&lt;/span&gt;

    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary_key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    timestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DateTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    user_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    is_active &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Column&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Boolean&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 복합 인덱스 정의&lt;/span&gt;
    __table_args__ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        Index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ix_events_user_id_timestamp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;user_id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 방식으로 정의된 인덱스는 데이터베이스에 해당 모델을 반영할 때 자동으로 생성됩니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[위치 기반 검색 기능의 구현]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/위치-기반-검색-기능의-구현/</link><guid isPermaLink="false">https://sharknia.github.io/위치-기반-검색-기능의-구현/</guid><pubDate>Tue, 13 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1670a671c6f9439f25c6635d75793c7d/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ABYXOhQqXxQ9ewlXmAqHuwx5vRWJxxKu3RPJ5xXL6Q294xWr2w2PzQOHxQ6Fuw9Tmw83ehY5dREeUhUTMAAdFjcdKFcfN24QWI0PkLMYfbUchb4To9Qav+UVx+sTsNsRoc8PicUXk8AZiqkXXJgdT4YhNGkbHEkbEi0AIhUxJChSKUFuI1J8JnmbHm6mIoW5H5zJKarOKK7PH6/YHpvDGHuzGnerIHGUImSZJz9wKjZkJBxCIRAnACgXMy0uVixJcC9OdDd1jzJuoD6MwzdfjChbiDyBsCFSf0+WvEV+qjZ0ojN6oyxQfi0vYTJiiylBYykHHQAxDCI0LlU3QW1QPWZRTnZGf69vfqdFTHk1eqlVyfEoRHRpc5xrY4xFbZtPQnBKS3cxYZg6N2A2HDwxCx8AQQcaShU1Uh1COGWIX119b0hujlx8oWyCIEmMClKgU1aFm3KMeE11c1V6XF+ISE58TyxTRChOSQwnPgkZAEwGGk0aOksYOwppkESLsnpKc4Bkk9GGlnCGuQBp0cSXpoOPtW5ilFNjjwx2r0hAZVciQloOKlENJUMKHAA2Fzc+IEU1HjwQR28cgrFIj8Vhg7Z5mcKVyN0v2fadt85xkL1airsjZ6gATY8japQsRW9EMWA+KFI3Gj0AJS9lJ0V4I0t5GFqTGXCqH36wLIu6PcroVun1e/v8PN/xM7fYFW2dIX+1HYK8EViXETtkIlmNHlOTITZzABo3fhZWmB9ppSR3sCF+tRRZhgxahR59ozm81U/Q50S0zi1+pBNOexhxmTebuSqGqxZBXRJTjxpTlRw1cAAVJWQTPIMUUZMiWYwfW4UcbZYWZY8cZY0ZSW0qWHYiWn4raosue5ohgKMpWHYgUG8YRG0YVIgQPHwUJlk4xPXKsEQ3NAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/1670a671c6f9439f25c6635d75793c7d/ca1dc/image1.png&apos; srcset=&apos;/static/1670a671c6f9439f25c6635d75793c7d/e7570/image1.png 170w,
/static/1670a671c6f9439f25c6635d75793c7d/f46e7/image1.png 340w,
/static/1670a671c6f9439f25c6635d75793c7d/ca1dc/image1.png 680w,
/static/1670a671c6f9439f25c6635d75793c7d/02d09/image1.png 1020w,
/static/1670a671c6f9439f25c6635d75793c7d/9d567/image1.png 1360w,
/static/1670a671c6f9439f25c6635d75793c7d/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;새로운 서비스의 개발을 준비하고 있습니다. 그 서비스를 위해서 위치 기반 검색이 가능해야 할 것으로 생각하고 있습니다. &lt;/p&gt;
&lt;p&gt;아직 해당 기능에 대해서 구현 해본 적도 없고, 어떻게 구현 해야 할지 감도 잡히지 않아 아직 개발단계에는 이르지 않았지만 이에 대해 미리 서치한 내용을 기록하려고 합니다. &lt;/p&gt;
&lt;p&gt;Postgresql을 사용하게 될 것이므로, Postgreslql에서의 구현 방법도 미리 기록합니다. &lt;/p&gt;
&lt;p&gt;위치 기반 검색 기능은 사용자의 위치 정보(위도와 경도)를 데이터베이스에 저장하고, 이를 기반으로 특정 거리 내에 있는 다른 사용자나 장소를 찾는 것입니다. &lt;/p&gt;
&lt;h2&gt;위치 기반 검색 기능의 구현&lt;/h2&gt;
&lt;h3&gt;위치 정보의 저장&lt;/h3&gt;
&lt;p&gt;사용자의 위치 정보(위도, 경도)를 저장합니다. 위치 정보는 주소 변환(Geocoding)이나 모바일 기기의 GPS를 통해 직접 얻을 수 있습니다.  또 외부 API를 사용해 위도,경도 정보를 다시 주소로 변환할 수도 있습니다. &lt;/p&gt;
&lt;h3&gt;거리 계산&lt;/h3&gt;
&lt;p&gt;데이터베이스에 저장된 위치 정보를 사용하여 사용자 간의 거리를 계산합니다. 이 때 대표적으로 사용되는 알고리즘은 하버사인 공식 입니다. 하버사인 공식은 두 지점 사이의 거리를 계산할 때 지구의 구형을 고려하여 보다 정확한 결과를 제공합니다. &lt;/p&gt;
&lt;h3&gt;거리 기반 검색&lt;/h3&gt;
&lt;p&gt;사용자의 위치에서 특정 거리 내에 있는 사용자나 장소를 찾기 위해 SQL 쿼리 내에서 거리 계산 로직을 사용합니다. 예를 들어 SQL의 HAVING 절을 사용하여 계산된 거리가 특정 버위 내에 있는 레코드만 선택할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;인덱싱과 최적화&lt;/h3&gt;
&lt;p&gt;위치 기반 검색의 효율을 높이기 위해 공간 데이터를 효율적으로 쿼리할 수 있는 공간 인덱스 (Spatial Index)를 사용할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;공간 인덱스(Spatial Index)&lt;/h2&gt;
&lt;h3&gt;공간 인덱스란?&lt;/h3&gt;
&lt;p&gt;공간 인덱스(Spatial Index)는 공간 데이터(위치 정보를 포함한 데이터)를 효율적으로 쿼리하기 위한 데이터베이스 인덱스입니다. 공간 데이터는 위도와 경도로 표현되는 지점(point), 선(line), 면(area) 등 다양한 형태가 있을 수 있습니다. 이러한 데이터를 빠르게 검색하고, 공간적 관계(예: 교차, 인접, 포함 등)를 효율적으로 분석하기 위해 공간 인덱스를 사용합니다.&lt;/p&gt;
&lt;h3&gt;공간 인덱스의 종류&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;R-트리(R-tree): 계층적 구조를 가진 트리 기반 인덱스로, 사각형 영역을 노드로 사용하여 공간 데이터를 구분합니다. 각 노드는 자식 노드를 포함하는 최소한의 경계 사각형을 가집니다. R-트리는 공간 검색과 범위 쿼리에 효율적입니다.&lt;/li&gt;
&lt;li&gt;쿼드트리(Quadtree): 공간을 사각형 영역으로 재귀적으로 분할하는 트리 기반 인덱스입니다. 각 노드는 최대 네 개의 자식(북동, 북서, 남동, 남서)을 가질 수 있으며, 공간을 균등하게 분할합니다.&lt;/li&gt;
&lt;li&gt;GiST(Generalized Search Tree): 다양한 검색 트리를 일반화한 구조로, R-트리, B-트리 등 여러 종류의 인덱스를 하나의 프레임워크 내에서 지원합니다. PostgreSQL에서 사용됩니다.&lt;/li&gt;
&lt;li&gt;SP-GiST(Space-Partitioned Generalized Search Tree): 공간을 분할하는 기법에 기반한 인덱스로, GiST의 확장형입니다. 공간을 비균등하게 분할하여 더 효율적인 검색을 가능하게 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;공간 인덱스의 사용&lt;/h3&gt;
&lt;p&gt;공간 인덱스는 공간 쿼리를 실행할 때 데이터베이스가 전체 데이터를 순차적으로 검색하는 대신, 인덱스를 활용하여 필요한 데이터를 빠르게 찾아낼 수 있도록 합니다. 예를 들어, 특정 지역 내의 모든 관심 지점을 찾거나, 두 지점 사이의 거리를 계산할 때 공간 인덱스를 활용할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;공간 인덱스의 장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;쿼리 성능 향상: 공간 데이터에 대한 쿼리를 실행할 때 검색 시간을 크게 줄일 수 있습니다.&lt;/li&gt;
&lt;li&gt;공간 관계 분석 용이: 데이터 간의 공간적 관계를 빠르게 분석할 수 있어, 인접한 데이터 찾기, 영역 내 데이터 검색 등이 용이합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;공간 인덱스를 지원하는 데이터베이스 예&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQL의 PostGIS 확장: 공간 데이터를 위한 강력한 지원과 함께 R-트리 기반의 GiST 인덱스를 제공합니다.&lt;/li&gt;
&lt;li&gt;MySQL: R-트리 기반의 공간 인덱스를 지원합니다.&lt;/li&gt;
&lt;li&gt;SQLite의 SpatiaLite 확장: 공간 데이터를 위한 기능과 함께 R-트리 인덱스를 지원합니다.&lt;/li&gt;
&lt;li&gt;MongoDB: 2D 및 2DSphere 인덱스를 통해 공간 데이터를 위한 인덱싱을 제공합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Postgresql에서의 공간 인덱스&lt;/h2&gt;
&lt;p&gt;Postgresql에는 지리적 객체를 저장, 쿼리 및 조작할 수 있는 기능을 추가하는 PostGIS 확장이 존재합니다. &lt;/p&gt;
&lt;h3&gt;PostGIS 확장 설치&lt;/h3&gt;
&lt;p&gt;다음의 명령어를 통해 PostGIS 확장을 설치할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; EXTENSION &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;EXISTS&lt;/span&gt; postgis&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;공간 데이터 저장을 위한 테이블&lt;/h3&gt;
&lt;p&gt;위치 데이터를 저장할 테이블을 생성하고 공간 정보를 저장할 수 있는 &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt; 타입의 컬럼을 포함시킵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; places &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  id &lt;span class=&quot;token keyword&quot;&gt;SERIAL&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  name &lt;span class=&quot;token keyword&quot;&gt;VARCHAR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  location GEOGRAPHY&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;POINT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4326&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- 위도와 경도를 사용하는 점 타입&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;는 PostgreSQL의 PostGIS 확장에서 제공하는 두 가지 공간 데이터 타입입니다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;목적: 지구의 곡률을 고려하여 실제 지리적 위치를 더 정확하게 모델링합니다.&lt;/li&gt;
&lt;li&gt;사용 케이스: 큰 거리를 다루거나, 극지방 같이 지구의 곡률이 중요한 계산에 영향을 미치는 지역에서 주로 사용됩니다.&lt;/li&gt;
&lt;li&gt;계산 방식: 지구를 타원체로 가정하고, 위도와 경도를 사용하여 거리와 면적을 계산합니다. 이로 인해 &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;에 비해 계산이 더 복잡하고 느릴 수 있습니다.&lt;/li&gt;
&lt;li&gt;좌표 체계: 기본적으로 WGS 84 (EPSG:4326) 좌표 체계를 사용합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;목적: 평면 상의 점들을 사용하여 공간 데이터를 모델링합니다. 지구의 곡률을 고려하지 않고, 모든 계산을 유클리드(평면) 기하학을 사용하여 수행합니다.&lt;/li&gt;
&lt;li&gt;사용 케이스: 소규모 지역 또는 곡률이 중요하지 않은 계산에 주로 사용됩니다. 예를 들어, 도시 또는 건물 내부와 같은 상대적으로 작은 지역에서 사용됩니다.&lt;/li&gt;
&lt;li&gt;계산 방식: 유클리드 기하학을 바탕으로 거리, 면적 등을 계산합니다. 이는 &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;에 비해 계산이 더 간단하고 빠릅니다.&lt;/li&gt;
&lt;li&gt;좌표 체계: 다양한 좌표 체계를 지원하며, 사용자가 필요에 따라 선택할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;주요 차이점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;계산 정확도와 복잡성: &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;는 지구의 곡률을 고려하기 때문에 더 복잡하고, 대규모 거리 계산에 적합합니다. 반면, &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;는 간단한 평면 계산에 적합합니다.&lt;/li&gt;
&lt;li&gt;성능: &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;는 일반적으로 &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;보다 계산이 더 빠르지만, 이는 계산의 복잡성과 정확도에 따라 달라질 수 있습니다.&lt;/li&gt;
&lt;li&gt;적용 범위: &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;는 전 세계적인 지리적 데이터 처리에 적합하고, &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;는 지역적 또는 평면적 공간 데이터 처리에 더 적합합니다.&lt;/li&gt;
&lt;li&gt;대규모, 정확한 지리적 계산이 필요한 경우 &lt;code class=&quot;language-text&quot;&gt;GEOGRAPHY&lt;/code&gt;를, 소규모 또는 빠른 계산이 필요한 경우 &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;를 사용하는 것이 좋습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;결론&lt;/h4&gt;
&lt;p&gt;제가 개발할 서비스의 경우, 대부분의 상호 작용이 도시 수준에서 일어나고, 성능과 응답 시간이 중요한 요소라고 생각되기 때문에 &lt;code class=&quot;language-text&quot;&gt;GEOMETRY&lt;/code&gt;가 더 유리해 보입니다. &lt;/p&gt;
&lt;h3&gt;공간 인덱스 생성&lt;/h3&gt;
&lt;p&gt;공간 인덱스도 생성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INDEX&lt;/span&gt; idx_places_location &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; places &lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; GIST &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;위치 기반 검색 쿼리의 작성법&lt;/h3&gt;
&lt;p&gt;사용자의 위치를 기반으로 가까운 장소를 찾아주는 &lt;code class=&quot;language-text&quot;&gt;ST_DWithin&lt;/code&gt; 같은 공간 함수를 사용하는 쿼리를 작성합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- 사용자 위치 (위도 37, 경도 127) 주변 10km 이내의 장소 검색&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; name &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; places
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; ST_DWithin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  location&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  ST_MakePoint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;127&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;::geography&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;10000&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- 거리(미터 단위)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;공간함수(Spatial functions)란?&lt;/h4&gt;
&lt;p&gt;공간 함수는 PostGIS, PostgreSQL의 확장 기능 중 하나입니다. 공간 데이터를 처리하기 위한 함수로, 지리적 위치의 관계, 형태, 거리 등을 계산하고 분석하는 데 사용됩니다.&lt;/p&gt;
&lt;h4&gt;PostGIS에서 제공하는 주요 공간 함수&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;기하학적 관계 판단 함수:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Contains(A, B)&lt;/code&gt;: A가 B를 포함하는지 여부를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Intersects(A, B)&lt;/code&gt;: A와 B가 교차하는지 여부를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Within(A, B)&lt;/code&gt;: A가 B 내부에 있는지 여부를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Touches(A, B)&lt;/code&gt;: A와 B가 접하는지 여부를 반환합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_DWithin(A, B, distance)&lt;/code&gt;: A와 B가 지정된 거리 &lt;code class=&quot;language-text&quot;&gt;distance&lt;/code&gt; 이내에 있는지 여부를 반환합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;기하학적 변환 및 생성 함수:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Buffer(geometry, radius)&lt;/code&gt;: 주어진 지오메트리 주변에 지정된 반경의 버퍼를 생성합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Centroid(geometry)&lt;/code&gt;: 지오메트리의 중심점(centroid)을 계산합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_MakePoint(x, y)&lt;/code&gt;: x, y 좌표로 점을 생성합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;거리 및 길이 측정 함수:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Distance(A, B)&lt;/code&gt;: A와 B 사이의 최소 거리를 계산합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Length(geometry)&lt;/code&gt;: 선형 지오메트리의 길이를 계산합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;공간 분석 함수:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Area(geometry)&lt;/code&gt;: 면적을 계산합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Union(A, B)&lt;/code&gt;: 두 지오메트리의 합집합을 생성합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_Intersection(A, B)&lt;/code&gt;: 두 지오메트리의 교집합 영역을 계산합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;공간 색인 및 최적화를 위한 함수:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_GeomFromText(&apos;POINT(0 0)&apos;)&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;ST_GeomFromEWKT(...)&lt;/code&gt;: Well-Known Text(EWKT)로부터 지오메트리를 생성합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ST_SetSRID(geometry, srid)&lt;/code&gt;: 지오메트리에 공간 참조 시스템(Spatial Reference System Identifier, SRID)을 설정합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;같이 보기&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://postgis.net/docs/manual-3.0/postgis-ko_KR.html&quot;&gt;PostGIS 3.0.0 사용자 지침서&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SQLAlchemy create_all() 메소드로 데이터베이스 테이블 자동 생성하기]]></title><description><![CDATA[서론 현재 회사에서는 Alembic 같은 데이터마이그레이션 도구를 사용하고 있지 않습니다. 따라서 스키마 버전 관리등은 별도로 하고 있지 않으며, 다만 SqlAlchemy의 create_all() 메소드를 이용해 프로덕션 환경이나 dev…]]></description><link>https://sharknia.github.io/SQLAlchemy-create_all-메소드로-데이터베이스-테이블-자동-생성하기/</link><guid isPermaLink="false">https://sharknia.github.io/SQLAlchemy-create_all-메소드로-데이터베이스-테이블-자동-생성하기/</guid><pubDate>Mon, 12 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/adeaa97d904dbe547536564c64470baa/445c6/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkklEQVR42hXL209SARwA4N8h7SVnpaZrbIYmJQoRwklDLl64KAqKFy5yPYgcODcuwhFNUVHRNC4iWdOlW700c5W9ZWtzvbS59dbWeuh/Cbfv9QPgycoQHlrRhEKjRO8i5eOeB5pRrmZE7qPqtCNPrVirbsw8EzZ6qSqJ+oZICY1S4KHAkwLwO6HlCUesvNmhblYZJFhQzCZ2Pn5w7Of7CtsCihRbXI+n/Na1rW4iWmMw1Sh0cB+9WmUgVIJQBe3yhyNW40K6xjDa6g8ocUrq9JtCcf9ywbWyHs4WYvm33QG6J5JQ+xgQqhGR6iqCTFuGoP31g2Ntjune6YQtvm5n13/8+u3+9JO6+Fv6fiGjFx4OO4TjU55s9u6kE+SDgGoB1QEohkBlhD6TiCAnVjfD6bw5uUbk9z+fn4smgorQ4lyhqE1uSKkFXXzeV3pZMWG/pjGD2gRqIyADFtBbqx3upijp2tld3iqa6WexvVelLyfCYUwTz4SzL/SrhWYs2Rlg8HeHnYuLYPXCoA3KEbFPgxW75QtM7he71pZXtvcs7IZzLevJ7KC9xr4Jb78rIPCE271B3WrS8CYnTKUqfTjYfGDDAKZDZZUzhDy3aTjI4bHU8ExMNmDhtkj4OnuLO3m9uqlO3Ot9fSz2zXUQVNfR7u1wGDAcKUcED8MMXcsw44cH+rklgd6qwGal3nivn1V6Yu6lnczxyerZN//ZpSCU5Q5NPUqnGkiag1OA04CQMQhG6mejrZbAPZmmze7sT+VNudPc6dfLP/9KR+8jz4s9FKsKRaU00cHGJQm2Gic5RBTICAA1W4YQ0UqCaYjO8pMJAROpddJcJ95GMHecWJXdWUeTzfPz/Ey6jmU5JHM1qRhQsf/eQNuGNwq8qwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/adeaa97d904dbe547536564c64470baa/ca1dc/image1.png&apos; srcset=&apos;/static/adeaa97d904dbe547536564c64470baa/e7570/image1.png 170w,
/static/adeaa97d904dbe547536564c64470baa/f46e7/image1.png 340w,
/static/adeaa97d904dbe547536564c64470baa/ca1dc/image1.png 680w,
/static/adeaa97d904dbe547536564c64470baa/02d09/image1.png 1020w,
/static/adeaa97d904dbe547536564c64470baa/9d567/image1.png 1360w,
/static/adeaa97d904dbe547536564c64470baa/445c6/image1.png 1792w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;현재 회사에서는 Alembic 같은 데이터마이그레이션 도구를 사용하고 있지 않습니다. 따라서 스키마 버전 관리등은 별도로 하고 있지 않으며, 다만 SqlAlchemy의 create_all() 메소드를 이용해 프로덕션 환경이나 dev 환경에서의 테이블의 누락은 안생기게끔만 간단하게 관리하고 있습니다. &lt;/p&gt;
&lt;p&gt;이 방법은 테이블의 수정 또는 삭제를 반영할 수는 없는 방법이지만, 아직 RDB 기반으로 옮긴지 얼마 되지 않아 상대적으로 DB의 크기가 작아 현재는 이 방법으로 충분한 상황입니다. &lt;/p&gt;
&lt;p&gt;create_all() 메소드를 사용하면서 알게 된 점을 기록해두려고 합니다. &lt;/p&gt;
&lt;h2&gt;create_all() 메소드란?&lt;/h2&gt;
&lt;p&gt;SqlAlchemy의 create_all() 메소드는 &lt;code class=&quot;language-text&quot;&gt;Metadata&lt;/code&gt; 객체에 등록된 모든 테이블 정의를 바탕으로 해당 데이터베이스 엔진에 테이블을 생성하는데 사용됩니다. 이 메소드는 이미 생성되어있는 테이블은 생성하지 않으며, 새로 정의된(DB에 없는) 테이블만 새롭게 데이터베이스에 생성합니다. &lt;/p&gt;
&lt;p&gt;따라서, 스키마가 달라도 뭔가 수정이 되었어도 DB에 존재만 한다면 생성하거나 덮어쓰지 않으므로 만약 수정 사항을 반영하는걸 해당 메소드로 진행하려면 테이블을 drop한 뒤 생성해야 합니다. 물론 데이터가 많지 않거나 데이터를 날려도 상관없는 dev 환경에서만 유효한 방법입니다. &lt;/p&gt;
&lt;h3&gt;기본적인 사용 방법&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; create_engine&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MetaData

&lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 엔진 생성&lt;/span&gt;
engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sqlite:///example.db&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; echo&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# MetaData 인스턴스 생성&lt;/span&gt;
metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; MetaData&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 테이블 정의들...&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 예: users_table = Table(&apos;users&apos;, metadata, Column(&apos;id&apos;, Integer, primary_key=True), ...)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# create_all 호출하여 모든 테이블 생성&lt;/span&gt;
metadata&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_all&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;create_engine&lt;/code&gt; 함수는 데이터베이스와의 연결을 설정합니다. &lt;code class=&quot;language-text&quot;&gt;echo=True&lt;/code&gt;는 SQLAlchemy가 실행하는 SQL 명령을 콘솔에 출력하도록 설정하는 옵션입니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;create_all()&lt;/code&gt; 메소드는 첫 번째 인자로 &lt;code class=&quot;language-text&quot;&gt;Engine&lt;/code&gt; 객체를 받습니다. 이 &lt;code class=&quot;language-text&quot;&gt;Engine&lt;/code&gt; 객체는 SQLAlchemy가 데이터베이스와 통신하기 위해 사용하는 기본 구성 요소입니다.&lt;/p&gt;
&lt;h3&gt;비슷한 메소드들?&lt;/h3&gt;
&lt;h4&gt;drop_all()&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;drop_all()&lt;/code&gt; 메소드는 &lt;code class=&quot;language-text&quot;&gt;create_all()&lt;/code&gt;과 반대로 작동합니다. &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체에 등록된 모든 테이블을 데이터베이스에서 삭제합니다. 테이블에 데이터가 있을 경우, 데이터도 함께 삭제되므로 사용할 때 주의가 필요합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;drop_all&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Table.create() 및 Table.drop()&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;create_all()&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;drop_all()&lt;/code&gt; 메소드 대신, 개별 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체에 대해 &lt;code class=&quot;language-text&quot;&gt;create()&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;drop()&lt;/code&gt; 메소드를 호출할 수 있습니다. 이 방법을 사용하면 특정 테이블에 대한 작업을 더 세밀하게 제어할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 개별 테이블 생성&lt;/span&gt;
users_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 개별 테이블 삭제&lt;/span&gt;
users_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;drop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;reflect()&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;reflect()&lt;/code&gt; 메소드는 데이터베이스의 기존 스키마 정보를 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체로 로드합니다. 이 메소드는 기존 데이터베이스 구조를 SQLAlchemy 모델로 반영할 때 유용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;reflect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;나는 어떻게 사용하고 있나?&lt;/h2&gt;
&lt;p&gt;dev 또는 로컬 환경에서 테스트를 할 경우 적극적으로 사용하고 있습니다. 주로 처음 테이블을 생성할 때에 굳이 create 쿼리문을 별도로 쓰지 않고 모델만 생성 후 해당 메소드를 이용해 테이블을 생성하거나, 테이블에 수정 사항이 생긴 경우 drop 후 create_all() 메소드를 생성해 다시 DB 테이블을 생성합니다. &lt;/p&gt;
&lt;p&gt;물론, 그때 그때 create 함수를 쓰기는 너무나 귀찮은 일이기 때문에, FastAPI의 lifespan을 활용해서 FastAPI 어플리케이션이 시작될 때에 자동으로 create_all() 메소드를 호출하도록 세팅을 해두었습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;orm &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; declarative_base

Base &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; declarative_base&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
_db_connection&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Engine&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@asynccontextmanager&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lifespan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; supabase_on_startup&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    settings &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Settings&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;info&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[SERVER_ENVIRONMENT] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SERVER_ENVIRONMENT&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; supabase_on_shutdown&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;on_startup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;global&lt;/span&gt; _db_connection
    DATABASE_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;postgresql+asyncpg://postgres.&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;postgresql_setting&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;projectid&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;postgresql_setting&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;@aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres?prepared_statement_cache_size=0&quot;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# pool_size와 max_overflow의 초기값 설정&lt;/span&gt;
    pool_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 기본값&lt;/span&gt;
    max_overflow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 기본값&lt;/span&gt;
    echo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;

    _db_connection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_async_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        pool_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;pool_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        max_overflow&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_overflow&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        echo&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;echo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 비동기 엔진을 사용하여 테이블 생성&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; _db_connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;begin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; conn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; conn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_sync&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Base&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create_all&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런식으로 구현해두었습니다. 이렇게 하면 어플리케이션이 수정될 때마다 존재하지 않는 테이블을 생성하게 됩니다. 다만, 이렇게 구현했을 때에 주의해야 할 점이 있습니다. &lt;/p&gt;
&lt;h3&gt;주의&lt;/h3&gt;
&lt;p&gt;위에서 언급했듯이, create_all() 메소드는 &lt;code class=&quot;language-text&quot;&gt;Metadata&lt;/code&gt;에 등록된 테이블 정보를 가지고 테이블을 생성합니다. 뒤집어 말하면 &lt;code class=&quot;language-text&quot;&gt;Metadata&lt;/code&gt;에 테이블이 등록되지 않는다면 생성되지 않는 다는 말인데, 따라서  &lt;code class=&quot;language-text&quot;&gt;Metadata&lt;/code&gt;에 테이블 정보가 등록되는 시점을 정확히 아는게 중요합니다. &lt;/p&gt;
&lt;h3&gt;Metadata에 테이블 정보가 등록되는 시점&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체에 테이블 정보가 등록되는 시점은 해당 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체가 생성될 때입니다. SqlAlchemy에서는 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체를 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체에 직접 연결하여 테이블을 정의합니다. 클래스 정의 내에서 &lt;code class=&quot;language-text&quot;&gt;Column&lt;/code&gt;과 같은 필드를 사용하여 &lt;code class=&quot;language-text&quot;&gt;Base&lt;/code&gt; 클래스를 상속받는 모델을 정의하면, 이러한 모델 클래스가 생성될 때 내부적으로 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체가 생성되고 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체에 자동으로 등록됩니다. &lt;code class=&quot;language-text&quot;&gt;declarative_base()&lt;/code&gt;를 호출하여 생성된 &lt;code class=&quot;language-text&quot;&gt;Base&lt;/code&gt; 클래스는 내부적으로 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 인스턴스를 포함하고 있으며, 이 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 인스턴스는 모델 클래스를 통해 정의된 모든 테이블의 메타데이터를 관리합니다.&lt;/p&gt;
&lt;p&gt;따라서, 모델 클래스를 정의하는 순간 해당 클래스에 연결된 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체가 생성되고, 이 객체는 자동으로 &lt;code class=&quot;language-text&quot;&gt;Base&lt;/code&gt; 클래스에 내장된 &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt; 객체에 등록됩니다. 이후 &lt;code class=&quot;language-text&quot;&gt;Base.metadata.create_all(engine)&lt;/code&gt;와 같은 방식으로 호출하면, &lt;code class=&quot;language-text&quot;&gt;MetaData&lt;/code&gt;에 등록된 모든 테이블에 대한 생성 명령이 데이터베이스 엔진으로 전송됩니다.&lt;/p&gt;
&lt;h4&gt;FastAPI에서 모델 클래스가 정의되는 순간은?&lt;/h4&gt;
&lt;p&gt;FastAPI 어플리케이션에서 “모델 클래스가 정의되는 순간”은 Python 스크립트가 실행되어 해당 모델 클래스가 메모리에 로드되는 시점을 의미합니다. &lt;/p&gt;
&lt;p&gt;FastAPI 어플리케이션을 실행하면(예를 들어 &lt;code class=&quot;language-text&quot;&gt;uvicorn main:app&lt;/code&gt; 등의 명령어를 사용하여) Python 인터프리터는 main.py를 로드하고 실행합니다. 이 과정에서 main.py에서 직접적으로, 또는 임포트된 모듈 내에서 다시 임포트된 SqlAlchemy의ㅏ 모델 클래스들도 함께 로드되고 메모리에 생성됩니다. 바로 이 시점에 각 모델 클래스에 해당하는 &lt;code class=&quot;language-text&quot;&gt;Table&lt;/code&gt; 객체가 &lt;code class=&quot;language-text&quot;&gt;Metadata&lt;/code&gt; 객체에 등록됩니다. &lt;/p&gt;
&lt;p&gt;다시 쉽게 이야기하자면, app.py 또는 main.py 같은 파일과 이 파일에 임포트 된 파일들, 다시 임포트 된 파일들 중에 모델 객체가 있어야만 합니다. 외딴섬처럼 덩그러니 model 파일을 생성해두고 아무곳에도 import 하지 않는다면(메인 py 파일과 연결되어 있지 않다면) 테이블은 생성되지 않습니다. 어떻게 생각하면 당연한 일인데, 이 당연한 부분을 놓쳐 길게 헤맸던 기억이 있습니다. 이 기억 때문에 해당 문서를 작성한 셈입니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Readme]]></title><description><![CDATA[nolog…]]></description><link>https://sharknia.github.io/Readme/</link><guid isPermaLink="false">https://sharknia.github.io/Readme/</guid><pubDate>Thu, 08 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;nolog&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;많은 개발자들이 한 번쯤은 &quot;나만의 블로그를 운영해야지&quot;라고 생각해본 적이 있을 겁니다. 하지만 실제로 블로그를 시작하고 유지하는 일은 상당한 도전과제입니다. 공부하고 개발하는 것만으로도 바쁜데, 여기에 글을 쓰고 관리하는 일은 때때로, 아니 항상 부담스러운 일입니다.&lt;/p&gt;
&lt;p&gt;노션으로 공부를 하는 개발자가 있습니다. 일을 하면서일수도 있고, 따로 짬을 내어 공부를 하면서일수도 있습니다. 그러다가 한 번 쯤은 생각하게 됩니다. 노션으로 한 공부나 작업 기록이 블로그에 자동으로 업로드된다면 좋을텐데!&lt;/p&gt;
&lt;p&gt;저 역시 마찬가지입니다. 저는 귀찮은 일이 너무 귀찮습니다. 공부나 블로그나 어차피 한 번에 할 수 있는거 아닌가? 공부만 하면 포스팅이 되면 안되나? 왜 똑같은 일을 두 번 세 번 해야 하는걸까?&lt;/p&gt;
&lt;h4&gt;그래서 만들었습니다.&lt;/h4&gt;
&lt;p&gt;nolog는 노션에 집중해서 작업하거나 공부해서 기록하는 것만으로도 그 내용이 자동으로 마크다운으로 변환되어 GitHub 기반의 블로그에 포스팅될 수 있도록 해주는 프로그램입니다. 취업 준비, 지식 공유, 개인 브랜딩 등 여러 목적으로 블로그를 운영하고자 하는 분들에게 nolog는 시간과 노력을 크게 절약해 줄 것입니다.&lt;/p&gt;
&lt;h3&gt;시작하기&lt;/h3&gt;
&lt;h4&gt;Notion 준비&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;노션 계정을 준비합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.notion.so/248d5b9bf2a644b4b25485c828d5b04f&quot;&gt;Base Template&lt;/a&gt;을 내 노션으로 복제합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/24e5695c45a4177fd1ef50b659afa096/23039/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 71.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwElEQVR42p1S2bKaQBDlEwICgrLNsFwqqHDdReOWpVKpVJ7ymP//jZPpLiFg9D7ch0Mv0930OTPaerFAURSYzWaYTqcoJhOUZYkgCOA4DlzX/Q9xHGOi6jzPQ57n3FdVFfuar5J0YFk2LNuGfYNpmj0MBgNVY7GlobQExePxmPt932eruaMRdN3Aj6+f8fPLFfPlEtvtBrvdjrFQDMiu12usViss1Tn5p9NJ+SseOBwOWzbaSA00TQvHwx6f9ntcr1ecz2fUdY29ig+HAzabDS6XC+bzOftUQzgej7xZVxqNPpQIwhBZlip9JMeGYbRUyeq6zj7ldWOAD4bK3ejTUr2BtHKWvWA6qyBkgljGLHyWZUiSBGma8ibUOFbwQgkvLuDJXF2ez7Sbwe2GUgr8+VXj9/clN3VvlQoJVNfQe/YC2oF0Q+XHBC+x/7Q4VLIIIdqnE0VRW0s/pPifhurdRSJRWgo+aLZq0DQRva7tgnJadwNnaMF17J7IDWizR/mHlN0b5Wr7DXlZc3xf2AzrangvDcUtZbrFfPKKQKRvaiilZJ/svYZ03hsoohBRGDzVkDRqtCNG9zr2NHw04D0a/gW1OHxLHQSjowAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/24e5695c45a4177fd1ef50b659afa096/ca1dc/image1.png&apos; srcset=&apos;/static/24e5695c45a4177fd1ef50b659afa096/e7570/image1.png 170w,
/static/24e5695c45a4177fd1ef50b659afa096/f46e7/image1.png 340w,
/static/24e5695c45a4177fd1ef50b659afa096/ca1dc/image1.png 680w,
/static/24e5695c45a4177fd1ef50b659afa096/02d09/image1.png 1020w,
/static/24e5695c45a4177fd1ef50b659afa096/9d567/image1.png 1360w,
/static/24e5695c45a4177fd1ef50b659afa096/23039/image1.png 1402w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;복제된 페이지에서 공유 - 링크 복사를 눌러 페이지의 주소를 얻습니다. 해당 주소는 &lt;code class=&quot;language-text&quot;&gt;username.notion.site/NOTION_PAGE_ID&lt;/code&gt; 꼴입니다. &lt;code class=&quot;language-text&quot;&gt;NOTION_PAGE_ID&lt;/code&gt;를 기록합니다.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.notion.so/my-integrations&quot;&gt;Notion API 관리 페이지&lt;/a&gt;에서 &lt;code class=&quot;language-text&quot;&gt;새 API 통합 만들기&lt;/code&gt; 를 선택해 API를 생성해줍니다. 워크스페이스별로 권한을 관리하므로, 정확한 워크스페이스를 선택하여 진행합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;프라이빗 API 통합 시크릿키&lt;/code&gt;를 기록합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;콘텐츠 기능은 읽기/업데이트/입력을 필수로 선택해야 합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/49440d05852802e113be20a06a93089b/e0a8c/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 114.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVR42pVV2XLbQAzT//9Vnzr5gb60iQ+dtqz7tCQLBWjLOZp65MxwdiXvQiABMs409mjqEpgvAP4X8+33D6veL3e0zpOFc5kGVEWOoe8wErzvGpy5H4aea2vRdS2m8cx9c31u6+v5M8/rzO13Axx5MUtOqMsCRZ4hjiPExwjpKcYpPiBLT0hOR5RljroqCNZYRj1BBgK2TYWeHxgHAuLGcGGiA31Xo22vh3T5fCaTG9v5nu6DlPWgrzd1ZQDvF1Sv+VMt58t4v7jE13fOOI348drBdV3sd28Ifc9SEivFdyCPwtGFsBiQponVKk1iW4siM4Hme1orAScy/LnpEAQ+XDIMfBfbzSvyLGH9Wiu6VMe8jqlzuTEsaR2pKoY1UxaQomJ9Wwq0NnVj+LLr4ZOht98gDDwDFYiAzV/PpGwbXpAAMqxs0jW1hRguhn0KsKJhFRM9effYJ789AShjx4cQhyiA7+5MDL0TM4X2z1jHbDMxXQmi+qnVGrLVKvCS9lFfr2XqTCMZHkOEoUdRtga8tNrAei6th7Uqi+GsOtIeSXJEniecPpkpLXZiqc5ZbRtNiKGv0FDRa2of/y5PC0OGE34FLSoOB6Wu2ilSsn2fIv9OlYed4uWjMYwoypGK+2w/tWCRp0w7tXJo39KbK3zI2mC0QeB7e5w4XCWMAA+RT+VdG7h6lr3UQY9K4MwEVNoa7/KixIgIFFH1VNOHk1vvYvtQdJ9Imt7fCWUqK+22KbF9ezWgwN9j8/YbgRgTRMzl0d3mD1xay3O3yDnuvgVcNvJcSjFkFa2yUFVmrF1yt48stfyPUU3NFV8A/wLUTwBa4khmwAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/49440d05852802e113be20a06a93089b/ca1dc/image2.png&apos; srcset=&apos;/static/49440d05852802e113be20a06a93089b/e7570/image2.png 170w,
/static/49440d05852802e113be20a06a93089b/f46e7/image2.png 340w,
/static/49440d05852802e113be20a06a93089b/ca1dc/image2.png 680w,
/static/49440d05852802e113be20a06a93089b/e0a8c/image2.png 998w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;노션에서 연결된 워크스페이스를 선택하고, 위에서 만든 통합 API를 연결해줍니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 522px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d7b9e107ca18b8a921c19ab9fec59ce1/d15a3/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 230.58823529411768%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAuCAYAAAAoaDnGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFhUlEQVR42o2XSVIzRxCFdQJvHIDEKDUaAM0S8wxinn4xGQMhO/DG4aUX3jrslTc+gg9gh2/gy6XfVyj1twDxs8ioUnXV65eZL7NLiVQqZaOjozY2NtYbsfHx8fCb58wnJyctmUzaxMREmKc0H9J6W3uOR0asNTxsV9qbSCZTFkUZq1Qqls1mbXZ2Nhi/OTg1NWWfPn2y4+NjG9ah9fV129nZsVEd3js9tZ9KJSsVCjaxvGw3ekEiNTxkgI512bjBDkYYwLAGMIqiYDDMzszYcjpt32nvxeSU/awxMfbjHxbNzFkmPWXR9LSltWFaoxus43PAMplM+J0W+0nNm9ORXenZ9lxVgH/+Z+VG006Ojmx9Y8Pu7++Di9fX18G1arVqzWbTGo1GMOa4vba2Zhvav7W1ZUurq1aan7fx2qIlRn/7x0q1hm1qU1OLZ2dnYSOHlpaWrFarWb1e7xsXFxd7tqTYLSwsWEPPokpTDH//1/JzpeByLp8PGSURuM7o7uVyuV788tqHsYYxn1E80+XGM2BWMdzcWLdisRgYnpyc2OHhoV1eXgb3cQsWZHp7e9sKyqqDxS2qzMtlAeZmi7a1uWlFSYC4cQiX9/f3bW9vz1YVI+LHbyzOzg0vqpv7Avz17wAYZdKW1QMkEjcPAa776C7HDQXUAuAvf1m2MGtLiwuBIQnZFFuYMB4cHPQYw3SQu4HhRkuVUmzoDYUQn3q9EUZAz8/PbWVlJcTzSJICDKkACJt+wPwzYFOySQ59HTaUxA7qLg1Kj7jNzc0FNz3Db7Hzl1RFKJFUmbEIE8AQNNk9v7iwU2V8WTpj81uJwHiGOngeAKlb6LKIwchHbFDMXH+fYxgJsEm3SYa3oDe0Bjvi2Gq17Pb2NiTGxfwWM0qxrtDkgstdQDYTL9+E6t9iMchl9oSkADii5ggAbKhNKuXx8TGwjZfZSwOMREKEJBYKeavUGs8MeUhXobGymdjxkngbAzw+OjP25cmyMwSQDZ1OJ5QZIj5VJ3ZhswZr2hpz1ycvhVm5XA7qyOWy/Ulh87zaF5sYCTZzdwlh+0g48AYwYo5me4Cprg75+CBg2pZ/S7x2vVPjiYvcO3m8o9casSxTqwQZubTb7eAmrsPGqwEmzsqZcYb45/O5z8LmLXRnNgAAOBnHPQ7CmpcCxh7i53PGPkDaEwwAYQONlZ5IgwB0d3c3NFhvCIxxN3tuR91KIbgscIhsxdsVbOkwGPH0OL4W+AthswgjNIXr4aOj7DLSHGCO+8gFFwd3GwFykIWrq6sAQLchGbgK27u7u1DnzKlx2Mb74atu4xXBIu67YD2DLl6vHvYwvmyyvRiSFB6SCGJIhcCK2kY+T09PgTH9kt8kDdH3d6BYDIlZoKvU82bc9wuTfys8s69b/xtJ4VLERmoVmRCrh4eHEE+qIh6rDwESJ1gRK1gx93g5wKAW9uoz2ugCehvisLvtbcznHwbEZYBubm5ClyH4SAiJUM+4Tum9H8eYy8SNNwCGdEiS36wAwwPWGQd/uGKALhtKi0X051ojrozIyXskhfBahzFAf8ghgDhENdCtKbvnG0W91xe/WMu8kR9cNziIwIkdQMyREy+IX5LeBRwaGuoLtruFi34tYc0/D8/fj3cAcSuefkKAuRYZvcZJhstoICDfjzwtCAGLJeOMDhS69hENsp+zVXQYykpWkUTKaE4M0tqQ0ThNn/vSzUE2JYZpPlIw5OZf0mJbcvlGsduTiA8koVONbY3favxenWWQdWSXAqtrLAL4lf4d3SqDPwjwWMAdxfRe1qZqNK6QBG4J3bC8tFnZtrzoCKPFVaSiynjUjxN9QyK1sF2V3qluYKv6rrTUeRYFWhSDcte9vuscN39qWAnr6Dp3W6nZ/+X+f1mfKcLWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/d7b9e107ca18b8a921c19ab9fec59ce1/d15a3/image3.png&apos; srcset=&apos;/static/d7b9e107ca18b8a921c19ab9fec59ce1/e7570/image3.png 170w,
/static/d7b9e107ca18b8a921c19ab9fec59ce1/f46e7/image3.png 340w,
/static/d7b9e107ca18b8a921c19ab9fec59ce1/d15a3/image3.png 522w&apos; sizes=&apos;(max-width: 522px) 100vw, 522px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;프로젝트 준비&lt;/h4&gt;
&lt;/li&gt;
&lt;li&gt;이 저장소의 별표를 누르고 여러분의 프로필로 포크합니다. 그 후 로컬로 클론합니다.&lt;/li&gt;
&lt;li&gt;(Optional) &lt;a href=&quot;http://github.io/&quot;&gt;github.io&lt;/a&gt; 기반의 블로그 저장소를 준비합니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.env.example&lt;/code&gt; 파일의 이름을 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt;로 변경하고 설정값들을 세팅합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NOTION-KEY : 프라이빗 API 통합 시크릿키를 입력합니다.&lt;/li&gt;
&lt;li&gt;NOTION&lt;em&gt;DATABASE&lt;/em&gt;ID : NOTION&lt;em&gt;PAGE&lt;/em&gt;ID를 입력합니다.&lt;/li&gt;
&lt;li&gt;BLOG_URL : 깃허브 블로그의 URL을 입력합니다. 노션 페이지 링크를 실제 블로그 링크로 변경하는데 사용됩니다.&lt;/li&gt;
&lt;li&gt;SAVE_DIR : 콘텐츠들이 저장될 디렉토리입니다. &lt;a href=&quot;http://github.io/&quot;&gt;github.io&lt;/a&gt; 블로그의 저장소에서 포스팅될 마크다운들이 저장될 디렉토리입니다.&lt;/li&gt;
&lt;li&gt;SAVE&lt;em&gt;SUB&lt;/em&gt;DIR (Optional) : 포스트들이 저장될 하위 디렉토리입니다. 노션 페이지의 프로퍼티들로 정의합니다. 예를 들어 date/tag/로 입력한 경우, date와 tag가 노션 페이지의 속성에 존재해야 합니다.&lt;/li&gt;
&lt;li&gt;BLOG_REPO : 블로그 레포지토리의 경로입니다.&lt;/li&gt;
&lt;li&gt;GIT&lt;em&gt;USER&lt;/em&gt;NAME : 깃허브 User Name 입니다.&lt;/li&gt;
&lt;li&gt;GIT&lt;em&gt;USER&lt;/em&gt;EMAIL : 깃허브 User Email 입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;저장소를 내려 받은 곳에서 다음의 명령어를 사용합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nvm use&lt;/li&gt;
&lt;li&gt;npm install&lt;/li&gt;
&lt;li&gt;npm install -g ts-node
여기까지 세팅 후 ts-node index.ts를 실행합니다. 메타데이터 파일이 초기화됩니다. 초기화된 메타데이터를 저장소에 커밋/푸쉬합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;사용법&lt;/h3&gt;
&lt;h4&gt;노션 페이지 마크다운 변환&lt;/h4&gt;
&lt;p&gt;변환은 상태값을 기준으로 작동합니다. 상태값의 정의는 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Writting : 작성중인 글입니다. 블로그에 반영되지 않습니다.&lt;/li&gt;
&lt;li&gt;Ready : Ready 상태의 글은 프로그램이 실행되면 마크다운으로 변환됩니다. 변환 된 후, updated 상태로 바뀝니다.&lt;/li&gt;
&lt;li&gt;Updated : 마크다운 변환이 완료된 글입니다.&lt;/li&gt;
&lt;li&gt;ToBeDeleted : 삭제할 글입니다. 타겟 디렉토리 안의 해당하는 마크다운 파일을 삭제합니다.&lt;/li&gt;
&lt;li&gt;Deleted : 삭제된 글입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;노션에 원하는대로 글을 작성하고, 적당한 상태값을 설정한 뒤 &lt;code class=&quot;language-text&quot;&gt;ts-node index.ts&lt;/code&gt;로 프로그램을 실행하면 지정한 디렉토리에 마크다운 파일이 저장됩니다.&lt;/p&gt;
&lt;h4&gt;호환 노션 블록&lt;/h4&gt;
&lt;p&gt;노션의 다양한 기본 블록을 모두 지원합니다.
또한, &lt;code class=&quot;language-text&quot;&gt;미디어 - 이미지&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;미디어 - 코드&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;미디어 - 북마크&lt;/code&gt; 블록들을 지원합니다.&lt;/p&gt;
&lt;h4&gt;페이지 링크 기능&lt;/h4&gt;
&lt;p&gt;같은 데이터베이스(블로그 데이터베이스)에 속한 노션 페이지라면 해당 페이지 링크를 걸면 그 페이지에 해당하는 블로그 주소로 링크로 변환되는 기능을 제공합니다.&lt;/p&gt;
&lt;h3&gt;[Optional] 블로그 자동 배포&lt;/h3&gt;
&lt;p&gt;로컬에서만 사용해도 노션 글을 마크다운으로 바꿔주는 기능을 갖고 있지만, &lt;a href=&quot;http://github.io/&quot;&gt;github.io&lt;/a&gt; 기반의 블로그 자동 배포도 가능합니다. 이를 위해서 깃허브 액션을 사용합니다.&lt;/p&gt;
&lt;h4&gt;Git Token 발행&lt;/h4&gt;
&lt;p&gt;깃허브의  &lt;code class=&quot;language-text&quot;&gt;Settings&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Developer Settings&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Personal Access Token&lt;/code&gt; 메뉴에서 토큰을 발행해야 합니다.&lt;/p&gt;
&lt;h4&gt;변수 설정&lt;/h4&gt;
&lt;p&gt;레포지토리에 Secrets와 Variables를 설정해줘야 합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/fc6c8449bc5f9741ee6642a2df626c95/d6043/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVR42nVT7XKbQAz07zjxJ1/mODg4jCEmTpuJnZk8SPv+T7LVil5KMs2PHR0naaXVicVyHWO1y7BPLZbrSHGvdynyqoUpPYrKwzraFncPe/FHWEkM45YfNtLz4mGbYpcUqNpHxLlTct5t4wLD5RXt+YaqFwxXuP6K0o9oTqPGu+MZ7fCMuhtRy3kbGyHcJNhEOcqmR+UHPd/L3T4t0I43lP0biv4dxv9A7gZYL0RCZuuT5tAWAlMdsd4fsGAymQvXqWwWYId0MtjWnfhalGKnc4e8bFUViwdQGbkWUzelViVRAAmZnBUNElPrfJaraU46N8mbI+QpIauRMMilI4zB/pXFbxZhJ3PMm/hE2JyecLBeqwdn6OpOwLi86iTuorGuPWuR/xJydo281FaI5+3PEWad5LXAIcrKybcR3ypR8PzxKJwVgxg8rY1BP77A9xdZlUHkfpaokjcZ4s5h+HXD8PsN2csxSLboHn/CixQSM5hyKpGVyjd3cicqvoKKUtvAngbErsbuUAjhWghTqXK5aifskCPgXDnTXPZL1+mbMbBwZhqxZtpDUza6e1xMkoRHYZfcN64O77++7r8/ymhhWpL/AXYtNKhRVx2pAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/fc6c8449bc5f9741ee6642a2df626c95/ca1dc/image4.png&apos; srcset=&apos;/static/fc6c8449bc5f9741ee6642a2df626c95/e7570/image4.png 170w,
/static/fc6c8449bc5f9741ee6642a2df626c95/f46e7/image4.png 340w,
/static/fc6c8449bc5f9741ee6642a2df626c95/ca1dc/image4.png 680w,
/static/fc6c8449bc5f9741ee6642a2df626c95/02d09/image4.png 1020w,
/static/fc6c8449bc5f9741ee6642a2df626c95/9d567/image4.png 1360w,
/static/fc6c8449bc5f9741ee6642a2df626c95/d6043/image4.png 2432w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
저장소의 &lt;code class=&quot;language-text&quot;&gt;Settings&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Secrets and varaibles&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Actions&lt;/code&gt;에서 깃허브 액션에 필요한 환경변수를 설정할 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Secrtes
GITTOKEN, NOTION&lt;em&gt;DATABASE&lt;/em&gt;ID, NOTION_KEY를 생성 해줍니다. GITTOKEN은 방금 발행한 Git Token 값이며, 나머지는 환경변수에 입력한 것과 동일한 값입니다.&lt;/li&gt;
&lt;li&gt;Varaiables
BLOG&lt;em&gt;REPO, BLOG&lt;/em&gt;URL, GIT&lt;em&gt;USER&lt;/em&gt;EMAIL, GIT&lt;em&gt;USER&lt;/em&gt;NAME, SAVE_DIR를 생성합니다. 환경변수 입력과 동일한 값입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;워크플로우 설정&lt;/h4&gt;
&lt;p&gt;깃허브 기반의 블로그 배포는 사용하는 테마에 따라 방법이 완전히 다릅니다. 따라서 깃허브 액션 워크플로우를 자동 배포까지 하는 경우, 자동 배포는 별도로 구성하여 블로그 저장소에 커밋/푸쉬까지만 하면 되는 케이스별로 구분해두었습니다.&lt;/p&gt;
&lt;p&gt;포크를 한 경우에는 기본적으로 워크플로우가 비활성화 되어있습니다. 원하는 워크플로우 고른 후 활성화 해주면 됩니다.&lt;/p&gt;
&lt;h4&gt;블로그 저장소에 커밋/푸쉬까지만 자동화하는 워크플로우&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;workflow_2.yml.disabled&lt;/code&gt; 워크플로우를 사용하면 됩니다. 파일 이름에서 .disabled를 제거해야 합니다.
노션에서 글을 가져와 깃허브 블로그 레포지토리에 마크다운 파일을 집어넣고 커밋/푸쉬 하는 것까지 자동화 되어있습니다.&lt;/p&gt;
&lt;h4&gt;블로그 배포까지 자동화하는 워크플로우&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;main.yml&lt;/code&gt; 파일의 &lt;code class=&quot;language-text&quot;&gt;blog-deploy&lt;/code&gt; Job을 참조해서 워크플로우를 각자 블로그 배포 형식에 맞게 수정하면 됩니다. 해당 파일은 제가 실제로 배포에 사용하는 파일입니다.&lt;/p&gt;
&lt;h3&gt;개발과정&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/series/GitHub-Pages%EC%99%80-Notion-API-%EC%97%B0%EB%8F%99/&quot;&gt;개발과정 몰아보기&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;문의&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;mailto:zel@kakao.com&quot;&gt;zel@kakao.com&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[시맨틱 버전 관리]]></title><description><![CDATA[서론 개인적으로 이것저것 만들려고 시도한 적은 많았는데, 완성한 적은 이번이 처음입니다. (nolog…]]></description><link>https://sharknia.github.io/시맨틱-버전-관리/</link><guid isPermaLink="false">https://sharknia.github.io/시맨틱-버전-관리/</guid><pubDate>Thu, 08 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;개인적으로 이것저것 만들려고 시도한 적은 많았는데, 완성한 적은 이번이 처음입니다. (&lt;a href=&quot;https://sharknia.github.io/series/GitHub-Pages%EC%99%80-Notion-API-%EC%97%B0%EB%8F%99/&quot;&gt;nolog 프로젝트&lt;/a&gt;) 라이센스도 등록해보고 릴리즈도 처음 해봤는데, 릴리즈를 하려다 보니 다음과 같은 문구가 있었습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    If you’re new to releasing software, we highly recommend to learn more about semantic versioning.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;“버전 관리” 에 대해서는 추상적으로 알고 있었지만, 시맨틱 버전 관리라는 개념의 이름에 대해서는 처음 알았습니다. 부끄러운 일이기도 하고, 또 이번 기회에 잘 알아둬야겠다고 생각이 들어서 한 번 정리해두려고 합니다. &lt;/p&gt;
&lt;h2&gt;시맨틱 버전 관리란?&lt;/h2&gt;
&lt;p&gt;시맨틱 버전 관리는 소프트웨어 버전 번호를 할당하고 증가시키는 규칙 시스템입니다. 이 시스템은 소프트웨어의 버전을 명확하게 해줘 개발자가 소프트웨어의 변경 사항을 쉽게 이해할 수 있게 돕습니다. 시맨틱 버전 관리는 주로 세 부분으로 구성된 버전 번호를 사용합니다. &lt;/p&gt;
&lt;h3&gt;Major Version&lt;/h3&gt;
&lt;p&gt;이전 버전과 호환되지 않는 새로운 변경사항을 도입했을 때 증가합니다.&lt;/p&gt;
&lt;h3&gt;Minor Version&lt;/h3&gt;
&lt;p&gt;이전 버전과 호환되면서 새로운 기능이 추가되었을 때 증가합니다. &lt;/p&gt;
&lt;h3&gt;Patch Version&lt;/h3&gt;
&lt;p&gt;이전 버전과 호환되는 버그 수정이 이루어졌을 때 증가합니다. &lt;/p&gt;
&lt;p&gt;버전 번호는 &lt;code class=&quot;language-text&quot;&gt;Major.Minor.Patch&lt;/code&gt; 형식으로 표현됩니다. 예를 들어 &lt;code class=&quot;language-text&quot;&gt;2.3.1&lt;/code&gt; 과 같은 형태로 나타날 수 있습니다. &lt;/p&gt;
&lt;h2&gt;목적&lt;/h2&gt;
&lt;p&gt;소프트웨어 어떤 버전이 다른 버전과 어떻게 다른지를 명확하게 명시하여 소프트웨어를 사용하는 개발자들이 해당 변경사항을 쉽게 파악하고 대응할 수 있도록 합니다. &lt;/p&gt;
&lt;p&gt;예를 들어 어떤 라이브러리의 Major 버전이 변경되었다면 이는 기존 코드와 호환되지 않을 수 있는 중대한 변경이 있었음을 의미합니다. 따라서 개발자는 코드를 업데이트 하기 전에 해당 변경 사항을 주의 깊게 검토할 필요가 있습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Typescript의 Testcode 맛보기]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Typescript의-Testcode-맛보기/</link><guid isPermaLink="false">https://sharknia.github.io/Typescript의-Testcode-맛보기/</guid><pubDate>Tue, 06 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;파이썬에서 잠깐 테스트코드를 맛본적이 있습니다. 문법 자체는 조금 복잡했지만(익숙하지 않았지만) 설치 자체는 그다지 어렵지 않았던 것으로 기억합니다. &lt;/p&gt;
&lt;p&gt;그래서 타입스크립트에서도 그럴 줄 알았습니다. &lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;일단, 설치가 한 두개가 아니었습니다. 또, 설치하는 패키지를 package.json 파일의 devDependencies에 추가했습니다. 이는 개발 시에만 필요한 의존성을 나타냅니다. 처음에는 멋모르고 다음의 패키지 하나만 설치해주었습니다. &lt;/p&gt;
&lt;h3&gt;@types/jest 설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; i --save-dev @types/jest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;--save-dev&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;설치하는 패키지를 package.json 파일의 devDependencies에 추가하는 옵션이 바로 이 옵션입니다. 프로덕션에서는 필요하지 않은 테스트 라이브러리, 빌드 도구 등을 설치할 때에 해당 옵션을 붙여 설치합니다. 이 옵션을 붙여 설치할 경우, 다음과 같이 추가됩니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;&quot;@types/jest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^26.0.0&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 빌드 시스템이나 배포 파이프라인에서 &lt;code class=&quot;language-text&quot;&gt;npm install --production&lt;/code&gt; 명령어를 사용하면 이 곳에 정의된 패키지들은 설치를 건너뛰게 됩니다. &lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;@types/jest&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Jest는 자바스크립트 테스팅 프레임워크입니다. &lt;code class=&quot;language-text&quot;&gt;@types/jest&lt;/code&gt; **** 는 Jest의 타입 정의를 포함하는 타입스크립트 패키지입니다. 타입스크립트 프로젝트에서 Jest를 사용할 때, Jest의 함수와 객체에 대한 자동 완성, 타입 체킹 등의 이점을 제공합니다. &lt;/p&gt;
&lt;p&gt;그렇습니다. Jest는 별도로 설치해야 합니다. &lt;/p&gt;
&lt;h3&gt;Jest 설치&lt;/h3&gt;
&lt;p&gt;Jest 역시 설치해줍니다. 역시 개발 환경에서만 사용할 라이브러리 이므로 —save-dev 옵션을 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; --save-dev jest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Jest 설치 후 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;  scripts 섹션에 다음의 내용을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jest&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 &lt;code class=&quot;language-text&quot;&gt;npm test&lt;/code&gt; 명령어가 Jest를 실행합니다. &lt;/p&gt;
&lt;h3&gt;TypeScript를 위한 Jest 설정&lt;/h3&gt;
&lt;p&gt;Jest는 기본적으로 JavaScript 파일을 지원하지만 TypeScript 파일을 처리하기 위해서는 추가적인 설정이 필요합니다. &lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;ts-jest&lt;/code&gt; 설치&lt;/h4&gt;
&lt;p&gt;Jest가 TypeScript 파일을 이해할 수 있도록 ts-jest를 설치해야 합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;npm install --save-dev ts-jest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;jest.config.js&lt;/h4&gt;
&lt;p&gt;프로젝트 루트에 jest.config.js 파일을 생성 또는 수정하여 ts-jest를 사용하도록 Jest를 구성합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// jest.config.js&lt;/span&gt;
module.exports = &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  preset&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;ts-jest&apos;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  testEnvironment&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;node&apos;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;npm test&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;모든 설정을 마친 후 npm test를 실행하면 &lt;code class=&quot;language-text&quot;&gt;__test__&lt;/code&gt; 를 자동으로 탐색하여 &lt;code class=&quot;language-text&quot;&gt;.test.js&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;.spec.js&lt;/code&gt; 접미사를 가진 파일의 테스트를 실행합니다. &lt;/p&gt;
&lt;h2&gt;테스트 파일의 경로&lt;/h2&gt;
&lt;p&gt;테스트 파일을 어디에 둘 것인가? 는 몇가지 패턴이 있고, 가장 널리 사용되는 방식은 다음의 두가지입니다. &lt;/p&gt;
&lt;h3&gt;동일 디렉토리 내에 테스트 파일 배치&lt;/h3&gt;
&lt;p&gt;코드 파일과 동일한 디렉토리에 그에 해당하는 테스트 파일을 둡니다. 테스트 파일과 관련된 코드 파일이 가까이에 있어서 관리하기가 쉬운것이 장점입니다. 파일 이름은 대체로 테스트되는 파일의 이름을 따르며, &lt;code class=&quot;language-text&quot;&gt;.test&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;.spec&lt;/code&gt; 접미사를 추가하여 구분합니다. &lt;/p&gt;
&lt;h3&gt;별도의 테스트 디렉토리 사용&lt;/h3&gt;
&lt;p&gt;프로젝트 루트 또는 각 기능별 디렉토리에 &lt;code class=&quot;language-text&quot;&gt;__tests__&lt;/code&gt; 디렉토리를 만들고, 그 안에 관련 테스트 파일을 모으는 것입니다. 이 구조는 테스트 파일을 소스 코드에서 분리하여, 소스 코드 디렉토리를 더 깔끔하게 유지할 수 있게 해줍니다.&lt;/p&gt;
&lt;p&gt;또는 프로젝트 루트에 &lt;code class=&quot;language-text&quot;&gt;tests&lt;/code&gt; 디렉토리를 만들고 그 안에 모든 테스트 파일을 분류하는 방법도 있습니다.&lt;/p&gt;
&lt;h2&gt;오늘의 마무리&lt;/h2&gt;
&lt;p&gt;여기까지 하면 일단 test 코드를 실행할 수는 있습니다. 코파일럿의 도움을 받아 테스트코들 작성하고, 코드를 읽는데까지는 성공했습니다(?)&lt;/p&gt;
&lt;p&gt;예를 들어 완성한 테스트 코드 하나는 다음과 같습니다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;envConfig.test.ts&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; EnvConfig &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../envConfig&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

describe&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;EnvConfig&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    let envConfig&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    beforeAll&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 환경 변수 설정
        process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BLOG_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://example.com/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SAVE_DIR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/path/to/save&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SAVE_SUB_DIR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;subdir&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; EnvConfig 인스턴스 생성
        envConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    afterAll&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 환경 변수 정리
        delete process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BLOG_URL&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        delete process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SAVE_DIR&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        delete process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SAVE_SUB_DIR&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    it&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should have the correct notionKey value&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        expect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notionKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NOTION_KEY &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    it&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should have the correct databaseid value&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        expect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NOTION_DATABASE_ID &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    it&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should correctly handle trailing slashes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        expect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blogUrl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://example.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 끝 슬래시 제거 확인
        expect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/path/to/save/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 끝에 슬래시 추가 확인
        expect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveSubDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toEqual&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;subdir/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt; 끝에 슬래시 추가 확인
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;테스트코드를 작성하면서 느낀점은, 역시 테스트코드는 사전에 짜는게 의미가 있는 것 같습니다. 또 역시 문법이 상당히 어색합니다. 추가적인 노력이 많이 필요하다고 느끼고, 가능하면 다음에는 프로젝트 처음부터 테스트 코드를 먼저 짜보려고 합니다. &lt;/p&gt;
&lt;p&gt;오히려 좀 더 필요성을 느끼게 되었습니다. 살짝 고생했지만 좋은 시간이었습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Github Action Output]]></title><description><![CDATA[목적 깃허브 액션에서 Job들은 서로 다른 독립된 환경을 가집니다. 각 작업은 독립적으로 실행되며, 각기 다른 러너 환경에서 다른 버전의 도구를 사용할 수 있습니다. 이것은 아주 강점이지만, 때로 다른 Job…]]></description><link>https://sharknia.github.io/Github-Action-Output/</link><guid isPermaLink="false">https://sharknia.github.io/Github-Action-Output/</guid><pubDate>Sun, 04 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;목적&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Github-Actions&quot;&gt;깃허브 액션&lt;/a&gt;에서 Job들은 서로 다른 독립된 환경을 가집니다. 각 작업은 독립적으로 실행되며, 각기 다른 러너 환경에서 다른 버전의 도구를 사용할 수 있습니다. 이것은 아주 강점이지만, 때로 다른 Job끼리 변수를 공유해야 하는 상황이 있을 수 있습니다. &lt;/p&gt;
&lt;p&gt;이때 사용하는 것이 Output 입니다. &lt;/p&gt;
&lt;h2&gt;선언하기&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;outputs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 다른 job에서 사용하기 위해 선언&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;output1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; steps.step1.outputs.test &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;output2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; steps.step2.outputs.test &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; step1 &lt;span class=&quot;token comment&quot;&gt;# 해당 output을 특정하기 위한 id 선언&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; echo &quot;test=hello&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; &quot;$GITHUB_OUTPUT&quot;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; step2
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; echo &quot;test=world&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; &quot;$GITHUB_OUTPUT&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본적인 선언 방법은 &lt;code class=&quot;language-text&quot;&gt;echo &quot;변수=값&quot; &gt;&gt; &quot;$GITHUB_OUTPUT”&lt;/code&gt; 의 꼴입니다. 예전에는 set_output을 사용했던 것 같은데, 이 방법도 지금 작동은 제대로 하지만 해당 코드로 실행을 해보면 보안상의 문제로 곧 depacreted 될 거라는 warning이 발생합니다. &lt;/p&gt;
&lt;p&gt;반드시 id를 지정해줘야 합니다. 해당 id를 사용해 나중에 원하는 변수를 참조할 수 있습니다. &lt;/p&gt;
&lt;p&gt;output은 동일한 job이 아니라 job2에서 사용을 하고 싶을 경우에 선언해야 합니다. &lt;/p&gt;
&lt;h2&gt;사용하기 - 동일한 job&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; use output same job
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
          echo ${{ steps.step1.outputs.test}}
          echo ${{ steps.step2.outputs.test}}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;같은 job 안에서 사용할때에는 &lt;code class=&quot;language-text&quot;&gt;${{ steps.”id”.outputs.”변수명”}}&lt;/code&gt; 의 꼴로 사용하면 됩니다. &lt;/p&gt;
&lt;h2&gt;사용하기 - 다른 job&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;  &lt;span class=&quot;token key atrule&quot;&gt;job2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;OUTPUT1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;needs.job1.outputs.output1&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;OUTPUT2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;needs.job1.outputs.output2&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; echo &quot;$OUTPUT1 $OUTPUT2&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다른 job에서 해당 변수를 사용할 경우에도 &lt;a href=&quot;https://sharknia.github.io/Github-Actions-Job---needs&quot;&gt;needs&lt;/a&gt; 종속성 선언을 해줘야 합니다. job1에서 선언한 output을 사용할 것이므로 needs 설정을 해주고 &lt;code class=&quot;language-text&quot;&gt;${{ needs.”job-이름”.outputs.”output변수명”}}&lt;/code&gt; 의 꼴로 참조할 수 있습니다. &lt;/p&gt;
&lt;p&gt;또한, 변수 명의 경우 대소문자는 구분하지 않습니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/actions/using-jobs/defining-outputs-for-jobs#%EC%98%88-%EC%9E%91%EC%97%85-%EC%B6%9C%EB%A0%A5-%EC%A0%95%EC%9D%98&quot;&gt;https://docs.github.com/ko/actions/using-jobs/defining-outputs-for-jobs#예-작업-출력-정의&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Github Actions]]></title><description><![CDATA[소개 Github Actions…]]></description><link>https://sharknia.github.io/Github-Actions/</link><guid isPermaLink="false">https://sharknia.github.io/Github-Actions/</guid><pubDate>Sun, 04 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소개&lt;/h2&gt;
&lt;p&gt;Github Actions는 깃허브에서 직접 소프트웨어 개발 워크플로우를 자동화할 수 있는 기능입니다. 개발자는 이를 사용해서 소프트웨어 빌드, 테스트, 배포와 같은 과정을 자동화하여 특정 트리거가 발생했을 경우 자동으로 실행되는 워크플로우를 작성할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;강점 및 특징&lt;/h2&gt;
&lt;h3&gt;깃허브와의 통합&lt;/h3&gt;
&lt;p&gt;깃허브와 깊게 통합되어 있어 깃허브 리포지토리 내에서 직접 워크플로우를 관리하고 실행할 수 있습니다. 따라서 코드 변경, PR, 이슈 생성 등 깃허브 이벤트에 기반한 자동화를 간편하게 설정할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;언어와 프레임워크에 대한 광범위한 지원&lt;/h3&gt;
&lt;p&gt;다양한 프레임워크와 프로그래밍 언어를 지원합니다.이로 인해 거의 모든 소프트웨어 프로젝트에 적용할 수 있는 유연성을 제공합니다. &lt;/p&gt;
&lt;h3&gt;재사용 가능한 컴포넌트&lt;/h3&gt;
&lt;p&gt;마켓플레이스에서 다른 개발자가 만든 액션을 재사용하거나 자신의 커스텀 액션을 만들어 공유할 수 있습니다. &lt;/p&gt;
&lt;h3&gt;유연한 트리거 옵션&lt;/h3&gt;
&lt;p&gt;다양한 깃허브 이벤트에 대한 트리거 옵션을 제공합니다. 또한 cron 기반의 스케쥴을 통해서도 실행이 가능합니다. 이를 이용해 자유롭게 필요에 따라 자동화 작업을 실행할 수 있습니다. &lt;/p&gt;
&lt;h2&gt;Github Actions의 이해&lt;/h2&gt;
&lt;h3&gt;Workflow&lt;/h3&gt;
&lt;p&gt;워크플로우는 하나 이상의 작업을 실행하는 자동화된 프로세스입니다. 워크플로우는 리포지토리의 &lt;code class=&quot;language-text&quot;&gt;.github/workflows&lt;/code&gt; 디렉토리 아래 YAML 파일에 의해 정의되며 리포지토리의 이벤트 또는 스케쥴러에 따라 실행됩니다. &lt;/p&gt;
&lt;h3&gt;Jobs&lt;/h3&gt;
&lt;p&gt;크게 뭉뚱그려서 이야기하면 워크플로우는 결국 Job들의 집합입니다.&lt;/p&gt;
&lt;p&gt; Job들은 서로 다른 독립된 환경을 가집니다. 각 작업은 독립적으로 실행되며, 각기 다른 러너 환경에서 다른 버전의 도구를 사용할 수 있습니다. 이 방법을 사용하면, 하나의 워크플로우 안에서 서로 다른 환경, 서로 다른 패키지 세트를 사용하여 작업을 수행할 수 있습니다. &lt;/p&gt;
&lt;h4&gt;여러 Job의 선언&lt;/h4&gt;
&lt;p&gt;예를 들어, 첫번째 잡과 두번째 잡이 각각 다른 node 버전을 사용해야 하는 경우 다음과 같이 구성할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;job2

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js (Version for Build)
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;12&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 첫 번째 작업에 필요한 노드 버전&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install Dependencies for Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm run build

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Additional Build Steps
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 필요한 추가 빌드 스텝&lt;/span&gt;

  &lt;span class=&quot;token key atrule&quot;&gt;job2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js (Version for Deploy)
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;18&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 두 번째 작업에 필요한 노드 버전&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install Dependencies for Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm run build

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Additional Build Steps
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 필요한 추가 빌드 스텝&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Step&lt;/h3&gt;
&lt;p&gt;Job은 Step들의 집합입니다. Step은 실행될 셀 스크립트 또는 실행될 action들이이며, Step들은 정의된 순서대로 실행됩니다.&lt;/p&gt;
&lt;p&gt;각 Step은 동일한 runner에서 실행되므로(Job이 가진 환경을 공유하므로) step 마다 데이터를 공유할 수 있다. 즉 한 job 안에서 빌드하는 step, 이를 테스트 하는 step을 한 번에 가질 수 있습니다.&lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions&quot;&gt;https://docs.github.com/ko/actions/learn-github-actions/understanding-github-actions&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Github Actions Job - needs]]></title><description><![CDATA[개요 기본적으로 아무 설정이 없다면 각 Job들은 병렬적으로 실행됩니다.  예를 들어 job1과 job2를 선언한 경우, 이 두 job은 워크플로우 실행 시 동시에 시작이 됩니다.  이 때,  를 사용해 Job들 사이에 종속성을 주어 Job…]]></description><link>https://sharknia.github.io/Github-Actions-Job---needs/</link><guid isPermaLink="false">https://sharknia.github.io/Github-Actions-Job---needs/</guid><pubDate>Sun, 04 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;기본적으로 아무 설정이 없다면 각 Job들은 병렬적으로 실행됩니다.  예를 들어 job1과 job2를 선언한 경우, 이 두 job은 워크플로우 실행 시 동시에 시작이 됩니다. &lt;/p&gt;
&lt;p&gt;이 때, &lt;code class=&quot;language-text&quot;&gt;needs&lt;/code&gt; 를 사용해 Job들 사이에 종속성을 주어 Job 하나가 끝나야 다음 Job이 실행되도록 설정할 수 있습니다.&lt;/p&gt;
&lt;h2&gt;예제&lt;/h2&gt;
&lt;h3&gt;순차적으로 실행하기&lt;/h3&gt;
&lt;p&gt;다음과 같이 needs에 다른 job의 이름을 지정해주면, 해당 job이 끝나야 이 job이 실행되도록 할 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;job2

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;# 첫번째 작업 실행...&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1 &lt;span class=&quot;token comment&quot;&gt;# &apos;job1&apos; 작업이 성공적으로 완료된 후에 실행&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;# 두번째 작업 실행...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 경우에는 job1이 실패할 경우, job2의 작업도 건너뛰게 됩니다. &lt;/p&gt;
&lt;h3&gt;여러개의 needs 선언하기&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1
  &lt;span class=&quot;token key atrule&quot;&gt;job3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;job1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; job2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 선언되어있다고 할 때에, job1이 반드시 성공해야 job2가 실행이 되며, job1, job2가 모두 성공적으로 완료되어야 job3이 실행됩니다. &lt;/p&gt;
&lt;h3&gt;성공-실패 여부 상관없이 순차적으로 실행하기&lt;/h3&gt;
&lt;p&gt;job의 실행에도 조건문을 걸 수 있습니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;job2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; job1
  &lt;span class=&quot;token key atrule&quot;&gt;job3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; always() &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;job1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; job2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 이 조건문은 job1, job2의 성공 여부와는 상관없이 단지 순차적으로 작업을 실행합니다. 즉, job2가 실패하더라도 job3은 job1, job2 완료 이후에 실행됩니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/actions/using-jobs/using-jobs-in-a-workflow&quot;&gt;https://docs.github.com/ko/actions/using-jobs/using-jobs-in-a-workflow&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Github Actions Workflow 수동으로 실행하기]]></title><description><![CDATA[왜 필요한가? 깃허브 액션 워크플로우를 로컬에서 테스트하기가 쉽지 않습니다. 결국 깃허브 콘솔 또는 깃허브 CLI를 이용해서 테스트 하게 되는 경우가 대부분입니다.  단순히 Re-Run…]]></description><link>https://sharknia.github.io/Github-Actions-Workflow-수동으로-실행하기/</link><guid isPermaLink="false">https://sharknia.github.io/Github-Actions-Workflow-수동으로-실행하기/</guid><pubDate>Sun, 04 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;왜 필요한가?&lt;/h2&gt;
&lt;p&gt;깃허브 액션 워크플로우를 로컬에서 테스트하기가 쉽지 않습니다. 결국 깃허브 콘솔 또는 깃허브 CLI를 이용해서 테스트 하게 되는 경우가 대부분입니다. &lt;/p&gt;
&lt;p&gt;단순히 Re-Run을 실행하면, 레포에 변경된 내용이 반영되지 않고 그 당시 환경에 대해서만 재실행이 되어 정상적인 테스트가 불가능합니다. &lt;/p&gt;
&lt;p&gt;결국 트리거에 Push 조건을 걸어놓고, 변경 사항을 만들어서 Push를 해서 워크플로우를 테스트 하고 있었습니다. &lt;/p&gt;
&lt;p&gt;그런데, 수동으로 깃허브 웹 콘솔에서 수동으로 워크플로우를 테스트 할 수 있게 해주는 방법이 있습니다. &lt;/p&gt;
&lt;h2&gt;워크플로우 파일 수정&lt;/h2&gt;
&lt;p&gt;트리거에 &lt;code class=&quot;language-text&quot;&gt;workflow_dispatch&lt;/code&gt; 이벤트를 추가해줍니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    workflow_dispatch&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;수동으로 워크플로우 수동으로 실행&lt;/h2&gt;
&lt;p&gt;위의 이벤트를 트리거에 추가해주고, 웹 콘솔에서 다음의 화면으로 이동합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/52b3ae143f3b94f5c834e6f0b5378b36/16e03/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 22.941176470588236%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA9ElEQVR42lXPyVLDMBAEUF+AxIsWrMVClmXHWHG2ghQU//9nzSQOSw6vWnPQ1HSWM4VCWBjb4mwCRhvAlEMlNAquUQoDJi3WVY2HFcPjmt95KsQi51jlAllsBzjj0YcNmibCDzN8HCFpKXu24PVC1A2EunC3XNR0iGoCuH4BI9lnOmB2HZJ2iLZDv/+CH9/Q9CfKd9h4hA77f3Z3s+kO0CT1B3ykMzJF1zGqx6WB0B5+OiFuzzBhhmw2V8IMEPaWLv29KTmldK/o/YRdOyGrqFZJyy6Ysohpxrg9Io4zXBiutSqpfzHV4vLnZy6Fotoekqx4jW+hqX/GKAqeEAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/52b3ae143f3b94f5c834e6f0b5378b36/ca1dc/image1.png&apos; srcset=&apos;/static/52b3ae143f3b94f5c834e6f0b5378b36/e7570/image1.png 170w,
/static/52b3ae143f3b94f5c834e6f0b5378b36/f46e7/image1.png 340w,
/static/52b3ae143f3b94f5c834e6f0b5378b36/ca1dc/image1.png 680w,
/static/52b3ae143f3b94f5c834e6f0b5378b36/02d09/image1.png 1020w,
/static/52b3ae143f3b94f5c834e6f0b5378b36/9d567/image1.png 1360w,
/static/52b3ae143f3b94f5c834e6f0b5378b36/16e03/image1.png 1651w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
Actions 탭 - 수정된 워크플로우로 이동하면 Run Workflow 버튼이 생긴 것을 볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;특이사항으로, 혹시 워크플로우를 비활성화 한다면 해당 버튼도 활성화되지 않습니다. &lt;/p&gt;
&lt;h2&gt;참조&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/actions/using-workflows/manually-running-a-workflow?tool=webui&quot;&gt;https://docs.github.com/ko/actions/using-workflows/manually-running-a-workflow?tool=webui&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(11)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅11/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅11/</guid><pubDate>Sun, 04 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;요약&lt;/h2&gt;
&lt;p&gt;짬짬이 틈을 내서 하는 작업이다 보니 문서화 작업을 제대로 못했습니다. 짜잘짜잘한 오류 수정이 있었으며, 비교적 큰 수정도 있었고 완성이 됐다고 판단해 버전을 정의하고 릴리즈도 해봤습니다. &lt;/p&gt;
&lt;h2&gt;버그 수정&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;코드 블록의 들여쓰기가 제대로 적용되지 않는 문제가 수정되었습니다. &lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;코드&lt;/code&gt;  스타일 내에서 언더바가 제대로 인식되지 않는 문제가 수정되었습니다. &lt;/li&gt;
&lt;li&gt;타이틀에 스타일이 포함된 경우(노션에서 확인하기 어려움) 타이틀이 짤리던 문제가 수정되었습니다. &lt;/li&gt;
&lt;li&gt;기타 일부 스타일이 적용되지 않던 문제가 해결됐습니다. &lt;/li&gt;
&lt;li&gt;API 호출 시 타임아웃이 될 경우 대책없이 프로그램이 중단되던 문제가 해결됐습니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;업데이트&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;이제 토글 블록이 지원됩니다.&lt;/li&gt;
&lt;li&gt;블로그 자동 배포가 워크플로우에 포함되었습니다. 이를 위해 깃허브 계정을 미리 설정할 수 있게 되었습니다. &lt;/li&gt;
&lt;li&gt;메타데이터 초기화 기능이 추가되었습니다. 이제 새로운 계정으로 세팅 시 메타데이터 파일이 초기화됩니다.&lt;/li&gt;
&lt;li&gt;코드 리팩토링의 일부로 일부 코드의 디렉토리가 분리되었습니다. &lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;v1.0.0-beta&lt;/code&gt;가 릴리즈 되었습니다. Readme가 완성되었습니다. &lt;/li&gt;
&lt;li&gt;프로젝트 이름이 &lt;code class=&quot;language-text&quot;&gt;nolog&lt;/code&gt;로 확정되었습니다.&lt;/li&gt;
&lt;li&gt;라이센스가 명시되었습니다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;타임아웃 문제의 해결&lt;/h2&gt;
&lt;p&gt;기타 다른 버그는 짜잘짜잘한 수정이었지만 타임아웃 문제 해결은 나름대로 머리를 써서 구현했으므로 해당 과정을 별도로 기록합니다. &lt;/p&gt;
&lt;h3&gt;문제 파악&lt;/h3&gt;
&lt;p&gt;노션 API를 사용하고 있고, 해당 API를 사용하기 위해서 notionClient 라이브러리를 사용하고 있습니다. 그리고 주로 데이터베이스 정보를 읽어올 때, 페이지 안의 내용을 읽어올 때, 블록 안의 내용을 읽어올 때 해당 라이브러리를 사용하여 통신합니다. &lt;/p&gt;
&lt;p&gt;하지만 가끔 가다 간헐적으로 규칙성 없이 timeout이 발생하는 문제가 있었습니다. 이를 해결하기 위해 Notion Client 라이브러리를 상속한 NotionClientWithRetry 클래스를 생성하고, 세가지 메소드에 대해 재시도 로직을 하는 공통 메소드를 생성하고 코드상에서 Client 직접 호출 대신 해당 메소드를 이용해 Client를 호출하도록 수정해주었습니다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;NotionClientWithRetry.ts&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@notionhq/client&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionClientWithRetry&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; maxRetries&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; retryDelay&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        maxRetries&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        retryDelay&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;auth &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;maxRetries &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;maxRetries &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryDelay &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryDelay &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 기본 1초 대기&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;retryAPI&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token function-variable function&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        retries&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;maxRetries&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;retries &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[retryAPI] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;maxRetries &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; retries&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; retrying.....&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;&lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryDelay&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retryAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; retries &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;blocksRetrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; block_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retryAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blocks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;databasesQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        filter&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        sorts&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retryAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pagesRetrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; page_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retryAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;따로 사용자가 설정할 수 있지만 기본적으로는 1초에 한 번씩 최대 3번까지 재시도를 하도록 해주었습니다. &lt;/p&gt;
&lt;p&gt;해당 코드를 적용한 이후로는 API 호출에 실패해서 프로그램이 중단되는 일은 겪지 못했습니다. &lt;/p&gt;
&lt;h2&gt;블로그 자동 배포가 포함된 워크플로우 작성&lt;/h2&gt;
&lt;p&gt;블로그 자동 배포 워크플로우는 사실 &lt;a href=&quot;http://github.io/&quot;&gt;github.io&lt;/a&gt; 쪽 레포에 이미 구현이 되어 있어 추가 구현이 필요 없었으며, 깃허브 블로그 테마마다 배포 방식이 다를 수 있어 사실 꼭 구현이 필수인 영역은 아니었습니다. &lt;/p&gt;
&lt;p&gt;하지만 깃허브 액션에 대해 이해도가 깊어질 수 있고, 또 프로젝트의 목적 상 가능하면 하나로 합쳐지는 예시를 제공하는 것도 좋아보여 공부 겸 진행했습니다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(10)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅10/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅10/</guid><pubDate>Sat, 03 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;메타데이터 구조 확정&lt;/h2&gt;
&lt;p&gt;지난시간, &lt;a href=&quot;https://sharknia.github.io/NotionAPI%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99-%ED%8F%AC%EC%8A%A4%ED%8C%859&quot;&gt;메타데이터를 관리하기 위한 클래스 초안&lt;/a&gt;을 작성했다. 시간이 없어서 급하게 만들었는데, 제대로 매개변수 이름을 지어주고 메타데이터 구조를 확정지었다. &lt;/p&gt;
&lt;p&gt;크게 변하지는 않았고, 이름을 정해주는 수준이었다. &lt;/p&gt;
&lt;p&gt;그리고 추가로 저장된 디렉토리 명을 사용해 포스팅된 마크다운 디렉토리를 삭제하는 메소드를 추가해주었다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;수정된 코드 전문&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; promises &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; fs &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; join &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; EnvConfig &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./envConfig&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./pageMetadata.json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PageMetadata&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Metadata&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageMetadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MetadataManager&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; instance&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; MetadataManager&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; metadata&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Metadata &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; envConfig&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;envConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 인스턴스를 반환하는 메서드입니다.
     * @returns {MetadataManager} MetadataManager 인스턴스
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MetadataManager&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MetadataManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 로드합니다.
     * @returns {Promise&amp;lt;void&gt;} Promise 객체
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;readFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; Metadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;메타데이터 파일 읽기 성공:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;메타데이터 파일 읽기 오류:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 반환합니다.
     * @returns 메타데이터 객체 또는 null
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Metadata &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 페이지 메타데이터를 업데이트합니다.
     *
     * @param pageIdx 페이지 식별자
     * @param pageData 페이지 메타데이터
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;updatePageMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageIdx&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageData&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageMetadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;메타 데이터 업데이트 [&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pageIdx&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 페이지 메타데이터를 삭제합니다.
     * @param pageIdx 삭제할 페이지의 ID
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deletePageMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageIdx&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 파일에 저장합니다.
     * @returns 메타데이터가 성공적으로 저장될 때 해결되는 Promise입니다.
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;메타데이터 파일 저장 오류:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 지정된 페이지 인덱스에 대한 메타데이터를 삭제합니다.
     * @param pageIdx 삭제할 페이지 인덱스
     * @returns 삭제 작업이 완료된 후에는 아무 값도 반환하지 않습니다.
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deleteFromMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageIdx&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; dir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saveDir&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageIdx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unlink&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;파일 삭제 성공:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;파일 삭제 오류:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;Posting 클래스 수정&lt;/h2&gt;
&lt;p&gt;메타데이터 정보는 모아두었다가, 프로그램 종료시에 한 번에 파일에 저장하도록 종료되는 부분에서 saveMetadata 메소드를 호출해주었다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;수정된 Posting 클래스 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;[posting.ts] start!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadataManager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; MetadataManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EnvConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notionkey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notionKey &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; databaseid&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseid &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notionApi &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; NotionAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionkey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dbInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; DataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;databaseid&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;[posting.ts] page 순회 시작&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dbInstance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageIds&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; page&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadataManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Error creating database instance:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;Database 클래스 수정&lt;/h2&gt;
&lt;p&gt;기존에는 상태값이 Ready 인 것만 쿼리하고 있었는데, 이제는 삭제도 진행해야 하므로 상태가 ToBeDeleted인 것도 쿼리하도록 수정해주었다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;수정된 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryDatabaseResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;databasesQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    filter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        or&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상태&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                select&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                    equals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageStatus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Ready&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상태&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                select&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                    equals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageStatus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ToBeDeleted&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// pageId 리스트 업데이트&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageIds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Error querying the database:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;Page 클래스 수정&lt;/h2&gt;
&lt;h3&gt;init() 메소드 수정&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;pageIdx 속성을 추가하고 init() 메소드에서 해당 속성을 초기화해준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;create() 메소드 수정&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;create 메소드에서 상태값에 따른 분기처리를 추가했다. &lt;/p&gt;
&lt;p&gt;기존에는 ready상태만 있었으므로 일관된 처리를 진행하면 됐지만, 이제는 삭제 대기 상태가 추가되었으므로 상태값에 따른 분기처리를 추가하고 각각 다르게 작동하도록 해주었다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ready, ToBeDeleted 두 상태 모두 일단 해당하는 파일을 삭제한다. Ready 인데도 삭제하는 이유는 타이틀이 바뀐 경우에는 파일을 삭제해야 하기 때문이다. &lt;/li&gt;
&lt;li&gt;Ready 상태인 경우에는 기존의 로직을 실행하고, Metadata를 업데이트 해준다. &lt;/li&gt;
&lt;li&gt;ToBeDeleted 상태인 경우에는 메타데이터에서 해당하는 내용을 삭제한다. &lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;details&gt;
&lt;summary&gt;create() 메소드 안쪽 수정된 내용 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;```typescript
public static async create(pageId: string) {
        const notionApi: NotionAPI = await NotionAPI.create();
        const page: Page = new Page(pageId, notionApi.client);
        MarkdownConverter.imageCounter = 0;
        await page.init(page);
        const status = page.properties![&apos;상태&apos;];
        console.log(
            `[page.ts] start - pageTitle : (${status})${page.pageTitle}`,
        );
        // 저장하기 전에도 기존 파일을 삭제한다. 타이틀이 달라진 update 일 수 있기 때문이다.
        await page.metadataManager?.deleteFromMetadata(page.pageIdx!);
        if (status === PageStatus.ToBeDeleted) {
            // 페이지가 삭제될 예정인 경우
            await page.metadataManager?.deletePageMetadata(page.pageIdx!);
            await page.updatePageStatus(PageStatus.Deleted);
            return page;
        } else if (status === PageStatus.Ready) {
            // 포스팅이 준비된 경우
            page.contentMarkdown = await page.fetchAndProcessBlocks();
            await page.printMarkDown();
            await page.metadataManager?.updatePageMetadata(page.pageIdx!, {
                path: page.pageUrl!,
            });
            await page.updatePageStatus(PageStatus.Updated);
            return page;
        } else {
            console.error(`[page.ts] start - status : ${status}`);
            throw new Error(`[page.ts] start - status : ${status}`);
        }
    }
```&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;기타 변경 내용&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;열거형 클래스를 새로 만들어 상태값 정의를 미리 해주었다. &lt;/li&gt;
&lt;li&gt;또한, 메타데이터 파일도 레포의 일부인데 깃허브 액션 워크플로우 작동 후 이 파일도 수정될 것이므로 한 번 더 커밋/푸시가 필요하다. 해당 내용을 워크플로우의 Run Script 바로 다음에 추가해주었다. &lt;/li&gt;
&lt;/ul&gt;
&lt;details&gt;
&lt;summary&gt;추가된 워크플로우&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;```yaml
- name: Commit and Push Changes to Current Repository
      run: |
        git config --global user.name &apos;name&apos;
        git config --global user.email &apos;mail&apos;
        git add .
        git commit -m &quot;Update contents&quot; || echo &quot;No changes to commit in current repo&quot;
        git push
```&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;주의할 점&lt;/h2&gt;
&lt;p&gt;일단, 로컬에서 실행 시 권한 문제로 파일 삭제가 제대로 되지 않았다. 그래서 깃허브 액션에서도 파일 권한 문제가 생길 우려가 있어 권한을 조정하는 방법이 있나 찾아보았는데, 깃허브 액션에서는 외부를 컨트롤 하려는게 아닌 이상 별도의 권한 문제가 발생하지 않는다고 한다. &lt;/p&gt;
&lt;p&gt;따라서 로컬에서 발생하는 문제는 따로 수정하지 않았다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Typescript의 열거형]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Typescript의-열거형/</link><guid isPermaLink="false">https://sharknia.github.io/Typescript의-열거형/</guid><pubDate>Sat, 03 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;타입스크립트에서 &lt;code class=&quot;language-text&quot;&gt;enum&lt;/code&gt; 을 사용해 특정 값들의 집합을 정의하고 각 멤버에 문자열 값을 할당할 수 있다. 이는 열거형이라고 하며 관련된 상수 값들의 집합에 이름을 부여하여 코드의 가독성을 높이고 오류 가능성을 줄여준다. &lt;/p&gt;
&lt;p&gt;임의의 열거형을 정의하면 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; PageStatus &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Deleted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;deleted&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Writing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;writing&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 정의하면 PageStatus 타입의 변수를 사용할 때 PageStatus.Deleted 로 사용해서 열거형 멤버게 접근할 수 있다. &lt;/p&gt;
&lt;p&gt;이렇게 얻어진 값은 각각에 할당된 문자열과 같다. &lt;/p&gt;
&lt;p&gt;사용법 예시 코드는 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; currentPageStatus&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageStatus &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PageStatus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Writing&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPageStatus &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; PageStatus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Deleted&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;The page is deleted.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPageStatus &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; PageStatus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Writing&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;The page is in writing status.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
만약, 열거형을 정의할 때 값을 명시하지 않으면 열거형의 값은 기본적으로 0에서 시작해 순차적으로 증가한다.  예를 들어 다음과 같다. 
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; PageStatus &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Deleted&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 0&lt;/span&gt;
    Writing  &lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;물론 임의로 숫자를 지정할 수도 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; StatusCode &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Success &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    NotFound &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    ServerError &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또한 숫자 열거형에서 일부 멤버에만 값을 지정하고 다른 멤버에는 값을 지정하지 않는다면 타입스크립트는 자동으로 이전 멤버의 값에서 1을 더해 계산한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; Example &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    Middle&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 값이 2로 자동 할당됩니다.&lt;/span&gt;
    End &lt;span class=&quot;token comment&quot;&gt;// 값이 3으로 자동 할당됩니다.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(9)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅9/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅9/</guid><pubDate>Fri, 02 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;지난시간&lt;/h2&gt;
&lt;p&gt;지난시간, 신나게 자동 배포를 만들었다. &lt;/p&gt;
&lt;p&gt;이제 새로 생성된 문서들에 대해서 자동으로 한시간마다 배포가 되어 글이 포스팅된다. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;근데, 이런 경우 글을 어떻게 삭제하지?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;현재 타이틀이 키 값인데 타이틀 명이 바뀌면 내용은 똑같은데 제목만 다른 글이 두 개?&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;그렇다, 삭제 및 수정 기능이 구현되어야 하는 것이다. &lt;/p&gt;
&lt;h2&gt;설계&lt;/h2&gt;
&lt;p&gt;어떤걸 키 값으로 해야 하나 고민이 많았는데, 답은 간단했다. 노션에 ID를 추가하는 기능이 있었다. 이렇게 되면, 내 노션 블로그를 위한 필수 속성은 타이틀, 상태, ID 세 가지가 된다. 이런게 너무 많이 생기는걸 원하지 않지만 어쩔 수 없는 부분이라고 생각이 든다. &lt;/p&gt;
&lt;p&gt;계획은 다음과 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;노션 글들에 ID 속성을 추가해 키값으로 삼는다. &lt;/li&gt;
&lt;li&gt;상태값에 ToBeDeleted, Deleted를 추가한다. &lt;/li&gt;
&lt;li&gt;키 값 - 저장된 디렉토리가 매핑된 메타데이터 json 파일을 생성한다. &lt;/li&gt;
&lt;li&gt;ToBeDeleted를 쿼리해와서, 매핑 테이블을 참조해 데이터를 삭제 후 매핑 정보도 삭제하고 Deleted 상태로 바꿔준다. &lt;/li&gt;
&lt;li&gt;Ready를 쿼리해와서 매핑 테이블을 참조해 기존 데이터를 삭제 후 매핑 정보를 갱신하고 마크다운을 다시 저장한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이렇게 하면 수정과 삭제에 모두 대응이 가능해보인다!&lt;/p&gt;
&lt;h2&gt;구현&lt;/h2&gt;
&lt;p&gt;우선, 전역적으로 메타데이터를 읽어오고, 메모리에 데이터를 저장한 다음 프로그램 종료 직전에 메타 데이터를 한 번에 수정해주는 역할을 할 클래스를 생성했다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;metadataManager.ts&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; promises &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; fs &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./pageMetadata.json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PageMetadata&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    url&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Metadata&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageMetadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MetadataManager&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; instance&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; MetadataManager&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; metadata&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Metadata &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 인스턴스를 반환하는 메서드입니다.
     * @returns {MetadataManager} MetadataManager 인스턴스
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; MetadataManager &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MetadataManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 로드합니다.
     * @returns {Promise&amp;lt;void&gt;} Promise 객체
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;readFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; Metadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;메타데이터 파일 읽기 오류:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 반환합니다.
     * @returns 메타데이터 객체 또는 null
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Metadata &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 페이지 메타데이터를 업데이트합니다.
     *
     * @param pageId 페이지 식별자
     * @param pageData 페이지 메타데이터
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;updatePageMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageData&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; PageMetadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 페이지 메타데이터를 삭제합니다.
     * @param pageId 삭제할 페이지의 ID
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deletePageMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/**
     * 메타데이터를 파일에 저장합니다.
     * @returns 메타데이터가 성공적으로 저장될 때 해결되는 Promise입니다.
     */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token constant&quot;&gt;METADATA_FILE_PATH&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;메타데이터 파일 저장 오류:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;이 클래스는 프로그램 시작과 동시에 초기화되며, 끝날 때 메타데이터 파일을 갱신하는 역할을 할 것이다. &lt;/p&gt;
&lt;p&gt;정확한 매개변수는 아직 정하지 않았으며, 초안만 짜뒀다. &lt;/p&gt;
&lt;p&gt;이제 내일, 이 클래스를 명확히 정의하고 이 클래스를 사용해 수정/삭제를 구현하면 된다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(8)]]></title><description><![CDATA[목표 단계적으로 GitHub Action…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅8/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅8/</guid><pubDate>Thu, 01 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;목표&lt;/h2&gt;
&lt;p&gt;단계적으로 GitHub Action을 사용해 블로그 자동 배포를 하려고 한다. &lt;/p&gt;
&lt;p&gt;일단, 구상한 깃허브 액션에서 실행할 플로우는 다음과 같다. &lt;/p&gt;
&lt;h2&gt;구상&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;블로그 레포지토리를 받아온다. &lt;/li&gt;
&lt;li&gt;내 프로그램을 돌려 블로그 레포지토리를 업데이트한다. &lt;/li&gt;
&lt;li&gt;블로그 레포지토리를 커밋/푸시한다. &lt;/li&gt;
&lt;li&gt;해당 작업은 특정 시간에, 또는 특정 시간마다 이뤄져야 한다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;구현&lt;/h2&gt;
&lt;h3&gt;Notion to Markdown 프로그램 실행&lt;/h3&gt;
&lt;h4&gt;워크플로우 파일 생성&lt;/h4&gt;
&lt;p&gt;단계적으로 구현해보려고 한다. 일단은 내 프로그램을 돌려보자. &lt;/p&gt;
&lt;p&gt;일단 대충 다음과 같이 초안을 짜주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 이름을 정의한다. &lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run TypeScript
&lt;span class=&quot;token comment&quot;&gt;# 실행 시기입니다. 이번엔 push, pull_request 될 때 이다. &lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;push&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pull_request&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 깃허브 액션에서 실행할 작업을 정의하는 섹션이다.&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;# 단일 작업의 이름을 정의합니다. 이 경우에는 이름이 run 이다.&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# 작업이 어떤 환경에서 실행될지 정의한다. &lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
		&lt;span class=&quot;token comment&quot;&gt;# 각 작업에서 실행할 순차적인 단계들을 정의한다. &lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# uses : 특정 액션을 사용할 때 사용한다.&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# name : step의 이름을 정의한다.&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# with : user로 지정된 액션에 추가적인 매개변수를 전달한다. &lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# run : 쉘 명령어를 실행한다. &lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# env : 환경변수를 설정한다. &lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# if : 조건문&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;18&apos;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install Dependencies
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install TypeScript
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;dev typescript

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npx tsc

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run Script
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node ./index.js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 파일을 프로젝트의 &lt;code class=&quot;language-text&quot;&gt;.github/workflows/main.yml&lt;/code&gt; 로 저장해준다.&lt;/p&gt;
&lt;p&gt;그리고 커밋-푸시를 하면 &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/5d06e704853408fa3478937cf49cfd67/7a54e/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 45.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVR42qWS2Q6CMBBFK2XrTqEgmhj//yuvMxV8IBExPNxM2qRnzrQVvpvQ6i6nahyKUu/mIhWq1iPNT/TTA76/IQx3KNujpn2hTIQLDI2QtUVRmZ9QDjcvKXxmPVdSFcYNcGSpqWrqcsRyNeVsmxAwIcQ5W9YqHILtWQvjE3y8wvoRDQG3Xf/JMnLKdrw4Y/cBWv8emU0lXewZw2XkAfx1XBjBtvzqp4AtAfQCYmV58Nt8G/kFlfDDUxJD5Q0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/5d06e704853408fa3478937cf49cfd67/ca1dc/image1.png&apos; srcset=&apos;/static/5d06e704853408fa3478937cf49cfd67/e7570/image1.png 170w,
/static/5d06e704853408fa3478937cf49cfd67/f46e7/image1.png 340w,
/static/5d06e704853408fa3478937cf49cfd67/ca1dc/image1.png 680w,
/static/5d06e704853408fa3478937cf49cfd67/02d09/image1.png 1020w,
/static/5d06e704853408fa3478937cf49cfd67/9d567/image1.png 1360w,
/static/5d06e704853408fa3478937cf49cfd67/7a54e/image1.png 2216w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이렇게 실행이 된다. 그리고&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/686dbb0c0704c84fbeb9a7b10c204a35/40851/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 28.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzUlEQVR42m2Q2xKCMAxE8YYUem8pKKAz+uT/f2DclBFvPJzZtslstimu9wf14410OIGetF8BNZPrs/6eGdcOubeQJpGPA3k8COmpFIaq2lKtAonG5fO+lKvswHZff1EcYcBmIY1Z2VzqCFpqoIxoPFUwrzGQ+8tKZ2X+DA8oWkT27UixmyhAtetI2bToAn7TqLik3uzEekKHVG1/ySljd5mTAhvOeJtQP+eBfDf+RBZol3LCX9OC43ORm/i7Bovl3b32N+v7fjiqv1Sfhk9rqoudfkDvqQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/686dbb0c0704c84fbeb9a7b10c204a35/ca1dc/image2.png&apos; srcset=&apos;/static/686dbb0c0704c84fbeb9a7b10c204a35/e7570/image2.png 170w,
/static/686dbb0c0704c84fbeb9a7b10c204a35/f46e7/image2.png 340w,
/static/686dbb0c0704c84fbeb9a7b10c204a35/ca1dc/image2.png 680w,
/static/686dbb0c0704c84fbeb9a7b10c204a35/02d09/image2.png 1020w,
/static/686dbb0c0704c84fbeb9a7b10c204a35/9d567/image2.png 1360w,
/static/686dbb0c0704c84fbeb9a7b10c204a35/40851/image2.png 2218w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
env 파일이 없기 때문에 바로 설정값 오류가 났다. &lt;/p&gt;
&lt;h4&gt;Github secret을 이용한 환경변수 설정&lt;/h4&gt;
&lt;p&gt;환경변수 설정을 워크플로우 파일 내에서 직접 설정하거나, 리포지토리 설정 또는 깃허브 환경에서 설정할 수 있다. 환경변수가 노출되지 않기를 원하지만 깃허브 전체에 적용될 필요는 없으므로 리포지토리 Setting에서 설정해주려고 한다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/042275ebaf7674b515056fe67f8552bd/01d29/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABwElEQVR42nVT2W7bMBD0SwsnkUXdEnWfliIrdRAnKIp+Qx/6/x8z3d2YdNA2D4OlSO7szNDeuX4KhhdqhEkpaxVkBI1Et7IXJhWilFHDp3t53mB/7+PL3sXXvbrhTmHneAkORBJTs0tE5vtA67Kb0U0runFBz5XAg2UgVS/KLVw/o74MO25morweBXyRSfnSvF3Qrj9QLD+Rj6/Q/Rnd/IxpPWN6POO4PmPZXqR200l6hZDRjivG5YyArDGhT4QDNU3bG4YTYb2gn4nwuGGYn6CrAbrskV0R60Z4LCHbCygva5kQErkfsyXONBUFDBPNg4qlGlhCvlARIds0B4rWrGZcvokdPmMCA8eLJTPu/QhL2I4nFM1kCXmPFTP8uJBvfrisGq1NVmvcGFwJtRCW7VGmm8N7N8LdIbSK0qKnHFnxhqp/lCGfENIrkzpWwtZMTkneCqKsvuXm3XJzP7Usr3ySvNi2TOYYKDt+fVb+fo/2nRSOQ7Go9B91N4VhiWF5EuTNQD+d99yMZa6OShBUFZZfb1h/f0dxmeG4FE/wH8IHL0XRTtD1IFZURJavti1InUro7zk3iNYWXl2Is78t/wH+5DFnF5aiqwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/042275ebaf7674b515056fe67f8552bd/ca1dc/image3.png&apos; srcset=&apos;/static/042275ebaf7674b515056fe67f8552bd/e7570/image3.png 170w,
/static/042275ebaf7674b515056fe67f8552bd/f46e7/image3.png 340w,
/static/042275ebaf7674b515056fe67f8552bd/ca1dc/image3.png 680w,
/static/042275ebaf7674b515056fe67f8552bd/02d09/image3.png 1020w,
/static/042275ebaf7674b515056fe67f8552bd/9d567/image3.png 1360w,
/static/042275ebaf7674b515056fe67f8552bd/01d29/image3.png 2536w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
Secrets는 로그에도 노출되지 않으며, variables는 로그에서 노출이 된다. 적절하게 선택하자. &lt;/p&gt;
&lt;p&gt;NOTION&lt;em&gt;KEY와 NOTION&lt;/em&gt;DATABASE_ID는 시크릿에, 나머지는 변수들에 저장해주었다. &lt;/p&gt;
&lt;p&gt;다음과 같이 워크플로우 파일을 수정해주면 정상 작동된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run TypeScript

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;push&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pull_request&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest

    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;18&apos;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install Dependencies
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install TypeScript
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;dev typescript

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npx tsc

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run Script
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node ./index.js
			&lt;span class=&quot;token comment&quot;&gt;# 환경변수 불러오기 추가 &lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;NOTION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.NOTION_KEY &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.NOTION_DATABASE_ID &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;BLOG_URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.BLOG_URL &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;SAVE_DIR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.SAVE_DIR &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;SAVE_SUB_DIR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.SAVE_SUB_DIR &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;블로그 Repository 추가&lt;/h3&gt;
&lt;p&gt;1, 3번 작업을 위해 블로그 레포를 체크아웃 하는 과정을 추가하자. &lt;/p&gt;
&lt;p&gt;이 전에 깃 권한을 얻기 위해 토큰을 발급해주었다. Setting - Develper 설정에 가서 토큰을 발급해주자. classic token으로 발행하고, 적당히 권한을 수정해주었다. &lt;/p&gt;
&lt;p&gt;그리고 해당 토큰도 레포의 Secret에 추가해주었다. &lt;/p&gt;
&lt;p&gt;그리고 나서 워크플로우를 아래와 같이 수정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run TypeScript

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;push&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pull_request&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest

    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2
		&lt;span class=&quot;token comment&quot;&gt;# 블로그 레포 체크아웃&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Checkout Blog Repository
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Sharknia/Sharknia.github.io&apos;&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.GITTOKEN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blog-repo&apos;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Use Node.js
      &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v2
      &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;18&apos;&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install Dependencies
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install TypeScript
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;dev typescript

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npx tsc

    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run Script
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node ./index.js
      &lt;span class=&quot;token key atrule&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;NOTION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.NOTION_KEY &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.NOTION_DATABASE_ID &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;BLOG_URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.BLOG_URL &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;SAVE_DIR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.SAVE_DIR &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;SAVE_SUB_DIR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; var.SAVE_SUB_DIR &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;# 블로그 레포 커밋/푸쉬&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Set Git remote URL with token and Commit and Push Changes
			&lt;span class=&quot;token comment&quot;&gt;# 다른 저장소이므로 git remote set-url을 실행한다. &lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
        cd blog-repo
        git remote set-url origin https://${{ secrets.GITTOKEN }}@github.com/name/name.github.io
        git config user.name &apos;name&apos;
        git config user.email &apos;mail&apos;
        git add .
        git commit -m &quot;Update blog contents&quot; || echo &quot;No changes to commit&quot;
        git push&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지 해두면, 제대로 깃허브 블로그에 새로운 글이 커밋/푸쉬 되었다!&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;마지막으로, 테스트를 종료하고 자동 배포가 매 시각 되게 하기 위해 on 부분을 다음과 같이 수정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0 * * * *&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;다음 계획&lt;/h3&gt;
&lt;p&gt;이 방법으로는 삭제가 되지 않는다는 사실을 깨달았다. &lt;/p&gt;
&lt;p&gt;당분간은 수동삭제를 &lt;del&gt;ㅠㅠ&lt;/del&gt; 하기로 하고 삭제를 어떻게 할 것인지에 대해서는 구상을 해두었다. &lt;/p&gt;
&lt;p&gt;다음 시간은 삭제의 구현이다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[vscode-quick Suggestions]]></title><description><![CDATA[editor.quickSuggestions 설정은 VSCode에서 코드를 작성하는 동안 자동완성을 어떻게 표시할지를 결정한다.  다음 세가지의 옵션이 있다.  string 문자열 내에서 자동 완성 제안을 활성화/비활성화 한다.  comments…]]></description><link>https://sharknia.github.io/vscode-quick-Suggestions/</link><guid isPermaLink="false">https://sharknia.github.io/vscode-quick-Suggestions/</guid><pubDate>Wed, 31 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;editor.quickSuggestions 설정은 VSCode에서 코드를 작성하는 동안 자동완성을 어떻게 표시할지를 결정한다. &lt;/p&gt;
&lt;p&gt;다음 세가지의 옵션이 있다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;string&lt;/p&gt;
&lt;p&gt;문자열 내에서 자동 완성 제안을 활성화/비활성화 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;comments&lt;/p&gt;
&lt;p&gt;주석 내에서 자동 완성 제안을 활성화/비활성화 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;other&lt;/p&gt;
&lt;p&gt;코드(문자열이나 주석이 아닌 부분) 내에서 자동 완성 제안을 활성화/비활성화 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;VSCode의 설정을 json으로 열어 다음의 내용을 입력하면 된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token property&quot;&gt;&quot;editor.quickSuggestions&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;strings&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;comments&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;other&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(7)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅7/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅7/</guid><pubDate>Tue, 30 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;퇴근을 하고 고치다보니 시간이 부족하다.. 어쩔 수 없다. &lt;/p&gt;
&lt;h2&gt;돌아보기&lt;/h2&gt;
&lt;p&gt;어제 상당수의 디버깅을 진행하고 기존 블로그에서 새 블로그로 글을 이전했다. 깃허브 블로그에 업로드까지 마치고, 오늘 다시 보니 짜잘짜잘한 오류가 다시 또(!!) 발견되었다. &lt;/p&gt;
&lt;h2&gt;유지보수&lt;/h2&gt;
&lt;h3&gt;Callout 수정&lt;/h3&gt;
&lt;p&gt;내가 선택한 블로그의 기능인지, 원래 마크다운 기능인지 모르겠다. 굳이 태그를 넣을 필요가 없어서, 태그를 제거해주었다. &lt;/p&gt;
&lt;h3&gt;이미지 캡션 수정&lt;/h3&gt;
&lt;p&gt;이미지 캡션도 마찬가지였다. 혹시 하는 노파심에 따로 p태그를 넣어주고 있었는데, 아무 문제 없이 정상 작동 되었다. 아무래도 깃허브 블로그도 마크다운 기반으로 움직이다보니 마크다운에서 좀 잘 나오면 잘 이쁘게 지원하는 것 같다. &lt;/p&gt;
&lt;h3&gt;넘버링 숫자 안올라감 &amp;#x26; 들여쓰기 문제&lt;/h3&gt;
&lt;p&gt;넘버링이 모두 1로 나오고, 글머리 기호와 넘버링 리스트를 제외한 나머지 부분에 들여쓰기를 넣지 않았다는 사실을 깨달았다. &lt;/p&gt;
&lt;p&gt;넘버링부터 고치려다가 문득 들여쓰기가 제대로 되면 숫자가 제대로 나오지 않을까? 해서 들여쓰기부터 수정했는데, 정답이었다. &lt;/p&gt;
&lt;p&gt;들여쓰기를 고치고 나서 마크다운에 1. 이라고 숫자가 고정되어 있어도 제대로 숫자가 증가되면서 출력된다. &lt;/p&gt;
&lt;h3&gt;일부 부분 [objcet Promise] 출력&lt;/h3&gt;
&lt;p&gt;이건 await을 까먹은거다. 추가해주었다. &lt;/p&gt;
&lt;h3&gt;이미지 깨짐&lt;/h3&gt;
&lt;p&gt;어제 디버깅을 하면서 이미지 카운터를 static에서 인스턴스로 변경해주었는데, 어제 내가 멍청하다고 썼는데 사실은 오늘의 내가 멍청한 것이었다. &lt;/p&gt;
&lt;p&gt;이미지 카운터를 컨버터에 넣어놓을거면 거기서 인스턴스 변수로 선언하면 안됐다. 이미지가 거의 모든 경우에 항상 1번으로 저장된다.. &lt;/p&gt;
&lt;p&gt;페이지에 이미지 카운터 변수를 심고 블록-컨버터까지 내려줄 생각을 하니 아득해졌는데 생각해보니 그냥 컨버터 클래스에 넣어놓고 static 변수로 변경한 다음 페이지를 새로 만들 때마다 해당 값을 초기화 해주면 되지 않나 싶어서 그렇게 구현 해보려고 한다. &lt;/p&gt;
&lt;h3&gt;언더바 또는 *가 포함된 경우 스타일 깨짐&lt;/h3&gt;
&lt;p&gt;예를 들어 &lt;em&gt;db&lt;/em&gt;connection_serializable 라고 입력된 텍스트가 &lt;em&gt;db&lt;/em&gt;connection&lt;em&gt;serializable&lt;/em&gt; 로 마음대로 스타일이 변경되고 있었다. 이를 예방하기 위해 일단 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 언더스코어 이스케이프 처리 함수&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;escapeMarkdownUnderscores&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; text&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;(\w)_(\w)&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-flags&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;$1\\_$2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 메소드를 사용해 언더바 앞에 백슬래시를 붙여주었다. &lt;/p&gt;
&lt;p&gt;잘 될지는 배포 후 테스트를 해봐야 한다. &lt;/p&gt;
&lt;h2&gt;신규 기능&lt;/h2&gt;
&lt;h3&gt;테이블 지원&lt;/h3&gt;
&lt;p&gt;이제 테이블을 지원한다.. 지금 고치느라 기록할 시간이 없는데 많은 것을 고쳤다.. &lt;/p&gt;
&lt;p&gt;근본적인 설계가 아쉽다. 굳이 block을 별도의 클래스로 뺄 필요도 없었을 것 같고, MarkdownConverter 클래스가 굳이 인스턴스 메소드가 이렇게 많아야 할 이유도 모르겠다. &lt;/p&gt;
&lt;p&gt;여유가 된다면 전체적으로 코드 리팩토링을 (다시 만드는 수준으로) 진행해야 할 것 같다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[PostgreSQL Advisory Locks 트랜잭션 레벨에서 구현]]></title><description><![CDATA[서론 동시성 제어 문제를 해결하기 위한 여러가지 방법을 고민 끝에 PostgreSQL Advisory Locks를 사용한 방법으로 구현하기로 했다.  구현을 하면서 겪은 과정을 여기에 기록한다.  구현 목표 현재 회사에서는 FastAPI…]]></description><link>https://sharknia.github.io/PostgreSQL-Advisory-Locks-트랜잭션-레벨에서-구현/</link><guid isPermaLink="false">https://sharknia.github.io/PostgreSQL-Advisory-Locks-트랜잭션-레벨에서-구현/</guid><pubDate>Tue, 30 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/%EB%8F%99%EC%8B%9C%EC%84%B1-%EC%A0%9C%EC%96%B4%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0&quot;&gt;동시성 제어 문제를 해결하기 위한 여러가지 방법을 고민&lt;/a&gt; 끝에 PostgreSQL Advisory Locks를 사용한 방법으로 구현하기로 했다. &lt;/p&gt;
&lt;p&gt;구현을 하면서 겪은 과정을 여기에 기록한다. &lt;/p&gt;
&lt;h2&gt;구현 목표&lt;/h2&gt;
&lt;p&gt;현재 회사에서는 FastAPI와 SqlAlchemy 2.0, PostgreSQL을 사용하고 있다. 아주 짧은 텀으로 중복으로 온 API 요청에 대해 중복 구매가 되지 않도록 동시성 제어를 하려고 한다. &lt;/p&gt;
&lt;p&gt;유저의 아이디 값 또는 API 고유의 값 + 유저의 아이디 값을 사용해 트랜잭션 레벨에서 PostgreSQL Advisory Locks를 생성하고, 동일한 유저가 PostgreSQL Advisory Locks에 걸린 경우에는 중복 요청이라고 판단하고 두번째 요청은 중단 하거나, 또는 반드시 유효성 검사를 하도록 해 중복 구매가 되는 일이 없게 사전에 차단하려고 한다. &lt;/p&gt;
&lt;h2&gt;구현 사전단계&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.postgresql.org/docs/9.1/functions-admin.html&quot;&gt;공식문서&lt;/a&gt;를 살펴보니 트랜잭션 레벨에서의 락을 위해 내가 사용할 수 있는 함수는 두 가지가 있었다. 트랜잭션 레벨의 락은 공통적으로 명시적인 언락이 불가능하다. &lt;/p&gt;
&lt;p&gt;아래의 두가지 함수는 모두 트랜잭션 레벨의 함수로 Advisory Lock을 획득할 수 있다는 점은 같지만, Advisory Lock을 바로 획득하지 못했을 때의 반응이 다르다. &lt;/p&gt;
&lt;h3&gt;pg_advisory_xact_lock&lt;/h3&gt;
&lt;p&gt;지정된 키에 대한 Advisory Lock을 획득할 때까지 호출을 블로킹(대기)한다. 만약 다른 세션이 이미 해당 키에 대한 Advisory Lock을 갖고 있다면 그 Advisory Lock이 해제될 때까지 현재 세션에서의 처리가 중단된다. &lt;/p&gt;
&lt;p&gt;Advisory Lock을 반드시 획득해야 해서 대기해야 할 경우에 적합하다.&lt;/p&gt;
&lt;h3&gt;pg_try_advisory_xact_lock&lt;/h3&gt;
&lt;p&gt;이 함수는 즉시 Advisory Lock을 시도하고 성공하면 True, 실패하면 False를 반환한다. 이 함수는 잠금 획득을 위해 대기하지 않으며, 잠금이 이미 다른 세션에 의해 보유되고 있는 경우 즉시 실패한다.&lt;/p&gt;
&lt;p&gt;Advisory Lock을 반드시 획득할 필요가 없고 대기하지 않고 다른 작업을 수행해야 할 경우에 적합하다. &lt;/p&gt;
&lt;h3&gt;결정&lt;/h3&gt;
&lt;p&gt;우리의 경우에는 쿠폰 중복 발급을 막으려고 하는 것이므로 만약 이미 잠금이 걸린 경우에는 굳이 나머지 DB 작업을 실행할 필요가 없다. 따라서 pg_try_advisory_xact_lock를 사용하는 것이 적절해보인다. &lt;/p&gt;
&lt;h2&gt;구현&lt;/h2&gt;
&lt;p&gt;따라서, 서비스 로직의 시작 지점에 다음의 코드를 넣어 락을 얻거나, 락을 얻지 못한 경우 해당 요청은 실행을 중단하려고 한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Advisory Lock 획득&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;SELECT pg_try_advisory_xact_lock(&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;lock&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Advisory Lock을 획득하지 못한 경우에는 이미 선제 작업이 있는 것이므로 DB 작업을 계속할 필요가 없으므로&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 바로 중단한다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Unable to acquire lock&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SQL 인젝션과 같은 보안 문제를 줄이고 쿼리 구성과 관련된 오류를 예방하기 위해 다음과 같이 코드를 수정했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Advisory Lock 획득&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pg_try_advisory_xact_lock&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Advisory Lock을 획득하지 못한 경우에는 이미 선제 작업이 있는 것이므로 DB 작업을 계속할 필요가 없으므로&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 바로 중단한다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Unable to acquire lock&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;잠금 해제 지점은 어떻게 될까?&lt;/h2&gt;
&lt;p&gt;막연히 트랜잭션이 커밋되거나 롤백될 때라고 알아둬도 충분할 것 같다(세션 주입 방식을 통해 에러가 발생하거나 요청이 정상정이 끝나지 않는 경우에 세션을 롤백하며, 정상적으로 요청이 정리된 경우에는 세션을 커밋하는 과정이 포함되어 있을 것이므로 충분할 것이다).&lt;/p&gt;
&lt;p&gt;다만, 트랜잭션 레벨에서의 락은 명시적으로 언락이 불가능하므로 정확한 언락 지점을 알아둬야 할 필요성이 있다고 느꼈다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;트랜잭션 커밋 또는 롤백&lt;/p&gt;
&lt;p&gt;함수 내부에서 명시적으로 await db.commit() 또는 await db.rollback()이 호출되는 경우에 같은 세션이라고 하더라도 언락된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;비동기 세션 컨텍스트 종료&lt;/p&gt;
&lt;p&gt;AsyncSession 인스턴스가 컨텍스트 매니저(async with) 내에서 사용되고, 해당 컨텍스트 블록이 종료되는 경우&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;예외 발생&lt;/p&gt;
&lt;p&gt;함수 실행 중 예외가 발생하여 처리 흐름이 중단되는 경우. SQLAlchemy의 세션 관리는 트랜잭션이 커밋되지 않으면 자동으로 롤백을 수행하므로 사실상 트랜잭션이 롤백되는 시점과 일치한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Sqlalchemy의 func]]></title><description><![CDATA[func란? SQL 함수를 생성하고 호출하는 데 사용되는 기능이다. SQL 표준 함수 뿐 아니라 데이터베이스 별 특정 함수까지 다룰 수 있다.  Sqlalchemy의 유연한 기능으로 다양한 데이터베이스 작업을 보다 Pythonic…]]></description><link>https://sharknia.github.io/Sqlalchemy의-func/</link><guid isPermaLink="false">https://sharknia.github.io/Sqlalchemy의-func/</guid><pubDate>Tue, 30 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;func란?&lt;/h2&gt;
&lt;p&gt;SQL 함수를 생성하고 호출하는 데 사용되는 기능이다. SQL 표준 함수 뿐 아니라 데이터베이스 별 특정 함수까지 다룰 수 있다. &lt;/p&gt;
&lt;p&gt;Sqlalchemy의 유연한 기능으로 다양한 데이터베이스 작업을 보다 Pythonic한 방식으로 작성할 수 있게 해준다. &lt;/p&gt;
&lt;h2&gt;func의 특징&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;함수 생성기&lt;/p&gt;
&lt;p&gt;func는 데이터베이스의 내장 함수나 사용자 정의 함수를 파이썬 코드 내에서 호출하기 위한 함수 생성기이다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;동적 생성&lt;/p&gt;
&lt;p&gt;func 객체에 접근할 때 Python의 속성 접근 매커니즘을 통해 동적으로 SQL 함수 호출을 생성한다. 예를 들어 func.count() 는 SQL의 COUNT() 함수 호출을 생성한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터베이스 독립성&lt;/p&gt;
&lt;p&gt;다양한 데이터베이스 시스템에서 사용할 수 있는 표준 SQL 함수를 추상화한다. 따라서 특정 데이터베이스에 종속적이지 않은 코드를 작성할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;다양한 함수 지원&lt;/p&gt;
&lt;p&gt;func는 거의 모든 종류의 SQL 함수를 호출할 수 있도록 지원한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;__getattr__&lt;/code&gt; method&lt;/h2&gt;
&lt;p&gt;func 객체의 &lt;strong&gt;getattr&lt;/strong&gt; 메소드는 특정 속성에 접근할 때 호출된다. 이 메소드는 동적으로 SQL 함수 호출을 생성한다. &lt;/p&gt;
&lt;p&gt;예를 들어, func.pg&lt;em&gt;try&lt;/em&gt;advisory&lt;em&gt;lock에 접근하면 pg&lt;/em&gt;try&lt;em&gt;advisory&lt;/em&gt;lock 이름으로 _FunctionGenerator 객체를 생성한다. 이 객체는 최종적으로 SQL 쿼리 내에서 해당 함수 호출을 나타낸다. &lt;/p&gt;
&lt;h2&gt;사용방법&lt;/h2&gt;
&lt;h3&gt;기본 사용&lt;/h3&gt;
&lt;p&gt;함수 이름을 func 객체의 속성으로 접근하여 사용한다. (&lt;strong&gt;getattr&lt;/strong&gt; 메소드로 연결된다.)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; func

&lt;span class=&quot;token comment&quot;&gt;# COUNT 함수 호출 예시&lt;/span&gt;
query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;select_from&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_table&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;함수 매개변수 전달&lt;/h3&gt;
&lt;p&gt;함수 호출 시 매개변수를 전달할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# LENGTH 함수에 문자열 전달&lt;/span&gt;
query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;some string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;복잡한 표현식&lt;/h3&gt;
&lt;p&gt;복잡한 SQL 표현식을 만드는 데도 사용할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 조건부 SQL 함수 호출&lt;/span&gt;
query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;coalesce&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_table&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;column&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;default value&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[동시성 제어문제 해결]]></title><description><![CDATA[문제 가~끔 네트워크 문제 때문인지 클라이언트에서 같은 요청이 0.0…]]></description><link>https://sharknia.github.io/동시성-제어문제-해결/</link><guid isPermaLink="false">https://sharknia.github.io/동시성-제어문제-해결/</guid><pubDate>Tue, 30 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;문제&lt;/h2&gt;
&lt;p&gt;가~끔 네트워크 문제 때문인지 클라이언트에서 같은 요청이 0.01초 미만의 간격으로 두 번씩 들어오는 경우가 있다. 사실상 요청이 동시에 들어오는 것과 같다. 대부분의 경우에는 문제가 되지 않지만, 쿠폰 구매 같은 민감한 요청에 대해서는 회사의 손해 또는 사용자의 불편과 예민하게 직결되므로 문제가 커질 수 있다. &lt;/p&gt;
&lt;p&gt;따라서 해당 문제를 완벽히 해결하고자 한다. &lt;/p&gt;
&lt;p&gt;현재 별다른 조치가 없는 상황에서 발생하는 문제 상황은 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;1번 요청과 2번 요청이 0.005초 차이이고(사실상 동시),

1번 요청 - 트랜잭션 시작
2번 요청 - 트랜잭션 시작
1번 요청 - 트랜잭션 완료, 커밋. 새로운 구매 내역이 테이블에 추가됨.
2번 요청 - 트랜잭션 완료, 커밋. 새로운 구매 내역이 테이블에 추가됨. 

따라서 동일한 유저가 두 번 쿠폰을 구매한 것 처럼 처리되었다. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;제약조건 확인&lt;/h3&gt;
&lt;p&gt;현재 테이블의 키값이 user_id가 아니며, 난수 발생을 통해 생성된 값을 키 값으로 하고 있다. 또한 Redis와 같은 외부 라이브러리를 도입할 여유는 없다. 따라서 가능한 한 현재 시스템(Sqlalchemy, Postgresql)내에서 해결책을 찾고자 한다. &lt;/p&gt;
&lt;h2&gt;해결방안 고민&lt;/h2&gt;
&lt;h3&gt;최근 구매 내역 확인(기각)&lt;/h3&gt;
&lt;p&gt;가장 쉽게 생각할 수 있는 방법은 쿠폰 구매 로직에서 이 유저의 최근 구매 로직을 확인하는 것이다. 하지만 현재 이 상황에서는 사실상 요청이 동시에 들어오고 있으므로, 2번 요청이 시작됐을 때에는 해당 유저의 구매 내역이 아직 DB에 없을 것이므로, 이 방법은 사용할 수 없다. &lt;/p&gt;
&lt;h3&gt;Database-Level Optimistic Locking(기각)&lt;/h3&gt;
&lt;p&gt;각 트랜잭션에 버전 번호를 추가하고 트랜잭션이 커밋되기 전에 해당 버전 번호가 여전히 유효한지 확인한다. 하지만 이 방법도 여전히 2번 요청이 1번 요청의 결과를 감지하지 못할 수 있다. &lt;/p&gt;
&lt;h3&gt;Application-Level Locking(기각)&lt;/h3&gt;
&lt;p&gt;코드 내에서 직접 잠금 로직을 구현하는 방법이다. 데이터베이스가 아닌 애플리케이션의 메모리 내에서 잠금을 관리한다. 주로 멀티스레드 환경에서 특정 자원에 대한 동시 접근을 제어하는데 사용된다. 현재 FastAPI를 사용하고 있고, FastAPI는 기본적으로 비동기 방식으로 단일 스레드 환경에서 실행된다는 점을 고려하면 전통적인 스레드 기반의 잠금 매커니즘보다 async 라이브러리에 들어있는 비동기 프로그래밍에 적합한 잠금 메커니즘인 asyncio.Lock을 사용하는 것이 이상적이다.&lt;/p&gt;
&lt;h4&gt;FastAPI에서의 Application-Level Locking&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

locks &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;purchase_coupon&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    lock &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; locks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setdefault&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Lock&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; lock&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 여기에 쿠폰 구매 로직을 구현합니다.&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 이 블록 내의 코드는 동시에 하나의 요청만 처리합니다.&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# FastAPI 엔드포인트에서 이 함수를 호출합니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드는 user_id에 대해 별도의 asyncio.Lock을 생성하고 관리한다. 해당 user_id에 대한 작업이 진행중인 경우 다른 요청들은 해당 블록이 해제될 때까지 대기한다. &lt;/p&gt;
&lt;p&gt;예를 들어 다음 코드를 가정하자. 예를 들기 위해 아주 러프하게 작성했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    lock &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; locks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setdefault&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Lock&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; lock&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드는 다음과 같이 호출된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;test_function(1, 2) 호출 -&gt; a 값이 1인 잠금 획득 -&gt; 처리 시작
test_function(1, 2) 호출 -&gt; a 값이 1인 동일한 잠금으로 인해 대기
test_function(2, 2) 호출 -&gt; a 값이 2인 새로운 잠금 획득 -&gt; 처리 시작
test_function(2, 2) 처리 완료 -&gt; a 값이 2인 잠금 해제
test_function(1, 2)의 첫 번째 호출 처리 완료 -&gt; a 값이 1인 잠금 해제
test_function(1, 2)의 두 번째 호출이 대기 상태에서 해제 -&gt; 처리 시작

따라서 print는 1, 2, 1의 순서가 된다. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다만, 비동기 프로그래밍, 특히 Python의 &lt;a href=&quot;https://sharknia.github.io/FastAPI%EC%99%80-asyncio&quot;&gt;asyncio&lt;/a&gt;를 사용할 때 코드의 실행순서는 이벤트 루프에 의해 관리된다. 작업의 일시 중단과 다른 작업의 실행이 이벤트 루프에 의해 어떻게 스케줄링 될지는 여러 요인에 따라 달라질 수 있다. &lt;/p&gt;
&lt;h3&gt;PostgreSQL Advisory Locks(당장 채용)&lt;/h3&gt;
&lt;p&gt;Advisory Locks는 애플리케이션에서 데이터베이스 레벨의 잠금을 관리할 수 있도록 해준다. 이를 통해 특정 user_id 에 대한 동시 요청을 제어할 수 있다. &lt;/p&gt;
&lt;p&gt;Advisory Locks는 테이블이나 행에 대한 접근을 잠그는 개념이 아니다. 특정 값 (정수)에 대한 잠금을 제공한다. 즉, 작업 자체에 1번이라는 이름을 붙이고 1번을 잠근다면, 다시 요청되는 1번 작업은 잠금이 된다. &lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;Advisory Locks의 작동 방식&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;잠금 설정 : 애플리케이션이 pg_advisory_lock(key) 함수를 호출하여 특정 키에 대한 잠금을 요청한다.&lt;/li&gt;
&lt;li&gt;동일 키 사용 시 대기 : 같은 키를 사용하는 다른 데이터베이스 작업이 잠금을 보유하고 있다면, 새로운 잠금 요청은 해당 잠금이 해제될 때까지 대기한다. &lt;/li&gt;
&lt;li&gt;잠금 해제 : 원래의 작업이 완료되면 pg_advisory_unlock(key) 함수를 호출하여 잠금을 해제한다. 이후 대기 중이던 다른 작업이 잠금을 획득하고 진행될 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;strong&gt;Advisory Locks의 잠금 레벨&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Advisory Locks는 두 가지 레벨에서 사용할 수 있다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;세션 레벨 : 이 잠금은 데이터베이스 세션과 연결되어있다. 세션이 종료되면 자동으로 해제된다. 세션 레벨 잠금은 장시간 유지되어야 하는 경우에 유용하다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;use_session_level_lock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lock_key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 세션 레벨 잠금 획득&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;SELECT pg_advisory_lock(&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;lock_key&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 작업 수행&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# ...&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 필요한 경우, 명시적으로 잠금 해제&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# await db.execute(f&quot;SELECT pg_advisory_unlock({lock_key})&quot;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 세션 종료 시 잠금이 자동으로 해제됩니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;트랜잭션 레벨 잠금 : 트랜잭션 레벨 잠금은 현재 트랜잭션과 연결되어 있으며 트랜잭션이 커밋되거나 롤백 될 때 자동으로 해제된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; sqlalchemy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;asyncio &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AsyncSession

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;use_transaction_level_lock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lock_key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;begin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 트랜잭션 레벨 잠금 획득&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;SELECT pg_advisory_xact_lock(&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;lock_key&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 작업 수행&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# ...&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# 트랜잭션이 종료되면 잠금이 자동으로 해제됩니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;쿠폰 구매 서비스 로직에서 트랜잭션 시작 전에  user_id를 기반으로 Advisory Lock을 요청하면 1번 요청이 처리되는 동안 동일한 user_id 에 대한 다른 요청은 대기하게 된다. 쿠폰 구매 처리가 완료되면, Advisory Lock을 해제하면 된다. &lt;/p&gt;
&lt;h2&gt;결론 - PostgreSQL Advisory Locks 채용&lt;/h2&gt;
&lt;p&gt;이 방법을 사용하면 매우 짧은 간격의 요청도 효과적으로 처리할 수 있다. 특히 트랜잭션 레벨의 잠금은 각 트랜잭션이 커밋되거나 롤백될 때까지만 유지되므로 0.005초와 같은 짧은 간격의 요청을 동기화하는데 매우 적합하다. &lt;/p&gt;
&lt;p&gt;백엔드 팀에서 협의를 거쳐 해당 방법을 사용해 구현하기로 최종 결정하였다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(6)]]></title><description><![CDATA[기능 구현이 거의 다 되었기 때문에, 오늘은 일단 짜잘짜잘한 오류 수정을 진행했다.  유지보수 내역 Front Matter-프로퍼티 연계 수정 프로퍼티가 Front Matter…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅6/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅6/</guid><pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;기능 구현이 거의 다 되었기 때문에, 오늘은 일단 짜잘짜잘한 오류 수정을 진행했다. &lt;/p&gt;
&lt;h2&gt;유지보수 내역&lt;/h2&gt;
&lt;h3&gt;Front Matter-프로퍼티 연계 수정&lt;/h3&gt;
&lt;p&gt;프로퍼티가 Front Matter에 추가되는데, 값이 빈 것도 추가되어서 제대로 필터링 되지 않는 문제가 있었다. 값이 존재하는 프로퍼티만 Front Matter에 추가되도록 수정해주었다. &lt;/p&gt;
&lt;p&gt;추가로, 프로퍼티가 고정값이 아니라 커스텀에 따라서 유연하게 대응해 Front Matter에 추가되도록 해주었다. &lt;/p&gt;
&lt;h3&gt;줄바꿈 주의!&lt;/h3&gt;
&lt;p&gt;마크다운은 기본적으로 엔터를 두 번씩 쳐야 줄바꿈이 되는 모양이다. 리스트 컨버터 일부에 줄바꿈이 하나만 들어가있던 것을 두 개가 들어가도록 수정해주었다. &lt;/p&gt;
&lt;h3&gt;이미지 다운로드 안되는 현상&lt;/h3&gt;
&lt;p&gt;분명 동기적으로 작동하게끔 짜놓았는데도 불구하고 이미지가 제대로 들어가지 않는 현상이 있었다.  axios 재시도 패키지를 설치하고, 재시도 로직을 추가하고 타임아웃 10초 설정도 해주었다. 뭐가 문제였는지는 정확히 파악이 안됐는데, (오류 로그조차 없었다) 일단 이 이후로는 이미지 다운로드에 실패하는 현상은 없다. &lt;/p&gt;
&lt;p&gt;추가로, 이미지 다운로드 시에도 디렉토리가 없다면 만들도록 해주었다. &lt;/p&gt;
&lt;h3&gt;스타일이 두 개 적용된 경우&lt;/h3&gt;
&lt;p&gt;스타일이 두 개가 적용된 경우는 더 띄어쓰기에 민감했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;*~~안녕하세요 ~~*&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;처럼 애매하게 띄어쓰기가 들어가면 하나만 적용된다. &lt;/p&gt;
&lt;p&gt;그래서 스타일이 있는 경우에는 공백을 제거 한 후에, 스타일을 붙이고 다시 스타일 뒤로 공백을 붙여서 자연스럽게 포맷이 유지되도록 수정해주었다. &lt;/p&gt;
&lt;h3&gt;ImageCounter 변수 수정&lt;/h3&gt;
&lt;p&gt;이미지가 디렉토리가 변경되어도 숫자가 계속 늘어나는 현상을 겪었는데… 멍청하게 내가 이미지 카운터를 static 변수로 선언해서 모든 인스턴스가 값을 공유하고 있는 것 뿐이었다. 바로 인스턴스 변수로 변경 해주었다. &lt;/p&gt;
&lt;h3&gt;멘션 링크 이후 줄바꿈 문제 해결&lt;/h3&gt;
&lt;p&gt;멘션 링크를 북마크로 바꿔주는 메소드에 줄바꿈이 고정되어있어서, paragraph 안에 들어가 있는 멘션의 경우에도 줄바꿈이 들어가버렸다. 번거롭지만, 메소드를 수정해서 리스트로 처리되는 경우에만 줄바꿈이 들어가도록 수정해주었다. &lt;/p&gt;
&lt;h3&gt;notion url만 주어지는 경우&lt;/h3&gt;
&lt;p&gt;노션의 페이지 링크를 따온 다음에, 아무 글자 또는 문장을 드래그 하고 붙여넣기 하면 해당 글자 또는 문장에 페이지 링크로 연결되는 북마크가 생성된다. &lt;/p&gt;
&lt;p&gt;&lt;figure class=&apos;gatsby-resp-image-figure&apos; style=&apos;margin-bottom: 16px;&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 382px; &apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0981c6ff94ee6b99478b05d66508c51e/29984/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 10.588235294117647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAVElEQVR42k2NSw4AIQhDvYZr/KGB+9+OySPRzKJpSwuUOWe4e5hZnHOS996x1koPA1VNTxfdWksPuDHGiFprFBHJISWCyyyge+9v4f/k5ngyehz8AHh4OntOXZx1AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;이렇게, 이 하이퍼링크는 노션 내부의 모 페이지로 연결된다. /xxxx… 만의 주소를 갖고 있다. &apos; title=&apos;&apos; src=&apos;/static/0981c6ff94ee6b99478b05d66508c51e/29984/image1.png&apos; srcset=&apos;/static/0981c6ff94ee6b99478b05d66508c51e/e7570/image1.png 170w,
/static/0981c6ff94ee6b99478b05d66508c51e/f46e7/image1.png 340w,
/static/0981c6ff94ee6b99478b05d66508c51e/29984/image1.png 382w&apos; sizes=&apos;(max-width: 382px) 100vw, 382px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&apos;gatsby-resp-image-figcaption&apos;&gt;이렇게, 이 하이퍼링크는 노션 내부의 모 페이지로 연결된다. /xxxx… 만의 주소를 갖고 있다. &lt;/figcaption&gt;
  &lt;/figure&gt;
근데 애석하게도 이 링크는 단순히 32자리 문자열만 가지고 있다. (페이지의 아이디가 아니다). 따라서 해당 경우에는 북마크를 연결할 수가 없었다… &lt;/p&gt;
&lt;p&gt;인 줄 알았는데, 32자리인게 이상해서 혹시나 해서 UUID 형식으로 변환해봤더니 그게 내부 페이지의 아이디였다. 그러니까, 각 블록의 아이디가 UUID로 주어지는데 거기에서 하이픈만 제외하고 내부 URL로 사용중이었던 것이다. &lt;/p&gt;
&lt;p&gt;얼씨구나~ 하고 바로 해당 케이스도 북마크 기능으로 연결해주었다. &lt;/p&gt;
&lt;h3&gt;URL 형식 변경&lt;/h3&gt;
&lt;p&gt;예를 들어 &lt;code class=&quot;language-text&quot;&gt;노션 소개 페이지&lt;/code&gt; 라는 타이틀을 &lt;code class=&quot;language-text&quot;&gt;노션소개페이지&lt;/code&gt; 로 변환해서 URL로 사용하고 있었는데, 공백을 완전히 제거하는 대신 하이픈을 넣도록 수정해주었다. &lt;/p&gt;
&lt;h2&gt;다음 단계는?&lt;/h2&gt;
&lt;p&gt;이제 다음 단계는 자동화가 목적이다. 어느정도 기능 구현은 90프로 이상 됐다고 생각하고, 당장 내가 블로그 글을 쓰는데 큰 문제가 없어보인다. 이제 github.io와 합쳐서 실질적인 사용이 가능하도록 해보려고 한다!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Sqlalchemy에서의 트랜잭션 격리 수준 구현]]></title><description><![CDATA[구현 목적 상품 구매에 관련된 API를 구현하려고 한다. DynamoDB를 사용할 때에 동시성 이슈로 쿠폰 중복 구매 이슈가 있었으므로 이번에 RDS…]]></description><link>https://sharknia.github.io/Sqlalchemy에서의-트랜잭션-격리-수준-구현/</link><guid isPermaLink="false">https://sharknia.github.io/Sqlalchemy에서의-트랜잭션-격리-수준-구현/</guid><pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;구현 목적&lt;/h2&gt;
&lt;p&gt;상품 구매에 관련된 API를 구현하려고 한다. DynamoDB를 사용할 때에 동시성 이슈로 쿠폰 중복 구매 이슈가 있었으므로 이번에 RDS로 옮긴 김에 해당 문제를 완벽하게 해결하기 위해 다각도로 방법을 고민했다. &lt;/p&gt;
&lt;p&gt;그 방안 중 하나가 &lt;a href=&quot;https://sharknia.github.io/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B2%A9%EB%A6%AC-%EC%88%98%EC%A4%80Transaction-Isolation-Level&quot;&gt;트랜잭션 격리 수준(Transaction Isolation Level)&lt;/a&gt; 을 이용한 것이다. &lt;/p&gt;
&lt;p&gt;SqlAlchemy - Postgresql을 사용하고 있는데, 이 라이브러리에서 트랜잭션 격리 수준을 어떻게 구현했는지 기록한다. &lt;/p&gt;
&lt;h2&gt;현재&lt;/h2&gt;
&lt;p&gt;현재에는 기본 격리 수준을 사용한(별다른 옵션값이 없는) 엔진만 사용하고 있다. API 별로 별도의 세션을 사용하기 위해 의존성 주입 방식을 사용하며, 이를 위해 &lt;code class=&quot;language-text&quot;&gt;AsyncIterable[AsyncSession]&lt;/code&gt;을 생성한다. 대략적인 코드는 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;_db_connection&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncEngine

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;on_startup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    _db_connection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_async_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        pool_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;pool_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        max_overflow&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_overflow&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        echo&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;echo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_connection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncEngine&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; _db_connection &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; _db_connection

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    db_conn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncEngine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncIterable&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; sessionmaker&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            db_conn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            class_&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            expire_on_commit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; session
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[get_db_session] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rollback&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 각 API의 엔드포인트에서 get&lt;em&gt;db&lt;/em&gt;session을 주입받아 사용한다. &lt;/p&gt;
&lt;p&gt;이 엔진은 기본적으로 Read Committed 격리수준만 지원한다. &lt;/p&gt;
&lt;h2&gt;모험&lt;/h2&gt;
&lt;h3&gt;sessionmaker 레벨에서 트랜잭션 격리 수준 설정?&lt;/h3&gt;
&lt;p&gt;이렇게 내용이 조금만 깊어져도 챗지피티는 믿을 놈이 못된다. 챗지피티에서는 sessionmaker 레벨에서 트랜잭션 격리 수준 설정이 가능하다며, sessionmaker의 매개변수에 &lt;code class=&quot;language-text&quot;&gt;isolation_level=&quot;SERIALIZABLE”&lt;/code&gt; 를 추가해주면 된다고 주장한다. &lt;/p&gt;
&lt;p&gt;하지만 sessionmaker의 생성자에는 &lt;code class=&quot;language-text&quot;&gt;isolation_level&lt;/code&gt; 매개 변수가 없어 해당 설정은 바로 오류를 낸다. 이럴 경우 답은 스스로 해결하는 것 밖에 없다. &lt;/p&gt;
&lt;h3&gt;트랜잭션 별 엔진 별도 생성?&lt;/h3&gt;
&lt;p&gt;첫 구현은 단순하게 생각해서 엔진을 여러개를 만들었다. 즉, &lt;code class=&quot;language-text&quot;&gt;isolation_level&lt;/code&gt; 옵션을 각각 다르게 준create&lt;em&gt;async&lt;/em&gt;engine을 여러번 하는 것이다. 이러면 간단하게 해결이 된다. 하지만 이렇게 할 경우에는 문제가 있다. 각각의 엔진이 모두 별도의 풀을 생성하면서 의도치 않게 커넥션이 증가할 위험이 있는 것이다. 안그래도 &lt;a href=&quot;https://sharknia.github.io/SqlAlchemy%EC%9D%98-QueuePool&quot;&gt;SqlAlchemy의 QueuePool&lt;/a&gt; 를 겪었었기 때문에 해당 이슈는 꼭 피하고 싶었다. &lt;/p&gt;
&lt;h2&gt;개선(해결)&lt;/h2&gt;
&lt;p&gt;코드를 짜다보면 “이건 있어야 하는데?”라고 느낄때가 있다. 그런것들은 대부분, 너무 미완성인 라이브러리나 프레임워크가 아니라면 반드시 나온다. 구현 가능한데 필요성을 느끼는 것은 반드시 누군가 만들어둔 것이다. &lt;/p&gt;
&lt;p&gt;명확하게 다른 엔진이면서 풀을 공유하는 방법이 존재한다. &lt;code class=&quot;language-text&quot;&gt;execution_options()&lt;/code&gt; 를 사용하면 된다. &lt;/p&gt;
&lt;h3&gt;execution_options()&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;AsyncEngine&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;execution_options()&lt;/code&gt; 메소드를 사용하면 반환되는 엔진도 &lt;code class=&quot;language-text&quot;&gt;AsyncEngine&lt;/code&gt; 타입이 된다. 이 메소드는 Engine, Connection, Session 객체에서도 사용할 수 있으며, 특정 실행 옵션을 동적으로 설정하거나 변경하기 위해 사용된다. &lt;/p&gt;
&lt;p&gt;이 메소드를 사용하면 동일한 연결 풀을 공유하면서도 다른 실행 옵션을 가진 엔진을 생성할 수 있다. &lt;/p&gt;
&lt;p&gt;개선된 코드는 다음과 같다. &lt;/p&gt;
&lt;p&gt;&lt;em&gt;db&lt;/em&gt;connection 설정 후, &lt;em&gt;db&lt;/em&gt;connection&lt;em&gt;serializable를 `execution&lt;/em&gt;options()` 를 사용해 정의한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;_db_connection_serializable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; _db_connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execution_options&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        isolation_level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SERIALIZABLE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 값을 사용한 의존성 주입용 메소드를 선언한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_connection_serializable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncEngine&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; _db_connection_serializable &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; _db_connection_serializable

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_serializable_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    db_conn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncEngine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_connection_serializable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncIterable&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; sessionmaker&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            db_conn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            class_&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            expire_on_commit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; session
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[get_serializable_db_session] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rollback&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 엔드포인트에서 기존 get&lt;em&gt;db&lt;/em&gt;session 대신 이 메소드를 사용하면 다른 옵션의 격리 레벨을 사용할 수 있다!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[트랜잭션 격리 수준(Transaction Isolation Level)]]></title><description><![CDATA[트랜잭션 격리 수준(Transaction Isolation Level…]]></description><link>https://sharknia.github.io/트랜잭션-격리-수준Transaction-Isolation-Level/</link><guid isPermaLink="false">https://sharknia.github.io/트랜잭션-격리-수준Transaction-Isolation-Level/</guid><pubDate>Mon, 29 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;트랜잭션 격리 수준(Transaction Isolation Level)이란?&lt;/h2&gt;
&lt;p&gt;트랜잭션 격리 수준은 데이터베이스 시스템에서 동시에 여러 트랜잭션이 실행될 때, 트랜잭션 간에 데이터를 어떻게 고립시킬지를 결정하는 설정이다. 이 설정은 트랜잭션이 다른 트랜잭션의 작업에 영향을 받지 않도록 보장하는 동시에 여러 트랜잭션이 데이터베이스의 동일한 데이터에 접근할 때 발생하는 문제들을 관리하는데 중요한 역할을 한다. &lt;/p&gt;
&lt;p&gt;격리 수준이 높을 수록 트랜잭션 간의 고립 정도가 증가하지만, 그만큼 데이터베이스의 처리량(throughput)과 동시성(concurrency)이 감소할 수 있다. 반대로 격리 수준이 낮으면 처리량과 동시성은 증가하지만 데이터 무결성 문제가 발생할 위험이 높아진다. 따라서 적절한 격리 수준을 선택해야 한다. &lt;/p&gt;
&lt;p&gt;데이터베이스의 동일한 데이터에 접근할 때 발생할 수 있는 문제들은 다음과 같다. &lt;/p&gt;
&lt;h3&gt;Dirty Read&lt;/h3&gt;
&lt;p&gt;한 트랜잭션이 아직 커밋되지 않은 데이터를 읽는 경우&lt;/p&gt;
&lt;h3&gt;Non-repeatable Read&lt;/h3&gt;
&lt;p&gt;한 트랜잭션이 동일한 쿼리를 여러 번 실행할 떄마다 다른 결과를 얻는 경우. 이는 다른 트랜잭션이 데이터를 변경하거나 삭제했기 때문이다. &lt;/p&gt;
&lt;h3&gt;Phantom Read&lt;/h3&gt;
&lt;p&gt;한 트랜잭션이 동일한 쿼리를 여러 번 실행할 때, 새로 삽입된 행이 결과에 나타나는 현상이다. &lt;/p&gt;
&lt;h3&gt;Serialization Anomaly&lt;/h3&gt;
&lt;p&gt;트랜잭션들이 서로 다른 순서로 실행될 때 발생할 수 있는 일관성 없는 결과를 말한다. &lt;/p&gt;
&lt;h2&gt;격리 수준의 종류&lt;/h2&gt;
&lt;p&gt;각 데이터베이스 시스템은 아래의 격리 수준을 제공하며, 이는 ANSI SQL 표준에 의해 정의된다. &lt;/p&gt;
&lt;h3&gt;Read Uncommitted&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;가장 낮은 격리 수준이다. &lt;/li&gt;
&lt;li&gt;다른 트랜잭션에서 아직 커밋되지 않은 변경 사항을 조회할 수 있다. (Dirty Read)&lt;/li&gt;
&lt;li&gt;Postgreql에서는 구현되지 있지 않아 Read Committed로 자동 처리된다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;p&gt;높은 동시성과 성능을 보여준다. &lt;/p&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;p&gt;데이터 무결성 문제가 발생할 수 있다. &lt;/p&gt;
&lt;h4&gt;고려사항&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;데이터의 정확성보다 동시성이 중요한 경우에 고려될 수 있으나, 일반적으로 권장되지 않는다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Read Committed&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;각 쿼리가 실행될 때 커밋된 데이터만 읽는다. &lt;/li&gt;
&lt;li&gt;다른 트랜잭션에서 커밋된 변경 사항을 쿼리 시점에 볼 수 있다. (Non-repeatable Read이 발생할 수 있다. )&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;p&gt;적당한 수준의 동시성과 성능을 보여준다. &lt;/p&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;p&gt;같은 트랜잭션 내에서 같은 데이터를 두 번 읽을 때 다른 결과가 나올 수 있다. &lt;/p&gt;
&lt;h4&gt;고려사항&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;일반적인 응용 프로그램에서 광범위하게 사용된다. &lt;/li&gt;
&lt;li&gt;대부분의 경우에 적합한 격리 수준이다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Repeatable Read&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;트랜잭션이 시작될 때의 데이터 상태를 유지한다. &lt;/li&gt;
&lt;li&gt;트랜잭션 중에 다른 트랜잭션이 커밋한 변경 사항이 보이지 않음(Phantom Read이 발생할 수 있다.)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;p&gt;하나의 트랜잭션 내에서 일관된 조회 결과를 보장한다. &lt;/p&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;p&gt;트랜잭션이 길어질수록 다른 트랜잭션과의 충돌 가능성이 증가한다. &lt;/p&gt;
&lt;h4&gt;고려사항&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;일관된 데이터 읽기가 필요할 때 사용한다. &lt;/li&gt;
&lt;li&gt;데이터 무결정이 중요한 경우 적합하지만, 긴 트랜잭션은 피해야 한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Serializable&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;데이터베이스 트랜잭션에서 가장 높은 격리 수준이다. &lt;/li&gt;
&lt;li&gt;트랜잭션이 서로 독립적으로 작동하며, 동시에 여러 트랜잭션이 수행되는 경우에도 하나의 트랜잭션이 완료된 것 처럼 작동한다. &lt;/li&gt;
&lt;li&gt;다른 트랜잭션이 동시에 같은 데이터를 수정하지 못하도록 하여 데이터의 일관성을 보장한다. &lt;/li&gt;
&lt;li&gt;하나의 트랜잭션 동안 새로 삽입되거나 삭제된 행이 다른 트랜잭션에 의해 보이지 않도록 해서 Phantom Read를 방지한다. &lt;/li&gt;
&lt;li&gt;각 트랜잭션이 독립적인 환경에서 실행되며 다른 트랜잭션의 중간 결과를 볼 수 없다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;p&gt;높은 수준의 데이터 무결성을 제공한다. 데이터베이스 내의 데이터는 모든 트랜잭션에 대해 완전히 일관된 상태를 유지한다. &lt;/p&gt;
&lt;p&gt;따라서 동시성 문제도 최소화된다. 동시에 여러 트랜잭션이 실행되는 환경에서 발생할 수 있는 대부분의 동시성 문제를 예방한다. &lt;/p&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;p&gt;트랜잭션의 격리 수준이 높을 수록 데이터베이스의 처리량이 감소할 수 있다. 락 경합(lock contention)이 증가하고, 이는 성능저하로 이어질 가능성이 높다. &lt;/p&gt;
&lt;p&gt;서로 다른 트랜잭션이 같은 자원을 기다리는 상황이 발생할 수 있으며, 이는 데드락으로 이어질 수 있다. &lt;/p&gt;
&lt;h4&gt;고려사항&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;데이터 무결성이 중요한 경우에 적합하지만 성능상의 영향을 고려해야 한다. &lt;/li&gt;
&lt;li&gt;데드락을 방지하기 위해 트랜잭션 설계 시 주의가 필요하다. &lt;/li&gt;
&lt;li&gt;읽기만 수행하는 트랜잭션의 경우 더 낮은 격리 수준을 고려하는 것이 성능상 이점이 있을 수 있다. &lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(5)]]></title><description><![CDATA[열정 추가로 더 진행해버렸다. 정말로 여기까지만 하려고 한다. 오랜만에 탄력 받으니 계속 하게 되어버렸다.  구현 내용 콜아웃, 디바이더, 인용문, 코드, 번호 매기기 , 글머리 기호 목록 컨버터를 추가했다.  콜아웃, 디바이더 html…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅5/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅5/</guid><pubDate>Sun, 28 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;열정&lt;/h2&gt;
&lt;p&gt;추가로 더 진행해버렸다. 정말로 여기까지만 하려고 한다. 오랜만에 탄력 받으니 계속 하게 되어버렸다. &lt;/p&gt;
&lt;h2&gt;구현 내용&lt;/h2&gt;
&lt;p&gt;콜아웃, 디바이더, 인용문, 코드, 번호 매기기 , 글머리 기호 목록 컨버터를 추가했다. &lt;/p&gt;
&lt;h3&gt;콜아웃, 디바이더&lt;/h3&gt;
&lt;p&gt;html로 구현했다. 인용문은 hr 태그로 처리했으며, 콜아웃은 div 태그를 사용했다. 다만 콜아웃은 스타일 처리가 필요하다. 지금은 대충 태그만 만들어놨다. 따라서 이건 미완성이나 다름없다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertCallout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;calloutBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calloutBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; icon &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calloutBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;icon &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; calloutBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;icon&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;emoji &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; color &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calloutBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color
            &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; calloutBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color
            &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gray_background&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
    &amp;lt;div class=&quot;callout &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;color&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;icon&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &amp;lt;span&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/span&gt;
    &amp;lt;/div&gt;\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertDivider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;인용문&lt;/h3&gt;
&lt;p&gt;인용문은 있을 줄 몰랐는데, 마크다운에서 지원을 해서 쉽게 구현했다. &lt;/p&gt;
&lt;p&gt;무엇은 지원하고 무엇은 지원안하고, 기준을 명확히 모르겠긴하다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertQuote&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;quoteBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; quoteText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; quoteBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;quoteText&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;번호 매기기, 글머리 기호&lt;/h3&gt;
&lt;p&gt;둘은 구현이 상당히 비슷했다. 마치 세트와 같다. 이걸 구현할 때에, 들여쓰기를 하려면 계층 개념이 필요해서 전체적인 코드 수정이 한 번 이뤄졌다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;formatListItemContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;listItemBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; listItemBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertNumberedList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;listItemBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; listItemContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatListItemContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;listItemBlock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; indent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;indentLevel &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;indent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;1. &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;listItemContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertBulletedList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;listItemBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; listItemContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatListItemContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;listItemBlock&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; indent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;indentLevel &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;indent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;- &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;listItemContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;띄어쓰기 네 번으로 계층을 구분한다. &lt;/p&gt;
&lt;h3&gt;코드&lt;/h3&gt;
&lt;p&gt;코드도 쉬웠다. 마크다운에서 지원하는 것은 기본적으로 구현이 쉽다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;codeBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; codeText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; codeBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;plain_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; language &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; codeBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;language &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\`\`\`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;language&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;codeText&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n\`\`\`\n\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;to_do&lt;/h3&gt;
&lt;p&gt;to_do도 간단하게 구현했다. 마크다운에서는 체크박스인데, 노션에서는 할 일 목록이다.. 그래서 체크박스를 체크하면 스타일이 추가되는데.. 이것까진 따로 구현하지 않았다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertToDo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;toDoBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; quoteText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toDoBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; pre &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;- [ ]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;toDoBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;checked &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            pre &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;- [x]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pre&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;quoteText&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;정리&lt;/h2&gt;
&lt;h3&gt;작업 완료 블록&lt;/h3&gt;
&lt;p&gt;일단 1차적으로 작업이 완료되었으며, 완료된 지원하는 블록 타입은 다음과 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;paragraph&lt;/li&gt;
&lt;li&gt;heading&lt;em&gt;1, heading&lt;/em&gt;2, heading_3&lt;/li&gt;
&lt;li&gt;bookmark&lt;/li&gt;
&lt;li&gt;link&lt;em&gt;to&lt;/em&gt;page&lt;/li&gt;
&lt;li&gt;image&lt;/li&gt;
&lt;li&gt;callout&lt;/li&gt;
&lt;li&gt;divider&lt;/li&gt;
&lt;li&gt;quote&lt;/li&gt;
&lt;li&gt;code&lt;/li&gt;
&lt;li&gt;numbered&lt;em&gt;list&lt;/em&gt;item&lt;/li&gt;
&lt;li&gt;bulleted&lt;em&gt;list&lt;/em&gt;item&lt;/li&gt;
&lt;li&gt;to_do&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;작업 예정 블록&lt;/h3&gt;
&lt;h4&gt;table, table-row&lt;/h4&gt;
&lt;p&gt;꼭 필요해보이지만, 구현을 위해서는 현재 구현된 블록의 재귀 호출 구조를 바꿔야 한다. 상대적으로 까다로워 오늘 작업하진 않겠다. &lt;/p&gt;
&lt;h3&gt;작업 미정 블록&lt;/h3&gt;
&lt;h4&gt;column (n개의 열로 구성된 블록 생성)&lt;/h4&gt;
&lt;p&gt;가로로 여러 블록을 놓는 기능이다. 굳이 필요한가? 싶기도 하고 또 구현이 꽤나 까다로워 보인다. 다만 table, table-row를 작업할 때에 호출 구조를 잘 짜놓는다면 또 별 노력 없이 잘 될 것 같기도 한데, 마크다운에 원래 가로를 나누는 기능이 있는지는 또 모르겠다. 그래서 미정이다. &lt;/p&gt;
&lt;h4&gt;미디어 관련 블록&lt;/h4&gt;
&lt;p&gt;미디어 관련 기능도 지금보니 노션에 있다. 이건.. 할만하지 않을까? 고려해보겠다. 아직 자세히 살펴보지 못했다. &lt;/p&gt;
&lt;h3&gt;미구현 확정 블록&lt;/h3&gt;
&lt;h4&gt;토글&lt;/h4&gt;
&lt;p&gt;토글은 미구현 확정이다. 토글은 마크다운에서 지원하지 않고, 만약 하려면 부트스트랩의 collapse 같은 기능을 직접 구현해야 할 것 같다. 이건 쉽지 않다. &lt;/p&gt;
&lt;h4&gt;임베드 관련 블록&lt;/h4&gt;
&lt;p&gt;기각이다. 블로그 글에 임베드는 쓰지 말자. &lt;/p&gt;
&lt;h4&gt;고급 블록&lt;/h4&gt;
&lt;p&gt;지금보니 토글도 고급에 들어있다. 마크다운 기본 기능이 아닌 것들은 기본적으로 구현에 한계가 있다. 다시 보니 column도 고급에 있다. &lt;/p&gt;
&lt;p&gt;나중에 추후 시간이 되면 만들만한 것들은 한 번 고려해보겠다. &lt;/p&gt;
&lt;h4&gt;데이터베이스 관련 블록&lt;/h4&gt;
&lt;p&gt;웹사이트에 넣을 수 있는 기능이 (아마도) 아니다. 기각이다. &lt;/p&gt;
&lt;h2&gt;다음 작업 예정은?&lt;/h2&gt;
&lt;p&gt;이제 배포 자동화를 목표로 해야 한다. 자동화까지 해둬야, 이 프로젝트를 만든 목적 달성이 아닐까? 얼른 자동화도 하고 싶다..&lt;/p&gt;
&lt;p&gt;자동화의 자세한 로직은 다음번에 설계 하도록 하겠다.. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Union Type]]></title><description><![CDATA[타입스크립트의 Union Type 타입스크립트에는 유니언 타입이라는게 있다. 쉽게 말해 값이 여러 타입을 or…]]></description><link>https://sharknia.github.io/Union-Type/</link><guid isPermaLink="false">https://sharknia.github.io/Union-Type/</guid><pubDate>Sun, 28 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;타입스크립트의 Union Type&lt;/h2&gt;
&lt;p&gt;타입스크립트에는 유니언 타입이라는게 있다. 쉽게 말해 값이 여러 타입을 or 로 가질 수 있는 것이다. &lt;del&gt;&lt;em&gt;막나간다.&lt;/em&gt;&lt;/del&gt; &lt;/p&gt;
&lt;p&gt;두 개의 이상의 타입을 &lt;code class=&quot;language-text&quot;&gt;|&lt;/code&gt; 기호를 사용해 결합하면 유니언 타입이 된다. 이를 통해 변수가 함수 매개변수가 여러 타입 중 하나의 타입을 가질 수 있음을 나타낼 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StringOrNumber&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; StringOrNumber&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 유효함&lt;/span&gt;
value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;123&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;token comment&quot;&gt;// 유효함&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;h4&gt;유연성&lt;/h4&gt;
&lt;p&gt;다양한 타입을 하나의 변수에 할당할 수 있어 다양한 시나리오에 대응할 수 있다. &lt;/p&gt;
&lt;h4&gt;타입 안정성 보장&lt;/h4&gt;
&lt;p&gt;유니언 타입을 사용하면 타입스크립트 컴파일러가 타입 안정성을 체크해준다. 즉, 할당된 값이 유니언 타입에 명시된 타입 중 하나와 일치하지 않으면 오류를 발생시킨다. &lt;/p&gt;
&lt;h4&gt;코드 간결성&lt;/h4&gt;
&lt;p&gt;복잡한 조건에 대한 타입을 간결하게 표현할 수 있다. &lt;/p&gt;
&lt;h3&gt;유니언 타입 사용 시 고려할 사항&lt;/h3&gt;
&lt;h4&gt;타입 가드&lt;/h4&gt;
&lt;p&gt;유니언 타입은 여러 타입을 허용하기 때문에 실행 시점에 정확한 타입을 확인하기 위해 타입 가드를 사용해야 한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; StringOrNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// value는 여기서 string 타입입니다.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// value는 여기서 number 타입입니다.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;공통 필드 사용&lt;/h4&gt;
&lt;p&gt;유니언 타입의 모든 구성원이 공통으로 가진 필드나 메소드에만 접근할 수 있다. 공통되지 않은 필드에 접근하려면 타입 가드를 사용해야 한다. &lt;/p&gt;
&lt;h4&gt;복잡한 유니언 타입&lt;/h4&gt;
&lt;p&gt;유니언 타입이 복잡해질 수록 그 타입을 사용하는 코드는 더 복잡해질 수 있다. 따라서 타입을 너무 복잡하게 만들지 않도록 주의해야 한다. &lt;/p&gt;
&lt;h2&gt;파이썬의 Union Type&lt;/h2&gt;
&lt;p&gt;여기까지 알아보다가 파이썬에서도 왠지 비슷한게 있을 것 같다는 생각이 들어서 찾아봤고, 역시 있음을 알게 됐다. &lt;/p&gt;
&lt;p&gt;파이썬은 타입스크립트와 다르게 동적 타이핑 언어이지만 3.5 이상에서는 타입 힌팅을 사용하여 비슷한 기능을 구현할 수 있고, 3.10 이상에서는 &lt;code class=&quot;language-text&quot;&gt;Union&lt;/code&gt; 대신 &lt;code class=&quot;language-text&quot;&gt;|&lt;/code&gt; 연산자를 이용하여 유니언 타입을 정의할 수 있다. &lt;/p&gt;
&lt;h3&gt;파이썬 3.9 이전&lt;/h3&gt;
&lt;p&gt;typing 모듈의 Union 을 사용하여 나타낼 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Union

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Union&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;파이썬 3.10 이상&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;타입스크립트의 Union Type과 다른 점&lt;/h3&gt;
&lt;p&gt;파이썬은 동적 타이핑 언어이므로 이 제약은 파이썬의 실행에 영향을 미치지 않는다. 즉 런타임에서 타입 안전을 강제하지 않는다. &lt;/p&gt;
&lt;p&gt;단순히 개발자의 가독성 향상, IDE의 자동완성 지원, mypy등 정적 타입 체킹 도구를 위한 것이다. &lt;/p&gt;
&lt;p&gt;저렇게 해두어도 런타임에서 다른 타입의 값이 할당될 수 있음을 주의해야 한다. &lt;/p&gt;
&lt;h2&gt;사담&lt;/h2&gt;
&lt;p&gt;노션 API를 활용한 블로그 쉽게 하는걸 만들다가 타입이 복잡하게 선언되어있는걸 보고 혹시나 해서 찾아봤더니 내 예상이 맞았다. &lt;/p&gt;
&lt;p&gt;C로 개발을 시작했어서 그런지 처음에 자바스크립트를 접하고 아주 재미있고 자유도가 높다고 생각했는데, 갈 수록 나 자신에게 쇠사슬이 묶여있는게 오히려 편하다고 느낀다. &lt;/p&gt;
&lt;p&gt;프로젝트 크기가 커질수록 더 그렇게 느끼는 것 같다. &lt;/p&gt;
&lt;p&gt;물론 이런 기능을 잘 활용하면 더 편할때도 많긴 하다. 코드가 짧아지는 것도 맞고..&lt;/p&gt;
&lt;p&gt;결국 내 자신이 잘하면 아무일도 안생길거라는 생각도 든다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[우분투 용량 관리]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/우분투-용량-관리/</link><guid isPermaLink="false">https://sharknia.github.io/우분투-용량-관리/</guid><pubDate>Sun, 28 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개인적으로 나스를 하나 운영하고 있다. &lt;/p&gt;
&lt;p&gt;이것저것 설정해서 쓰고 있는데, 어느 날 갑자기 토렌트 다운로드가 용량이 없다고 작동하지 않았다. &lt;/p&gt;
&lt;p&gt;용량은 다음의 명령어를 통해 확인할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;furychick@odroid:/HDD2/myHomePage$ &lt;span class=&quot;token function&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-h&lt;/span&gt;
Filesystem      Size  Used Avail Use% Mounted on
tmpfs           200M   29M  171M  &lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;% /run
/dev/mmcblk1p2   15G   15G     &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;% /
tmpfs           996M     &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  996M   &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;% /dev/shm
tmpfs           &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;.0M     &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;.0M   &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;% /run/lock
/dev/mmcblk1p1  128M   14M  114M  &lt;span class=&quot;token number&quot;&gt;11&lt;/span&gt;% /media/boot
/dev/sdb1       &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;.7T  656G  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;.0T  &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt;% /HDD2
/dev/sda1        11T  &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;.3T  &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;.1T  &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;% /HDD
tmpfs           200M     &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  200M   &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;% /run/user/1000&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;외장하든 왕 큰 놈을 달아서 사용하고 있는데, 오드로이드다보니 메인 OS가 깔리는 드라이브는 15gb짜리 작은 용량이다.. 그 드라이브가 100퍼센트 꽉 차 있었다. &lt;/p&gt;
&lt;p&gt;다음의 명령어를 사용해 용량이 큰 디렉토리를 검색했다. 외장하드 경로는 제외하고 검색했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;furychick@odroid:/$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-h&lt;/span&gt; / &lt;span class=&quot;token parameter variable&quot;&gt;--exclude&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/HDD2 &lt;span class=&quot;token parameter variable&quot;&gt;--exclude&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/HDD &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-hr&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
du: cannot &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; directory &lt;span class=&quot;token string&quot;&gt;&apos;/proc/sys/fs/binfmt_misc&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; No such device
du: cannot access &lt;span class=&quot;token string&quot;&gt;&apos;/proc/19035/task/19035/fd/3&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; No such &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; or directory
du: cannot access &lt;span class=&quot;token string&quot;&gt;&apos;/proc/19035/task/19035/fdinfo/3&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; No such &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; or directory
du: cannot access &lt;span class=&quot;token string&quot;&gt;&apos;/proc/19035/fd/4&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; No such &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; or directory
du: cannot access &lt;span class=&quot;token string&quot;&gt;&apos;/proc/19035/fdinfo/4&apos;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; No such &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; or directory
15G     /
11G     /home/furychick
11G     /home
&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;.7G    /home/furychick/.forever
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;.2G    /var
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.7G    /usr
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.6G    /var/log
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.5G    /var/log/journal/dc87f36fc06c441a85ff7269ba4d50fb
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.5G    /var/log/journal
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.3G    /usr/lib&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아~ 개인 홈페이지를 돌리는 로그가.. 몇 년 째 사이트를 그냥 켜둔채로 방치하다 보니 9기가에 달하게 크게 자라 내 서버를 억누르고 있었다. &lt;/p&gt;
&lt;p&gt;당장 로그를 삭제해주었다. &lt;/p&gt;
&lt;p&gt;해피엔딩~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(4)]]></title><description><![CDATA[지난 이야기 NotionAPI를 활용한 자동 포스팅(3) 간만에 복귀를 했다. 별건 아니고.. 그냥 복습을 했다.  오늘의 작업 block.ts 나머지 작업 지난번에 block.ts…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅4/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅4/</guid><pubDate>Sat, 27 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;지난 이야기&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/NotionAPI%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99-%ED%8F%AC%EC%8A%A4%ED%8C%853&quot;&gt;NotionAPI를 활용한 자동 포스팅(3)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;간만에 복귀를 했다. 별건 아니고.. 그냥 복습을 했다. &lt;/p&gt;
&lt;h2&gt;오늘의 작업&lt;/h2&gt;
&lt;h3&gt;block.ts 나머지 작업&lt;/h3&gt;
&lt;p&gt;지난번에 block.ts를 미완성 된 상태로 두었다. 타입 검사에서 걸린 상태로 일단 두었고,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GetBlockResponse&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PartialBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Union Type이라는 것이 있다는 것을 알게 되었다. 해당 내용에 대해서는 따로 정리 해두었다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Union-Type&quot;&gt;Union Type&lt;/a&gt;  &lt;/p&gt;
&lt;h3&gt;로그 강화&lt;/h3&gt;
&lt;p&gt;로그도 작업 순서에 맞게 찍히도록 강화했다. json 형태의 데이터여서 [object Object] 와 같이 찍히던 것도 제대로 내용물이 출력되도록 수정했다. 다음과 같은 코드로 json 형태의 데이터도 이쁘게 출력할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;convertParagraph - paragraph : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                paragraph&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ConvertParagraph 완성&lt;/h3&gt;
&lt;p&gt;paragraph는 노션 블록 타입 주으이 하나로, 텍스트의 기본 단위이다. 텍스트를 입력할 때 기본적으로 생성되는 블록 유형이다. &lt;/p&gt;
&lt;p&gt;이 블록 안에 들어있는 내용을 마크다운으로 바꿔주는 메소드를 완성했다. &lt;/p&gt;
&lt;p&gt;원본 노션의 내용은 다음과 같다. 일부러 여러가지 케이스를 집어넣었다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 182px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABi0lEQVR42m2RW2/aQBCF+RsFX9bGxsYYYxMDruNQwFHrtlHjtCBVSi9cFKnKE///5evgJlIleDh7dnZnz8ycbem6jmEYnLjT6TQ4xZqm0W63z85eoZS6iFaSJHiex1WaslitWC6XRKMR8/mcuq7J85yiKIiiiMViQVmWTXwqcFFwJQ8/396yfXzkabvl+PxMfXdH/fDA8Xhkt9ux3++pqorD4cBWcjabDbZtXxasgoAfScz3OGYdDvjqupzOHOFAuC/wfb9Jdnu9hofDIY7jYJrmuaAhiy7QlIluKd5YFu2XS93QMQ0TTcYz5F6ZCktZdMRDQ8QsyT0TDAZ91tmUb7MJ9SRlPZ1QpWN0WxE5fZ5mXyjDjE/DG96HOR+jgpkfkwk+SJx7iRTUmkKNYBgG/Mzf8ivP+HNzzW/Z309TonHCyB+wiUtSL6LoX1EOMu5H74jdAdf9MdOefFScEYhVr+O3ul0bT/xyXUd8c+iKN47TbTxS1svokqyZhnShsKUT3fxnwYmVjP3/B/0FwLz0WbdFeN8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png&apos; srcset=&apos;/static/c37e9a2ed8f76a7f64abfe844e3b2069/e7570/image1.png 170w,
/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png 182w&apos; sizes=&apos;(max-width: 182px) 100vw, 182px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이 paragraph블록의 데이터 형태는 다음과 같다. &lt;/p&gt;
&lt;h4&gt;&lt;u&gt;노&lt;/u&gt;&lt;u&gt;&lt;del&gt;션이&lt;/del&gt;&lt;/u&gt;  &lt;strong&gt;좋습***&lt;/strong&gt;니다***..&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;rich_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;노&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;노&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;션이&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;션이&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;좋습&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;좋습&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;니다&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;니다&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;..&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;..&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;정말로&lt;/code&gt;.. &lt;span style=&quot;color: pink;&quot;&gt;좋아합니다&lt;/span&gt;..&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;rich_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;정말로&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;정말로&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.. &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.. &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;좋아합니다&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pink&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;좋아합니다&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.. &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.. &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 중에서 밑줄과 색상은 기본적으로 마크다운에서 지원하지 않는 기능이므로 html 태그를 사용했다. 코드는 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paragraph&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textElement &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; paragraph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;plain_text&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 텍스트 스타일링 처리&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bold&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;italic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;strikethrough&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;~~&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;~~&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\`&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;underline&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 마크다운은 기본적으로 밑줄을 지원하지 않으므로, HTML 태그 사용&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;u&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/u&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 색상 처리 (HTML 스타일을 사용)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;default&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;span style=&quot;color: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; textContent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;convertParagraph - paragraph : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                paragraph&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;\n\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;convertParagraph - markdown : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;markdown&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 문단 끝에 줄바꿈 추가&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;각 문장은 각각 다음과 같이 변환된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;convertParagraph - markdown &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;u&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;노&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;/u&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;u&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;~~션이~~&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;/u&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; **좋습*****니다***&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;
convertParagraph - markdown &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;정말로&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span &lt;span class=&quot;token assign-left variable&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;color: pink;&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;좋아합니다&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;/span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이를 vscode의 마크다운 편집 기능을 통해서 확인하면 다음과 같이 정상적으로 출력되는 것을 확인할 수 있다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 388px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 17.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVR42j1QywqEMBDz///K23rV9abiCxUUpZa6tj6yzYAeQjqvTKaBcw77vmPbNlhrwZh8nieO45Aa4yd3XdfbxxljjMRk1oKu61CWJeq6Fs7zXLCuK8ZxRFEUqKpK8OTSNEWWZUiSBJ8oQuZ7ku9XFgTDMIhY0zRo21beHNZaY5qmdxlBF33fIwxDxHEM691De2dK414NYH4IuHVZFhGY51lEyM8ZfCulpIdnso+uKcwvgfOwDreHT+APdpIuAlwaOU4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png&apos; srcset=&apos;/static/e2c499b18f033781be6c338bb4de1ad2/e7570/image2.png 170w,
/static/e2c499b18f033781be6c338bb4de1ad2/f46e7/image2.png 340w,
/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png 388w&apos; sizes=&apos;(max-width: 388px) 100vw, 388px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;마크다운 파일 저장 기능 추가&lt;/h3&gt;
&lt;p&gt;page.ts에 block들로부터 받아온 마크다운 내용과 properties에 저장된 내용들을 합해 마크다운 파일로 저장하는 메소드를 완성했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printMarkDown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;//contentMarkdown과 properties의 내용을 마크다운 파일로 저장한다.&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 파일 이름 설정 (페이지 제목으로)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; filename &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageTitle&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;.md&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 마크다운 메타데이터 생성&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; markdownMetadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatMarkdownMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 마크다운 메타데이터와 contentMarkdown을 결합&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; fullMarkdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;markdownMetadata&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contentMarkdown&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 디렉토리 생성 (이미 존재하는 경우 오류를 무시함)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; recursive&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; filePath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;index.md&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 결합된 내용을 파일에 쓰기 (이미 존재하는 경우 덮어쓰기)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fullMarkdown&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[page.ts] Markdown 파일 저장됨: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;filePath&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[page.ts] 파일 저장 중 오류 발생: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;error&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;formatMarkdownMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// properties를 마크다운 메타데이터로 변환&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;---&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;title: &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;title &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;description: &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;description &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;date: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;date &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;update: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;update &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// tags가 배열인 경우에만 join 메소드를 호출&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;tags:\n  - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isArray&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;tags&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\n  - &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
            &lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;series: &quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;series &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;---&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; metadata&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;github.io의 블로그 형식에 맞춰서 properties를 바꿔주고, 블로그 형식에 맞는 위치에 일단 마크다운 파일을 저장하게끔 해주었다. 아마, 추후 배포 방식에 따라 해당 위치는 바뀔 수 있을 것이다. 아직 정확하게 어떤 방식으로 블로그를 배포할 것인지까지는 고려하지 않았다. &lt;/p&gt;
&lt;p&gt;위 코드를 포함해서 실행하면, &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 190px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACAElEQVR42oVSy3LaQBDkGzCSVg/0RhICgZC0CBTAvKFsXK5UXDmmUpWbLz75mFvyP/nDzqyo+IKJD32Qdqanp3sacT9BlmWI0gK9u29IywrJYIis4Mg5xyjPUYxL9OnfIB1hOMrorUDc76Pb612gkaQZVsslomKO299/8PD9GdPqE7bHIza7PWGL9e4APqmw2h+w2++wWK6QEHkyTC/QME0TbQHDgO/aCLtx/e163hmuC8dx0QkCeJ4L07Lh+z5E33toyLIMy3YQRxHy8QQvP3/Bj3qYLRaYz2fI0hRx3ENVTZGNUnTJokk5hsoYFEW5QIPRg67r0DQNOqkMwoiKZVLlUIEMSZIghjLRwBRoqgqVagUhewdvhLpuQJFbMMIhbH6AR4SL2zWO5NlsPgUvp9isNvBodZmGqER8lVCoY1QgtW7QlBQwO6w9LfgYJa3HeY5hmqPMCti2fVZ8XaFSh2BZJsXex/p4B6tt1AEwGvTPbBGMrmtXid4IhZEiuYhWGdAJ/Xh5RRCEGAwSuH5AKjmKIqd75KimE9imAZl62P88FCsLwyWphWbzBkw368TqAFQGSZZq3/R2Gxr5rXxEaJBfAgo1WjH5NDkh7HRw//CIr09fcH86YLU94PPpEQGdl9RqfRzKORjxk6bTuQh1FgUgzsdxnfpWHbLmvM11D/8C58BWiDU8hLUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png&apos; srcset=&apos;/static/bd60ee265b49dce0e87e516a1d70d48a/e7570/image3.png 170w,
/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png 190w&apos; sizes=&apos;(max-width: 190px) 100vw, 190px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이렇게 저장이 되고, &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/0d515458e22973fa572822c3536f30db/86467/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 37.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAq0lEQVR42q2PWwqDQAxFZyHWeSQ+Oo/N220orkBQtyFyOzOlIAVLCwYOST5yuBFU39E2LcgYKKkglYSUEmWaYy+KAsEHPLoO4zii73sMw3CKqFsLax2IDDhKTUQbAmkFJnoJQ8CyLEi17zu+lTDEIK7QVAxmjgkVVEQntM5C7z3mec4H27Zl6Rkiv1eWuEVST/ubJP474VHwyVG4rut1wuPLlwidc5im6SfhE9Elb1W+TBl+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/0d515458e22973fa572822c3536f30db/ca1dc/image4.png&apos; srcset=&apos;/static/0d515458e22973fa572822c3536f30db/e7570/image4.png 170w,
/static/0d515458e22973fa572822c3536f30db/f46e7/image4.png 340w,
/static/0d515458e22973fa572822c3536f30db/ca1dc/image4.png 680w,
/static/0d515458e22973fa572822c3536f30db/02d09/image4.png 1020w,
/static/0d515458e22973fa572822c3536f30db/9d567/image4.png 1360w,
/static/0d515458e22973fa572822c3536f30db/86467/image4.png 2233w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이렇게 깔끔하게 저장이 된다. 이제 앞으로는 각 블록 타입들에 대한 변환을 추가하면 된다!&lt;/p&gt;
&lt;h3&gt;BlockObjectResponse 분석&lt;/h3&gt;
&lt;p&gt;실질적으로 컨텐츠들은 BlockObjectResponse 타입들로 이루어져있다. BlockObjectResponse는 다음의 Union Type이다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BlockObjectResponse&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ParagraphBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Heading1BlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Heading2BlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Heading3BlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; BulletedListItemBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; NumberedListItemBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; QuoteBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ToDoBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ToggleBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; TemplateBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; SyncedBlockBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ChildPageBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ChildDatabaseBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; EquationBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; CodeBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; CalloutBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; DividerBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; BreadcrumbBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; TableOfContentsBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ColumnListBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ColumnBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; LinkToPageBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; TableBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; TableRowBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; EmbedBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; BookmarkBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ImageBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; VideoBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; PdfBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; FileBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AudioBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; LinkPreviewBlockObjectResponse &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; UnsupportedBlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;del&gt;너무 많다&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;일단, 많이 쓸 것 같은 블록들을 예제 파일로 만들고 해당 노션 파일들을 불러와보고 어떤 타입들을 사용하는지 살펴보기로 했다. 나머지는 모르겠다 아직은 그냥 미지원이다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/2af61caa2c35f58e15a78afe1588f244/f7121/image5.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 92.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByklEQVR42qWUy27UMBSG/QoMI7GguTh2HDsTJ5P7NCO1IITUFRUS8A4seP/lzzmmQVUl0HSy+BM7Uj6fy38spmHAx/s7ZFmGJEmQpukmibnrcDfPyKTcDAvAZZqwjCOiKLoKIOUL4D1Ft/Q9ojgOKQddAJGU0U0UI6b/eB/FCa0TiPZ4xHJ7i6IooJSC1hqa6vk/IEM4o/FYoq4OuEkNWm9wKA2EyQ36rkff/9FI6XdlCa008jwPhxhjwprffPCb3VvIdzs8zg5f+gNOSuLXtxFfHyYIVVu0pwG196iqCnVdo24adNQsBnBEDGUX8Ju13+/g5R5H/R4fbIyfPx7w/fOCR5JQRsM6C2ddOL2wFgWBLK05qlCCJ63AXEv4A6WvMspEoT1/gqs7CqaC4J8aiogjW1NaZQn+LxWFg3MurI3OKAATDhX84I/h5KeavV76b1nEWjfu2kxT42nPFrra2Gt9mO4p5Yqjpf0mINvlRAYfyDLL+Ry6fe1cC34wlP3HYJ6AeEvK3Aiu4UQzPVAN5cZLQnCHx7bFTEDu1JboArCiMVtoStILLoWLgIUhY/sKJYHZ2M8n47XiDIWh0WsaT3VsyODPbpwrgb8BKZ0dd/NVeLkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image5&apos; title=&apos;&apos; src=&apos;/static/2af61caa2c35f58e15a78afe1588f244/ca1dc/image5.png&apos; srcset=&apos;/static/2af61caa2c35f58e15a78afe1588f244/e7570/image5.png 170w,
/static/2af61caa2c35f58e15a78afe1588f244/f46e7/image5.png 340w,
/static/2af61caa2c35f58e15a78afe1588f244/ca1dc/image5.png 680w,
/static/2af61caa2c35f58e15a78afe1588f244/f7121/image5.png 899w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이것들을 넘는것은 내가 아직은 노션에 쓸 것 같지가 않다. 따라서 위의 블록들을 중점적으로 먼저 변환하기로 하자. &lt;/p&gt;
&lt;p&gt;다음의 녀석들이 그 녀석들이다. &lt;/p&gt;
&lt;h4&gt;heading_ 시리즈&lt;/h4&gt;
&lt;p&gt;제목1, 제목2, 제목3 들이다. heading&lt;em&gt;1부터 heading&lt;/em&gt;3까지를 노션에서는 사용할 수 있는데, 각각 h2, h3, h4로 변환하면 될 것 같다. 이건 쉬울 것 같은 예감이 든다. &lt;/p&gt;
&lt;h4&gt;bookmark&lt;/h4&gt;
&lt;p&gt;북마크는 간단할 것 같지만, 간단하지 않은 점이 있다. 노션에는 페이지 링크 기능이 있는데, 이것도 가능하면 (페이지 링크도 어차피 내 블로그 글 일테니까, 아니 사용자가 그렇게 사용해야 한다. ) 블로그 글의 링크로 변환하고 싶다. 이게 가능할까? 이건 쉽지 않을 수도 있을 것 같은 생각이 지금은 든다. 생성된 페이지 링크와 페이지 아이디가 다르다면 근본적으로 불가능한 일이다. &lt;/p&gt;
&lt;h4&gt;code&lt;/h4&gt;
&lt;p&gt;코드 블록이다. 이건 쉬울 것 같다. &lt;/p&gt;
&lt;h4&gt;table, table_row&lt;/h4&gt;
&lt;p&gt;마크다운은 표 그리기가 까다롭다. 그래도 어떻게든 할 수 있지 않을까? &lt;/p&gt;
&lt;h4&gt;bulleted&lt;em&gt;list&lt;/em&gt;item&lt;/h4&gt;
&lt;p&gt;글머리 기호이다. 이건.. 이건 쉽지 않을까? &lt;/p&gt;
&lt;h4&gt;numbered&lt;em&gt;list&lt;/em&gt;item&lt;/h4&gt;
&lt;p&gt;번호 이것도 쉽지 않을까?? &lt;/p&gt;
&lt;h4&gt;toggle&lt;/h4&gt;
&lt;p&gt;토글도 어떻게든 되지 않을까? 다른것보단 복잡하겠지만 특별한 건 없을 것 같다. &lt;/p&gt;
&lt;h4&gt;quote, divider, callout&lt;/h4&gt;
&lt;p&gt;이 놈들도 특별한 어려움은 예상되지 않는다. 그냥 스타일이나 이쁘게 주면 될 것 같다. &lt;/p&gt;
&lt;p&gt;결국, 표나 북마크를 제외하면 나머지는 그냥 단순 노가다로 예상이 된다. &lt;/p&gt;
&lt;h3&gt;heading 시리즈 컨버터 생성&lt;/h3&gt;
&lt;p&gt;이건 간단했다. 다만, 컨버팅 관련 내용이 길어질 것 같아 해당 역할을 하는 클래스 MarkdownConverter을 만들어서 이걸 이용하기로 했다. 이 클래스는 블록의 내용을 받아 markdown 문자열로 변환해서 리턴하는 역할을 한다. &lt;/p&gt;
&lt;p&gt;paragraph와 heading 시리즈에 겹치는 내용이 많다. 사실상 pre 태그만 다르다. 따라서 중복되는 내용을 formatTextElement 메소드로 분리했다. 아마 다른 타입에 대해서도 사용할 수 있을 것 같은 예감이 든다. &lt;/p&gt;
&lt;p&gt;완성된 코드는 다음과 같다. &lt;/p&gt;
&lt;h4&gt;코드&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; BlockObjectResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@notionhq/client/build/src/api-endpoints&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MarkdownConverter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; block&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;block &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; block&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; converter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; MarkdownConverter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MarkdownConverter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; converter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;makeMarkDown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeMarkDown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; block &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[markdownConverter.ts] makeMarkDown : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;
                block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;
            &lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 텍스트의 기본 단위,텍스트를 입력할 때 기본적으로 생성되는 블록 유형&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;paragraph&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;paragraph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;heading_1&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertHeading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;heading_1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;heading_2&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertHeading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;heading_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;heading_3&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertHeading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;heading_3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 다른 블록 유형에 대한 처리를 여기에 추가...&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[markdownConverter.ts] makeMarkDown : Unsupported block type - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paragraph&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textElement &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; paragraph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;\n\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertHeading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;heading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; level&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; prefix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;level &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textElement &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; heading&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; prefix &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;\n\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;plain_text&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 텍스트 스타일링 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bold&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;italic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;strikethrough&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;~~&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;~~&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\`&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;underline&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;u&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/u&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;default&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;span style=&quot;color: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;color&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textContent&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; textContent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;convertLinkToPage 생성&lt;/h3&gt;
&lt;p&gt;아까 북마크에 대해서 고려할 때, 페이지 링크가 어렵지 않을까? 고민했었는데 해당 문제는 해결이 가능했다. link&lt;em&gt;to&lt;/em&gt;page 타입에서 페이지 아이디를 제공하고 있었고, 페이지 아이디를 API를 통해서 호출을 하면 해당 데이터를 가져오는 것이 가능했다. 이 경우에는 마크다운 파일은 필요없고 URL만 필요하므로, Page 클래스에 간단한 정보만 가져오는 메소드를 만들고 해당 메소드를 활용해 북마크를 생성해주었다. 또, 설정 파일에 블로그의 주소를 설정하도록 했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Page&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; properties&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Record&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; PropertyValue&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; pageTitle&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; pageUrl&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; contentMarkdown&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getProperties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extractDataFromProperties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;properties&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;
            page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageTitle
                &lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;[^가-힣\w\-_~]&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-flags&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 한글, 영어, 숫자, &apos;-&apos;, &apos;_&apos;, &apos;.&apos;, &apos;~&apos;를 제외한 모든 문자 제거&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\s+&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-flags&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 공백을 하이픈으로 치환&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
        &lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 생략 &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSimpleData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notionApi&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NotionAPI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; NotionAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; page&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Page&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; notionApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            pageTitle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageTitle &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            pageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; 생략 &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존의 생성자 create 메소드와 중복되는 부분을 init 메소드로 분리하고, getSimpleData에서는 title, url만 리턴하도록 수정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertLinkToPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;linkToPage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; envConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// EnvConfig 인스턴스 생성&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blogUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blogUrl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// blogUrl 가져오기&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; linkToPage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;page_id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSimpleData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageTitle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageTitle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pageTitle&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;blogUrl&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pageUrl&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)\n\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Error converting link_to_page:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 이렇게 해당 값과 설정값을 이용해 북마크를 연결할 주소를 만들었다. &lt;/p&gt;
&lt;h3&gt;Page 멘션 기능 대응&lt;/h3&gt;
&lt;p&gt;Page Mention의 경우에는 특이하게 paragraph에 링크 관련 정보가 담겨서 온다. 해당 경우에 대응하기 위해 convertParagraph를 다음과 같이 수정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paragraph&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; textElement &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; paragraph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;mention&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mention&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;page&apos;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// mention 타입이고, page를 참조하는 경우&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertMentionToPageLink&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    textElement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mention&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 기타 텍스트 요소&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatTextElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;textElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;\n\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMentionToPageLink&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; envConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// EnvConfig 인스턴스 생성&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blogUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blogUrl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// blogUrl 가져오기&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSimpleData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pageId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageTitle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageTitle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pageTitle&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;blogUrl&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;pageUrl&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Error converting mention to page link:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이로써 까다로울 것 같았던 두 가지에 대한 대응이 끝났고, 나머지는 노가다만 남은 것 같다!&lt;/p&gt;
&lt;h3&gt;imageConverter 구현&lt;/h3&gt;
&lt;p&gt;이미지도 구현이 쉬웠다. 마크다운과 같은 폴더에 이미지를 다운로드 받고(amazone 저장소 주소가 API에서 제공된다. ) 캡션 형식으로 넣어주면 된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imageBlock&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; imageUrl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; imageBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; imageCaption &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
                imageBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;caption&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;formatRichText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imageBlock&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;caption&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 이미지 이름을 순서대로 할당 (image1, image2, ...)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; imageName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;MarkdownConverter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imageCounter&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;.png&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; imageDownDir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageUrl&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;imageName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; imagePath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;contents/post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; imageDownDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 이미지 다운로드 및 로컬에 저장&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imageUrl&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                responseType&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;arraybuffer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imagePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// 마크다운 이미지 문자열 생성&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdownImage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;![&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;imageCaption&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;](&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;imageName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imageCaption&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                markdownImage &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;p style=&quot;text-align:center;&quot;&gt;&amp;lt;small&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;imageCaption&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/small&gt;&amp;lt;/p&gt;\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdownImage&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Error converting image:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;단, 이 클래스는 상당히 분리되어있는 클래스여서 따로 저장될 곳의 디렉토리 명을 알 수 있는 방법이 없었다.. 어쩔 수 없이 Page클래스부터 계속해서 디렉토리 명을 던져줬다.. 깔끔하지 않다.. &lt;/p&gt;
&lt;p&gt;또, 저장될 디렉토리 (contents/post) 도 설정의 영역에 넣어야 할 것 같다. &lt;/p&gt;
&lt;h2&gt;오늘의 마무리&lt;/h2&gt;
&lt;p&gt;오늘은 이 정도면 될 것 같다. 이미 핵심 부분은 모두 진행이 됐고, 앞으로는&lt;/p&gt;
&lt;h3&gt;남은 타입별 구현&lt;/h3&gt;
&lt;p&gt;콜아웃, devider, quote는 html, css의 영역으로 생각된다. 이건 추후 따로 정적 파일에 html, css를 추가하거나 해야 할 것 같다. 자세한 방법은 나중에 생각해보려고 한다. 오늘 다섯시간? 정도를 쉬지 않고 했더니 집중력이 많이 떨어진 게 느껴진다. &lt;/p&gt;
&lt;p&gt;토글도 의외로 까다로울지도? 뭐 초반엔 내가 그냥 토글을 노션에 안쓰면 되는거 아닐까? &lt;/p&gt;
&lt;p&gt;까다로운 부분은 많이 구현된 것 같다. 빠르면 내일, 열심히 한다면 이번주 안에 직접 사용을 해볼 수 있을 것 같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(3)]]></title><description><![CDATA[지난시간 https://sharknia.github.io/Notion-Api-2/ 문제점 아무것도.. 기억이 나지 않는다.. 지난날의 나는 무엇이었나?…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅3/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅3/</guid><pubDate>Fri, 26 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;지난시간&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Notion-Api-2/&quot;&gt;https://sharknia.github.io/Notion-Api-2/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;문제점&lt;/h2&gt;
&lt;p&gt;아무것도.. 기억이 나지 않는다.. 지난날의 나는 무엇이었나? 5개월만의 복귀가 이렇게 어렵다. 이래서 사람은 꾸준해야 한다. &lt;/p&gt;
&lt;h2&gt;잡설&lt;/h2&gt;
&lt;p&gt;최근 업무에 약~간의 여유가 생기면서 IDE를 파이참에서 vs code로 갈아탔다. 파이썬만 할 때에는 파이참이 유리한 것이 사실이지만(심지어 속도도 파이참이 더 빠르다고 느꼈다. ) 추후 여러 언어를 다루게 될 경우 vs code가 유리한 점이 있다고 생각되어 갈아탔고, 환경 세팅을 다시 했다. &lt;/p&gt;
&lt;p&gt;formatter나 기타 여러가지 등등.. 그리고 타입스크립트 코드를 오랜만에 보면서 여기에도 formatter 설정을 추가해주었다. &lt;/p&gt;
&lt;h2&gt;설계 되새김질&lt;/h2&gt;
&lt;p&gt;코드를 다시 읽는데에만 시간을 꽤 투자했다. 예전의 나는 코드를 꽤 잘 짠 것 같다. &lt;/p&gt;
&lt;p&gt;블로그 글을 복습하지 않고 코드를 읽고 설계를 다시 했는데 오늘의 나는 예전의 나와 의견이 똑같다. &lt;del&gt;(진작 복습할걸)&lt;/del&gt;&lt;/p&gt;
&lt;h3&gt;그래서 어떻게 할 것이냐?&lt;/h3&gt;
&lt;p&gt;노션은 블록 기반의 구조로 이루어져있다. 그래서 나는 노션의 메인 데이터베이스를 블로그 홈이라고 가정하고, 그 안에 있는 블록들의 리스트는 페이지라고 정의하여, 페이지의 양식이나 속성은 고정해두려고 한다. 그리고 비로소 페이지안의 컨텐츠, 블록들을 마크다운으로 변환하려고 한다. &lt;/p&gt;
&lt;p&gt;그래서, Page.ts에서 페이지 들을 관리하고, Block.ts에서 블록들을 관리하려고 한다. 블록들은 각자 하위 블록을 다시 가질 수 있는 재귀적 형태를 가진다. &lt;/p&gt;
&lt;p&gt;콘텐츠들은 문단, 이미지, 리스트 등 여러 타입을 가지므로 경우에 따라서 block 클래스를 상속한 하위 클래스가 생길수도 있겠다. &lt;/p&gt;
&lt;p&gt;각자 블록들은 자신의 내용들을 마크다운으로 변환해서 상위 블록에게 전달하는 메소드를 갖는다. 가장 하위 블록부터 전달된 변경된 마크다운 내용들은 상위로 타고 올라가 결국 페이지 클래스에 전달된다. &lt;/p&gt;
&lt;p&gt;페이지 클래스는 이 마크다운들을 모아 파일로 저장한다. &lt;/p&gt;
&lt;p&gt;계획은 완벽해 보인다. &lt;/p&gt;
&lt;p&gt;하지만, 타입이 아주 많고 이걸 마크다운으로 변환하는 작업은 노가다 그 자체일것이다.. &lt;/p&gt;
&lt;p&gt;그래서 일단은 제한된 타입들에 대해서만 변환을 지원하려고 한다. &lt;/p&gt;
&lt;h2&gt;그래서 오늘 작업은?&lt;/h2&gt;
&lt;p&gt;일단 코드를 읽었고, 분석했고, 설계를 굳이 다시 하고 예전의 나와 의견이 같다는 점을 뒤늦게 확인했으며, &lt;/p&gt;
&lt;p&gt;block.ts의 초안을 작성했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@notionhq/client&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; BlockObjectResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@notionhq/client/build/src/api-endpoints&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; GetBlockResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@notionhq/client/build/src/api-endpoints&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Block&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; blockId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; blockData&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; GetBlockResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; blockId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blockId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; blockId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMarkdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blockData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchBlockData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;processBlock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blockData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchBlockData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;GetBlockResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blocks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; block_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blockId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;processBlock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;paragraph&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;paragraph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;heading_1&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;heading_1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;plain_text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 다른 블록 유형에 대한 처리를 여기에 추가...&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Unsupported block type: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 하위 블록 처리 (재귀적)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has_children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;processChildBlocks&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;block&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;processChildBlocks&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;blockId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; children &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blocks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            block_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; blockId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; markdown &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; child &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            markdown &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;processBlock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; BlockObjectResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; markdown&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertParagraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paragraph&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;paragraph:&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; paragraph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; paragraph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rich_text&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// return paragraph.text.map((t) =&gt; t.plain_text).join(&apos;&apos;) + &apos;\n\n&apos;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 기타 블록 유형에 대한 변환 함수를 여기에 추가...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;완전히 지극히 초안 그 자체이다. 기초적인 형태만 잡았다. 아직 리턴값에 대한 이해가 충분하지 않아, 해당 부분에 대한 조정이 필요하다. (심지어 오류가 나는 상태이다)&lt;/p&gt;
&lt;p&gt;블록의 타입이 모두 정의가 되어있으므로, 해당 타입에 따른 각 클래스를 따로 생성할 필요도 느낀다. 모두 여기에 집중된다면 코드가 너무 길어질 것 같다. &lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;결국 오늘은 한 일이 별로 없다.. 복귀에 의의를 두자. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Pydantic Model의 응용]]></title><description><![CDATA[문제 기존에는 프론트와 주고 받을 데이터 모델을 정의하는데에 dataclass를 사용하고 있었다. 그러다가 FastAPI로 넘어오면서 Pydantic model을 도입했다.  dataclass…]]></description><link>https://sharknia.github.io/Pydantic-Model의-응용/</link><guid isPermaLink="false">https://sharknia.github.io/Pydantic-Model의-응용/</guid><pubDate>Fri, 26 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;문제&lt;/h2&gt;
&lt;p&gt;기존에는 프론트와 주고 받을 데이터 모델을 정의하는데에 &lt;a href=&quot;https://sharknia.github.io/dataclass&quot;&gt;dataclass&lt;/a&gt;를 사용하고 있었다. 그러다가 FastAPI로 넘어오면서 &lt;a href=&quot;https://sharknia.github.io/Pydantic-%EB%AA%A8%EB%8D%B8&quot;&gt;Pydantic model&lt;/a&gt;을 도입했다. &lt;/p&gt;
&lt;p&gt;dataclass로는 해결할 수 없는 문제가 있었다. 프론트엔드 개발에서는 주로 카멜케이스를 사용하기 때문에, 파이썬에서는 주로 스네이크 케이스를 사용하는데 (&lt;a href=&quot;https://sharknia.github.io/%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99naming-conventions&quot;&gt;네이밍 규칙(naming conventions)&lt;/a&gt;), 프론트로 나갈 변수 명을 카멜케이스로 통일 하기 위해 어쩔 수 없이 백엔드의 코드 컨벤션을 해치면서 Response로 나갈 모델의 속성만 Camel 케이스로 선언하고 있었다. &lt;/p&gt;
&lt;p&gt;하지만 난 이런게 너무 싫다. &lt;/p&gt;
&lt;h2&gt;해결&lt;/h2&gt;
&lt;p&gt;Pydantic Model을 이를 해결하기 위한 옵션이 있다. &lt;/p&gt;
&lt;h3&gt;alias_generator&lt;/h3&gt;
&lt;p&gt;필드에 대한 별칭을 자동으로 생성하는 함수를 지정한다. 주로 모델 필드 이름을 snake 케이스에서 camel케이스로 매핑할 때 사용된다. &lt;/p&gt;
&lt;h3&gt;populator&lt;em&gt;by&lt;/em&gt;name&lt;/h3&gt;
&lt;p&gt;이 옵션을 True로 설정하면 Pydantic은 별칭 대신 모델 필드의 원래 이름을 사용하여 인스턴스를 생성하고 할당한다. 이는 필드의 별칭과 원래 이름을 혼용하여 사용할 수 있게 한다. 기본적으로는 False로 되어있어 만약 이 설정을 수정하지 않는다면 속성을 snake case로 정의했어도 인스턴스 생성시 변수를 camelCase로 넣어줘야 하는 불상사가 일어난다. &lt;/p&gt;
&lt;p&gt;이 설정을 True로 해두면 모델 인스턴스가 직렬화, 역직렬화 되는 과정에서만 별칭을 이용하게 된다. &lt;/p&gt;
&lt;h3&gt;두 옵션을 엮어서..&lt;/h3&gt;
&lt;p&gt;이 두 옵션을 엮어서 Request로 받을 경우, Response로 내려갈 경우에만 별칭을 사용하고, 별칭은 camelCase에 따라 생성되도록 설정을 할 수 있다. &lt;/p&gt;
&lt;p&gt;그리고 이 설정값을 넣은 BastDtoModel 클래스를 생성해서 앞으로 우리가 데이터 통신에 사용할 PydanticModel은 모두 이 클래스를 상속받아 구현하기로 했다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;base_dto_model.py&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pydantic &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; BaseModel


&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;to_camel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    components &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;_&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; components&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; components&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BaseDtoModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BaseModel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        alias_generator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; to_camel
        populate_by_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;alias&lt;em&gt;generator에는 to&lt;/em&gt;camel 메소드를 정의해주었다. to&lt;em&gt;camel 메소드는 snake&lt;/em&gt;case로 작성된 문자열을 camelCase로 변환해주는 함수이다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[SqlAlchemy의 QueuePool]]></title><description><![CDATA[개발중인 서비스에서 Postgresql을 적용한지 이제 한달 조금 더 지났다.  아직 DB 마이그레이션 작업은 거의 되지 않았으므로, 실제로 Postgresql DB…]]></description><link>https://sharknia.github.io/SqlAlchemy의-QueuePool/</link><guid isPermaLink="false">https://sharknia.github.io/SqlAlchemy의-QueuePool/</guid><pubDate>Thu, 18 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개발중인 서비스에서 Postgresql을 적용한지 이제 한달 조금 더 지났다. &lt;/p&gt;
&lt;p&gt;아직 DB 마이그레이션 작업은 거의 되지 않았으므로, 실제로 Postgresql DB를 이용하는 서비스는 그다지 많지 않았다. &lt;/p&gt;
&lt;p&gt;새로 업데이트 하는 기능들에 대해서는 적극적으로 Postgresql을 이용하기로 했고, 이번에 새로 퀴즈 기능을 개발하면서 이 기능은 전부 RDB 기반으로 만들어졌다. &lt;/p&gt;
&lt;p&gt;퀴즈 기능의 개발은 유저의 접속률을 늘리기 위한 것으로, 모든 테스트를 마친 후 실서버에 배포가 되고 클라이언트까지 패치가 된 후 당당하게 퀴즈 풀러 오시라고 사용자들에게 푸시를 날렸다. &lt;/p&gt;
&lt;p&gt;그리고 펑! 서버가 터졌다. &lt;/p&gt;
&lt;h2&gt;현상&lt;/h2&gt;
&lt;p&gt;실제 서비스가 엄청나게 느리거나 거의 작동하지 않았다. &lt;/p&gt;
&lt;p&gt;Postgresql DB와 연결된 API들이 작동하지 않았다. &lt;/p&gt;
&lt;p&gt;서버에서는 &lt;code class=&quot;language-text&quot;&gt;QueuePool limit of size 5 overflow 10 reached, connection timed out, timeout 30.00&lt;/code&gt; 오류가 대량으로 발생했다. &lt;/p&gt;
&lt;p&gt;서버 모니터링 결과 푸쉬 직후 대량의 트래픽이 집중적으로 발생했다. &lt;/p&gt;
&lt;p&gt;Flarelane을 통해 확인한 결과, 2000명 정도가 동시 접속을 시도했다. &lt;/p&gt;
&lt;p&gt;Supabase의 DB 커넥션이 순간적으로 크게 늘어났다. (풀러를 사용중인데도 불구하고)&lt;/p&gt;
&lt;p&gt;시간이 지나면서 (약 10분이 안되는 짧은 시간) 트래픽이 줄어들고 자연스럽게 오류가 줄고, 서비스가 정상화되었다. &lt;/p&gt;
&lt;h2&gt;원인 파악 및 해결&lt;/h2&gt;
&lt;p&gt;Sqlalchemy의 QueuePool을 현재 지금 pool size 5, max overflow 10으로 맞춰놓았었는데, 트래픽이 증가하면서 QueuePool의 한도가 다 차고, 대다수 요청이 최대 대기 시간 30초를 꽉 채워 대기하다가 오류가 발생했다. &lt;/p&gt;
&lt;p&gt;조사 결과, 대다수 많은 실제 서비스에서 해당 설정값은 대체적으로 너무 적어 값을 늘려서 사용한다고 한다. 정확한 값을 찾기 위해서는 여러번의 테스트가 필요하며, 점진적으로 늘려가면서 적당한 값을 찾아야 한다고 한다. &lt;/p&gt;
&lt;p&gt;supabase 기반의 postgresql을 사용하고 있는데, 일단 postgresql의 connection 여유는 충분한 상황이었으므로 일단 설정값을 pool size 10, max overflow 20으로 각각 두배로 늘려주었다. &lt;/p&gt;
&lt;p&gt;이벤트나, 푸쉬가 있을 경우 추가적인 모니터링이 필요할 것이다. &lt;/p&gt;
&lt;h2&gt;Sqlalchemy의 QueuePool&lt;/h2&gt;
&lt;p&gt;데이터베이스 Connection은 리소스가 많이 필요하다. QueuePool은 이런 Connection을 효율적으로 관리하여 성능을 향상시키기 위해 만들어졌다. Connection을 빠르게 재사용함으로써, 애플리케이션의 반응 시간을 단축 시키고 부하 상황에서도 안정적으로 동작하도록 한다. &lt;/p&gt;
&lt;p&gt;Quepool은 내부적으로 Connection 객체들을 큐로 관리한다. 동시성을 고려하여 설계되어 여러 스레드 또는 프로세스에서 안전하게 사용될 수 있다. &lt;/p&gt;
&lt;h3&gt;QueuePool의 생명주기&lt;/h3&gt;
&lt;h4&gt;생성&lt;/h4&gt;
&lt;p&gt;QueuePool은 Sqlalchemy 엔진이 생성될 때 함께 생성된다. 이 때 데이터베이스와의 Connection 설정이 정의된다. &lt;/p&gt;
&lt;h4&gt;Connection 관리&lt;/h4&gt;
&lt;p&gt;애플리케이션에서 데이터베이스 Connection이 필요할 때, QueuePool이 Connection을 제공한다. 사용 가능한 Connection이 없으면 새 Connection을 생성하거나 대기열에서 Connection을 기다린다. &lt;/p&gt;
&lt;h4&gt;Connection 반환&lt;/h4&gt;
&lt;p&gt;작업이 완료되면 Connection은 Pool에 반환되어 재사용된다. &lt;/p&gt;
&lt;h4&gt;종료&lt;/h4&gt;
&lt;p&gt;애플리케이션 종료와 함께 Pool에 있는 모든 Connection이 안전하게 종료된다. &lt;/p&gt;
&lt;h3&gt;작동&lt;/h3&gt;
&lt;p&gt;QueuePool은 기본적으로 미리 설정된 &lt;code class=&quot;language-text&quot;&gt;pool_size&lt;/code&gt; 내에서 Connection을 관리한다. 사용 가능한 Connection이 있다면 그 연결을 제공하고, 없으면 새로은 Connection을 생성한다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pool_size&lt;/code&gt;는 동시에 활성화 할 수 있는 최대 연결수이다. 만약 이 한계를 초과한다면, &lt;code class=&quot;language-text&quot;&gt;max_overflow&lt;/code&gt; 에 설정된 값에 따라 추가 Connection을 생성한다. &lt;code class=&quot;language-text&quot;&gt;max_overflow&lt;/code&gt; 는 &lt;code class=&quot;language-text&quot;&gt;pool_size&lt;/code&gt; 를 초과하여 생성할 수 있는 추가 연결의 최대 수이다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;max_overflow&lt;/code&gt; 까지 초과한다면 추가 Connection 연결 요청은 대기열에 들어가며 사용 가능한 Connection 이 생길때까지 대기한다. 이 때, 연결 대기 시간이 &lt;code class=&quot;language-text&quot;&gt;timeout&lt;/code&gt; 설정을 초과하면 연결 요청은 실패한다. &lt;/p&gt;
&lt;h4&gt;pool_size&lt;/h4&gt;
&lt;p&gt;이 설정은 가능한 최대 연결의 최대 수를 정의 하는 것이므로, 5로 설정했다고 해서 실제 연결이 5개가 유지되는 것은 아니다. 사용되지 않는 Connection은 pool에 반환되며, 유휴 상태로 남아있다가 &lt;code class=&quot;language-text&quot;&gt;recycle&lt;/code&gt; 설정 시간을 넘어서면 끊어진다. &lt;/p&gt;
&lt;h4&gt;max_overflow&lt;/h4&gt;
&lt;p&gt;pool&lt;em&gt;size를 초과하는 최대 개수를 정의한다. pool&lt;/em&gt;size 가 5이고, max&lt;em&gt;overflowrk 10이라면 동시에 최대 5+10 = 15개의 연결을 허용하는 것이다. max&lt;/em&gt;overflow에 해당되어 생성된 Connection이라 할지라도 사용 후에 풀에 반환된다(바로 끊어지는 것이 아니다). 다만, 해당 Connection은 pool_size의 기본 한계를 넘어선 것이므로 풀에서 더 높은 우선 순위로 종료될 수 있다. &lt;/p&gt;
&lt;h3&gt;Sqlalchemy의 풀링 전략&lt;/h3&gt;
&lt;p&gt;Sqlalchemy의 기본 풀링 전략은 Queuepool이지만, 이외에도 다른 전략들이 있다. &lt;/p&gt;
&lt;h3&gt;StaticPool&lt;/h3&gt;
&lt;p&gt;연결의 고정된 집합을 유지한다. 모든 Connection 요청은 이 고정된 집합에서 제공된다. 단일 사용자 또는 단일 프로세스 어플리케이션에 적합하다. &lt;/p&gt;
&lt;h3&gt;NullPool&lt;/h3&gt;
&lt;p&gt;Connection Pooling을 사용하지 않는다. 매 요청마다 새로운 DB Connection이 열리고 작업 종료 후 Connection이 닫힌다. &lt;/p&gt;
&lt;p&gt;매우 드문 요청이 있는 어플리케이션에 적합하다. &lt;/p&gt;
&lt;h3&gt;Singleton ThreadPool&lt;/h3&gt;
&lt;p&gt;각 스레드에 대해 하나의 Connection을 유지한다. 스레드마다 고유한 Connection을 사용한다. &lt;/p&gt;
&lt;p&gt;멀티 스레드 환경에서 각 스레드가 자체 Connection을 가질 필요가 있을 때 유용하다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI의 Pagenation]]></title><description><![CDATA[서론 FatAPI에는 페이징을 위한 공식 라이브러리가 존재한다. 하지만 예제대로 진행해도 코드는 오류를 내뿜었다. 왜냐하면, FastAPI의 페이지네이션 라이브러리는 SqlAlchemy 2.…]]></description><link>https://sharknia.github.io/FastAPI의-Pagenation/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI의-Pagenation/</guid><pubDate>Wed, 17 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서론&lt;/h2&gt;
&lt;p&gt;FatAPI에는 페이징을 위한 &lt;a href=&quot;https://uriyyo-fastapi-pagination.netlify.app/&quot;&gt;공식 라이브러리&lt;/a&gt;가 존재한다. 하지만 예제대로 진행해도 코드는 오류를 내뿜었다. 왜냐하면, FastAPI의 페이지네이션 라이브러리는 SqlAlchemy 2.0의 비동기 엔진을 지원하지 않기 때문이다. &lt;/p&gt;
&lt;p&gt;그래서 직접 구현했다. &lt;/p&gt;
&lt;p&gt;&lt;del&gt;(이&lt;/del&gt; &lt;a href=&quot;https://pypi.org/project/fastapi-sqla/&quot;&gt;&lt;del&gt;라이브러리&lt;/del&gt;&lt;/a&gt;&lt;del&gt;를 쓰면 Async pagination 지원합니다. 여러분은 이거 쓰세요.)&lt;/del&gt;&lt;/p&gt;
&lt;h2&gt;목적&lt;/h2&gt;
&lt;h3&gt;응답값 고정&lt;/h3&gt;
&lt;p&gt;모든 페이징 쿼리에 대해 동일한 응답값을 제공하기 위해 Response에 사용할 Pydantic Model도 함께 정의한다. &lt;/p&gt;
&lt;h3&gt;가능한 한 간단한 사용 방법&lt;/h3&gt;
&lt;p&gt;Sqlalchemy의 Select 객체를 받아 바로 처리할 수 있도록 한다. 즉, 개발자는 쿼리문만 생성하고 사이즈/페이지만 정해주면 바로 고정된 응답값을 받을 수 있다. &lt;/p&gt;
&lt;h3&gt;현재 서버에 필요한 사양에 맞춘 기능&lt;/h3&gt;
&lt;p&gt;복잡한 쿼리나 여러 층의 정렬을 현재는 필요로 하지 않는다. 이에 발맞춰 기본적인 relationship을 활용한 조인, 단일 컬럼 sort만 지원하여 사용법을 간략화 한다. &lt;/p&gt;
&lt;h2&gt;구현&lt;/h2&gt;
&lt;h3&gt;PaginationReturn Class 구현&lt;/h3&gt;
&lt;p&gt;페이지네이션의 결과의 데이터 모델을 미리 정의해 둔 클래스이다. &lt;/p&gt;
&lt;p&gt;응답값은 다음의 내용들로 고정된다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;itemList : 페이지에 포함된 Row의 리스트&lt;/li&gt;
&lt;li&gt;totalCount : 전체 항목의 개수&lt;/li&gt;
&lt;li&gt;totalPage : 전체 페이지의 개수 &lt;/li&gt;
&lt;li&gt;nowPage : 현재 페이지 번호&lt;/li&gt;
&lt;li&gt;nowSize : 현재 설정한 사이즈 &lt;/li&gt;
&lt;li&gt;prevPage : 이전 페이지 번호&lt;/li&gt;
&lt;li&gt;nextPage : 다음 페이지 번호&lt;/li&gt;
&lt;/ul&gt;
&lt;details&gt;
&lt;summary&gt;전체 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;class PaginationReturn(BaseModel&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Generic&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;)&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &quot;&quot;&quot;
    PaginationReturn 클래스는 페이지네이션 결과를 나타내는 모델입니다.

    &lt;span class=&quot;token key atrule&quot;&gt;Attributes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        itemList (List&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;)&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 페이지에 포함된 항목의 리스트입니다.
        &lt;span class=&quot;token key atrule&quot;&gt;totalCount (int)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 전체 항목의 개수입니다.
        &lt;span class=&quot;token key atrule&quot;&gt;totalPages (int)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 전체 페이지의 개수입니다.
        &lt;span class=&quot;token key atrule&quot;&gt;nowPage (int)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 현재 페이지 번호입니다.
        &lt;span class=&quot;token key atrule&quot;&gt;nowSize (int)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 현재 페이지에 포함된 항목의 개수입니다.
        prevPage (Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;int&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;optional)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 이전 페이지 번호입니다. 기본값은 None입니다.
        nextPage (Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;int&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;optional)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 다음 페이지 번호입니다. 기본값은 None입니다.
    &quot;&quot;&quot;
    &lt;span class=&quot;token key atrule&quot;&gt;itemList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;totalCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; int
    &lt;span class=&quot;token key atrule&quot;&gt;totalPages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; int
    &lt;span class=&quot;token key atrule&quot;&gt;nowPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; int
    &lt;span class=&quot;token key atrule&quot;&gt;nowSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; int
    &lt;span class=&quot;token key atrule&quot;&gt;prevPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;int&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; = None
    &lt;span class=&quot;token key atrule&quot;&gt;nextPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;int&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; = None&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h3&gt;Pagination Class 구현&lt;/h3&gt;
&lt;p&gt;pagination은 static 메소드로 만들어서 필요한 값을 넣으면 바로 PaginationReturn을 받을 수 있게 만들었다. static method로 만든것은 FastAPI의 Pagination 라이브러리를 본딴것이다. 이 방법이 가장 사용하기 편해보이기도 했다. &lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;get_paginated_list&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;처음 구현한 메소드이다. 모델을 파라미터로 받아 페이징을 한다. 따로 select문을 만들 필요 없이 모델과 where절만 만들어서 넣어줘도 정의된 응답값 데이터 모델에 리스트를 담아 반환해준다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;전체 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@classmethod&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_paginated_list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        cls&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        model&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        filters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;BinaryExpression&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        order_column&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        order_direction&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;desc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        page&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; PaginationReturn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# page 와 size 기본 유효성 검증&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; page &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; size &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Page and size parameters must be greater than 0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 기본 쿼리 생성&lt;/span&gt;
        query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# fileter 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filters &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 정렬 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; order_direction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lower&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;asc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;asc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# 페이징&lt;/span&gt;
            offset_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; size
            query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offset&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;offset_value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalars&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;info&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[Pagination Query] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# total_count 계산&lt;/span&gt;
            total_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;select_from&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                total_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; total_query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; total_result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalar_one&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; SQLAlchemyError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An error occurred while fetching data from the database : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An unexpected error occurred : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next_page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calculate_pagination&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 응답값 생성&lt;/span&gt;
        items_dict &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;serialize_sqlalchemy_obj&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

        res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PaginationReturn&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            itemList&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;items_dict&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalCount&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalPages&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowSize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            prevPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nextPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;next_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;p&gt;BaseModel 객체는 직렬화 기능이 없으므로, Response로 응답을 내려보낼때에 귀찮아지는 문제가 있다. 모델의 키값과 밸류를 사용해 dictionary로 바꾸면 해당 문제를 해결할 수 있는데, 만약 리스트에 들어있는 값들에 대해 커스텀이 필요하다면 dictionary를 그대로 다루는 것은 아무래도 모델을 커스텀 하는 것보다 불편한 문제가 발생한다. &lt;/p&gt;
&lt;p&gt;이 문제를 해결하기 위해 모델 객체를 기반으로 Pydantic Model 객체를 동적으로 생성하여 Pydantic model의 리스트를 결과값에 담아 리턴하기로 했다. 이렇게 하면 응답값을 바로 Response로 내려보내도 직렬화가 가능해 문제가 발생하지 않으며, 혹시 아이템 내용을 커스텀 해야 할 때에도 모델을 다룰 때와 같은 방법으로 사용할 수 있으므로 훨씬 간편하다. 개선된 코드는 아래와 같다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;개선된 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@classmethod&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_paginated_list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        cls&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        model&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        filters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;BinaryExpression&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        order_column&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        order_direction&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;desc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        page&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; PaginationReturn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        페이징을 해서 아이템을 뽑아내서 결과를 반환한다.
        Args:
            db: AsyncSession
            model: 데이터를 가져올 모델
            filters: [InitQuizList.is_deleted == False, InitQuizList.is_active == True] 의 꼴 where절
            order_column: 정렬할 컬럼
            order_direction: &apos;asc&apos; or &apos;desc&apos;
            size: 페이지에 나타낼 아이템의 개수 (기본값 10)
            page: page 번호 (기본값 1)
        Returns:
            PaginationReturn
        &quot;&quot;&quot;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# page 와 size 기본 유효성 검증&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; page &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; size &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Page and size parameters must be greater than 0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 기본 쿼리 생성&lt;/span&gt;
        query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# fileter 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filters &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 정렬 처리&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; order_direction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lower&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;asc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;asc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order_by&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; order_column&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# 페이징&lt;/span&gt;
            offset_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; size
            query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offset&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;offset_value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalars&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;info&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[Pagination Query] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# total_count 계산&lt;/span&gt;
            total_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;select_from&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                total_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; total_query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;filters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; total_result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalar_one&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; SQLAlchemyError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An error occurred while fetching data from the database : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An unexpected error occurred : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next_page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calculate_pagination&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 응답값 생성&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 동적 Pydantic 모델 생성&lt;/span&gt;
        PydanticModel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sqlalchemy_to_pydantic&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 페이징 처리된 쿼리 결과를 Pydantic 모델 리스트로 변환&lt;/span&gt;
        pydantic_items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;PydanticModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;model_validate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__dict__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

        res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PaginationReturn&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            itemList&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;pydantic_items&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalCount&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalPages&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowSize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            prevPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nextPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;next_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sqlalchemy_to_pydantic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_model&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Type&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DeclarativeMeta&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Type&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;BaseModel&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
    SQLAlchemy 모델을 동적으로 생성된 동일한 스키마의 Pydantic 모델로 변환합니다.
    :param db_model: SQLAlchemy 모델 클래스
    :return: 생성된 Pydantic 모델 클래스
    &quot;&quot;&quot;&lt;/span&gt;
    fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; column &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; inspect&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        python_type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; column&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;python_type
        default &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; column&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;default &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; column&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;default&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;arg
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; column&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nullable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            python_type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;python_type&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        fields&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;column&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;python_type&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; default&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    pydantic_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__name__ &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Pydantic&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; pydantic_model&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;모델의 컬럼값으로 동적으로 pydantic model을 생성하는 sqlalchemy&lt;em&gt;to&lt;/em&gt;pydantic 메소드를 생성하고 해당 메소드를 활용해 응답값에 담도록 해주었다. &lt;/p&gt;
&lt;/details&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;get_paginated_list_by_query&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;처음에 신나서 만들었는데, 기존  &lt;code class=&quot;language-text&quot;&gt;get_paginated_list&lt;/code&gt; 메소드는 치명적인 문제가 있다. 쿼리가 복잡한 경우를 전혀 생각하지 않았다. 말 그대로 단일 테이블에서만 값을 가져올 수 있는 것이다. 그래서 이 점을 개선해야했다. 그래서 개발자가 조금 더 귀찮아지지만 쿼리문은 이 메소드를 이용할 작업자가 직접 구현을 하고, 그 쿼리문을 넣으면 리스트를 담아서 돌려주는 형식으로 다시 만들기로 했다. &lt;/p&gt;
&lt;p&gt;기존 메소드에서는 모델만을 조회하는 것이므로 모델을 기반으로 Pydantic model을 생성하면 문제가 없었는데, 이번에는 모델에서 컬럼값을 추출해서 사용할 수 없으므로 키 값을 동적으로 정의하는 코드를 따로 작성해주었다. &lt;/p&gt;
&lt;p&gt;쿼리된 내용에서 컬럼값을 조회해서 사용하였으며, 쿼리된 내용에는 시스템에서 사용하는 속성값도 존재하는데 해당 속성값들은 &lt;code class=&quot;language-text&quot;&gt;_&lt;/code&gt;로 시작하므로 해당 내용은 제거하고 동적으로 Pydantic model에 추가해주었다. relationship도 대응할 수 있게 별도의 예외처리를 추가해주었다. relationship 속성은 Select 객체의 컬럼에는 포함이 되지 않는데 조회된 결과물의 속성에는 들어있으므로 해당 값이 relationship 속성이라고 가정하고 따로 예외처리를 해주었다. &lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;전체 코드&lt;/summary&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@classmethod&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_paginated_list_by_query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        cls&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        query&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Select&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Any&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        page&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        Query에 대한 paging 생성
        Args:
            db: AsyncSession
            query: sqlalchemy의 Select의 리턴값
            size: 한 번에 보여줄 아이템의 개수(기본값 10)
            page: 페이지(기본값 1)
        Returns:
            PaginationReturn
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 매개변수 검증&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; page &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; size &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Page and size parameters must be greater than 0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 페이징 적용&lt;/span&gt;
        offset_value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; size
        paginated_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offset&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;offset_value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 쿼리 실행&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paginated_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; SQLAlchemyError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An error occurred while fetching data from the database : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; PagingException&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;An unexpected error occurred : &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalars&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        pydantic_items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# 컬럼과 데이터 타입 파악&lt;/span&gt;
            columns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;columns
            fields &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;python_type&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; col &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; columns&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;# relationship 처리&lt;/span&gt;
            relationship_keys &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            sample_item &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            item_dict &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sample_item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__dict__
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; item_dict&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;keys&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; key &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; fields &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;token comment&quot;&gt;# 관계형 속성의 키를 저장&lt;/span&gt;
                    relationship_keys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;# 관계형 속성에 대한 필드 정의 추가&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; relationship_keys&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                fields&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Any&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# 관계형 속성을 포함한 동적 Pydantic 모델 생성&lt;/span&gt;
            DynamicPydanticModel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DynamicPydanticModel&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                item_dict &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;k&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; k&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__dict__&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; k&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;# 관계형 속성을 딕셔너리로 변환&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; key &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; relationship_keys&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    relation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; relation&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;token comment&quot;&gt;# SQLAlchemy 내부 상태 정보를 제외하고 변환&lt;/span&gt;
                        item_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            k&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; k&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; relation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__dict__&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; k&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                        item_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

                pydantic_items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DynamicPydanticModel&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;model_validate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item_dict&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;# 총 개수 계산&lt;/span&gt;
            total_count_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; select&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;func&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;select_from&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subquery&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_count_result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_count_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            total_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; total_count_result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scalar_one&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# 결과 반환&lt;/span&gt;
        total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next_page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; calculate_pagination&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; PaginationReturn&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            itemList&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;pydantic_items&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalCount&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            totalPages&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;total_pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nowSize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            prevPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prev_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            nextPage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;next_page&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;아직 기능이 많이 부족하지만, 현재 회사에서 사용을 하면서 필요한 기능은 대부분 구현을 했다고 생각이 든다. 그래서 일단 개발은 여기서 멈추었다. &lt;/p&gt;
&lt;p&gt;개발에 아주 오랜 시간이 걸리지는 않았다. 집중도와 실제 사용 시간을 따지면 이틀 좀 안되게 썼다고 생각이 든다. &lt;/p&gt;
&lt;p&gt;만드는것은 재미있는 과정이었고, 필요한 것이 잘 만들어져 뿌듯함도 있었지만 역시 있는 라이브러리를 쓰는게 시간 최적화에서는 더 좋았던 것 같다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Sqlalchemy 비동기 엔진에서의 Postgresql Pooler]]></title><description><![CDATA[결론 supabase 기준, Sqlalchemy의 비동기 엔진에서 Postgresql pooler (supavisor)에 오류 없이 연결하기 위해서는  을 다음과 같이 구성해주면 된다.  statementcachesize…]]></description><link>https://sharknia.github.io/Sqlalchemy-비동기-엔진에서의-Postgresql-Pooler/</link><guid isPermaLink="false">https://sharknia.github.io/Sqlalchemy-비동기-엔진에서의-Postgresql-Pooler/</guid><pubDate>Tue, 09 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;supabase 기준, Sqlalchemy의 비동기 엔진에서 Postgresql pooler (supavisor)에 오류 없이 연결하기 위해서는 &lt;code class=&quot;language-text&quot;&gt;create_async_engine&lt;/code&gt; 을 다음과 같이 구성해주면 된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; uuid &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; uuid4
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; asyncpg &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Connection

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;생략&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_get_unique_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        캐싱을 만들 시에 캐싱 아이디가 중복으로 생성되어서 오류가 발생하는 경우가 있다.
        statement_cache_size를 0으로 해도 일단 캐싱을 만들고 오류를 낸다.
        따라서 캐싱을 사용하지 않을 것이므로, 아예 중복되지 않게 UUID로 생성해버린다.
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&apos;__asyncpg_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;prefix&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;uuid4&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;__&apos;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;생략&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

DATABASE_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;postgresql+asyncpg://postgres.[Project ID]:[Password]@aws-0-[Region].pooler.supabase.com:6543/postgres?prepared_statement_cache_size=0&quot;&lt;/span&gt;&lt;/span&gt;
    _db_connection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_async_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        connect_args&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;statement_cache_size&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;connection_class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CConnection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;statement&lt;em&gt;cache&lt;/em&gt;size, prepared&lt;em&gt;statement&lt;/em&gt;cache_size를 둘 다 모두 0으로 줘야 한다.&lt;/p&gt;
&lt;p&gt;그리고 왜 발생하는지 모르겠는 간헐적인 오류(캐싱 ID를 중복되게 생성하려고 시도함)를 해결하기 위해 Connection 클래스를 상속받아 &lt;em&gt;get&lt;/em&gt;unique&lt;em&gt;id 메소드를 오버라이딩 해주고, 해당 클래스를 connection&lt;/em&gt;class로 사용하도록 했다. 이렇게 하면 id 중복 생성 오류를 방지할 수 있다. &lt;/p&gt;
&lt;p&gt;일반적인 글이라면 결론이 서두에 나온다면 너무나 시시하겠지만 기술 블로그이니 괜찮다. &lt;/p&gt;
&lt;h2&gt;문제 해결에 관한 글&lt;/h2&gt;
&lt;h3&gt;발단&lt;/h3&gt;
&lt;p&gt;supabase에서 메일이 왔다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/754811dd5daabc41fab8df2eb32a001e/af70e/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 128.82352941176472%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAADAElEQVR42p1V23LiMAzN/38SD52h0z7yAJT7fdMkTkLuIeGu1ZETCrPp7lJmNJZtRT46OjaGaZo0mUxos9mITadTGo/HZFkWrddr6vV6sg9/sVjQfD6X+WAwoOFwKN9cr1eqfwYCWq0Wvb29UbvdppeXF7HX11d6f3+nTqcjhyBuNpsRACBZt9uVcblcPia0bVsQfXx8UL/fp9FoRKvVSoKBbr/f0zM/418BOP3evlu7Jcx3Ozqfz38ENQX/F8Lj6SQJYSf2Yfdrl8uFmmJOlX+/jtGI44Qs26FtEFIYxRSEIfsBRbyOeZKmpFyPIvaxFoSRxEZxTP42oJDncZKwH1KW5WTsioI/jOhwODTy1+Q3c12VjC4CBVAhMU6Jk1TQYD1JM0qSVHyNJhVE2MeY8j5QH49HnRBl2UpJWa7n02q9oS7LZzqb05DlNGAZTViHn5Yt+5ajyGQfNGFu89zzt+KDRyNlRFjAaUColMtBjnyQ8BpORhXn80XKRpO0Xb/mPNZKMfI8Jz/YCsllWRI4LTkB5IRESAh+i6KU8SBzPoT9stzLGpDdZONwuYPhmO+kKd1zXFcQO1yKw2iV61elOTIX4xibR9AAHxwWDASHGyAZnAChBHIiJFCeTlQnUZ4njchy3TSMaZbJiEZiD6ily1hESXXJxb6UklFSwWvYw7wu7bvrKCVDDigR5YpQIy1cXa4n5YjxGtDXlMCwjzgP3beVFra+KepWHoLQYfgYkcR2wJtHm18mmZ+W3pPkntCFOTQKCgwgQkJwVAcLEuU9CDvNtLjBFcRc8we5gZJbl8vqpoAjbCAIfsIfHCr1P/Xa4GPcFm2aL/j6wgfCJ64lKAFv/lYbZONXj4iLi8GjJAQiBKBUvDQwXDtoc7Fc0XDE/y/8qjc9EE3dNqCdLNvdShVeUq03UAG+4IucIB/2cT3xnDWWDA7vSU6q16QWsKyzHOTAfCeHoNs+l/mj/5Snm4ImQHufliOI7l+SR6PK/v5/w10upFtoiu5oyHyVP0b4G9LzywBICL9oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/754811dd5daabc41fab8df2eb32a001e/ca1dc/image1.png&apos; srcset=&apos;/static/754811dd5daabc41fab8df2eb32a001e/e7570/image1.png 170w,
/static/754811dd5daabc41fab8df2eb32a001e/f46e7/image1.png 340w,
/static/754811dd5daabc41fab8df2eb32a001e/ca1dc/image1.png 680w,
/static/754811dd5daabc41fab8df2eb32a001e/02d09/image1.png 1020w,
/static/754811dd5daabc41fab8df2eb32a001e/af70e/image1.png 1184w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
여태 본 기억이 없었는데, Final reminder라도 되어있는걸 보니 이미 여러번 고지했던 모양이다. &lt;/p&gt;
&lt;p&gt;읽어보니 Pgbouncer 지원이 종료된다는 내용이다. 지원이 종료되는건 알고 있었는데, 아예 Connection string을 죽여버리는 모양이다. 잔인하다는 생각이 들었지만 어차피 우리는 Pooler는 진작에 포기했으므로 상관이 없었다. &lt;/p&gt;
&lt;p&gt;문제는 다음이었는데, DB Direct access에 대한 IPv4 주소 지원도 끝난다니 이건 좀 문제의 소지가 있었다. &lt;/p&gt;
&lt;p&gt;마침 어제 지난번 DB 세팅에 대한 회고를 끝내서 다행이었다. &lt;/p&gt;
&lt;h3&gt;전개&lt;/h3&gt;
&lt;p&gt;선택지는 두가지이다. Supavisor 도입, 네트워크가 IPv6를 지원하도록 설정하고 Direct 연결 방법을 계속해서 사용. &lt;/p&gt;
&lt;p&gt;개인적으로 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;네트워크 설정에 상대적으로 약함&lt;/li&gt;
&lt;li&gt;WebRTC를 하던 때의 기억 때문에 IPv6에 안좋은 감정이 있음 &lt;/li&gt;
&lt;li&gt;현재 백엔드의 네트워크 설정을 직접 진행하지 않았었음 &lt;/li&gt;
&lt;li&gt;혼자 출근한 백엔드는 나 혼자임&lt;/li&gt;
&lt;li&gt;Pooler와 씨름을 한 기억이 최근이고, 회고는 더더욱 최근임&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;의 이유로 Supavisor 도입에 대해 다른 백엔드가 출근하기 전 잠깐 살펴보기로 했다.&lt;/p&gt;
&lt;p&gt;그런데 왠걸? 직접 설치부터 해야 하나라고 막연히 생각을 했었는데(supabase의 공식 문서에는 아직 supavisor에 대한 내용이 적어도 찾기 쉬운 곳에 있지는 않다. ) 그렇지 않았다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/orgs/supabase/discussions/17817&quot;&gt;https://github.com/orgs/supabase/discussions/17817&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;해당 링크를 보아하니 이미 꽤 지원이 진행된 상태였는지, connection string만 바꾸면 간단하게 Pgbouncer가 아니라 Supavisor를 사용하여 연결할 수 있다고 적혀 있었다. &lt;/p&gt;
&lt;p&gt;그래서 해당 링크를 참조해 Connection string은 약간 수정을 해야 했지만, 어쨌든 Supavisor 연결에 간단하게 성공해버렸다. &lt;/p&gt;
&lt;h3&gt;위기&lt;/h3&gt;
&lt;p&gt;곧장 과거 겪었던 것과 같은 문제가 발생했다. Sqlalchemy 입장에서는 Pgbouncer와 Supavisor를 따로 구분하지 못하는지 Transaction 또는 Session 풀 모드에서는 캐싱이 지원되지 않는다는 에러 문구가 발생했다. &lt;/p&gt;
&lt;p&gt;여기서 잠깐, 포기하고 얌전히 IPv6 설정을 보러 갈까 했는데, 아직 다른 백엔드가 아무도 출근하지 않았다. &lt;/p&gt;
&lt;p&gt;일단 Pool mode를 바꿔야 다음 단계의 설정을 진행할 수 있었는데, Pgbouncer의 Pool mode는 supabase 콘솔에서 세팅을 지원하지만 supavisor는 어떻게 바꿔야 할지 의문이었다. &lt;/p&gt;
&lt;p&gt;해당 의문은 말도 못하게 간단하게 풀렸다. 콘솔에 들어가보니 어느새 쥐도 새도 모르게 Pgbouncer 관련 섹션이 supavisor 관련 섹션으로 바뀌어있었다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7c5279045f32fb30cbeb9d1c39351ce2/98f2e/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoUlEQVR42pWQbQ6EIAxEuQogn6Lc/3Q1rwmGqOvu/ngBtDOd1vTeZd93iTGKc06898p8/xU0Jucsy7LcftAghCDWWn1/4zRE+NRp2zYhfa1VKaXcWNdV4U4NWkMKuJqmlIT0Q3ydAviGlhM0IcVPKTGbk42kJGqtnclGUzxYj/m0fAoRzUacmLGO0WwkRKOGT+PCXPjGGJsmusO3wn9gIgwPE/TlErXrnBgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/7c5279045f32fb30cbeb9d1c39351ce2/ca1dc/image2.png&apos; srcset=&apos;/static/7c5279045f32fb30cbeb9d1c39351ce2/e7570/image2.png 170w,
/static/7c5279045f32fb30cbeb9d1c39351ce2/f46e7/image2.png 340w,
/static/7c5279045f32fb30cbeb9d1c39351ce2/ca1dc/image2.png 680w,
/static/7c5279045f32fb30cbeb9d1c39351ce2/02d09/image2.png 1020w,
/static/7c5279045f32fb30cbeb9d1c39351ce2/9d567/image2.png 1360w,
/static/7c5279045f32fb30cbeb9d1c39351ce2/98f2e/image2.png 2012w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
위 이슈에서 설명된 supavisor 관련 connection string은 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 로 시작하는 부분이 옳지 않아서 수정이 필요했는데, 콘솔의 pgbouncer 관련 연결 connection string 에는 제대로 적혀있었다. 아무래도 메일에 적어보낸 이슈이지만 따로 수정을 하지는 않은 모양이다.. &lt;/p&gt;
&lt;p&gt;아무튼간 pool mode를 변경 후 테스트를 할 수 있었다. &lt;/p&gt;
&lt;h3&gt;절정1&lt;/h3&gt;
&lt;p&gt;Pool mode를 바꿨다고 해서 바로 연결이 가능하지는 않다. 서버 인스턴스를 실행하면 짜잔! 성공적인 DB 연결 대신 다음과 같은 문구를 볼 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) &amp;lt;class &apos;asyncpg.exceptions.InvalidSQLStatementNameError&apos;&gt;: prepared statement &quot;__asyncpg_stmt_b__&quot; does not exist
HINT:  
NOTE: pgbouncer with pool_mode set to &quot;transaction&quot; or
&quot;statement&quot; does not support prepared statements properly.
You have two options:
* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;
* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sqlalchemy를 사용중이기 때문에 첫번째 방법은 자연스럽게 더 고려할것도 없이 기각이며, statement&lt;em&gt;cache&lt;/em&gt;size를 0으로 수정하는 것이 현재 내 인프라에서 선택할 수 있는 방법이었다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.sqlalchemy.org/en/20/dialects/postgresql.html&quot;&gt;https://docs.sqlalchemy.org/en/20/dialects/postgresql.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;지난번 기나긴 고생 이후 공식 문서를 항상 참조하는 습관을 들이게 됐다. 아주 긍정적인 방향이라고 생각한다. &lt;/p&gt;
&lt;p&gt;공식 문서를 참조하면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;engine = create_async_engine(&quot;postgresql+asyncpg://user:pass@hostname/dbname?prepared_statement_cache_size=0&quot;)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;의 방식으로 statement&lt;em&gt;cache&lt;/em&gt;size를 0으로 설정할 수 있는 것을 알 수 있다. &lt;/p&gt;
&lt;p&gt;이 설정을 해준 후, 다시 서버 인스턴스를 실행하면 짜잔! DB 연결이 아주 잘 된다. 쿼리도 잘 날리고, 결과도 잘 받아온다.&lt;/p&gt;
&lt;p&gt;이 와중에 Cache 생성 시에 같은 인덱스로 중복 생성되어서 오류가 발생하기도 했다. 그래서 SqlAlchemy의 Connection 클래스를 상속받아 캐시의 아이디를 생성하는 메소드를 수정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; asyncpg &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Connection
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; uuid &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; uuid4

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_get_unique_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        캐싱을 만들 시에 캐싱 아이디가 중복으로 생성되어서 오류가 발생하는 경우가 있다.
        statement_cache_size를 0으로 해도 일단 캐싱을 만들고 오류를 낸다.
        따라서 캐싱을 사용하지 않을 것이므로, 아예 중복되지 않게 UUID로 생성해버린다.
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&apos;__asyncpg_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;prefix&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;uuid4&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;__&apos;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 DB 커넥션을 만들 때에 해당 클래스를 기본 Connection 클래스 대신 사용하도록 설정해주면 된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;DATABASE_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;postgresql+asyncpg://postgres.[Project ID]:[Password]@aws-0-[Region].pooler.supabase.com:6543/postgres?prepared_statement_cache_size=0&quot;&lt;/span&gt;&lt;/span&gt;
    _db_connection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_async_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        connect_args&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;connection_class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CConnection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지 작업을 해줘서 오류를 해결하고 같은 쿼리를 연속으로 날리면? &lt;/p&gt;
&lt;p&gt;짜잔! 다음과 같은 오류를 볼 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) &amp;lt;class &apos;asyncpg.exceptions.InvalidSQLStatementNameError&apos;&gt;: prepared statement &quot;__asyncpg_stmt_9462b5fe-88dc-46f5-98fb-57981ea56de0__&quot; does not exist
HINT:  
NOTE: pgbouncer with pool_mode set to &quot;transaction&quot; or
&quot;statement&quot; does not support prepared statements properly.
You have two options:
* if you are using pgbouncer for connection pooling to a
  single server, switch to the connection pool functionality
  provided by asyncpg, it is a much better option for this
  purpose;
* if you have no option of avoiding the use of pgbouncer,
  then you can set statement_cache_size to 0 when creating
  the asyncpg connection object.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그렇다, 오류는 반복된다. &lt;/p&gt;
&lt;h3&gt;절정2&lt;/h3&gt;
&lt;p&gt;이미 여기까지 시간을 꽤 쓴 상태였기 때문에 조금만 더 무언가를 해보기로 했다. &lt;/p&gt;
&lt;p&gt;캐시 사용을 아무리 꺼도, 도대체가 캐시를 계속 만들고 거기서 오류를 내는 이 상황. &lt;/p&gt;
&lt;p&gt;다행히 비슷한 오류를 겪는 사람들을 깃허브 이슈에서 찾을 수 있었다. &lt;/p&gt;
&lt;p&gt;이미 나의 신뢰를 많이 잃어버린 챗지피티에게 이 문제를 상담하면 &lt;code class=&quot;language-text&quot;&gt;statement_cache_size&lt;/code&gt; 옵션을 0으로 설정해서 connect_args에 넣으라고 한다. PgBouncer로 붙이려고 애써봤었을 때에 해당 옵션을 넣어도 아무런 변화가 없이 그대로 오류가 발생했었고, 공식문서에는 존재하지 않는 옵션이어서 이번에는 무시하고 넘어갔었다. &lt;/p&gt;
&lt;p&gt;근데 충격적이게도 한가지 옵션을 썼을 땐 되지 않고 두 옵션을 동시에 사용하면 된다고 한다.. 이게 무슨 일일까? 나는 왜 두 옵션을 동시에 쓸 생각을 못했을까?(이 생각을 어떻게 하나요?)&lt;/p&gt;
&lt;p&gt;최종적으로 DB Connection String을 다음과 같이 설정해주었다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; uuid &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; uuid4
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; asyncpg &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Connection

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;생략&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_get_unique_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        캐싱을 만들 시에 캐싱 아이디가 중복으로 생성되어서 오류가 발생하는 경우가 있다.
        statement_cache_size를 0으로 해도 일단 캐싱을 만들고 오류를 낸다.
        따라서 캐싱을 사용하지 않을 것이므로, 아예 중복되지 않게 UUID로 생성해버린다.
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&apos;__asyncpg_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;prefix&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;uuid4&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;__&apos;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;생략&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

DATABASE_URL &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;postgresql+asyncpg://postgres.[Project ID]:[Password]@aws-0-[Region].pooler.supabase.com:6543/postgres?prepared_statement_cache_size=0&quot;&lt;/span&gt;&lt;/span&gt;
    _db_connection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; create_async_engine&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        DATABASE_URL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        connect_args&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&quot;statement_cache_size&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;connection_class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CConnection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;결말 &amp;#x26; 에필로그&lt;/h3&gt;
&lt;p&gt;지난번 기나긴 고생과 삽질을 통해서 챗지피티에 대한 신뢰를 덜고 공식문서를 신뢰해야 한다는 사실을 깨달았다. &lt;/p&gt;
&lt;p&gt;그리고 이번 짧은(반나절 정도) 삽질을 통해서 공식문서도 100% 정답은 아니라는 사실을 깨달았다. (나는 무엇을 믿어야 할까?)&lt;/p&gt;
&lt;p&gt;생각해보면, Database url 에다가 옵션을 넣는다고 해서 내부적으로 뭔가 변경되는 것일리가 없다. 결국 엔진을 만들 때에 옵션값을 넣어줘야 내부적으로 뭔가 알고 다른 작동을 하지 않을까? 이 생각을 막바지에 와서 떠올렸다. &lt;/p&gt;
&lt;p&gt;항상 시야를 넓게 하고, 의심하면서 만들어야 한다는 것을 다시 한 번 깨달았다. 남들이 시키는대로 해서는 되는것이 없는 것이다. &lt;/p&gt;
&lt;p&gt;별개로, 내가 잘못을 한 것인지 뭔지 Sqlalchemy도 FastAPI도 Postgresql도 모두 유명한 것들인데 어째서 이렇게까지 불완전하게 작동하는지 의문이 든다. 역사가 길진 않지만 그래도 수년의 시간은 지난 것들인데, 가장 기본적인 부분이 이렇게 불안정할지는 예상을 못했다. FastAPI의 메모리 누수 문제도 뒤늦게 알게 되었는데, 메모리 누수 문제에 이어서 비동기 엔진에서의 DB Pooler 연결에 이렇게 문제가 있을 줄 알았다면 FastAPI와 SqlAlchemy를 절대 선택하지 않았을 것 같다. &lt;/p&gt;
&lt;p&gt;고찰, 의심, 경험.. 등등이 중요하다고 다시 한 번 느꼈다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI에서 Postgresql의 커넥션 관리]]></title><description><![CDATA[현재 회사의 서비스에서 RDB를 사용하지 않고 NoSQL(DynamoDB)만 사용해서 어플리케이션 서비스를 하고 있었다.  필연적으로 RDB를 도입하게 되었고, supabase를 사용해보고 싶어서 DB…]]></description><link>https://sharknia.github.io/FastAPI에서-Postgresql의-커넥션-관리/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI에서-Postgresql의-커넥션-관리/</guid><pubDate>Fri, 15 Dec 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;현재 회사의 서비스에서 RDB를 사용하지 않고 NoSQL(DynamoDB)만 사용해서 어플리케이션 서비스를 하고 있었다. &lt;/p&gt;
&lt;p&gt;필연적으로 RDB를 도입하게 되었고, supabase를 사용해보고 싶어서 DB는 깊은 고찰 없이 아무도 사용해본 적이 없었던 Postgresql을 고르게 되었다.&lt;/p&gt;
&lt;p&gt;이것이 고생의 시작이었다. &lt;/p&gt;
&lt;p&gt;그 고생을 기록해둔다. &lt;/p&gt;
&lt;h3&gt;1. 커넥션 직접 연결&lt;/h3&gt;
&lt;p&gt;MySQL, Oracle, MsSQL등을 사용해봤지만 Postgresql은 처음이었다. 아무 생각없이 커넥션을 바로 연결했고 곧장 문제가 발생했다. &lt;/p&gt;
&lt;p&gt;supabase에서 사용하는 요금제에서 커넥션을 65개까지 만들 수 있게끔 되어있었는데, 수시로 이 수치를 넘어버렸다. 작업 시작 당시 테스트 서버에서는 인스턴스를 5개를 사용하고 있었고, 기본값으로 인스턴스 하나 당 연결 5개를 사용하고 있었서 단순히 산술적으로는 65개를 넘어서는 안되는데 계속해서 65개를 넘겨서 DB 서버가 지속적으로 죽고 있었다. &lt;/p&gt;
&lt;h3&gt;2. 커넥션 폭증, 첫번째 추측&lt;/h3&gt;
&lt;p&gt;첫번째 추측으로는 세션의 생명주기를 관리하는 코드가 정상적으로 작동하는지 여부를 의심했다. 비동기에서의 세션 관리를 위해 의존성 주입 방식을 통한 세션 관리 방법을 선택하고 있었는데, 해당 코드를 다음과 같이 강화해주었다. &lt;/p&gt;
&lt;h4&gt;수정 전 코드&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_conn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncIterable&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Session&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; sessionmaker&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_conn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; class_&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; expire_on_commit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; session&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;수정 후 코드&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_conn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_connection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; AsyncIterable&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Session&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; sessionmaker&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db_conn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; class_&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;AsyncSession&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; expire_on_commit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; session
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;[get_db_session] &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rollback&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이론적으로는 위 코드만 사용해도 정상적으로 세션의 생명주기가 관리가 되어야 하는데, 해외에도 나와 같은 이슈를 겪는 사람이 있는 것으로 보였다. 아래처럼 수정 후에 눈에 띄게 커넥션 숫자가 줄었지만 여전히 DB 서버는 개복치 그 자체였다. 조금 나아지긴 했지만 숨만 쉬면 죽어나가는 상황이 반복되었고 여전히 실사용이 불가능한 심각한 상태의 환자였다. &lt;/p&gt;
&lt;h3&gt;3. 커넥션 폭증, 두번째 추측&lt;/h3&gt;
&lt;p&gt;두번째 추측으로는 dev는 테스트를 위해서 인스턴스 재생성이 꽤 잦았는데, 이 과정에서 Connection이 계속해서 다시 만들어지면서 연결이 폭증하는 것으로 보였다. &lt;/p&gt;
&lt;p&gt;Postgresql 설정에서 IDLE 상태로 들어간지 오래된 커넥션은 강제로 죽이는 옵션도 찾았는데, supabase에서는 해당 옵션값 설정은 지원하지 않았다. 아무래도 일반적인 대응 방법은 아닌것으로 보였다.
인스턴스가 재생성 될때마다 연결이 안끊긴다면? 애초에 연결을 많이 안만들면 되는게 아닌가? 라는 결론에 다다랐다. 따라서 자연스럽게 Pooler를 사용하기로 했다. Supabase에서도 공식적으로 Pooler를 (당연히) 지원하므로 이는 완벽한 해결책으로 생각됐다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    Pooler란?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;데이터베이스 서버와 클라이언트 애플리케이션 간의 연결을 관리하는 소프트웨어이다. 이는 데이터베이스 서버에 대한 연결 요청을 효율적으로 처리하고 성능을 최적화하는 데 도움을 준다. &lt;/p&gt;
&lt;h4&gt;연결 재사용&lt;/h4&gt;
&lt;p&gt;풀러는 데이터베이스 서버에 대한 연결을 재사용 할 수 있게 함으로써 매번 새로운 연결을 생성하는 오버헤드를 감소시킨다. &lt;/p&gt;
&lt;h4&gt;부하 관리&lt;/h4&gt;
&lt;p&gt;동시에 많은 클라이언트 요청을 처리할 수 있도록 도와주며 데이터베이스 서버에 가해지는 부하를 분산시킨다. &lt;/p&gt;
&lt;h4&gt;성능 최적화&lt;/h4&gt;
&lt;p&gt;연결 설정과 해제에 소요되는 시간을 줄임으로써 전반적인 애플리케이션 성능을 향상시킨다. &lt;/p&gt;
&lt;h4&gt;자원 관리&lt;/h4&gt;
&lt;p&gt;데이터베이스 연결에 사용되는 리소스를 효율적으로 관리한다. &lt;/p&gt;
&lt;h4&gt;스케일링&lt;/h4&gt;
&lt;p&gt;애플리케이션 확장성을 지원하며 사용자 요청 증가 시에도 안정적인 서비스 제공을 돕는다. &lt;/p&gt;
&lt;p&gt;풀러의 사용은 특히 많은 수의 동시 사용자와 트랜잭션이 있는 대규모 시스템에서 매우 중요하다. 데이터베이스에 대한 연결을 효과적으로 관리함으로써 시스템의 안정성, 성능, 그리고 확장성을 향상시킬 수 있다. &lt;/p&gt;
&lt;h3&gt;4. Pooler 도입&lt;/h3&gt;
&lt;p&gt;supabase의 pooler는 PgBouncer를 제공하며, 사용법이 매우 간단했다. 기존에 사용하던 5432번 포트 대신 6543 포트로 바꿔서 연결해주기만 하면 됐다. &lt;/p&gt;
&lt;p&gt;또 다시 곧장 문제가 발생했다. Supabase의 PgBouncer  Poolmode는 기본적으로 Transation 모드였는데, 해당 모드에서는 SqlAlchemy의 비동기 엔진의 캐싱 기능을 지원하지 않았다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    Pgbouncer의 Pool Mode&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Session&lt;/h4&gt;
&lt;p&gt;가장 기본적인 풀링 모드로 클라이언트가 연결을 끊을 때까지 PgBouncer는 해당 클라이언트 연결을 데이터베이스 서버에 계속 연결 상태로 유지한다. &lt;/p&gt;
&lt;h4&gt;Transaction&lt;/h4&gt;
&lt;p&gt;이 모드에서 PgBouncer는 각 SQL 트랜잭션이 완료될 때마다 연결을 풀로 반환한다. 이는 트랜잭션간에 서버 세션 상태를 유지하지 않아므로 세션 수준의 상태 설정이 트랜잭션간에 유지되지 않는다. Supabase의 Postgresql의 Pool mode는 기본적으로 Transacion 모드로 설정되어있다. &lt;/p&gt;
&lt;h4&gt;Statement&lt;/h4&gt;
&lt;p&gt;가장 제한적인 풀링 모드로 각 SQL 문(statement)이 완료될 때마다 연결을 풀로 반환한다. Supabase의 Postgresql은 해당 모드를 지원하지 않는다. &lt;/p&gt;
&lt;h3&gt;5. Pooler 사용시 인스턴스 생성 에러 발생&lt;/h3&gt;
&lt;p&gt;이번엔 문제가 바로 발생하지는 않았다. 당일은 지나갔으나 다음날이 되어서야 발견했다. 인스턴스 오류가 발생해서 항사 연결이 끊기는 것도 아니고 간헐적으로 연결이 끊기고 있었다. &lt;/p&gt;
&lt;h4&gt;당시 발생한 인스턴스 생성 에러&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;plaintext&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;Log ID
5c0963cf-d16a-4cf3-b3fe-33c99147f879
Log Timestamp (UTC)
2023-12-11T02:36:52.732Z
Log Event Message
password authentication failed for user &quot;postgres&quot;
Log Metadata
[
  {
    &quot;file&quot;: null,
    &quot;host&quot;: &quot;db-fskkusemekciragirqyd&quot;,
    &quot;metadata&quot;: [],
    &quot;parsed&quot;: [
      {
        &quot;application_name&quot;: null,
        &quot;backend_type&quot;: &quot;client backend&quot;,
        &quot;command_tag&quot;: &quot;authentication&quot;,
        &quot;connection_from&quot;: &quot;61.1.172.3:56746&quot;,
        &quot;context&quot;: null,
        &quot;database_name&quot;: &quot;postgres&quot;,
        &quot;detail&quot;: &quot;Connection matched pg_hba.conf line 91: \&quot;host  all  all  0.0.0.0/0     scram-sha-256\&quot;&quot;,
        &quot;error_severity&quot;: &quot;FATAL&quot;,
        &quot;hint&quot;: null,
        &quot;internal_query&quot;: null,
        &quot;internal_query_pos&quot;: null,
        &quot;leader_pid&quot;: null,
        &quot;location&quot;: null,
        &quot;process_id&quot;: 89111,
        &quot;query&quot;: null,
        &quot;query_id&quot;: 0,
        &quot;query_pos&quot;: null,
        &quot;session_id&quot;: &quot;657675c4.15c17&quot;,
        &quot;session_line_num&quot;: 2,
        &quot;session_start_time&quot;: &quot;2023-12-11 02:36:52 UTC&quot;,
        &quot;sql_state_code&quot;: &quot;28P01&quot;,
        &quot;timestamp&quot;: &quot;2023-12-11 02:36:52.732 UTC&quot;,
        &quot;transaction_id&quot;: 0,
        &quot;user_name&quot;: &quot;postgres&quot;,
        &quot;virtual_transaction_id&quot;: &quot;47/2627&quot;
      }
    ],
    &quot;parsed_from&quot;: null,
    &quot;project&quot;: null,
    &quot;source_type&quot;: null
  }
]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;같은 설정에 같은 서버인데 뜬금없이 간헐적으로 패스워드 에러가 발생하니 죽을맛이었다. &lt;/p&gt;
&lt;p&gt;그러면 안되지만, 오류의 빈도수라도 적다면 그냥 무시하고 넘어갈텐데 무시하기엔 높은 빈도로 에러가 발생했다. PgBouncer의 지원이 2024년 1월로 끝난다고 하니 애초에 비동기와의 호환성 자체가 좋지 않아보였다. 이 시점에서 Pooler 사용을 포기하고 다른 방법을 찾기로 했다. &lt;/p&gt;
&lt;p&gt;PgBouncer 지원이 끊기고 대안으로 Superbase에서는 &lt;a href=&quot;https://github.com/supabase/supavisor&quot;&gt;https://github.com/supabase/supavisor&lt;/a&gt;를 제시하고 있었는데, 아직 그다지 완성도가 높지 않아보였으며(본인들의 공식 문서에도 없으므로) 시간이 넉넉하지 않아 도입이 망설여졌다. 그래서 다시 커넥션 직접 연결을 선택하고, 커넥션이 폭증하는 문제 자체를 해결하기로 했다. &lt;/p&gt;
&lt;h3&gt;6. 커넥션 직접 연결로 회귀&lt;/h3&gt;
&lt;p&gt;여담으로, 일을 하면서 챗지피티의 도움을 참 많이 받는다. 그런데 이번 업무를 처리하면서 Deep한 업무일수록 챗지피티가 4.0이라도 헛소리를 많이 한다는 사실을 알게됐다. 어떻게 알았냐고? 나도 알고 싶지 않았다. &lt;/p&gt;
&lt;p&gt;아예 처음으로 돌아와서 커넥션 폭증에 대해서 다시 한 번 알아보기로 했다. 이쯤에서 이미 실서버는 오픈을 해야 했기 때문에, 커넥션 직접 연결로 바꾸고 추가 결제를 해서 커넥션 총 개수를 200여개로 늘려버렸다. 실서버에서는 인스턴스가 바뀌는 일이 자주 있는 일이 아니었으므로, 모니터링 결과 IDLE 상태로 접어든 죽은 커넥션도 12시간 안에 종료가 되는 것을 경험적으로 확인했으므로 실서버에서는 200개 정도로 커넥션 연결 가능 개수를 늘려두면 어쨌건 서비스가 가능했다. &lt;/p&gt;
&lt;p&gt;이렇게 실서버를 열어두고 문제를 해결하기 위해 시간을 녹이기 시작했다. &lt;/p&gt;
&lt;p&gt;커넥션 자체의 관리는 이론적으로는 아주 간단했다. 앱을 시작할 때에 커넥션을 열며, 앱을 종료할 때 커넥션을 닫는다. 이를 위해서 FastAPI의 &lt;code class=&quot;language-text&quot;&gt;on_event(”startup”)&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;on_event(”shutdown”)&lt;/code&gt; 을 사용했다. 챗지피티도 이 코드를 알려줬고, 어느 블로그를 봐도 모두 이 코드를 사용하고 있었다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://fastapi.tiangolo.com/advanced/events/#alternative-events-deprecated&quot;&gt;https://fastapi.tiangolo.com/advanced/events/#alternative-events-deprecated&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;근데 충격적이게도 이 방법은 이미 지원이 중단된 방법이었다.  이 방법 대신 lifespan 방법을 선택해야 했는데, 이 방법에 대해서 챗지피티는 알고 있음에도 불구하고 여전히 지원 중단된 방법을 추천하는 것을 보고  이 시점에서 챗지피티에 대한 신뢰를 상당 부분 잃어버리고 사용 빈도가 확 줄게 되었다. 나중에 알게 되지만 이 코드의 문제는 아니었지만! 아무튼 신뢰가 엄청나게 없어져버렸다. &lt;/p&gt;
&lt;p&gt;해당 코드를 lifespan을 활용한 코드로도 변경하고도 여전히 문제는 반복됐다. 앱이 시작될 때는 코드가 정상적으로 작동했지만, 컨테이너 안에서 앱이 종료될 때에는 종료 코드가 정상적으로 작동하지 않았다. &lt;/p&gt;
&lt;p&gt;이를 위해서 sigterm을 활용해 직접 종료 코드를 잡아서 실행하는 방법도 고려했지만 이 방법 역시 작동하지 않았다. &lt;/p&gt;
&lt;p&gt;하지만 아주 삽질은 아니어서, 로컬에서 실행한 경우에는 정상적으로 종료 코드가 작동하고 커넥션이 끊어지는 것을 확인해버렸다. &lt;/p&gt;
&lt;h3&gt;7. 문제 해결&lt;/h3&gt;
&lt;p&gt;힞;민 모드를 바꿨음에도 캐싱은 여전히 작동하지 않아서 캐싱을 강제로 꺼야 했고 잘 꺼지지도 않았는지 이후에도 Sqlalchemy의 캐싱 과정에서 키값이 중복되게 생성되는 문제가 있어 해당 부분을 오버라이드 해서 키 값이 중복되지 않게 만들게 해주는 등 문제가 있었지만 일단은 연결이 끊기거나 커넥션이 폭증하지 않아 해결이 된 것으로 보였다. &lt;/p&gt;
&lt;p&gt;사실 이 전에 종료 신호가 정상적으로 어플리케이션에 도달하지 못하는 것이 아닌가? 에 대해서 인지를 하고 있었다. 도커 컨테이너를 강제 종료 하면 기본적으로 docker는 1번 프로세스에만 종료 명령을 정상적으로 전달하고 나머지 프로세스에게는 종료 명령을 정상 전달하지 않는다. 도커 작업은 다른 개발자가 진행했는데, 컨테이너 안에서 실행되는 작업이라곤 Uvicorn 하나이므로 당연히 1번 프로세스일것이다 라는 말을 들어서 이 부분을 점검해볼 생각을 못하고 있었다. &lt;/p&gt;
&lt;p&gt;근데, 로컬에서 실행했을때에는 정상적으로 커넥션이 끊어지는데 도커 컨테이너를 통해서 실행한 경우에는 정상 종료가 되지 않는다? 이 문제를 확인하고 나서야 이 부분을 점검해볼 생각이 들었고, 점검 결과 충격적이게도 Uvicorn이 1번 프로세스로 실행되지 않고 있었다. &lt;/p&gt;
&lt;p&gt;Dumb-init이라는 Docker 컨테이너의 모든 프로세스에게 종료 신호를 보내주는 소프트웨어도 잠깐 고려했지만, 간단하게 Docker exec 부분을 수정해 Uvicorn이 1번 프로세스로 컨테이너 안에서 실행되게끔 하자 거짓말처럼 모든 문제가 해결되었다. &lt;/p&gt;
&lt;h3&gt;8. 회고&lt;/h3&gt;
&lt;p&gt;전 회사에서도 이미 만들어진 커넥션을 쓰거나, 그냥 가이드대로 연결하면 대충 됐기 때문에 DB와 서버의 연결에 관해서 깊게 고찰해본 적이 없었다. 이번 일을 겪으면서 일단 DB와 서버의 연결에 대해.. 대충 알고 있던 부분들에 대해서 깊은 학습이 되었다. &lt;/p&gt;
&lt;p&gt;문제해결 방법을 가장 마지막에 발견했지만, 사실 꼼꼼히 살폈다면 초장에 해결할 수 있던 간단한 문제였다. 돌고 돌아 삥 돌아 해결을 했지만 최종적인 코드 수정은 굉장히 적었다. 공부 했으니 한잔해~ 하고 넘어가기에는 무보수 야근이 너무 잦았기 때문에 (덕분인지 시원하게 A형 독감도 걸렸다. 아무튼 야근 탓이다. ) 억울한 부분이 크다. &lt;/p&gt;
&lt;p&gt;챗지피티에 대한 신뢰가 컸는데, 이번 일을 진행하면서는 챗지피티 때문에 뱅뱅 돌아가게 된 부분이 많았다. 확실히 겉핥기 부분만 챗지피티에게 기대야 하며(또는 반복적인 일) 딥 한 문제나 조금이라도 인터넷에 자료가 적은 문제들에 대해서는 공식문서를 신뢰해야 한다는 사실을 다시 한 번 뼈저리게 느꼈다. 이후로 나는 예전처럼 챗지피티를 많이 쓰지는 않는다.. 쓰더라도 조심히 사용한다. &lt;/p&gt;
&lt;p&gt;한편으로, 커넥션 직접 연결 방법을 선택해 문제를 해결했지만 이게 완벽히 올바른 방법이라고는 생각이 들지 않는다. 아직은 서비스의 크기가 완벽하게 크지는 않기 때문에 이 방법으로도 가능하지만, Pooler를 사용하는 것이 올바른 해결 방법이 아닐까? 지금도 단순히 문제를 피해 도망친 것이라고밖에 생각이 들지 않는다. 특히 Pooler로 인해 발생한 문제들은 풀리지 않은 미스테리가 너무 많이 남았다. &lt;/p&gt;
&lt;p&gt;추후 기회가 있다면 supavisor를 기반으로 다시 만들어보고 싶은 생각이 있다. 아니, 반드시 그래야 한다고 생각이 든다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[PynamoDB와 boto3, PynamoDB의 커넥션]]></title><description><![CDATA[회사에서 DynamoDB를 사용할 때에, PynamoDB ORM을 사용하여 연결을 하고 있다.  Postgresql을 도입했을 때에 커넥션 문제가 지속적으로 발생해 (연결이.. 끊어지지 않는다!) 이를 처리하던 도중 PynamoDB…]]></description><link>https://sharknia.github.io/PynamoDB와-boto3-PynamoDB의-커넥션/</link><guid isPermaLink="false">https://sharknia.github.io/PynamoDB와-boto3-PynamoDB의-커넥션/</guid><pubDate>Fri, 08 Dec 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에서 DynamoDB를 사용할 때에, PynamoDB ORM을 사용하여 연결을 하고 있다. &lt;/p&gt;
&lt;p&gt;Postgresql을 도입했을 때에 커넥션 문제가 지속적으로 발생해 (연결이.. 끊어지지 않는다!) 이를 처리하던 도중 PynamoDB는 어떻게 커넥션을 관리하는지 궁금해서 찾아보게 되었다. &lt;/p&gt;
&lt;h3&gt;PynamoDB란?&lt;/h3&gt;
&lt;p&gt;PynamoDB는 DynamoDB를 위한 Python 라이브러리이다. &lt;/p&gt;
&lt;h4&gt;Pythonic Interface&lt;/h4&gt;
&lt;p&gt;파이썬 개발자들이 익숙한 객체 지향 접근 방식을 제공한다. &lt;/p&gt;
&lt;h4&gt;간편한 데이터 모델링&lt;/h4&gt;
&lt;p&gt;PynamoDB를 사용하면 DynamoDB 테이블과 항목을 Python 클래스로 모델링 할 수 있다. &lt;/p&gt;
&lt;h4&gt;CRUD Operation&lt;/h4&gt;
&lt;p&gt;PynamoDB는 Create, Read, Update, Delete 작업을 간편하게 수행할 수 있는 메소드를 제공한다. &lt;/p&gt;
&lt;h3&gt;PynamoDB의 커넥션 관리&lt;/h3&gt;
&lt;p&gt;PynamoDB에서 커넥션은 boto3를 사용해서 관리하며, Low Level의 API를 사용하면 커넥션을 직접 연결할 수 있지만 기본적으로는 자동으로 관리를 한다. 설정 몇가지만 해주면(또는 하지 않아도) 필요에 따라서 알아서 커넥션을 맺고 끊는다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://pynamodb.readthedocs.io/en/stable/settings.html&quot;&gt;https://pynamodb.readthedocs.io/en/stable/settings.html&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;boto3란?&lt;/h3&gt;
&lt;p&gt;AWS를 위한 AWS 공식 Python SDK이다. 이 라이브러리를 통해 Python 어플리케이션에서 AWS를 쉽게 사용 및 관리 할 수 있다. &lt;/p&gt;
&lt;h4&gt;광범위한 AWS 서비스 지원&lt;/h4&gt;
&lt;p&gt;S3, EC2, DynamoDB, IAM 등 AWS에서 제공하는 대부분의 서비스를 지원한다. &lt;/p&gt;
&lt;h4&gt;높은 수준의 객체 지향 API와 low level API 제공&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Resource API&lt;/code&gt;는 높은 수준의 객체 지향 인터페이스를 제공하여 사용자가 AWS 리소스를 직관적으로 다룰 수 있게 해준다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Client API&lt;/code&gt; 는 낮은 수준, 서비스 중심의 인터페이스를 제공하여 더 세밀한 제어가 필요할 때 사용할 수 있다. &lt;/p&gt;
&lt;h4&gt;자격 증명 관리와 보안&lt;/h4&gt;
&lt;p&gt;AWS의 자격 증명을 효과적으로 관리할 수 잇는 기능을 제공한다.    &lt;/p&gt;</content:encoded></item><item><title><![CDATA[단축어로 SLACK 프로필 변경하기]]></title><description><![CDATA[소개 애플 단축어를 활용해 간단하게 슬랙 상태를 원클릭으로 변경할 수 있습니다. 슬랙의 API를 이용합니다.  저는 개인적으로 raycast…]]></description><link>https://sharknia.github.io/단축어로-SLACK-프로필-변경하기/</link><guid isPermaLink="false">https://sharknia.github.io/단축어로-SLACK-프로필-변경하기/</guid><pubDate>Fri, 17 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소개&lt;/h2&gt;
&lt;p&gt;애플 단축어를 활용해 간단하게 슬랙 상태를 원클릭으로 변경할 수 있습니다. 슬랙의 API를 이용합니다. &lt;/p&gt;
&lt;p&gt;저는 개인적으로 raycast의 뽀모도로 익스텐션과 함께 다음과 같이 사용하고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/adb71f64d5a742c08b823d384bf9761f/f97d7/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/0lEQVR42oXPy06EMBQGYN7AqFwEWpBC6QVKKVBwhpgw48zOxJ1rNy6ML8JjW0eNJmYg+Vbn5O/5a83z/Piw2w/tpJuTduqNbtVu0NaG0y5Dd7Rqc9Yz2hHa4txMVqkktvLLC2pfHcd3QcYNLyWWxS2pQaAW1aHPnWuLu7bxnKVTnsok6xDakrSJgMkvkCbs2p/hwrXfGH1qhGL1wIpjW2uU1DBUETjHbAvP+b78SvIuoZrQKitEcHoehucoGEoQ/IZfKO4R1RirlEiw0vnLT9hzOn5/qBom9qIcD0q2MTTf/s/c1Em8JVj9rS0iJAEUAJYAmkoiuFlQhb7wPe7aH35KU9czxti3AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/adb71f64d5a742c08b823d384bf9761f/ca1dc/image1.png&apos; srcset=&apos;/static/adb71f64d5a742c08b823d384bf9761f/e7570/image1.png 170w,
/static/adb71f64d5a742c08b823d384bf9761f/f46e7/image1.png 340w,
/static/adb71f64d5a742c08b823d384bf9761f/ca1dc/image1.png 680w,
/static/adb71f64d5a742c08b823d384bf9761f/02d09/image1.png 1020w,
/static/adb71f64d5a742c08b823d384bf9761f/9d567/image1.png 1360w,
/static/adb71f64d5a742c08b823d384bf9761f/f97d7/image1.png 2000w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
집중을 시작할 때에 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;집중 모드 킴&lt;/li&gt;
&lt;li&gt;음량 조절&lt;/li&gt;
&lt;li&gt;노래 재생&lt;/li&gt;
&lt;li&gt;슬랙 방해금지 상태 변경&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e1c21d95548582669bcbdbcb01977ed2/f97d7/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 27.058823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqklEQVR42o3OSw6CMBgEYHYuRRHQFqyALbY8+tNCI3EBXsC41Z2nIPH01gNgTL7MZjLJOO9pej0fYweDrsdWjZ2l/2K0o1ICBPVcGq6AMn1MdXbQqUXmfVsgkcM3K+YurnA7w50nWRPjBgc12kKE5ki8syn8tSMCj/uuIXTIhWQlZ6picOF5EyOYYbKk2eMi9L5j4S9lVvQnqGkpqKxo2ef0x7i1n2NUhN4HSRUw45IM1g4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/e1c21d95548582669bcbdbcb01977ed2/ca1dc/image2.png&apos; srcset=&apos;/static/e1c21d95548582669bcbdbcb01977ed2/e7570/image2.png 170w,
/static/e1c21d95548582669bcbdbcb01977ed2/f46e7/image2.png 340w,
/static/e1c21d95548582669bcbdbcb01977ed2/ca1dc/image2.png 680w,
/static/e1c21d95548582669bcbdbcb01977ed2/02d09/image2.png 1020w,
/static/e1c21d95548582669bcbdbcb01977ed2/9d567/image2.png 1360w,
/static/e1c21d95548582669bcbdbcb01977ed2/f97d7/image2.png 2000w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
집중을 끝낼 때에&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;집중 모드 끔&lt;/li&gt;
&lt;li&gt;슬랙 방해금지 상태 해제&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;집중 모드에서는 다른 알림을 모두 꺼두고 슬랙 알림만 켜서 업무 흐름은 놓치지 않게 해두었습니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/20ce3a7a0ec6e93c498938387b6e31e6/f97d7/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 36.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVR42mNol+PpUJeol+ZrV5FYFeI71cFyjpt9taJMpZ52o7XVguKiPA2NYnOLRl//VC29bDPrZH3TWG3DZAv7CD1ThlUJKSsT05fFpc0Ni+3x82lwcay2sS00syywtiuwc64MDEs3s04xs023dUkwtUuxdU2wco4wtkmy925PrmJ4d+3/26t/v9z5f3DtuYbknpbUmWUZRcUpeVmRyRmhCan+0Rkh8RnB8emBMZnBcWmBMelBMakBUdnhyWtnbmV4f/v/u1t/vz78v2/d0Y7Yyb3RC+sLSysyc9PDotOCI1MCw5P9w5L8Q5P8QhIhyDckwScowSe4KCmT4dGjxw8fPnr24uWe9ZuDeluc5/SWpWflJySnhUUkh4QlBoTE+wfH+wXF+wJRYLxPYJx3QJyXP5BbW1DG8OLFy+fPX7z98GHfhs3u/Y2WC3rK0jOyYmJD3dyCXVwDHZwC7R0D7BwDbB0CbMDI2t7f2g4okpucyvD///9///4ByadPnmxYtmzdosUrFi2aM3Xq5J6eSd3dEzu7JnZ2TgCijs6JMDShvWNqb++KxYsBAPO+WPH/dMMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/20ce3a7a0ec6e93c498938387b6e31e6/ca1dc/image3.png&apos; srcset=&apos;/static/20ce3a7a0ec6e93c498938387b6e31e6/e7570/image3.png 170w,
/static/20ce3a7a0ec6e93c498938387b6e31e6/f46e7/image3.png 340w,
/static/20ce3a7a0ec6e93c498938387b6e31e6/ca1dc/image3.png 680w,
/static/20ce3a7a0ec6e93c498938387b6e31e6/02d09/image3.png 1020w,
/static/20ce3a7a0ec6e93c498938387b6e31e6/9d567/image3.png 1360w,
/static/20ce3a7a0ec6e93c498938387b6e31e6/f97d7/image3.png 2000w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
메뉴바에서 원클릭으로 설정할 수 있어 편리합니다. &lt;/p&gt;
&lt;h2&gt;설정법&lt;/h2&gt;
&lt;h3&gt;슬랙의 API App 생성&lt;/h3&gt;
&lt;p&gt;먼저 슬랙의 API App을 만들어야 합니다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://api.slack.com/&quot;&gt;https://api.slack.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;해당 페이지로 이동 후, 우측 상단의 Your apps으로 이동합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Create New App&lt;/code&gt; 을 클릭합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;From an app manifest&lt;/code&gt; 를 선택 후, workspace를 고르고 Next 합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;YAML&lt;/code&gt;을 고르고, 다음의 내용을 입력합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;display_information&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Apple 상태변경 단축어
&lt;span class=&quot;token key atrule&quot;&gt;oauth_config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;scopes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; users.profile&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;write
&lt;span class=&quot;token key atrule&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;org_deploy_enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;socket_mode_enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;token_rotation_enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;권한을 더 원한다면 더 많이 입력해주셔도 됩니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Create&lt;/code&gt;를 눌러 앱을 생성합니다. &lt;/p&gt;
&lt;p&gt;그 후 바로 그 화면에서 &lt;code class=&quot;language-text&quot;&gt;Install to Workspace&lt;/code&gt;를 클릭해 앱을 인스톨합니다. &lt;/p&gt;
&lt;p&gt;그리고, 좌측 메뉴에서 &lt;code class=&quot;language-text&quot;&gt;OAuth &amp;amp; Permissions&lt;/code&gt; 메뉴로 이동합니다. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OAuth Token&lt;/strong&gt; 값을 복사해줍니다. 슬랙 페이지에서 할 일은 여기까지입니다. &lt;/p&gt;
&lt;h3&gt;단축어 설정&lt;/h3&gt;
&lt;p&gt;단축어 앱을 열고 새로운 단축어를 추가합니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;URL 콘텐츠 가져오기&lt;/code&gt; 를 검색해서 다음과 같이 설정합니다. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c5bf66afaf9308636696df7659cbc53d/f97d7/image4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 40.588235294117645%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVR42kWQjU6rMBTH9wY6p4yxMT4LK7SUwoCWj4IwZBoWE030JvcFfP8nsLs30eSX5qQ5v/Z/zmJI/D+czk3W5klFYgnHWMRRn0YNhpKWhA2CAgdtFPZZcm6by/A4Vvyp5gu8XgW3NzhSaQpTj+SIlgmvSfKIvMLWC2vXBiA3tWh9h+5v2AFMreiyozimp6pakM2KqHfpTq09K7c24mA9FwmDQaqrUmbOvsMH7hpEXeGHZYWd96n5bMtLHp8QWMhbSbJVhhhNGRWh3yFfQKdDh8q3S8/iwMoMjWzu0cNth+Hf+fwxiNe6GGl4lWWkdLfuoHum4Yj9uTgOGA6hKzyzAYY8r7JsU5bcNV9r9pLFYxxIfmWZrXD0Ewmeq5oBh9l6CUyJDP8jM9ecy+zC0ylBJwJ/ZRGA2rNL16iBUTr7kaKXnPbY584+M7eyDSnLHjhfl/lz7CaKJP9mXq/oVmGmVto6N7Urhva/YMZG1vLp68KUZePZbzWT3/bIG7D/DQP6VaAwkXntAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image4&apos; title=&apos;&apos; src=&apos;/static/c5bf66afaf9308636696df7659cbc53d/ca1dc/image4.png&apos; srcset=&apos;/static/c5bf66afaf9308636696df7659cbc53d/e7570/image4.png 170w,
/static/c5bf66afaf9308636696df7659cbc53d/f46e7/image4.png 340w,
/static/c5bf66afaf9308636696df7659cbc53d/ca1dc/image4.png 680w,
/static/c5bf66afaf9308636696df7659cbc53d/02d09/image4.png 1020w,
/static/c5bf66afaf9308636696df7659cbc53d/9d567/image4.png 1360w,
/static/c5bf66afaf9308636696df7659cbc53d/f97d7/image4.png 2000w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
입력해야 하는 값은 다음과 같습니다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;헤더&lt;/p&gt;
&lt;p&gt;키 : Authorization&lt;/p&gt;
&lt;p&gt;값 : Bearer xoxp-xxxxx-xxxx…&lt;/p&gt;
&lt;p&gt;키 : Content-Type&lt;/p&gt;
&lt;p&gt;값 : application/json; charset=UTF-8&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;바디&lt;/p&gt;
&lt;p&gt;키 : profile&lt;/p&gt;
&lt;p&gt;값 : &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token property&quot;&gt;&quot;status_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;방해금지&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token property&quot;&gt;&quot;status_emoji&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;:no_entry_sign:&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원하는 이모지와 텍스트를 넣어주시면 됩니다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이렇게 하면 단축어가 완성됩니다. &lt;/p&gt;
&lt;h2&gt;참고&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://api.slack.com/apps?deleted=1&quot;&gt;https://api.slack.com/apps?deleted=1&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[aiohttp]]></title><description><![CDATA[aiohttp는 파이썬의 비동기 HTTP 네트워킹 라이브러리이다. 이 라이브러리는 asyncio를 사용하여 비동기 I/O를 수행하고 클라이언트와 서버 양쪽 모두에 대한 HTTP 지원을 제공한다.  즉 aiohttp를 사용하면 비동기적으로 HTTP…]]></description><link>https://sharknia.github.io/aiohttp/</link><guid isPermaLink="false">https://sharknia.github.io/aiohttp/</guid><pubDate>Wed, 08 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;aiohttp는 파이썬의 비동기 HTTP 네트워킹 라이브러리이다. 이 라이브러리는 asyncio를 사용하여 비동기 I/O를 수행하고 클라이언트와 서버 양쪽 모두에 대한 HTTP 지원을 제공한다. &lt;/p&gt;
&lt;p&gt;즉 aiohttp를 사용하면 비동기적으로 HTTP 요청을 보내고 응답을 받을 수 있다. &lt;/p&gt;
&lt;h2&gt;주요 특징&lt;/h2&gt;
&lt;h4&gt;비동기/동시성 지원&lt;/h4&gt;
&lt;p&gt;async, await를 사용하여 동시에 여러 HTTP 요청을 비동기적으로 처리할 수 있다. &lt;/p&gt;
&lt;h4&gt;서버와 클라이언트 사이드 지원&lt;/h4&gt;
&lt;p&gt;HTTP 클라이언트 기능과 HTTP 서버 기능을 모두 제공한다. &lt;/p&gt;
&lt;h4&gt;웹소켓 지원&lt;/h4&gt;
&lt;p&gt;웹소켓 연결 및 통신을 지원한다. &lt;/p&gt;
&lt;h4&gt;신호 및 슬롯 매커니즘&lt;/h4&gt;
&lt;p&gt;요청 처리 과정에서 다양한 이벤트에 대응할 수 있게 해준다. &lt;/p&gt;
&lt;h2&gt;설치&lt;/h2&gt;
&lt;p&gt;파이썬 설치에 기본적으로 포함되지 않은 외부 라이브러리이다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; aiohttp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pip를 이용해 간단하게 설치할 수 있다. &lt;/p&gt;
&lt;h2&gt;예제&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        html &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://python.org&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

loop &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_event_loop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
loop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_until_complete&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;python 공식 홈페이지에서 HTML을 비동기적으로 가져오고 출력하는 간단한 예제이다. &lt;/p&gt;
&lt;h2&gt;세션 관리&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ClientSession 객체를 사용하여 HTTP 클라이언트 세션을 관리할 수 있다.&lt;/strong&gt; &lt;/p&gt;
&lt;h4&gt;연결 재사용&lt;/h4&gt;
&lt;p&gt;여러 요청을 수행할 때, 세션은 자동으로 재연결을 사용한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/get&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/get&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;쿠키 관리&lt;/h4&gt;
&lt;p&gt;세션은 자동으로 쿠키를 관리한다. 첫 번째 요청에서 서버로부터 받은 쿠키는 자동으로 저장되고 다음 요청에 사용된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 첫 번째 요청&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/cookies/set?cookie_name=cookie_value&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# 두 번째 요청 - 첫 번째 요청에서 설정된 쿠키가 포함됩니다.&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/cookies&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;헤더의 기본값 설정&lt;/h4&gt;
&lt;p&gt;세션은 생성할 때 기본 헤더를 설정할 수 있으며 이후의 모든 요청에 이 헤더가 포함된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    headers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Authorization&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Bearer your_token&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/headers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;타임아웃 관리&lt;/h4&gt;
&lt;p&gt;세션 또는 개별 요청에 대한 타임아웃을 설정할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aiohttp &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ClientTimeout

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    timeout &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ClientTimeout&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 전체 요청에 대한 타임아웃을 5초로 설정&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;timeout&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/delay/10&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;커스텀 설정&lt;/h4&gt;
&lt;p&gt;SSL 검증 비활성화, 프록시 설정 등의 커스텀 설정을 할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://self-signed.badssl.com/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ssl&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# SSL 검증 비활성화&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;자원 해제&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;async with&lt;/code&gt; 문을 사용하면 세션 사용이 끝날 때 자동으로 자원을 해제한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 세션 생성 및 자동 자원 해제&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    html &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://python.org&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;에러 핸들링&lt;/h2&gt;
&lt;h4&gt;HTTP 응답 에러&lt;/h4&gt;
&lt;p&gt;서버가 4XX 클라이언트 에러 또는 5XX 서버 에러를 반환하는 경우, &lt;code class=&quot;language-text&quot;&gt;ClientResponseError&lt;/code&gt; 가 발생할 수 있다. 이는 &lt;code class=&quot;language-text&quot;&gt;raise_for_status()&lt;/code&gt; 메서드를 사용하여 처리할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;raise_for_status&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientResponseError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;HTTP Response Error: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;HTTP Client Error: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Unexpected Error: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/status/400&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 이 URL은 400 Bad Request를 반환합니다.&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;연결 에러&lt;/h4&gt;
&lt;p&gt;네트워크 문제 또는 DNS 문제로 인해 연결을 설정할 수 없는 경우 &lt;code class=&quot;language-text&quot;&gt;ClientConnectError&lt;/code&gt; 예외가 발생할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientConnectorError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Connection Error: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://nonexistent.url&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 존재하지 않는 URL&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;타임아웃 에러&lt;/h4&gt;
&lt;p&gt;지정된 타임아웃 내에 서버로부터 응답을 받지 못하는 경우 &lt;code class=&quot;language-text&quot;&gt;asyncio.TimeoutError&lt;/code&gt; 예외가 발생한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 1초 타임아웃 설정&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TimeoutError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Timeout Error: The request timed out&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/delay/10&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 응답 지연 URL&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;일반 HTTP 클라이언트 에러&lt;/h4&gt;
&lt;p&gt;aiohttp가 발생시킬 수 있는 다른 클라이언트 에러를 처리한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Client Error: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; fetch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/status/500&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 서버 에러 URL&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;스트리밍 응답&lt;/h2&gt;
&lt;p&gt;스트리밍 응답을 처리하는 것은 큰 데이터를 다룰 때 특히 유용하다. 스트리밍을 사용하여 응답의 전체 내용을 메모리에 한 번에 로드하지 않고 데이터를 조각으로 나누어 처리할 수 있다. 이 방법은 메모리 사용량을 최적화하고 대용량 응답을 효율적으로 처리할 수 있도록 한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;stream_response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClientSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;# 스트리밍 응답 처리&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; data &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_any&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;# 데이터 조각을 처리 (예: 파일에 쓰기, 출력 등)&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; stream_response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://httpbin.org/stream/20&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제에서는 &lt;code class=&quot;language-text&quot;&gt;response.content.iter_any()&lt;/code&gt; 를 사용하여 응답 스트림에서 데이터를 순차적으로 읽는다. &lt;/p&gt;
&lt;p&gt;스트리밍 응답을 사용할 때는 데이터의 양이 많거나 응답을 받는 동안 다른 처리를 동시에 해야 하는 경우에 매우 효과적이다. 예를 들어 다운로드한 데이터를 파일에 쓰면서 동시에 다음 데이터 청크를 받거나 데이터를 받아서 실시간으로 사용자에게 전송하는 경우 등에 유용하다. &lt;/p&gt;
&lt;p&gt;스트리밍을 사용할 때에는 네트워크 상황이나 서버의 응답 특성에 따라 데이터를 받는 속도가 일정하지 않을 수 있음을 인지하고 있어야 한다. 데이터를 처리하는 로직이 블로킹되지 않도록 주의해야 하며, 가능하면 각 청크를 처리하는데 시간이 너무 오래 걸리지 않도록 설계해야 한다.&lt;/p&gt;
&lt;h2&gt;테스트&lt;/h2&gt;
&lt;p&gt;aiohttp의 비동기적인 특성 때문에 전통적인 동기 테스트 방식을 그대로 사용할 수 없다. 대신 aiohttp는 비동기 테스트를 지원하기 위해 pytest와 함께 사용할 수 있는 &lt;code class=&quot;language-text&quot;&gt;aitohttp.test_utils&lt;/code&gt; 모듈을 제공한다. 이를 통해 웹서버와 클라이언트 코드를 테스트 할 수 있다. &lt;/p&gt;
&lt;h4&gt;클라이언트 코드 테스트&lt;/h4&gt;
&lt;p&gt;클라이언트 코드를 테스트 하기 위해서는 일반적으로 pytest와 pytest-aiohttp 플러그인을 사용한다. 이를 통해 aiohttp 클라이언트 세션을 비동기적으로 테스트 할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; aiohttp
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; pytest
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aiohttp &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; web

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_example_client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;aiohttp_client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello, world&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Application&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; hello&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; aiohttp_client&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    resp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;
    text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; text &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello, world&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;aiohttp_client는 pytest-aiohttp 플러그인에서 제공하는 fixture로, 테스트용 애플리케이션 서버와 상호작용하는 데 사용할 수 있는 aiohttp.ClientSession 객체를 생성한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    fixture란?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트를 실행하기 전에 필요한 준비 작업과 설정을 의미한다. 일반적으로 fixture는 테스트 환경을 설정하고 테스트가 실행되는 동안 필요한 리소스나 상태를 생성하며, 테스트가 완료된 후에 정리 작업을 수행한다. &lt;/p&gt;
&lt;h4&gt;서버 코드 테스트&lt;/h4&gt;
&lt;p&gt;aiohttp 웹서버를 테스트 할 때에는 aiohttp.test_utils.TestClient를 사용하여 요청을 보내고 응답을 검사한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aiohttp &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; web
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; aiohttp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test_utils &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; AioHTTPTestCase&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unittest_run_loop
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; myapp &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; create_app  &lt;span class=&quot;token comment&quot;&gt;# 가정: myapp 모듈에서 앱을 생성하는 함수&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyAppTestCase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AioHTTPTestCase&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        AioHTTPTestCase에서 애플리케이션 인스턴스를 생성하기 위해 오버라이드
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; create_app&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@unittest_run_loop&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_example&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        resp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GET&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello, world&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; text&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;AioHTTPTestCase는 aiohttp.test&lt;em&gt;utils에서 제공하는 기본 테스트 케이스 클래스이며, unittest&lt;/em&gt;run_loop 데코레이터는 테스트 코루틴을 이벤트 루프에서 실행할 수 있게 해준다.&lt;/p&gt;
&lt;p&gt;aiohttp를 테스트할 때 주의해야 할 점은 테스트 환경에서도 비동기 코드를 올바르게 실행하기 위해 적절한 테스트 실행기를 설정해야 한다는 것이다. pytest는 비동기 테스트를 위한 좋은 선택이며, pytest-asyncio 플러그인을 사용하면 pytest에서 async def 테스트 함수를 직접 사용할 수 있다.&lt;/p&gt;
&lt;p&gt;또한, 실제 HTTP 호출을 모킹하기 위해 aiohttp의 pytest_plugin이 제공하는 aioresponses와 같은 도구를 사용할 수도 있다. 이를 통해 실제 외부 서비스와의 통신 없이 HTTP 요청과 응답을 시뮬레이션할 수 있어, 테스트의 견고성을 높이고 실행 시간을 단축시킬 수 있다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI에서 데코레이터와 Dependency]]></title><description><![CDATA[Dependency Injection…]]></description><link>https://sharknia.github.io/FastAPI에서-데코레이터와-Dependency/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI에서-데코레이터와-Dependency/</guid><pubDate>Tue, 07 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Dependency Injection 시스템과 데코레이터 시스템은 유사한 목적을 가질 수 있다. 하지만 구현과 사용법에서 몇 가지 차이점이 있다. &lt;/p&gt;
&lt;h2&gt;공통점&lt;/h2&gt;
&lt;h4&gt;명시적인 인증 체크&lt;/h4&gt;
&lt;p&gt;인증 로직을 명시적으로 라우트에 적용하여 추가 기능이 필요한 지점을 쉽게 식별할 수 있다. &lt;/p&gt;
&lt;h4&gt;중앙 집중식 관리&lt;/h4&gt;
&lt;p&gt;로직을 한 곳에서 관리함으로써 코드의 중복을 줄이고 일관성을 유지할 수 있다. &lt;/p&gt;
&lt;h2&gt;각 기능 별 장점&lt;/h2&gt;
&lt;h3&gt;Dependency Injection (의존성 주입)&lt;/h3&gt;
&lt;h4&gt;재사용성&lt;/h4&gt;
&lt;p&gt;Dependency는 여러 라우트에서 재사용 될 수 있으며 필요에 따라 다양한 파라미터와 함께 주입될 수 있다. &lt;/p&gt;
&lt;h4&gt;자동문서화&lt;/h4&gt;
&lt;p&gt;FastAPI의 스웨거 UI에서 Dependency가 자동으로 문서화된다. &lt;/p&gt;
&lt;h4&gt;형식 안정성&lt;/h4&gt;
&lt;p&gt;FastAPI의 형식 추론을 사용하여 파라미터의 유효성 검사와 변환을 자동으로 수행할 수 있다. &lt;/p&gt;
&lt;h3&gt;Decorator (데코레이터)&lt;/h3&gt;
&lt;h4&gt;간결성&lt;/h4&gt;
&lt;p&gt;데코레이터는 종종 코드를 더 간결하게 만들어주며, 의도를 명확히 표현하는 경우가 많다. &lt;/p&gt;
&lt;h4&gt;융통성&lt;/h4&gt;
&lt;p&gt;데코레이터는 함수를 감싸는 방식으로 작동하므로 더 복잡한 로직을 내부에 포함할 수 있다. &lt;/p&gt;
&lt;h2&gt;사용 시 고려 사항&lt;/h2&gt;
&lt;h4&gt;비즈니스 로직의 분리&lt;/h4&gt;
&lt;p&gt;데코레이터는 추가를 원하는 로직과 비즈니스 로직을 물리적으로 분리하는데 유용할 수 있다. &lt;/p&gt;
&lt;h4&gt;코드의 명확성&lt;/h4&gt;
&lt;p&gt;Dependency는 의존성이 명시적이므로 코드를 읽고 이해하기 쉬워진다. &lt;/p&gt;
&lt;h4&gt;비동기 지원&lt;/h4&gt;
&lt;p&gt;비동기 코드를 사용할 때에는 데코레이터 내부에서 async 함수를 올바르게 처리할 수 있는지 확인해야 한다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI와 asyncio]]></title><description><![CDATA[asyncio란? 소개 파이썬에서 비동기 프로그래밍을 위한 표준 라이브러리이다. 이 라이브러리는  을 사용하여 동시성 코드를 작성하는 데 필요한 구조를 제공한다. 단일 스레드 내에서도 여러 I/O…]]></description><link>https://sharknia.github.io/FastAPI와-asyncio/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI와-asyncio/</guid><pubDate>Tue, 07 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;asyncio란?&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;파이썬에서 비동기 프로그래밍을 위한 표준 라이브러리이다. 이 라이브러리는 &lt;code class=&quot;language-text&quot;&gt;coroutine&lt;/code&gt; 을 사용하여 동시성 코드를 작성하는 데 필요한 구조를 제공한다. 단일 스레드 내에서도 여러 I/O 바운드 작업과 고수준의 구조화된 네트워크 코드를 동시에 실행할 수 있으며, 이는 효율성과 속도에서 큰 이점을 제공한다. &lt;/p&gt;
&lt;h3&gt;주요 컴포넌트&lt;/h3&gt;
&lt;h4&gt;Event Loop&lt;/h4&gt;
&lt;p&gt;프로그램의 진입점으로써, 비동기적으로 실행될 다양한 작업들을 관리한다. 작업이 실행 준비가 되면 이벤트 루프는 해당 작업을 실행하고 완료되기를 기다리는 다른 작업으로 제어를 전환한다. &lt;/p&gt;
&lt;h4&gt;Coroutine&lt;/h4&gt;
&lt;p&gt;코루틴은 &lt;code class=&quot;language-text&quot;&gt;async def&lt;/code&gt; 로 정의되는 비동기 함수이다. 코루틴은 &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt;  키워드를 사용하여 실행을 일시 중지하고 이벤트 루프에 제어를 반환할 수 있어 다른 코루틴이 실행될 수 있게 한다. &lt;/p&gt;
&lt;h4&gt;Future&lt;/h4&gt;
&lt;p&gt;아직 완료되지 않은 작업을 의미한다. 코루틴이 완료될 때 결과를 저장하거나 예외를 전달할 수 있는데 이를 통해 비동기 작업의 최종 상태를 알 수 있다. &lt;/p&gt;
&lt;h4&gt;Task&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Future&lt;/code&gt; 를 상속한다. 이는 이벤트 루프에서 코루틴의 실행을 가능하게 한다. Task는 코루틴을 스케줄링하고 실행 결과를 추적한다. &lt;/p&gt;
&lt;h3&gt;사용 예시&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello, World!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 이벤트 루프 실행&lt;/span&gt;
asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제에서 &lt;code class=&quot;language-text&quot;&gt;asyncio.run()&lt;/code&gt; 함수는 &lt;code class=&quot;language-text&quot;&gt;main()&lt;/code&gt; 코루틴을 이벤트 루프에서 실행한다. &lt;code class=&quot;language-text&quot;&gt;main()&lt;/code&gt; 내부에서 &lt;code class=&quot;language-text&quot;&gt;asyncio.sleep(1)&lt;/code&gt; 은 비동기적으로 1초간 대기하도록 한다. 이 대기 시간동안 이벤트 루프는 다른 코루틴을 실행할 수 있다. &lt;/p&gt;
&lt;h3&gt;동기화 기능&lt;/h3&gt;
&lt;p&gt;asyncio는 비동기 프로그래밍 환경에서 동기화를 위한 여러 도구를 제공한다. asyncio.Lock은 공유 리소스에 대한 동시 액세스를 방지하고 asyncio.Event, asyncio.Condition, asyncio.Semaphore와 같은 다른 동기화 기본 요소도 사용할 수 있다. &lt;/p&gt;
&lt;h3&gt;네트워킹 지원&lt;/h3&gt;
&lt;p&gt;TCP, UDP, SSL, TLS 등을 비롯한 다양한 네트워크 프로토콜에 대한 지원을 제공한다. asyncio 스트림을 사용하여 비동기적으로 네트워크 I/O 작업을 할 수 있으며 이를 통해 서버와 클라이언트 양쪽 모두에서 비동기 네트워크 어플리케이션을 만들 수 있다. &lt;/p&gt;
&lt;h3&gt;성능과 제한 사항&lt;/h3&gt;
&lt;p&gt;입출력 바운드 작업과 고수준 구조화된 네트워크 코드를 실행하는데 효율적이다. 입출력 작업이 블로킹 되는 것을 피하면서 동시에 여러 입출력 작업을 관리할 수 있기 때문이다. &lt;/p&gt;
&lt;p&gt;예를 들어 웹서버는 많은 수의 동시 http 요청을 처리해야 하며 각 요청은 네트워크 입출력에 의존적이다. asyncio는 각 네트워크 연산이 완료되기를 기다리는 동안 다른 연산으로 전환하여 리소스를 효율적으로 사용할 수 있다. &lt;/p&gt;
&lt;p&gt;그러나 계산을 많이 요구 하는 작업(CPU 바운드 작업)에는 적압하지 않다. 이 작업은 병렬 처리가 필요한데, 이는 프로세스나 스레드를 여러개 사용해야 함을 의미한다. asyncio는 싱글 스레드, 싱글 프로세스 디자인이므로 병렬 CPU 작업을 위해서는 별도의 모듈이나 멀티 스레딩을 사용해야 한다. &lt;/p&gt;
&lt;h3&gt;생명 주기&lt;/h3&gt;
&lt;h4&gt;이벤트 루프 생성&lt;/h4&gt;
&lt;p&gt;asyncio 프로그램은 이벤트 루프라는 중앙 실행기를 사용하여 실행된다. 이벤트 루프는 프로그램의 진입점에서 생성된다. 특히 아래의 함수를 사용하면 적절한 이벤트 루프를 설정하고 프로그램을 실행할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;코루틴 실행&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;async def&lt;/code&gt; 를 통해 코루틴을 생성하고 &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt; 를 사용하여 실행을 스케줄한다. 코루틴은 이벤트 루프에 의해 실행될 태스크로 변환된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 코루틴 실행&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; some_async_function&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;태스크 스케쥴링&lt;/h4&gt;
&lt;p&gt;이벤트 루프는 &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt; 표현식을 만날 때마다 실행을 일시 중지하고 다른 태스크로 제어를 전환한다. 이를 통해 CPU가 I/O 작업으로 인해 차단되는 것을 방지하고 다른 태스크의 실행을 계속할 수 있다. &lt;/p&gt;
&lt;h4&gt;비동기 I/O 처리&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;asyncio&lt;/code&gt;는 네트워크 I/O, 파일 I/O와 같은 비동기 작업을 효율적으로 관리한다. 이벤트 루프는 모든 I/O 이벤트에 대해 비블로킹 소켓과 파일 디스크립터를 사용한다. &lt;/p&gt;
&lt;h4&gt;이벤트와 콜백 처리&lt;/h4&gt;
&lt;p&gt;이벤트 루프는 등록된 이벤트가 발생했을 때 적절한 콜백 함수를 실행한다. 콜백은 완료된 I/O 작업의 결과를 다루거나 타이머 이벤트 같은 다른 유형의 이벤트를 처리하기 위해 사용된다. &lt;/p&gt;
&lt;h4&gt;종료 처리&lt;/h4&gt;
&lt;p&gt;모든 태스크가 완료되거나 특정 조건을 만족하면 이벤트 루프는 종료될 수 있다. 이벤트 루프를 종료하기 전에 &lt;code class=&quot;language-text&quot;&gt;close()&lt;/code&gt; 함수를 호출하여 자원을 정리할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;loop &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_event_loop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    loop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_until_complete&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    loop&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;asyncio.run()&lt;/code&gt; 을 사용하는 경우에는 이벤트 루프의 생성과 종료가 자동으로 관리된다. &lt;/p&gt;
&lt;h4&gt;예외 처리&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;asyncio&lt;/code&gt; 는 예외가 발생할 경우 적절한 예외 처리를 위한 매커니즘을 제공한다. 코루틴 내부에서 발생한 예외는 해당 코루틴을 호출한 곳으로 전파되고 이벤트 루프는 처리되지 않은 예외를 포착하여 프로그래머에게 알린다. &lt;/p&gt;
&lt;h2&gt;FastAPI와 Async 함수&lt;/h2&gt;
&lt;p&gt;FastAP의 가장 큰 특징 중 하나는 asyncio 라이브러리를 기반으로 한 비동기 프로그래밍 지원이다. 이를 통해 개발자는 비동기 파이썬 코드를 작성할 수 있으며 이는 특히 I/O 바운드 작업(네트워크 요청 처리, 디스크에서의 데이터 읽기 /쓰기 등)을 비동기적으로 처리하는데 유리하다. &lt;/p&gt;
&lt;h3&gt;비동기 함수의 장점&lt;/h3&gt;
&lt;h4&gt;성능 향상&lt;/h4&gt;
&lt;p&gt;I/O 작업이 완료되기를 기다리는 동안 다른 코드를 실행할 수 있으므로 I/O 바운드 시스템에서 동시성을 크게 향상시킬 수 있다. &lt;/p&gt;
&lt;h4&gt;스케일성&lt;/h4&gt;
&lt;p&gt;적은 수의 워커로 많은 수의 요청을 처리할 수 있으므로 더 효율적으로 리소스를 사용하고 스케일링 할 수 있다. &lt;/p&gt;
&lt;h4&gt;비용 효율성&lt;/h4&gt;
&lt;p&gt;리소스 사용의 효율성은 특히 클라우드 환경에서 환경 절감으로 이어질 수 있다. &lt;/p&gt;
&lt;h4&gt;응답성 향상&lt;/h4&gt;
&lt;p&gt;서버가 요청에 더 빨리 응답할 수 있기 때문에 사용자 경험이 향상된다. &lt;/p&gt;
&lt;h3&gt;언제 비동기 함수를 쓰는 것이 더 유리할까?&lt;/h3&gt;
&lt;h4&gt;네트워크 요청 처리&lt;/h4&gt;
&lt;p&gt;웹 API 호출, 원격 데이터베이스 쿼리 등 네트워크 I/O 관련 작업을 처리할 때&lt;/p&gt;
&lt;h4&gt;고비용 I/O 작업&lt;/h4&gt;
&lt;p&gt;디스크 작업이나 네트워크를 통한 파일 전송과 같은 I/O 집중적인 작업을 비동기적으로 실행할 때 &lt;/p&gt;
&lt;h4&gt;동시성이 필요한 작업&lt;/h4&gt;
&lt;p&gt;다수의 클라이언트나 서비스로부터 오는 동시 요청을 효과적으로 처리해야 할 때&lt;/p&gt;
&lt;h4&gt;WebSocket을 사용할 때&lt;/h4&gt;
&lt;p&gt;실시간 통신을 위해 WebSocket 연결을 관리하는 경우 &lt;/p&gt;
&lt;h3&gt;비동기 함수 사용 시 주의할 점&lt;/h3&gt;
&lt;h4&gt;데드락&lt;/h4&gt;
&lt;p&gt;비동기 프로그래밍은 데드락에 빠질 위험이 있으므로 올바른 &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt; 사용과 태스크 관리가 필요하다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    데드락이란?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두 개 이상의 프로세스나 스레드가 서로의 작업 완료를 무한히 기다리게 되는 상태&lt;/p&gt;
&lt;h4&gt;에러 핸들링&lt;/h4&gt;
&lt;p&gt;비동기 코드에서는 예외 처리가 더 복잡해질 수 있으므로 주의가 필요하다. &lt;/p&gt;
&lt;h4&gt;디버깅의 복잡성&lt;/h4&gt;
&lt;p&gt;비동기 코드는 디버깅이 더 어려울 수 있다. &lt;/p&gt;
&lt;h4&gt;블로킹 코드와의 혼용&lt;/h4&gt;
&lt;p&gt;비동기 코드 내에서 블로킹 동기 코드를 호출하면 성능이 저하될 수 있으므로 주의해야 한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;async&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;이 키워드는 두 가지 주요 상황에서 사용된다. &lt;/p&gt;
&lt;h4&gt;코루틴 함수를 정의할 때&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 비동기 작업을 수행하는 코드&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;async def&lt;/code&gt; 는 이 함수가 코루틴 함수임을 나타낸다. 코루틴 함수는 호출될 때 즉시 실행되지 않고 대신에 코루틴 객체를 반환한다. 이 객체는 나중에 이벤트 루프에 의해 실행된다. &lt;/p&gt;
&lt;h4&gt;async with와 async for를 사용할 때&lt;/h4&gt;
&lt;p&gt;비동기 컨텍스트 매니저와 비동기 이터레이터를 사용할 때 필요하다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;이 키워드는 코루틴의 실행을 일시 중지하고 코루틴의 결과가 준비될 때까지 기다린다. 코루틴, 태스크, 미래 객체 등이 뒤에 올 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; some_async_function&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; data&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 await는 some&lt;em&gt;async&lt;/em&gt;function이 완료될 때까지 fetch_data 코루틴의 실행을 중지시킨다. 완료되면 그 결과값을 data에 할당하고 실행을 계속한다. &lt;/p&gt;
&lt;p&gt;이러한 비동기 프로그래밍 방식의 장점은 I/O 작업이 완료되기를 기다리는 동안 프로그램이 다른 작업을 계속할 수 있어 프로그램의 전반적인 실행 효율을 개선한다는 것이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI의 데코레이터]]></title><description><![CDATA[개요 FastAPI의 데코레이터는 파이썬 데코레이터 패턴을 활용하여 FastAPI 프레임워크에서 제공하는 여러 기능을 함수나 클래스에 적용하는 구문이다. 이 데코레이터들은 FastAPI…]]></description><link>https://sharknia.github.io/FastAPI의-데코레이터/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI의-데코레이터/</guid><pubDate>Fri, 03 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;FastAPI의 데코레이터는 파이썬 데코레이터 패턴을 활용하여 FastAPI 프레임워크에서 제공하는 여러 기능을 함수나 클래스에 적용하는 구문이다. 이 데코레이터들은 FastAPI에서 매우 중요한 역할을 한다. &lt;/p&gt;
&lt;p&gt;데코레이터는 &lt;code class=&quot;language-text&quot;&gt;@&lt;/code&gt; 기호를 사용하여 함수나 클래스의 위에 선언된다. 데코레이터는 그 아래에 정의된 함수에 추가적인 기능을 부여하거나 특정 작업을 수행하도록 지시한다. &lt;/p&gt;
&lt;p&gt;데코레이터를 사용하여 개발자는 복잡한 로직을 함수에 직접 쓰지 않고 프레임워크가 제공하는 데코레이터를 사용하여 빠르고 쉽게 웹 애플리케이션을 구현할 수 있다. &lt;/p&gt;
&lt;h2&gt;주요 데코레이터&lt;/h2&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.middleware(&quot;http&quot;)&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;HTTP 요청-응답 사이클에 관여하는 미들웨어를 등록하는데 사용된다.  이 데코레이터 아래에 정의된 함수는 애플리케이션으로 들어오는 모든 http 요청에 대해 처리되고 그리고 해당 요청에 대한 응답을 반환하기 전에 호출된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    미들웨어란?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;요청과 응답을 처리하는 과정 사이에 위치하여 들어오는 요청을 가로채 그 요청에 대해 특정 작업을 수행하거나 응답을 조작하는 구성 요소이다. &lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom_middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; call_next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 요청 전에 실행할 코드&lt;/span&gt;
    response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; call_next&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 응답 전에 실행할 코드&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;크게 두 부분으로 나눠진다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;요청 전에 실행할 코드 : &lt;code class=&quot;language-text&quot;&gt;call_next&lt;/code&gt; 함수에 요청을 전달하기 전에 실행할 코드를 작성한다. &lt;/li&gt;
&lt;li&gt;응답 전에 실행할 코드 : &lt;code class=&quot;language-text&quot;&gt;await call_next(request)&lt;/code&gt; 는 다음 미들웨어나 실제 요청을 처리하는 엔드포인트를 호출한다. 이후 응답이 반환되면 그 응답에 추가적인 처리를 하고 싶을 때 사용할 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;미들웨어 체인&lt;/h4&gt;
&lt;p&gt;만약 &lt;code class=&quot;language-text&quot;&gt;@app.middleware(&quot;http&quot;)&lt;/code&gt; 가 여러개 정의되어 있다면 FastAPI는 그것을 선언된 순서대로 실행한다. 각 미들웨어는 이전 미들웨어에서 &lt;code class=&quot;language-text&quot;&gt;await call_next(request)&lt;/code&gt; 를 호출한 후의 응답을 받아 처리한다. 이를 미들웨어 체인이라고 하며, 요청이 엔드포인트에 도달하기 전에 여러 미들웨어를 통과한다. &lt;/p&gt;
&lt;p&gt;따라서 미들웨어는 가벼운 로직을 수행하는 것이 좋으며, 무거운 작업은 미들웨어에서 피해야 한다. 또한 각 미들웨어는 만드시 &lt;code class=&quot;language-text&quot;&gt;await call_next(request)&lt;/code&gt; 를 호출하여 체인을 계속 진행할 수 있도록 해야 한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.get&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@app.post&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@app.put&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@app.delete&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@app.options&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@app.head&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;HTTP 메소드에 맞게 라우트를 설정하는 데코레이터이다. &lt;/p&gt;
&lt;p&gt;각각의 데코레이터는 해당 함수가 지정된 HTTP 메서드의 요청을 처리하는 엔드포인트임을 알려준다. 엔드포인트 함수 내부에서는 파라미터 검증, 비즈니스 로직, 데이터 반환 등의 작업을 수행할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/{item_id}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;item_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; item_id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.api_route&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;모든 http 메소드를 하나의 함수로 라우트 할 수 있게 해주는 데코레이터이다. &lt;/p&gt;
&lt;p&gt;하나의 엔드포인트에 여러 http 메소드를 지정할 수 있도록 한다. 예를 들어 같은 경로에 대해 Get과 Post 요청을 모두 처리하고 싶은 경우에 사용할 수 있다. 이 데코레이터를 사용하면 각 메서드에 대한 처리 로직을 한 함수에서 정의할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;api_route&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/{item_id}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; methods&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GET&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handle_item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 여기에 GET과 POST를 처리하는 로직을 구현&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.websocket&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;웹소켓 연결을 처리하는 엔드포인트를 선언하는 데코레이터이다. 클라이언트가 해당 경로로 웹소켓 연결을 시도하면 FastAPI는 해당 함수를 실행해 웹소켓 핸드셰이크를 처리하고 연결을 유지한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.on_event(&quot;startup&quot; | &quot;shutdown&quot;)&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;애플리케이션의 시작 시 또는 종료 시 실행할 함수를 등록하는 데코레이터이다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.exception_handler(Exc)&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;특정 예외를 처리하는 핸들러를 등록하는 데코레이터이다. 특정 예외 유형이 발생했을 때 실행될 커스텀 핸들러를 등록하는 데 사용된다. 표준 예외 로직을 오버라이드 하거나 특정 예외 유형에 대해 특별한 처리를 구현할 수 있다. &lt;/p&gt;
&lt;p&gt;예를 들어 ValueError가 발생했을 때, 표준 HTTP 500 Error 대신 더 구체적인 오류 메세지와 HTTP 400 코드를 반환할 수 있다. &lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; HTTPException
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;responses &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; JSONResponse
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; starlette&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;requests &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Request

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exception_handler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ValueError&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value_error_exception_handler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exc&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; JSONResponse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        status_code&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        content&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;exc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/{item_id}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item_id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; item_id &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; ValueError&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Item ID must be positive&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;item_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; item_id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이를 이용해 다음과 같은 이점을 얻을 수 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;유저 친화적인 오류 메시지 제공&lt;/li&gt;
&lt;li&gt;로그 이록&lt;/li&gt;
&lt;li&gt;오류 리포팅&lt;/li&gt;
&lt;li&gt;커스텀 http 상태 코드 반환 : 기본적으로 변경된 메시지 대신 사용자에게 안내를 줄 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이러한 예외 핸들러는 API 의 로버스트성을 늘려준다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    로버스트성이란?&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;소프트웨어가 예기치않은 입력이나 사용 상황에서도 안정적으로 작동하는 성질을 의미한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@app.dependency&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;함수가 종속성으로 작동하게 하며 해당 함수가 다른 경로 작업에서 호출될 때마다 실행되게 한다. 이를 이용해 공통 기능을 중앙에서 관리하고 경로 작업에서 필요한 데이터를 제공하거나 사전 처리를 수행할 수 있다. &lt;/p&gt;
&lt;h4&gt;예제&lt;/h4&gt;
&lt;p&gt;모든 경로에서 공통으로 사용되는 데이터베이스 세션을 생성하는 경우를 가정하자. 아래는 해당 데코레이터를 사용하여 데이터베이스 세션을 경로에 주입하는 예제이다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Depends

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DBSession&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# DBSession 클래스는 데이터베이스 세션을 관리합니다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;DB Connection&quot;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;DB Connection Closed&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 종속성으로 사용될 함수&lt;/span&gt;
&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dependency&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_db_session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    db_session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DBSession&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; db_session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;session
    &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        db_session&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 경로 작업에서 종속성 사용&lt;/span&gt;
&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/items/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_items&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Depends&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;get_db_session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;db_session&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;get&lt;em&gt;db&lt;/em&gt;session 함수가 @app.dependency 데코레이터로 마크되어있다. 이 함수는 호출될 때마다 새로운 DBSession 인스턴스를 생성하고 요청 처리가 완료된 후 세션을 정리한다. &lt;/p&gt;
&lt;p&gt;이 함수는 경로 작업 함수 read_items에 Depends를 사용하여 주입된다. 경로 작업에서는 반환된 데이터베이스 세션을 db라는 변수로 받아 사용할 수 있다. &lt;/p&gt;
&lt;p&gt;Depends를 사용함으로써 FastAPI는 get&lt;em&gt;db&lt;/em&gt;session 함수를 실행하고 그 반환값을 read_items 경로 작업의 매개변수로 전달한다. 이 패턴은 서비스 계층, 데이터 접근 계층 등에서 특히 유용하며 코드 중복을 줄이고 테스트 용이성을 높여준다. &lt;/p&gt;
&lt;p&gt;FastAPI에서 해당 데코레이터를 사용해 정의된 함수는 생성기(generator) 패턴을 사용한다. yield 키워드를 사용해 이 함수는 값을 반환하기 전과 후에 코드를 실행할 수 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;yield를 만날 때까지 함수를 실행한다. 이 때, DBSession 인스턴스가 생성되고, 세션이 초기화된다. &lt;/li&gt;
&lt;li&gt;yield에서 함수는 호출한 측에 db_session.session 값을 넘겨주고 실행을 일시 중지(pause) 한다. &lt;/li&gt;
&lt;li&gt;이제 read_items 경로 함수의 본문을 실행한다. 이 때, db 매개변수로 전달된 값을 사용한다. &lt;/li&gt;
&lt;li&gt;read_items 함수가 완료되고 응답이 반환되면 yield문 이후의 코드가 실행된다. 이 코드에서는 finally 블록이다. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;즉 finally 블록은 http 요청 처리가 완전히 끝나고 응답이 클라이언트에게 전송된 후에 실행된다. 이는 DBSession 객체의 리소스를 안전하게 정리할 수 있게 해준다. yield를 사용하는 이 패턴은 파이썬의 컨텍스트 매니저와 유사한 방식으로 자원의 정리를 보장한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@Query&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@Path&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@Header&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@Cookie&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@Body&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@Form&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;엔드포인트의 각 파라미터를 특정 데이터 위치(쿼리 파라미터, 경로 파라미터, 헤더, 쿠키, 요청 본문, 폼 데이터)에 연결한다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;@Response&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@JSONResponse&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@HTMLResponse&lt;/code&gt;&lt;strong&gt;,&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;@FileResponse&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;특정 응답 클래스를 사용하여 응답을 반환한다. 예를 들어 &lt;code class=&quot;language-text&quot;&gt;@JSONResponse&lt;/code&gt;는 JSON 형식의 응답을 반환할 때 사용된다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[생성기(generate) 패턴]]></title><description><![CDATA[소개 파이썬의 중요한 특징 중 하나로 이터레이터 프로토콜을 사용하여 데이터의 시퀀스를 느긋하게(lazily) 생성하는데 사용된다. 즉, 생성기는 시퀀스의 전체 항목을 메모리에 한 번에 로드하지 않고 반복(iteration…]]></description><link>https://sharknia.github.io/생성기generate-패턴/</link><guid isPermaLink="false">https://sharknia.github.io/생성기generate-패턴/</guid><pubDate>Fri, 03 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소개&lt;/h2&gt;
&lt;p&gt;파이썬의 중요한 특징 중 하나로 이터레이터 프로토콜을 사용하여 데이터의 시퀀스를 느긋하게(lazily) 생성하는데 사용된다. 즉, 생성기는 시퀀스의 전체 항목을 메모리에 한 번에 로드하지 않고 반복(iteration) 할 때마다 하나씩 항목을 생성한다. &lt;/p&gt;
&lt;p&gt;이를 통해 메모리 사용을 줄이고 대용량 또는 무한한 시퀀스를 다룰 수 있다. &lt;/p&gt;
&lt;h2&gt;이터레이터 프로토콜&lt;/h2&gt;
&lt;p&gt;파이썬에서 반복 가능한 객체(컬렉션)를 순회하기 위한 규약이다. 이 프로토콜은 반복(iteration) 동작을 정의하며 일련의 요소들에 대해 순차적으로 접근할 수 있게 해준다. 파이썬의 모든 반복 가능한 객체는 이 이터레이터 프로토콜을 구현해야 하며 이는 주로 두 가지 매직 매소드(magic method)로 구성된다. &lt;/p&gt;
&lt;h4&gt;&lt;code class=&quot;language-text&quot;&gt;__iter__()&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;이터레이터 객체를 반환해야 하며, 보통 self를 반환하여 객체 자체가 이터레이터인 경우를 처리한다. 이 메소드는 for 루프와 같은 반복 연산이 시작될 때 호출된다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;__next__()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;컬렉션의 다음 요소를 반환해야 한다. 만약 더 이상 요소가 없으면 &lt;code class=&quot;language-text&quot;&gt;StopIteration&lt;/code&gt; 예외를 발생시켜 반복을 종료해야 한다. &lt;/p&gt;
&lt;h2&gt;생성기 만드는 방법&lt;/h2&gt;
&lt;h3&gt;생성기 함수 (Generator function)&lt;/h3&gt;
&lt;p&gt;일반 함수와 비슷하지만 &lt;code class=&quot;language-text&quot;&gt;return&lt;/code&gt; 대신 &lt;code class=&quot;language-text&quot;&gt;yield&lt;/code&gt; 문을 사용하여 값을 하나씩 반환한다. &lt;code class=&quot;language-text&quot;&gt;yield&lt;/code&gt; 를 사용하면 함수는 해당 상태에서 실행을 일시 정지하고 다음 값이 요청될 때까지 대기 상태가 된다. &lt;/p&gt;
&lt;h3&gt;생성기 표현식 (Generator expression)&lt;/h3&gt;
&lt;p&gt;리스트 컴프리헨션과 유사하지만 괄호를 사용하여 정의한다. 이 방식은 단순한 경우에 대한 생성기를 간결하게 작성할 수 있게 해준다. &lt;/p&gt;
&lt;h2&gt;예제&lt;/h2&gt;
&lt;h3&gt;생성기 함수 예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;countdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Starting to count from&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;yield&lt;/span&gt; n
        n &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Done!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 생성기 객체를 생성&lt;/span&gt;
cd &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; countdown&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 생성기를 사용&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; count &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; cd&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드를 실행하면 3, 2, 1이 출력되고 각 숫자 사이에 다른 코드를 실행할 수 있는 기회가 주어진다. 각 yield 문마다 함수의 상태는 일시 중단되고 다음 반복에서 계속된다. &lt;/p&gt;
&lt;h3&gt;생성기 표현식 예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;squares &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;x &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 생성기를 사용&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; square &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; squares&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;square&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드는 0부터 9까지의 숫자에 대한 제곱을 출력한다. 반복(iteration)할 때마다 다음 제곱값이 생성되고 모든 값이 한 번에 메모리에 저장되지 않는다. &lt;/p&gt;
&lt;h2&gt;yield&lt;/h2&gt;
&lt;p&gt;yield는 함수가 값을 반환(return)하면서도 그 상태를 기억하고 일시 중지(pause)되는 것을 가능하게 한다. 이는 함수의 실행을 중단시키지만 함수의 로컬 변수와 실행 상태가 유지되어 나중에 이 함수가 다시 호출될 때 이전 상태에서부터 실행을 재개할 수 있다. &lt;/p&gt;
&lt;p&gt;일반적인 return은 함수의 실행을 완전히 종료하고 해당 함수의 모든 상태(로컬 변수, 실행 컨텍스트)를 버리지만 yeild는 함수가 여전히 살아있다는 점에서 return과 다르다. yeild를 통해 반환된 함수(즉 생성기)는 &lt;code class=&quot;language-text&quot;&gt;__next__()&lt;/code&gt; 메소드를 호출함으로써 (또는 &lt;code class=&quot;language-text&quot;&gt;next()&lt;/code&gt; 함수를 사용하여) 다시 실행될 수 있으며, yield문 바로 다음부터 실행이 이어진다. &lt;/p&gt;
&lt;h2&gt;이터러블(iterable) 객체&lt;/h2&gt;
&lt;h3&gt;소개&lt;/h3&gt;
&lt;p&gt;멤버를 한 번에 하나씩 반환할 수 있는 객체로, 파이썬에선 주로 순회 가능한 모든 객체를 의미한다. 이터러블 객체는 for 루프와 같은 반복문을 사용해 순회할 수 있으며 이는 그 객체가 반복 가능한(iterable) 인터페이스를 구현하고 있기 때문이다. &lt;/p&gt;
&lt;p&gt;이터러블 객체가 되기 위해서는 객체 내에 &lt;code class=&quot;language-text&quot;&gt;__iterm__()&lt;/code&gt; 메소드를 구현해야 한다. 이 메소드는 이터레이터를 반환하고 이터레이터는 &lt;code class=&quot;language-text&quot;&gt;__next__()&lt;/code&gt; 메소드를 구현하여 순차적으로 값을 반환할 수 있어야 한다. &lt;code class=&quot;language-text&quot;&gt;topIteration&lt;/code&gt; 예외는 이터레이터가 더 이상 반환할 값이 없을 때 발생시켜 반복이 끝났음을 알린다.  &lt;/p&gt;
&lt;h3&gt;파이썬의 이터러블 객체&lt;/h3&gt;
&lt;p&gt;리스트, 튜플, 문자열, 딕셔너리, 집합 등이 있다. 또한 파일(file) 객체도 이러터블하며 파일의 각 줄을 순회할 수 있다. &lt;/p&gt;
&lt;h3&gt;예제&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;my_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 리스트는 이터러블 객체입니다.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; my_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 1, 2, 3, 4가 순차적으로 출력됩니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;직접 이터러블 객체를 만들고 싶다면 &lt;code class=&quot;language-text&quot;&gt;__iter__()&lt;/code&gt; 메소드를 포함하는 클래스를 정의할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; low&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; high&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; low
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;high &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; high

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__iter__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self  &lt;span class=&quot;token comment&quot;&gt;# self.__next__()를 호출할 이터레이터로 자신을 반환합니다.&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__next__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;high&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current
            self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; num
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt; StopIteration

&lt;span class=&quot;token comment&quot;&gt;# Counter 인스턴스는 이터러블 객체입니다.&lt;/span&gt;
counter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Counter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; num &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; counter&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 1, 2, 3이 출력됩니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위는 사용자 정의 이터러블 객체이다. &lt;/p&gt;
&lt;p&gt;위의 &lt;code class=&quot;language-text&quot;&gt;Counter&lt;/code&gt; 클래스는 &lt;code class=&quot;language-text&quot;&gt;__iter__()&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;__next__()&lt;/code&gt; 메소드를 정의하여 이터러블 인터페이스를 구현한다. &lt;code class=&quot;language-text&quot;&gt;Counter&lt;/code&gt; 인스턴스를 순회할 때마다 &lt;code class=&quot;language-text&quot;&gt;__next__()&lt;/code&gt; 메소드가 호출되어 숫자를 하나씩 반환하고, 더 이상 반환할 숫자가 없을 때 &lt;code class=&quot;language-text&quot;&gt;StopIteration&lt;/code&gt; 예외가 발생한다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI]]></title><description><![CDATA[특징 및 장점 타입 힌트를 활용한 API 선언 Python 3.6 이상의 타입 힌트를 활용하여 API 매개변수 및 응답 모델을 선언한다. 이를 통해 데이터 검증, 직렬화, 문서화를 자동화한다. 이러한 방식은 깔끔한 코드 작성과 함께 명확한 API…]]></description><link>https://sharknia.github.io/FastAPI/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI/</guid><pubDate>Thu, 02 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;특징 및 장점&lt;/h2&gt;
&lt;h3&gt;타입 힌트를 활용한 API 선언&lt;/h3&gt;
&lt;p&gt;Python 3.6 이상의 타입 힌트를 활용하여 API 매개변수 및 응답 모델을 선언한다. 이를 통해 데이터 검증, 직렬화, 문서화를 자동화한다. 이러한 방식은 깔끔한 코드 작성과 함께 명확한 API 명세를 제공한다. &lt;/p&gt;
&lt;h3&gt;속도&lt;/h3&gt;
&lt;p&gt;Starlette(ASGI 기반) 및 Pydanic의 결합으로 다른 파이썬 프레임워크에 비해 월등히 높은 성능을 자랑한다. &lt;/p&gt;
&lt;h3&gt;자동화된 문서&lt;/h3&gt;
&lt;p&gt;타입 힌트와 함께 추가된 FateAPI 데코레이터를 사용하여 자동으로 실시간 API 문서(Swagger UI 및 ReCod)를 생성한다. &lt;/p&gt;
&lt;h3&gt;데이터 검증&lt;/h3&gt;
&lt;p&gt;Pydantic을 이용하여 입력 데이터의 유효성을 자동으로 검사하고 오류에 대한 명확한 정보를 반환한다. 유효하지 않은 데이터에 대한 명확하고 읽기 쉬운 오류 메시지를 자동으로 제공한다. &lt;/p&gt;
&lt;h3&gt;비동기 지원&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;async/await&lt;/code&gt; 문법을 사용하여 DB 작업, 파일 작업 및 네트워크 작업 등의 비동기 코드를 쉽게 통합할 수 있다. &lt;/p&gt;
&lt;h3&gt;보안 기능&lt;/h3&gt;
&lt;p&gt;OAuth2, 비밀번호 해싱, JWT 토큰 생성 및 검증, CORS 등 웹 API 보안에 필요한 기능들이 아웃 오브 더 박스에서 제공된다. &lt;/p&gt;
&lt;h3&gt;확장성&lt;/h3&gt;
&lt;p&gt;사용자의 요구에 따라 쉽게 확장할 수 있으며 다양한 서드파티 라이브러리와 통합이 용이하다. &lt;/p&gt;
&lt;h3&gt;의존성 주입 시스템&lt;/h3&gt;
&lt;p&gt;요청 처리 함수의 매개변수로 의존성을 선언하면 이를 자동으로 처리하고 제공한다. 이를 통해 공통적인 기능(데이터베이스 세션, 토큰 검증 등)을 재사용할 수 있다. &lt;/p&gt;
&lt;h2&gt;다른 웹 프레임워크와의 비교&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Flask : 가볍고 간단하며 확장 가능하다. 하지만 기본적으로 동기식이며 ASGI를 사용한 비동기 처리를 지원하지 않는다. 데이터 검증이나 자동 문서화 같은 기능을 위해서는 추가 확장 또는 라이브러리가 필요하다. &lt;/li&gt;
&lt;li&gt;Django : 많은 기능(관리자 인터페이스, ORM, 인증..)등이 내장되어 있다. 큰 커뮤니티와 문서화가 잘 되어있다. 그렇지만 무거울 수 있으며 프로젝트의 구조나 방식이 명확하게 정해져있어 높은 수준의 커스터마이제이션을 원하는 개발자는 제약이 될 수 있다. 기본적으로 동기식이다.&lt;/li&gt;
&lt;li&gt;Tornado : 비동기 네트워크 라이브러로 시작하여 웹 프레임워크로 발전했다. WenSocket과 같은 비동기 작업에 적합하다. 다만 최신 ASGI 프레임워크보다는 성능면에서 뒤쳐질 수 있다. 자동 문서화나 타입 힌트 기반의 데이터 검증과 같은 기능이 없다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;단점&lt;/h2&gt;
&lt;h3&gt;상대적으로 작은 커뮤니티의 크기&lt;/h3&gt;
&lt;p&gt;Flask나 Django처럼 오랜 기간 사용된 프레임워크에 비해 커뮤니티가 상대적으로 작아 확장 기능, 플러그인, 해결책을 찾는데 어려움을 겪을 수 있다. &lt;/p&gt;
&lt;h3&gt;기술 부채&lt;/h3&gt;
&lt;p&gt;비교적 최근에 개발되어 예전의 기존 시스템과 통합하거나 레거시 코드와 병합할 때 어려움을 겪을 수 있다. &lt;/p&gt;
&lt;h3&gt;학습 곡선&lt;/h3&gt;
&lt;p&gt;타입 힌트, Pydantix, ASGI 등 다양한 기능들이 초기 사용자에게는 약간의 학습 곡선을 만들 수 있다. 특히 비동기 프로그래밍에 익숙하지 않다면 어려움을 겪을 수 있다. &lt;/p&gt;
&lt;h3&gt;완전한 ORM의 부재&lt;/h3&gt;
&lt;p&gt;데이터베이스 통합을 위해 SQLAlchemy나 Tortoise-ORM과 같은 외부 라이브러리를 사용한다. 프레임워크 자체의 통합된 ORM을 제공하지 않는다. &lt;/p&gt;
&lt;h3&gt;제한된 동기 지원&lt;/h3&gt;
&lt;p&gt;주로 비동기 환경을 위해 설계되어 동기 코드를 사용하는 라이브러리 또는 시스템과 통합할 때 추가적인 노력이 필요할 수 있다. &lt;/p&gt;
&lt;h2&gt;WSGI와 ASGI&lt;/h2&gt;
&lt;p&gt;WSGI와 ASGI는 모두 웹서버와 파이썬 웹 어플리케이션 사이의 표준 인터페이스를 정의하는 규격이다. &lt;/p&gt;
&lt;h3&gt;WSGI (Web Server Gateway Interface)&lt;/h3&gt;
&lt;p&gt;동기적인 웹 어플리케이션을 위한 표준 인터페이스를 제공하며, 전통적인 웹 어플리케이션 개발에 널리 사용된다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;목적 : 웹서버와 파이썬 웹 어플리케이션 혹은 프레임워크가 서로 통신할 수 있도록 하는 간단한 호출 규약을 정의한다. &lt;/li&gt;
&lt;li&gt;동작 방식 : 동기적이며, 한 번에 하나의 요청만 처리할 수 있다. 이로 인해 여러 동시 요청을 처리하기 위해서는 다중 프로세스나 다중 스레드 방식을 사용해야 한다. &lt;/li&gt;
&lt;li&gt;대표적인 서버 및 미들웨어 : uWSGI, gunicorn, mod_wsgi&lt;/li&gt;
&lt;li&gt;사용되는 프레임워크 : Flask, Django 등 대부분의 전통적인 파이썬 웹 프레임워크&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ASGI (Asynchronous Server Gateway Interface)&lt;/h3&gt;
&lt;p&gt;비동기 웹 어플리케이션과 다양한 웹 프로토콜을 위한 확장된 인터페이스를 제공한다. 최근의 웹 트렌드에 맞게 설계되었다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;목적 : WSGI의 확장 버전으로 웹소켓과 같은 비동기 프로토콜의 지원과 더 빠른 성능을 목표로 한다. &lt;/li&gt;
&lt;li&gt;동작 방식 : 비동기이며, 이를 통해 한 번에 여러 요청을 처리할 수 있다. 주로 &lt;code class=&quot;language-text&quot;&gt;async/awit&lt;/code&gt; 구문을 활용한 비동기 프로그래밍을 가능하게 한다. &lt;/li&gt;
&lt;li&gt;대표적인 서버 : Daphne, Uvicorn, Hypercorn 등&lt;/li&gt;
&lt;li&gt;사용되는 프레임 워크 : FastAPI, Starlette 등&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;FastAPI의 작동 플로우&lt;/h2&gt;
&lt;h3&gt;1. API 선언&lt;/h3&gt;
&lt;p&gt;API 엔드포인트를 선언하기 위해 파이썬 함수를 사용한다. 타입 힌트와 함께 Pydantic 모델을 사용하여 요청 및 응답 객체를 선언한다. &lt;/p&gt;
&lt;p&gt;이렇게 선언된 엔드포인트는 HTTP 메서드에 맞게 데코레이터로 데코레이트 된다. &lt;/p&gt;
&lt;h3&gt;2. 데이터 검증 및 직렬화&lt;/h3&gt;
&lt;p&gt;요청이 들어오면 Pydantic 모델을 사용하여 들어온 데이터를 검증한다. &lt;/p&gt;
&lt;p&gt;유효하지 않은 요청 데이터가 감지되면 자동으로 오류 응답을 생성하여 클라이언트에 반환한다. &lt;/p&gt;
&lt;h3&gt;3. 의존성 해결&lt;/h3&gt;
&lt;p&gt;각 엔드포인트에 선언된 의존성(예: 데이터베이스 세션, 인증 토큰 확인)을 자동으로 해결한다. &lt;/p&gt;
&lt;p&gt;이를 통해 반복적인 작업 없이 재사용 가능한 컴포넌트들을 생성할 수 있다. &lt;/p&gt;
&lt;h3&gt;4. 요청 처리&lt;/h3&gt;
&lt;p&gt;데이터 검증 및 의존성 해결이 완료되면 해당 엔드포인트 함수를 호출하고 처리한다. &lt;/p&gt;
&lt;p&gt;이 때, 비동기 함수(&lt;code class=&quot;language-text&quot;&gt;async def&lt;/code&gt;)를 사용하면 비동기 방식으로 요청을 처리할 수 있다. &lt;/p&gt;
&lt;h3&gt;5. 응답 생성&lt;/h3&gt;
&lt;p&gt;엔드포인트 함수의 반환값은 자동으로 JSON으로 직렬화된다. &lt;/p&gt;
&lt;p&gt;반환값이 Pydantic 모델 인스턴스라면 해당 모델을 사용하여 데이터 직렬화 및 검증이 이루어진다. &lt;/p&gt;
&lt;h3&gt;6. 자동 문서화&lt;/h3&gt;
&lt;p&gt;타입 힌트와 함께 선언된 엔드포인트를 기반으로 자동으로 API 문서를 생성한다. &lt;/p&gt;
&lt;p&gt;이 때 Swagger UI 및 ReDoc와 같은 도구를 사용하여 실시간 API 문서를 제공한다. &lt;/p&gt;
&lt;h3&gt;7. 응답 반환&lt;/h3&gt;
&lt;p&gt;최종적으로 처리된 응답이 클라이언트에 반환된다. 이 때 HTTP 상태 코드, 헤더, 쿠키 등도 함께 설정할 수 있다. &lt;/p&gt;
&lt;h2&gt;Uvicorn&lt;/h2&gt;
&lt;p&gt;Uvicorn은 ASGI(Asynchronous Server Gateway Interface)를 기반으로 한 빠르고 경량화된 웹 서버이다. Uvicorn은 주로 파이썬으로 작성된 비동기 웹 애플리케이션과 프레임워크의 서빙에 사용된다. &lt;/p&gt;
&lt;h3&gt;특징 및 장점&lt;/h3&gt;
&lt;h4&gt;비동기&lt;/h4&gt;
&lt;p&gt;Uvicorn은 비동기 I/O를 지원하며 이를 통해 동시에 여러 요청을 효율적으로 처리할 수 있다. 파이썬 3.6 이상에서 &lt;code class=&quot;language-text&quot;&gt;async/await&lt;/code&gt; 문법을 활용한다. &lt;/p&gt;
&lt;h4&gt;성능&lt;/h4&gt;
&lt;p&gt;uvloop와 httptools를 사용하여 성능을 최적화한다. uvloop는 파이썬의 asyncio 모듈을 대체하는 빠른 이벤트 루프 구현이며 httptools는 http 파싱을 위한 라이브러리이다. &lt;/p&gt;
&lt;h4&gt;ASGI 호환성&lt;/h4&gt;
&lt;p&gt;ASGI 3.0 사양을 구현하여 다양한 ASGI 호환 웹 애플리케이션 및 프레임워크와 함께 작동할 수 있다. &lt;/p&gt;
&lt;h4&gt;단순성&lt;/h4&gt;
&lt;p&gt;코드 기반이 단순하며 웹 서버의 기본 기능에 집중한다. 보다 복잡한 배포나 튜닝이 필요한 경우 Uvicorn을 Gunicorn과 같은 다른 웹 서버 래퍼와 함께 사용하는 것이 일반적이다. &lt;/p&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;h4&gt;기능 제한&lt;/h4&gt;
&lt;p&gt;핵심적인 웹 서버 기능에 중점을 둬 복잡한 배포 또는 다양한 설정, 최적화 옵션과 같은 기능이 제한적이다. &lt;/p&gt;
&lt;h4&gt;비동기 환경의 복잡성&lt;/h4&gt;
&lt;p&gt;비동기 애플리케이션을 위한 웹 서버로 설계되어 비동기 코드와 동기 코드의 혼합 사용, 특히 데이터베이스와의 연결과 같은 경우 문제가 발생할 수 있다. 모든 코드를 비동기적으로 작성하거나 동기 코드가 올바르게 스레드 또는 프로세스에서 실행되도록 관리되어야 한다.&lt;/p&gt;
&lt;h2&gt;FastAPI 시작하기&lt;/h2&gt;
&lt;h3&gt;1. 설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;pip install fastapi&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; uvicorn&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;2. 기본 애플리케이션 생성&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# main.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; fastapi &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FastAPI

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FastAPI&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;World&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;3. 애플리케이션 실행&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;uvicorn main:app &lt;span class=&quot;token parameter variable&quot;&gt;--reload&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;—reload&lt;/code&gt; : 개발 중 코드 변경을 자동으로 반영하기 위해 사용한다. &lt;/p&gt;
&lt;h3&gt;4. 자동 문서화&lt;/h3&gt;
&lt;p&gt;FastAPI는 자동으로 API 문서를 생성해준다. 애플리케이션을 실행 후 브라우저에서 다음 URL을 방문하여 문서를 확인할 수 있다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Swagger UI: &lt;code class=&quot;language-text&quot;&gt;http://127.0.0.1:8000/docs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ReDoc: &lt;code class=&quot;language-text&quot;&gt;http://127.0.0.1:8000/redoc&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Pydantic 모델]]></title><description><![CDATA[은 파이썬의 타입 힌트 시스템을 기반으로 데이터 검증 및 설정 관리를 제공하는 라이브러리이다. 특히 FastAPI에서는 Pydantic…]]></description><link>https://sharknia.github.io/Pydantic-모델/</link><guid isPermaLink="false">https://sharknia.github.io/Pydantic-모델/</guid><pubDate>Thu, 02 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Pydantic&lt;/code&gt; 은 파이썬의 타입 힌트 시스템을 기반으로 데이터 검증 및 설정 관리를 제공하는 라이브러리이다. 특히 FastAPI에서는 Pydantic을 주로 요청 및 응답 객체의 데이터 검증, 직렬화 및 역직렬화에 사용한다. &lt;/p&gt;
&lt;h2&gt;주요 특징&lt;/h2&gt;
&lt;h3&gt;타입 힌트 기반&lt;/h3&gt;
&lt;p&gt;Pydantic 모델은 파이썬의 타입 힌트를 활용하여 선언된다. 이를 통해 코드 내에서 명확하게 데이터의 구조와 타입을 지정할 수 있다. &lt;/p&gt;
&lt;h3&gt;자동 데이터 검증&lt;/h3&gt;
&lt;p&gt;모델에 데이터를 할당할 때에 자동으로 데이터 검증이 수행된다. 유효하지 않은 데이터는 오류를 발생시킨다. &lt;/p&gt;
&lt;h3&gt;데이터 변환&lt;/h3&gt;
&lt;p&gt;입력 데이터를 적절한 타입으로 자동 변환한다. 예를 들어 문자열로 들어온 숫자 데이터를 정수로 변환할 수 있다. &lt;/p&gt;
&lt;h3&gt;기본값 및 유효성 검사&lt;/h3&gt;
&lt;p&gt;모델 필드에 기본값을 제공하거나 유효성 검사 규칙을 추가할 수 있다. &lt;/p&gt;
&lt;h3&gt;JSON 직렬화 및 역직렬화&lt;/h3&gt;
&lt;p&gt;자동으로 JSON 형태로 직렬화되며 JSON 데이터를 역직렬화 하여 모델 객체로 변환할 수 있다. &lt;/p&gt;
&lt;h2&gt;예시&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pydantic &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; BaseModel&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ValidationError

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BaseModel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;
    age&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
    email&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 사용 예&lt;/span&gt;
user_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;John Doe&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;johndoe@example.com&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; User&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;user_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 모델 객체를 JSON 형태로 출력&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    invalid_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;invalid&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;invalid&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;email&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;johndoe&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    User&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;invalid_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; ValidationError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 데이터 검증 오류 출력&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[DynamoDB의 동시성 제어(Concurrency Control)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/DynamoDB의-동시성-제어Concurrency-Control/</link><guid isPermaLink="false">https://sharknia.github.io/DynamoDB의-동시성-제어Concurrency-Control/</guid><pubDate>Wed, 01 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;데이터베이스의 동시성 제어란?&lt;/h2&gt;
&lt;p&gt;여러 트랜잭션 또는 연산이 동시에 수행될 때 데이터의 일관성을 유지하고 충돌을 방지하기 위한 매커니즘을 말한다. 잘못된 동시성 제어는 데이터의 무결성을 해치고 시스템의 성능을 저하시키며 예측할 수 없는 결과를 초래할 수 있다. &lt;/p&gt;
&lt;h3&gt;동시성 제어의 주요 개념&lt;/h3&gt;
&lt;h4&gt;락 (Locking)&lt;/h4&gt;
&lt;p&gt;데이터베이스 항목에 대한 동시 액세스를 제어하기 위해 사용된다. 트랜잭션은 데이터에 액세스 하기 전에 락을 획득해야 하며, 작업이 완료되면 락을 해제해야 한다. &lt;/p&gt;
&lt;p&gt;일반적으로 비관적 잠금과 낙관적 잠금의 두 형태로 구분된다. &lt;/p&gt;
&lt;h4&gt;트랜잭션 (Transaction)&lt;/h4&gt;
&lt;p&gt;일련의 데이터베이스 작업을 하나의 논리적 단위로 묶는 것이다. 트랜잭션은 모두 성공하거나 모두 실패해야 하며, 중단 상태에서 중단되어서는 안된다. &lt;/p&gt;
&lt;h4&gt;일관성 (Consistency)&lt;/h4&gt;
&lt;p&gt;데이터베이스의 모든 트랜잭션이 데이터를 올바른 상태에서 유지하도록 보장하는 속성이다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;강력한 일관성 (Strong Consistency)&lt;/p&gt;
&lt;p&gt;데이터베이스의 모든 노드가 항상 동일한 데이터를 보게 됨을 보장한다. &lt;/p&gt;
&lt;p&gt;데이터베이스에 쓰기 작업이 수행된 후 모든 후속 읽기 작업이 그 쓰기 작업의 결과를 반영해야 한다. &lt;/p&gt;
&lt;p&gt;실시간 시스템, 금융 시스템 또는 기타 높은 무결성이 필요한 시스템에서 중요하다. &lt;/p&gt;
&lt;p&gt;일반적으로 높은 네트워크 지연과 함께 오며, 시스템의 전반적인 성능과 확장성에 영향을 미칠 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;최종 일관성 (Eventual Consistency)&lt;/p&gt;
&lt;p&gt;시간이 지나면서 데이터베이스의 모든 노드가 동일한 데이터를 볼 수 있게 됨을 보장한다. &lt;/p&gt;
&lt;p&gt;쓰기 작업이 수행된 후 일정 시간이 지나면 모든 읽기 작업이 쓰기 작업의 결과를 반영한다. &lt;/p&gt;
&lt;p&gt;일반적으로 높은 확장성과 낮은 지연 시간을 제공하며 분산 시스템에서 높은 성능을 달성하는데 유리하다. &lt;/p&gt;
&lt;p&gt;일시적인 데이터 불일치를 허용하므로 애플리케이션의 로직이 이러한 불일치를 처리할 수 있도록 설계되어야 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;분리성 (Isolation)&lt;/h4&gt;
&lt;p&gt;각 트랜잭션이 독립적으로 실행되도록 보장하는 속성이다. 트랜잭션들 사이에 어떤 중간 상태도 다른 트랜잭션에게 보여져셔는 안된다. &lt;/p&gt;
&lt;h4&gt;지속성 (Durability)&lt;/h4&gt;
&lt;p&gt;트랜잭션이 성공적으로 완료된 후에는 시스템의 어떤 실패에도 영향 받지 않고 데이터베이스 변경이 유지되도록 보장하는 속성이다. &lt;/p&gt;
&lt;h2&gt;DynamoDB의 동시성 제어 매커니즘&lt;/h2&gt;
&lt;p&gt;DynamoDB는 동시성 제어와 데이터 일관성을 관리하기 위한 여러 매커니즘을 제공한다. &lt;/p&gt;
&lt;h3&gt;조건식 사용 (Conditional Writes)&lt;/h3&gt;
&lt;p&gt;항목을 작성하거나 업데이트 할 때 조건식을 사용하여 해당 항목이 변경되지 않았음을 확인할 수 있다. 이것은 항목이 기존에 있던 상태에 따라 연산을 수행하도록 할 때 유용하다. 예를 들어 항목이 특정값에 해당하지 않으면 업데이트 하지 않도록 요청할 수 있다. &lt;/p&gt;
&lt;h3&gt;컨설턴트 (Consistent Reads)&lt;/h3&gt;
&lt;p&gt;기본적으로 최종적으로 일관성 있는 읽기를 제공한다. 이것은 약간의 지연을 허용하면서 빠른 응답 시간을 제공한다. 하지만 바로 이전의 쓰기 작업 이후에 항목의 최신 상태를 확인하려면 Strongly Consistent Read 옵션을 사용할 수 있다. 이 옵션은 데이터의 최신 상태를 보장한다.&lt;/p&gt;
&lt;hr style=&quot;border: none; height: 1px; background-color: #e0e0e0; margin: 16px 0;&quot; /&gt;
하지만 Dynamo DB에서 동시성은 주로 다음의 두 가지 방법을 사용하여 수행된다. 
&lt;h2&gt;낙관적 잠금 (Optimistic Locking)&lt;/h2&gt;
&lt;p&gt;낙관적 잠금은 클라이언트가 업데이트(또는 삭제) 하려는 항목이 DynamoDB의 항목과 동일한지 확인하는 전략이다. 이 전략을 사용하면 데이터베이스 쓰기는 다른 사용자의 쓰기에 의해 덮여지는 일을 방지할 수 있다. &lt;/p&gt;
&lt;p&gt;이 전략은 DynamoDB의 테이블에 &lt;code class=&quot;language-text&quot;&gt;버전 번호&lt;/code&gt; 라는 속성을 사용하여 구현된다. 클라이언트가 데이터 항목을 수정할 때 클라이언트 측의 버전 번호가 테이블 항목의 버전 번호와 동일해야 한다. 버전 번호가 동일하면 다른 사용자가 레코드를 변경하지 않았음을 의미하며 쓰기를 수행할 수 있다. &lt;/p&gt;
&lt;p&gt;그러나 버전 번호가 다르면 다른 사용자가 이미 레코드를 업데이트 했을 가능성이 있으며, 이 경우 DynamoDB는 &lt;code class=&quot;language-text&quot;&gt;ConditionalCheckFailedException&lt;/code&gt; 예외를 발생시켜 쓰기를 거부한다. &lt;/p&gt;
&lt;p&gt;낙관적 잠금을 사용하기 위해서는 코드에서 &lt;code class=&quot;language-text&quot;&gt;ConditionalCheckFailedException&lt;/code&gt; 을 포함하여 &lt;code class=&quot;language-text&quot;&gt;put&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;delete&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 작업에 대한 조건부 쓰기를 구현해야 한다. &lt;/p&gt;
&lt;h2&gt;비관적 잠금 (Pessimistic Locking)&lt;/h2&gt;
&lt;p&gt;비관적 잠금은 동시 업데이트를 방지하기 위해 사용하는 또 다른 전략이다. 낙관적 잠금이 버전 번호를 클라이언트에 전송하는 반면, 비관적 잠금은 버전 번호를 유지하지 않고 동시 업데이트를 방지하려고 한다. &lt;/p&gt;
&lt;p&gt;대부분의 데이터베이스 서버는 트랜잭션 시작 시 잠금을 획득하고 트랜잭션이 완료된 후에만 잠금을 해제하지만, DynamoDB는 이를 약간 다르게 처리한다. DynamoDB는 데이터를 잠그지 않고, 대신 트랜잭션을 사용하여 검토 중인 데이터에 대한 다른 스레드의 변경을 식별하며, 변경이 감지되면 DynamoDB는 트랜잭션을 취소하고 오류를 발생시킨다. &lt;/p&gt;
&lt;p&gt;비관적 잠금을 구현하기 위해 &lt;code class=&quot;language-text&quot;&gt;taransacWrite&lt;/code&gt; 라는 메소드를 제공한다. 이를 사용하면 처리 중인 항목을 잠그지 않지만 항목을 모니터링하고, 다른 스레드가 데이터틀 수정하면 전체 트랜잭션이 데이터 변경으로 인해 실패하고 데이터를 롤백한다. &lt;/p&gt;
&lt;h2&gt;RDB 와의 차이점&lt;/h2&gt;
&lt;h3&gt;데이터 모델&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RDB&lt;/p&gt;
&lt;p&gt;관계형 데이터 모델을 사용하여 테이블, 행, 열의 데이터로 형태를 데이터 구조하화며, 테이블 간의 관계를 정의하여 데이터의 무결성을 유지한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DynamoDB&lt;/p&gt;
&lt;p&gt;NoSQL 데이터베이스로 키-값과 문서 데이터 모델을 사용한다. 데이터 무결성 보장을 위해 관계형 데이터베이스와 다른 매커니즘을 사용한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;동시성 제어&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RDB&lt;/p&gt;
&lt;p&gt;트랜잭션을 사용하여 동시성을 제어한다. 트랜잭션을 시작할 때 데이터에 잠금을 걸고, 트랜잭션이 완료될 때까지 잠음을 유지하여 다른 트랜잭션에 의한 동시 수정을 방지한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DynamoDB&lt;/p&gt;
&lt;p&gt;낙관적 잠금과 조건부 업데이트를 사용하여 동시성을 제어하거나 &lt;code class=&quot;language-text&quot;&gt;taransacWrite&lt;/code&gt; API를 사용하여 트랜잭션을 지원한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;일관성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RDB&lt;/p&gt;
&lt;p&gt;보다 강력한 일관성(Strong Consistency)을 지원한다. 트랜잭션의 모든 변경이 즉시 모든 다른 트랜잭션에 표시된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DynamoDB&lt;/p&gt;
&lt;p&gt;기본적으로 최종 일관성(Eventual Consistency)을 제공한다. 필요한 경우 강력한 일관성(Strong Consistency)을 요청할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;분리성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RDB&lt;/p&gt;
&lt;p&gt;트랜잭션의 분리성을 보장하여 각 트랜잭션이 독립적으로 실행되도록 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DynamoDB&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;TransactWrite&lt;/code&gt; API를 통해 여러 항목에 대한 트랜잭션을 지원하여 분리성을 제공한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;지속성&lt;/h3&gt;
&lt;p&gt;두 DB 모두 트랜잭션이 성공적으로 완료된 후에는 시스템의 어떤 실패에도 영향을 받지 않고 데이터베이셔 변경이 유지되도록 지속성을 보장한다. &lt;/p&gt;
&lt;h2&gt;참고 문헌&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://dynobase.dev/dynamodb-locking/&quot;&gt;https://dynobase.dev/dynamodb-locking/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Poetry]]></title><description><![CDATA[개요 Poetry는 파이썬 프로젝트의 의존성 관리와 패키징을 도와주는 도구이다. Poetry…]]></description><link>https://sharknia.github.io/Poetry/</link><guid isPermaLink="false">https://sharknia.github.io/Poetry/</guid><pubDate>Tue, 31 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;Poetry는 파이썬 프로젝트의 의존성 관리와 패키징을 도와주는 도구이다. Poetry의 주요 목표는 프로젝트의 설정과 관리를 단순화하고, 이를 위한 통합된 솔루션을 제공하는 것이다. &lt;/p&gt;
&lt;p&gt;파이썬 개발자에게 일관된 개발 환경을 제공하며, 의존성 해결, 버전 관리, 패키징 배포와 같은 일반적인 작업을 처리하는 통합된 도구를 제공하여 파이썬 프로젝트의 생명 주기를 관리하는데 필요한 모든 기능을 제공한다. &lt;/p&gt;
&lt;p&gt;기존의 requirements.txt, venv, setup.py, wheel, twine 등을 모두 통합해 하나의 인터페이스와 프로세스로 간소화하여 제공한다. &lt;/p&gt;
&lt;h2&gt;기능과 이점&lt;/h2&gt;
&lt;h3&gt;의존성 관리&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt; 파일을 사용하여 프로젝트의 의존성을 선언적으로 정의하고 관리한다. &lt;/p&gt;
&lt;p&gt;의존성이 충돌하지 않고 서로 호환되는지 자동으로 확인하여 프로젝트의 의존성 그래프를 안정적으로 유지한다. &lt;/p&gt;
&lt;h3&gt;패키징&lt;/h3&gt;
&lt;p&gt;프로젝트를 패키지화하고 배포할 수 있는 도구를 제공한다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt; 및 &lt;code class=&quot;language-text&quot;&gt;publish&lt;/code&gt; 명령을 사용하여 프로젝트를 빌드하고 PyPi와 같은 패키지 저장소에 배포할 수 있다. &lt;/p&gt;
&lt;h3&gt;가상 환경 관리&lt;/h3&gt;
&lt;p&gt;프로젝트에 대한 가상 환경을 자동으로 생성하고 관리하여 프로젝트의 의존성이 시스템 전역의 Python 환경으로부터 격리되도록 한다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;poetry shell&lt;/code&gt; 과 &lt;code class=&quot;language-text&quot;&gt;poetry run&lt;/code&gt; 명령어를 사용하여 가상 환경 내에서 명령을 실행할 수 있다. &lt;/p&gt;
&lt;h3&gt;버전 관리&lt;/h3&gt;
&lt;p&gt;프로젝트의 버전을 쉽게 관리할 수 있도록 돕는다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;version&lt;/code&gt; 명령어를 사용하여 프로젝트의 버전을 업데이트 할 수 있다. &lt;/p&gt;
&lt;h3&gt;프로젝트 생성과 설정&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;new&lt;/code&gt; 명령을 사용하여 프로젝트를 생성하고 기본 구조와 설정 파일을 자동으로 생성한다. &lt;/p&gt;
&lt;h3&gt;플러그인 시스템&lt;/h3&gt;
&lt;p&gt;사용자 정의 플러그인을 지원하여 기능을 확장하고 사용자 정의 작업을 수행할 수 있다. &lt;/p&gt;
&lt;h3&gt;다양한 설정 옵션&lt;/h3&gt;
&lt;p&gt;다양한 설정 옵션을 제공하여 프로젝트의 특별한 요구 사항에 따라 도구의 동작을 사용자 정의할 수 있다.  &lt;/p&gt;
&lt;h2&gt;requirements.txt 와의 비교&lt;/h2&gt;
&lt;p&gt;requirements.txt는 파이썬 프로젝트에서 아요되는 의존성과 그 버전을 나열하는 텍스트 파일이다. 프로젝트에 필요한 모든 패키지와 버전을 명시하며, 이를 통해 다른 개발자가 다른 환경에서 동일한 의존성을 쉽게 유지할 수 있다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;requirements.txt는 단순히 프로젝트의 의존성과 해당 버전을 나열하는 데 사용되며, 이를 넘어서는 확장성을 제공하지 않는다.&lt;/li&gt;
&lt;li&gt;의존성 간의 충돌을 자동으로 해결하지 않는다. &lt;/li&gt;
&lt;li&gt;가상 환경을 자동으로 생성하거나 관리하지 않는다. &lt;/li&gt;
&lt;li&gt;프로젝트 패키징, 배포 기능을 제공하지 않는다. &lt;/li&gt;
&lt;li&gt;프로젝트의 구조나 설정에 대한 정보를 제공하지 않는다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;venv와의 비교&lt;/h2&gt;
&lt;p&gt;venv는 파이썬 가상환경을 생성하고 관리하는 기본 도구이다. venv의 주요 목적은 프로젝트의 의존성을 시스템 전역의 파이썬 환경으로부터 격리하는 것이다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;venv는 의존성을 관리하지 않는다. 가상 환경 내에서 pip를 사용하여 수동으로 패키지를 설치하고 관리해야 한다. &lt;/li&gt;
&lt;li&gt;프로젝트 패키징, 배포 기능을 제공하지 않는다. &lt;/li&gt;
&lt;li&gt;프로젝트의 구조나 설정에 대한 정보를 제공하지 않는다. &lt;/li&gt;
&lt;li&gt;poetry는 install 명령을 실행할 때에 자동으로 가상환경을 생성하지만, venv는 별도의 명령어를 사용해 가상환경을 생성해야한다. &lt;/li&gt;
&lt;li&gt;기본적인 명령줄 인터페이스만 제공한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;단점&lt;/h2&gt;
&lt;h3&gt;학습곡선&lt;/h3&gt;
&lt;p&gt;그 자체로 너무 많은 기능이 들어있기 때문에 기존 도구에들에 익숙한 개발자들에게는 적응 시간이 필요할 수 있다. &lt;/p&gt;
&lt;h3&gt;호환성 문제&lt;/h3&gt;
&lt;p&gt;일부 레거시 프로젝트나 특정 시스템에서는 호환성 문제가 발생할 수 있다. &lt;/p&gt;
&lt;h3&gt;성능&lt;/h3&gt;
&lt;p&gt;큰 프로젝트에서 종속성의 해결이 다소 느릴 수 있다. &lt;/p&gt;
&lt;h3&gt;통합 문제&lt;/h3&gt;
&lt;p&gt;아직 모든 플랫폼이나 서비스에 완벽하게 통합되지 않았을 수 있다. CI/CD 도구와의 통합, 또는 특정 클라우드 서비스와의 통합에서 약간의 설정 작업이 필요할 수 있다. &lt;/p&gt;
&lt;h2&gt;주요 사용법 및 명령어&lt;/h2&gt;
&lt;h3&gt;설치&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-sSL&lt;/span&gt; https://install.python-poetry.org &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; python3 -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;새 프로젝트 시작&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry new project-name&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;기존 프로젝트에서 시작&lt;/h3&gt;
&lt;p&gt;이미 존재하는 프로젝트에서도 poetry를 사용할 수 있다. 프로젝트의 루트 디렉토리에서 다음 명령어를 실행한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;종속성 추가&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; package-name&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;한편 개발중에만 필요한 패키지를 추가하려면 다음을 실행한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; package-name &lt;span class=&quot;token parameter variable&quot;&gt;--dev&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;종속성 제거&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry remove package-name&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;종속성 설치&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pyproject.toml&lt;/code&gt;에 정의된 종속성을 설치하려면 다음 명령어를 실행한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;스크립트 실행&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry run python your_script.py&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;빌드 및 배포&lt;/h3&gt;
&lt;p&gt;프로젝트를 패키징 하려면 다음의 명령어를 실행한다. 이렇게 하면 &lt;code class=&quot;language-text&quot;&gt;dist&lt;/code&gt;  디렉토리에 패키지가 생성된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;가상환경&lt;/h3&gt;
&lt;p&gt;poetry는 자동으로 가상환경을 생성한다. 가상 환경에 들어가기 위해서는 다음의 명령어를 실행한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry shell&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;기능 탐색&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;poetry &lt;span class=&quot;token parameter variable&quot;&gt;--help&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Blue Green Deploy 전략]]></title><description><![CDATA[소개 Blue-Green…]]></description><link>https://sharknia.github.io/Blue-Green-Deploy-전략/</link><guid isPermaLink="false">https://sharknia.github.io/Blue-Green-Deploy-전략/</guid><pubDate>Mon, 30 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소개&lt;/h2&gt;
&lt;p&gt;Blue-Green 배포 전략은 지속적인 통합 및 지속적인 배포 환경에서 자주 사용되는 소프트웨어 배포 패턴 중 하나이다. 이 전략의 주요 목표는 시스템의 중단 없이 안전하게 애플리케이션을 배포하고 업데이트 하는 것이다. &lt;/p&gt;
&lt;h2&gt;핵심 아이디어&lt;/h2&gt;
&lt;h3&gt;두 개의 독립적인 환경&lt;/h3&gt;
&lt;p&gt;Blue와 Green이라는 두 개의 별도의 환경(또는 색상)이 있다. 일반적으로 한 환경(Blue)은 실제 사용자에게 서비스를 제공하는 라이브 환경이며, 다른 환경(Green)은 새 버전의 애플리케이션을 배포하기 위한 준비 환경이다. &lt;/p&gt;
&lt;h3&gt;스위치 오버&lt;/h3&gt;
&lt;p&gt;새 버전의 애플리케이션을 Green 환경에 배포한 후, 모든 테스트와 검증 절차를 거쳐 문제가 없다고 판단되면 트래픽을 Blue 환경에서 Green 환경으로 빠르게 전환(또는 스위치 오버) 한다. 이렇게 하면 실제 사용자는 서비스 중단 없이 새 버전의 어플리케이션을 사용할 수 있다. &lt;/p&gt;
&lt;h3&gt;롤백 용이&lt;/h3&gt;
&lt;p&gt;만약 Green 환경의 새 버전에 문제가 발생하면, 트래픽을 다시 Blue 환경으로 즉시 전환하여 이전 버전의 애플리케이션을 사용하게 할 수 있다. 이는 문제가 발생했을 때 빠르게 롤백하는데 큰 도움이 된다. &lt;/p&gt;
&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;Blue-Green 배포 전략에서는 실제로 “배포” 하는 작업을 여러번 반복하지 않는다. 대신, 두 개의 독립적인 환경을 유지하고 트래픽을 이 두 환경 사이에서 스위칭한다. 이를 구체적으로 설명하면 다음과 같다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;초기 상태&lt;/p&gt;
&lt;p&gt;Blue 환경이 라이브 상태이고 실제 사용자 트래픽을 처리하고 있다고 가정한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;새 버전 배포&lt;/p&gt;
&lt;p&gt;Green 환경에 새로운 버전의 애플리케이션을 배포한다. 이 시점에서 아직 Blue가 여전히 실제 트래픽을 처리하고 있다. Green은 배포 및 테스트 준비 단계에 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;스위칭&lt;/p&gt;
&lt;p&gt;Green 환경에서의 테스트와 검증이 완료되면 트래픽을 Blue에서 Green으로 스위칭한다. 이제 Green이 라이브 상태가 되어 사용자 트래픽을 처리한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;다음 배포&lt;/p&gt;
&lt;p&gt;다음 번 배포 시, Blue 환경을 업데이트하고 검증한 후 트래픽을 다시 Blue로 스위칭한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;장점&lt;/h2&gt;
&lt;h3&gt;빠른 롤백&lt;/h3&gt;
&lt;p&gt;문제가 발생하면 즉시 이전 버전으로 롤백할 수 있다. &lt;/p&gt;
&lt;h3&gt;중단시간 없음&lt;/h3&gt;
&lt;p&gt;사용자에게 서비스 중단 없이 애플리케이션을 배포할 수 있다. &lt;/p&gt;
&lt;h3&gt;통합 테스트&lt;/h3&gt;
&lt;p&gt;Green 환경에서 새 버전의 애플리케이션을 배포하기 전에 광범위한 테스트와 검증을 수행할 수 있다. &lt;/p&gt;
&lt;h2&gt;단점&lt;/h2&gt;
&lt;h3&gt;자원 중복&lt;/h3&gt;
&lt;p&gt;두 개의 독립적인 환경을 유지해야 하므로 추가적인 인프라와 자원이 필요하다. &lt;/p&gt;
&lt;h3&gt;데이터베이스 동기화&lt;/h3&gt;
&lt;p&gt;데이터베이스 스키마나 데이터에 변동이 있는 경우 Blue와 Green 환경 사이의 동기화 문제가 발생할 수 있다. &lt;/p&gt;
&lt;h2&gt;Blue-Green은 테스트 서버일까?&lt;/h2&gt;
&lt;p&gt;배포 과정에서 한 환경이 새 버전의 검증을 위한 임시 테스트 역할을 하게 되는 것은 맞다. 이렇게 설명하면 테스트 서버와 실서버 역할을 그린과 블루가 번갈아가면서 한다고 착각하기 쉽지만 이보다는 둘 다 실서버의 역할을 할 수 있는 독립적인 프로덕션 환경임을 알아야 한다. 몇 가지 중요한 차이점이 있다. &lt;/p&gt;
&lt;h3&gt;프로덕션 준비&lt;/h3&gt;
&lt;p&gt;Blue와 Green 둘 다 프로덕션 트래픽을 처리할 준비가 되어있다. 그러나 일반적인 테스트 서버는 프로덕션 수준의 리소스나 성능을 가지고 있지 않을 수 있다. &lt;/p&gt;
&lt;h3&gt;스케일&lt;/h3&gt;
&lt;p&gt;Blue와 Green은 실제 사용자의 트래픽을 처리할 수 있을 만큼 큰 규모로 구축되어야 한다. 반면 테썹은 보통 작은 규모로 운영된다. &lt;/p&gt;
&lt;h3&gt;데이터&lt;/h3&gt;
&lt;p&gt;Blue와 Green은 실제 데이터를 다룬다. &lt;/p&gt;
&lt;h2&gt;Blue-Green 배포에서 DB 관리&lt;/h2&gt;
&lt;p&gt;Blue-Green 배포 전략에서 데이터베이스의 관리는 중요한 고려사항 중 하나이다. 데이터베이스는 상태를 가지고 있으므로 애플리케이션 코드와는 달리 간단히 스위칭하는게 어렵다. &lt;/p&gt;
&lt;h3&gt;단일 데이터베이스 사용&lt;/h3&gt;
&lt;p&gt;같은 DB를 사용하는 것은 가능하다. 하지만 이렇게 할 때 고려해야 할 몇가지 중요한 문제가 있다. &lt;/p&gt;
&lt;h4&gt;스키마 변경&lt;/h4&gt;
&lt;p&gt;데이터베이스 스키마에 변경이 필요한 새 버전의 애플리케이션을 배포할 때 문제가 발생할 수 있다. 새 버전에서 필요한 스키마 변경이 이전 버전과 호환되지 않으면 Green 환경에서의 배포 동안 Blue 환경의 애플리케이션에 문제가 발생할 수 있다. &lt;/p&gt;
&lt;h4&gt;데이터 무결성&lt;/h4&gt;
&lt;p&gt;두 환경이 동일한 데이터베이스를 공유할 경우, 새 버전의 애플리케이션에서 예상치 못한 데이터 변경이 발생하면 이전 버전의 실행에도 영향을 줄 수 있다. 따라서, 롤백에도 영향을 줄 수 있다. &lt;/p&gt;
&lt;p&gt;이를 극복하기 위한 여러 전략이 있다. 예를 들면,&lt;/p&gt;
&lt;h4&gt;스키마 변경 전략&lt;/h4&gt;
&lt;p&gt;데이터 베이스 스키마 변경을 두 단계로 나누어 수행한다. 먼저 호환성이 있는 스키마 변경을 실시한 후, 새 버전의 애플리케이션을 배포한다. 그 다음 이전 버전과 호환되지 않는 스키마 변경을 실시한다. &lt;/p&gt;
&lt;h4&gt;피쳐 토글&lt;/h4&gt;
&lt;p&gt;데이터베이스에 영향을 주는 새로운 기능이나 변경 사항을 피쳐 토글로 구현하여, 실제로 데이터베이스에 적용되기 전까지는 활성화하지 않을 수 있다. &lt;/p&gt;
&lt;h4&gt;결론&lt;/h4&gt;
&lt;p&gt;만약 이 방법을 선택할 경우, 새로운 버전의 애플리케이션은 데이터베이스 스키마에 대한 변경이 없거나 하위 호환성을 유지해야 한다. &lt;/p&gt;
&lt;h3&gt;데이터베이스 마이그레이션&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;배포 전에 필요한 데이터베이스 마이그레이션을 신중하게 계획하고 실행한다. &lt;/li&gt;
&lt;li&gt;마이그레이션은 트래픽을 Green 환경으로 전환하기 전에 실행되어야 한다. &lt;/li&gt;
&lt;li&gt;롤백 시나리오에 대한 계획도 있어야 한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;데이터 동기화&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;동기화를 위해 DynamoDB Streams와 Lambda를 사용하여 두 테이블 간의 데이터를 동기화 할 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ALB-ECS 환경에서의 Blue-Green 배포 전략 시나리오&lt;/h2&gt;
&lt;h3&gt;1. 초기 환경 설정&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ECS 클러스터에서 두 개의 서비스(Blue와 Green)을 생성한다. 초기에는 Blue만 활성 상태(현재 트래픽을 받고 있는 상태)이다. &lt;/li&gt;
&lt;li&gt;ALB 설정: ECS 서비스에 트래픽을 라우팅하기 위해 사용된다. &lt;/li&gt;
&lt;li&gt;Route 53에 도메인 이름을 설정하고 ALB의 DNS 이름을 지정한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2. CodePipeline 설정&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Source: 예를 들면 깃허브 또는 CodeCommit의 소스 변경을 감지하여 파이프라인을 트리거한다. &lt;/li&gt;
&lt;li&gt;Build: CodeBuild를 사용하여 Docker 이미지를 빌드하고 ECR(Elastic Container Registry)에 푸시한다. &lt;/li&gt;
&lt;li&gt;Deploy: CodeDeploy를 사용하여 ECS에 새로운 이미지를 배포한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;3. Blue-Green 배포&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;새로운 코드 변경이 파이프라인을 트리거하면 CodeBuild가 새 Docker 이미지를 빌드하고 ECR에 푸시한다. &lt;/li&gt;
&lt;li&gt;CodeDeploy는 Green ECS 서비스를 대상으로 새 이미지를 사용하여 작업 정의를 업데이트한다. &lt;/li&gt;
&lt;li&gt;Green 서비스의 태스크가 성공적으로 시작되면 Blue-Green 배포 설정에 따라 CodeDeploy는 자동으로 ALB의 대상 그룹을 업데이트하여 Green 서비스로 트래픽을 전환한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4. 검증 및 롤백&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Green 환경에서 서비스의 동작을 검증한다. &lt;/li&gt;
&lt;li&gt;CodeDeploy는 선택적으로 사용자 지정 후크를 사용하여 배포 후 검증 스크립트를 실행할 수 있다. &lt;/li&gt;
&lt;li&gt;문제가 발생한 경우 원래의 Blue 서비스로 빠르게 전환하여 롤백한다. CodeDeploy는 자동 롤백을 지원하여 이전 상태로 되돌릴 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;5. 다음 배포 준비&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;다음 배포는 Blue가 새 환경이고 Green이 이전 환경이 된다. 이렇게 두 환경을 번갈아 사용하면서 배포를 진행한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;기타 배포 전략&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;카나리아 배포&lt;/li&gt;
&lt;li&gt;롤링 배포&lt;/li&gt;
&lt;li&gt;기능 토글&lt;/li&gt;
&lt;li&gt;A/B 테스팅&lt;/li&gt;
&lt;li&gt;섀도우 배포&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[CloudFront]]></title><description><![CDATA[Amazon CloudFront 아마존에서 제공하는 CDN(Content Delivery Network) 서비스이다.  CDN…]]></description><link>https://sharknia.github.io/CloudFront/</link><guid isPermaLink="false">https://sharknia.github.io/CloudFront/</guid><pubDate>Mon, 30 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Amazon CloudFront&lt;/h2&gt;
&lt;p&gt;아마존에서 제공하는 CDN(Content Delivery Network) 서비스이다. &lt;/p&gt;
&lt;h4&gt;CDN이란?&lt;/h4&gt;
&lt;p&gt;사용자에게 웹 콘텐츠를 더 빠르게 제공하기 위해 전 세계 여러 위치에 콘텐츠를 분산 및 저장하는 네트워크이다.&lt;/p&gt;
&lt;h2&gt;주요 기능과 특징&lt;/h2&gt;
&lt;h4&gt;글로벌 엣지 네트워크&lt;/h4&gt;
&lt;p&gt;전 세계에 200개가 넘는 엣지 로케이션과 리전을 갖추고 있다. &lt;/p&gt;
&lt;h4&gt;동적 및 정적 콘텐츠 전송&lt;/h4&gt;
&lt;p&gt;정적 콘텐츠와 동적 콘텐츠를 모두 효과적으로 전송한다. &lt;/p&gt;
&lt;h4&gt;오리진 서버&lt;/h4&gt;
&lt;p&gt;배포를 생성할 때 오리진 서버를 지정해야 한다. 이 오리진은 S3 버킷, EC2 인스턴스, ELB, 외부 서버 등이 될 수 있다. 오리진에서 컨텐츠를 가져와 사용자에게 제공한다. &lt;/p&gt;
&lt;h4&gt;성능향상&lt;/h4&gt;
&lt;p&gt;CDN은 사용자에게 가까운 서버에서 콘텐츠를 제공하여 웹 사이트의 로딩시간을 단축시킨다. &lt;/p&gt;
&lt;h4&gt;가용성 및 장애 복구&lt;/h4&gt;
&lt;p&gt;여러 서버에 콘텐츠를 복사하므로, 한 서버에 문제가 발생하더라도 다른 서버에서 콘텐츠를 제공할 수 있다. &lt;/p&gt;
&lt;h4&gt;부하 분산&lt;/h4&gt;
&lt;p&gt;웹 트래픽을 여러 서버에 분산시켜 오리진 서버의 부하를 줄인다. &lt;/p&gt;
&lt;h4&gt;비용 절감&lt;/h4&gt;
&lt;p&gt;캐시된 콘텐츠를 제공함으로써 오리진 서버의 대역폭 사용량과 비용을 줄일 수 있다. &lt;/p&gt;
&lt;h4&gt;보안 향상&lt;/h4&gt;
&lt;p&gt;웹사이트에 대한 DDoS 공격과 같은 일부 보안 위협으로부터 보호할 수 있다. &lt;/p&gt;
&lt;h2&gt;동작 플로우&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;배포 생성&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;사용자는 AWS Management Console, SDK, CLI 등을 사용하여 CloudFront 배포를 생성한다. 이 때, 오리진 서버(S3 버킷, EC2 인스턴스, HTTP 서버 등)와 다양한 배포 설정(예: 캐싱 동작, SSL 인증서, 액세스 제한 등)을 지정한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;DNS 등록&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CloudFront는 배포에 대해 고유한 도메인 이름을 제공한다. 사용자는 Route 53 같은 DNS 서비스를 사용해 이 도메인 이름을 웹 사이트나 애플리케이션에 연결할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;사용자 요청&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;사용자가 콘텐츠에 액세스 하기 위해 웹 브라우저나 애플리케이션으로 요청을 보내면 DNS 시스템은 해당 요청을 CloutFront 배포의 도메인 이름으로 Resolve 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;엣지 로케이션 라우팅&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;요청은 사용자게에 가장 가까운 CloudFront 엣지 로케이션으로 라우팅된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;캐시 확인&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;해당 엣지 로케이션의 캐시에서 요청된 콘텐츠를 확인한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;캐시에 콘텐츠가 있는 경우 (Cache Hit) : 캐시된 콘텐츠를 사용자에게 직접 반환한다. &lt;/li&gt;
&lt;li&gt;캐시에 콘텐츠가 없는 경우 (Cache Miss) : CloudFront는 설정된 오리진 서버로 요청을 전달한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;오리진에서 콘텐츠 가져오기&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;오리진 서버에서 요청된 콘텐츠를 가져온다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;콘텐츠 반환 및 캐싱&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;가져온 콘텐츠를 사용자에게 반환하면서 동시에 해당 콘텐츠를 엣지 로케이션의 캐시에 저장한다. 이후 동일한 콘텐츠에 대한 요청이 들어오면 캐시에서 빠르게 제공할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;캐시 만료&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;캐싱 동작은 TTL(Time to Live) 설정에 따라 관리된다. TTL이 만료되면 콘텐츠는 자동으로 캐시에서 제거된다. 다음 요청이 들어오면 다시 오리진에서 콘텐츠를 가져온다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;동적 콘텐츠의 캐싱&lt;/h2&gt;
&lt;p&gt;동적 콘텐츠는 사용자별로 또는 시간에 따라 달라지는 콘텐츠를 의미한다. 예를 들면 사용자 프로필 페이지, 실시간 주식 시세, 뉴스 피드 등이 있을 수 있다. CDN 서비스들은 동적 콘텐츠를 캐싱하기 위해 특별한 전략을 사용한다. &lt;/p&gt;
&lt;p&gt;동적 콘텐츠 캐싱의 핵심 아이디어는 “모든 동적 콘텐츠가 항상 동적인 것은 아니다.”라는 점이다. 즉, 일부 동적 콘텐츠는 짧은 시간 동안에는 변하지 않을 수도 있다. &lt;/p&gt;
&lt;p&gt;캐시의 동작을 잘못 설정하면 데이터 베이스의 변경사항이 반영된 새로운 응답이 캐시에 저장되지 않을 수 있으므로, 그 결과로 사용자는 오래된 또는 기대하지 않은 응답을 받을 수 있다. 이런 문제를 피하기 위해 캐싱은 항상 주의해야 한다. &lt;/p&gt;
&lt;p&gt;캐싱 전략을 변경하거나 새로운 캐싱 매커니즘을 도입할 때에는 항상 테스트 환경에서 먼저 검증하는 것이 좋다. &lt;/p&gt;
&lt;p&gt;동적 콘텐츠를 캐싱하는 방법은 다음과 같다. &lt;/p&gt;
&lt;h3&gt;조정 가능한 TTL&lt;/h3&gt;
&lt;p&gt;동적 콘텐츠에 대한 캐싱 정책의 TTL을 짧게 설정할 수 있다. 이렇게 하면 콘텐츠가 잠시동안만 캐싱되어 그 이후에는 다시 오리진에서 최신 데이터를 가져온다. &lt;/p&gt;
&lt;h3&gt;캐시 키 매개변수&lt;/h3&gt;
&lt;p&gt;쿼리 문자열, 헤더, 쿠키 등의 요청 요소를 기반으로 캐시 버전을 구분할 수 있다. 이를 사용해 동일한 URL에 대한 다양한 버전의 콘텐츠를 캐싱할 수 있다. &lt;/p&gt;
&lt;h3&gt;컨텐츠 기반의 캐싱 정책&lt;/h3&gt;
&lt;p&gt;오리진 서버는 &lt;code class=&quot;language-text&quot;&gt;Cache-Control&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;Expires&lt;/code&gt; 헤더를 사용하여 콘텐츠의 캐싱 동작을 제어할 수 있다. &lt;/p&gt;
&lt;h4&gt;Cache-Control 헤더&lt;/h4&gt;
&lt;p&gt;반환된 응답에 Cache-Control 헤더가 포함되어 있는 경우 이 헤더의 지시어를 따라 캐싱한다. 예를 들어 &lt;code class=&quot;language-text&quot;&gt;Cache-Control: max-age=3600&lt;/code&gt; 은 해당 응답을 1시간 동안 캐싱하라는 의미이다. &lt;/p&gt;
&lt;p&gt;또는 &lt;code class=&quot;language-text&quot;&gt;Cache-Control: no-store&lt;/code&gt; 나 &lt;code class=&quot;language-text&quot;&gt;Cache-Control: private&lt;/code&gt; 헤더를 포함하고 있으면 해당 응답은 캐싱되지 않는다. &lt;/p&gt;
&lt;h4&gt;Expires 헤더&lt;/h4&gt;
&lt;p&gt;반환된 응답이 Expires 헤더를 포함하고 있으면 해당 시간까지 응답을 캐싱한다. &lt;/p&gt;
&lt;h3&gt;Lambda@Edge&lt;/h3&gt;
&lt;p&gt;Lambda@Egde를 이용하여 요청 및 응답을 가로채고 수정하여 캐싱 동작을 더욱 세밀하게 제어할 수 있다. &lt;/p&gt;
&lt;h3&gt;Bypass Cache&lt;/h3&gt;
&lt;p&gt;특정 조건 하에서 캐싱을 우회하고 항상 오리진 서버로 요청을 전달할 수 있다. 이렇게 하면 특정 요청에 대해서는 항상 최신의 동적 콘텐츠를 제공할 수 있다. &lt;/p&gt;
&lt;h3&gt;데이터 변경 시 캐시 무효화&lt;/h3&gt;
&lt;p&gt;특정 콘텐츠의 캐시를 수동으로 무효화 하는 기능을 제공한다. 데이터베이스에 중요한 변경이 발생한 경우, 이 기능을 사용하여 해당 콘텐츠의 캐시를 즉시 제거할 수 있다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[AWS ECS(Elastic Container Service)]]></title><description><![CDATA[개요 AWS ECS는 Docker…]]></description><link>https://sharknia.github.io/AWS-ECSElastic-Container-Service/</link><guid isPermaLink="false">https://sharknia.github.io/AWS-ECSElastic-Container-Service/</guid><pubDate>Wed, 25 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;AWS ECS는 Docker 컨테이너를 쉽게 실행, 중지 및 관리할 수 있도록 해주는 컨테이너 오케스트레이션 서비스이다. 컨테이너 배포, 작업 정의, 서비스 정의, 클러스터 관리 등을 지원한다. &lt;/p&gt;
&lt;h3&gt;오케스트레이션 서비스란?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;컨테이너의 배포, 관리, 스케일링, 네트워킹 및 가용성을 자동화하는 프로세스 및 도구의 집합이다. &lt;/li&gt;
&lt;li&gt;즉, 컨테이너화된 애플리케이션의 라이프사이클을 관리하는 것을 의미한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;주요 특징&lt;/h2&gt;
&lt;h3&gt;서비스&lt;/h3&gt;
&lt;p&gt;여러 개의 작업 인스턴스를 관리하며, 로드 밸런싱과 함께 사용하여 트래픽 분산을 지원한다. &lt;/p&gt;
&lt;h3&gt;클러스터&lt;/h3&gt;
&lt;p&gt;컨테이너를 실행하는데 사용되는 논리적인 그룹이다. ECS에서 실행되는 리소스의 집합을 의미한다. 클러스터는 EC2 인스턴스나 Fargate 인스턴스를 포함할 수 있다. &lt;/p&gt;
&lt;p&gt;클러스터를 사용하여 워크로드와 관련된 리소스를 논리적으로 그룹화 할 수 있다. 예를 들면 &lt;strong&gt;“production” 클러스터와 “development” 클러스터를 별도로 운영할 수 있다.&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;기본적으로 단순한 논리적 이름을 지닌 메타 데이터 구조체로, 클러스터 안의 실제 컴퓨팅 리소스와 독립적이다. &lt;/p&gt;
&lt;h3&gt;네임스페이스&lt;/h3&gt;
&lt;p&gt;리소스를 논리적으로 분리하고 관리하기 위한 도구이다. 동일한 도메인 이름 아래에서 운영되는 서비스들의 논리적 그룹의 형성에 사용된다. &lt;/p&gt;
&lt;h3&gt;테스크&lt;/h3&gt;
&lt;p&gt;단일 컨테이너 또는 여러 컨테이너의 그룹이다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;작업 정의&lt;/code&gt; : 컨테이너의 속성을 정의하는 JSON 템플릿이다. CPU, 메모리 할당, 네트워크 모드, 사용할 도커 이미지 등을 포함한다. &lt;/p&gt;
&lt;p&gt;테스크는 작업 정의에 정의된 내용에 따라 실행된다. 예를 들면 웹 서버와 관련된 데이터베이스를 함께 실행하는 테스크를 생성할 수 있다. &lt;/p&gt;
&lt;h2&gt;순서와 구조&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;컨테이너&lt;/p&gt;
&lt;p&gt;독립적으로 실행 가능한 소프트웨어의 최소 단위. AWS ECS에서는 이 컨테이너를 EC2 인스턴스나 Fargate에서 실행할 수 있다.  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;테스크&lt;/p&gt;
&lt;p&gt;ECS의 실행 단위, 하나 이상의 컨테이너로 구성됨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;클러스터&lt;/p&gt;
&lt;p&gt;테스크와 서비스를 실행하고 관리하는 논리적 단위&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네임스페이스&lt;/p&gt;
&lt;p&gt;서비스와 관련된 논리적 그룹을 형성&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;ECS&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;각 단계는 이전 단계의 구성 요소를 더 큰 단위로 그룹화하거나 관리하는 역할을 한다. &lt;/p&gt;
&lt;h2&gt;웹 애플리케이션의 개발 후 ECS 배포&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;웹 애플리케이션 개발&lt;/p&gt;
&lt;p&gt;웹 애플리케이션을 개발한다. &lt;/p&gt;
&lt;p&gt;로컬에서 테스트하여 작동을 확인한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker 이미지 생성&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Dockerfile&lt;/code&gt; 을 작성하여 웹애플리케이션을 컨테이너화 한다. &lt;/p&gt;
&lt;p&gt;로컬에서 Docker를 사용하여 이미지를 빌드하고 테스트한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker 이미지를 ECR(Elastioc Container Registry)에 푸시&lt;/p&gt;
&lt;p&gt;AWS ECR에 저장소를 생성한다. &lt;/p&gt;
&lt;p&gt;로컬에서 빌드한 Docker 이미지를 ECR 저장소에 PUSH 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ECS 클러스터 및 작업 정의 설정&lt;/p&gt;
&lt;p&gt;ECS 클러스터를 생성한다. (Fargate 또는 EC2 인스턴스)&lt;/p&gt;
&lt;p&gt;작업 정의(Task Definition)을 생성한다. 작업 정의에는 ECR에수 푸시한 Docker 이미지, 필요한 CPU와 메모리, 환경 변수, 포트 매핑 등을 지정한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ECS 서비스 생성&lt;/p&gt;
&lt;p&gt;ECS 클러스터 내에서 작업정의를 기반으로 서비스를 생성한다. 서비스를 사용하면 컨테이너의 실행 상태를 유지하거나 원하는 개수의 작업 인스턴스를 실행할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;도메인 및 DNS 설정&lt;/p&gt;
&lt;p&gt;AWS Route 53을 사용하여 도메인을 설정하고 ALB(Application Load Balancer) 의 주소를 해당 도메인에 연결한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;보안 그룹 및 네트워크 설정&lt;/li&gt;
&lt;li&gt;모니터링 및 로깅&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;기존 서비스에서 ECS 기반 서비스로의 전환&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ECS, Fargate 설정&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ALB 설정&lt;/p&gt;
&lt;p&gt;Application Load Balancer를 생성한다. &lt;/p&gt;
&lt;p&gt;리스너와 타겟 그룹을 설정하여 ECS 서비스의 작업에 트래픽을 라우팅 하도록 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Route 53 업데이트&lt;/p&gt;
&lt;p&gt;현재 서비스에 연결된 Route53 레코드를 수정하여 ALB의 DNS 이름을 가리키도록 변경한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;모니터링 및 튜닝&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;주의점&lt;/h3&gt;
&lt;p&gt;기본적으로는 CES, Fargate, ALB를 설정한 후 마지막 단계로 Route 53의 레코드 설정만 변경하면 트래픽은 새로운 ECS-Fargate 기반의 서비스로 라우팅된다. &lt;/p&gt;
&lt;p&gt;그러나 다음과 같은 주의 사항이 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;테스트 &lt;/p&gt;
&lt;p&gt;ALB와 ECS가 올바르게 작동하는지 사전에 충분히 테스트 해야 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DNS 전파 지연&lt;/p&gt;
&lt;p&gt;DNS 업데이트는 즉시 전파되지 않을 수 있다. 일부 사용자는 변경 전의 엔드포인트로 트래픽이 라우팅 될 수 있으므로 업데이트 후에도 기존 서비스를 적어도 몇 시간 동안 실행 상태로 유지하는 것이 좋다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;롤백 계획&lt;/p&gt;
&lt;p&gt;문제가 발생할 경우를 대비하여 롤백 계획을 준비해야 한다. 예를 들어 새로운 서비스에 문제가 발생한 경우 Route 53 설정을 원래대로 돌릴 수 있어야 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[vercel 배포 자동화]]></title><description><![CDATA[어느 순간 morethan-log…]]></description><link>https://sharknia.github.io/vercel-배포-자동화/</link><guid isPermaLink="false">https://sharknia.github.io/vercel-배포-자동화/</guid><pubDate>Mon, 23 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;어느 순간 morethan-log에 노션 글 업로드가 잘 되지 않았다. &lt;/p&gt;
&lt;p&gt;글을 그 동안 마구 마구 써버리긴 했다.. 그래서 찔리는 점이 있었는데, 최근 이직 후 일을 하면서 조금 덜 쓰면서, 그리고 잠깐 옵시디언으로 한 눈을 팔면서 고칠 생각을 안하고 있었다. &lt;/p&gt;
&lt;p&gt;그러면서 일도 쪼끔 익숙해지고 옵시디언도 아 별로다 라고 결론을 내고 다시 여기에 글을 썼는데, 업로드가 되지 않는걸 보니 결국은 고쳐야 할 때가 왔음을 알게 됐다. &lt;/p&gt;
&lt;p&gt;morethan-log는 일정 시간마다 특정 api를 호출해서 노션에서 글을 긁어오는 함수를 실행한다. &lt;/p&gt;
&lt;p&gt;그리고 vercel에서는 그 api가 실행한 함수의 실행 로그를 볼 수 있다… &lt;/p&gt;
&lt;p&gt;로그를 봤더니 예상과 같았다. &lt;/p&gt;
&lt;p&gt;무료 플랜에서는 함수 실행 시간을 10초까지만 허용하는데, 10초를 당연한듯이 넘고 있었다. &lt;/p&gt;
&lt;p&gt;notion 비공식 api를 호출하는건데.. &lt;/p&gt;
&lt;p&gt;deploy를 직접 했을땐 제대로 긁어오는 것으로 보아 api가 막힌 것 같진 않고 글이 많아지면서 발생한 것 같다.. &lt;/p&gt;
&lt;p&gt;길게 고민하지 않고 Vercel의 Deploy hooks와 Pipedream의 기능의 무료 기능들만 사용해서 매일 새벽 두시에 자동 배포를 하기로 했다. &lt;/p&gt;
&lt;h3&gt;Vercel Deploy Hooks&lt;/h3&gt;
&lt;p&gt;Vercel의 Deploy Hooks 기능을 이용하면 특정 URL에 HTTP 요청이 이뤄질 때마다 사이트를 다시 빌드하고 배포할 수 있다. &lt;/p&gt;
&lt;p&gt;내 프로젝트를 고르고, Setting를 고른 다음 좌측의 Git을 고른다. &lt;/p&gt;
&lt;p&gt;Deploy Hooks로 이동해서 &lt;code class=&quot;language-text&quot;&gt;Create Hook&lt;/code&gt;을 해 url을 생성한다. 이제 해당 URL로 접속하면 deploy 되는것을 볼 수 있다. &lt;/p&gt;
&lt;h3&gt;Pipedream 설정&lt;/h3&gt;
&lt;p&gt;Pipedream은 서로 다른 애플리케이션, 데이터 및 API를 연결하고 자동화 하는데 사용할 수 있는 서버리스 통합 플랫폼이다. 단적으로, 이번엔 내가 원하는 시간에 Hook을 위한 URL을 호출하도록 스케쥴링 할 수 있다. &lt;/p&gt;
&lt;p&gt;Pipedream 대시보드에서 &lt;code class=&quot;language-text&quot;&gt;New&lt;/code&gt;를 클릭하고 &lt;code class=&quot;language-text&quot;&gt;Workflow&lt;/code&gt;를 선택하여 새 워크플로우를 생성한다. &lt;/p&gt;
&lt;p&gt;트리거로 &lt;code class=&quot;language-text&quot;&gt;Schedule&lt;/code&gt; 을 선택하고 원하는 스케쥴을 설정한다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Send Http Request&lt;/code&gt; 를 선택하고, Vercel Deploy Hooks URL을 입력한다. &lt;/p&gt;
&lt;p&gt;테스트 후, 저장 및 배포한다. &lt;/p&gt;
&lt;p&gt;이로써 매일 사이트를 다시 배포하고 빌드함으로써 블로깅에 아무 문제가 없게 되었다. &lt;/p&gt;
&lt;p&gt;해피~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[FastAPI와 DDD]]></title><description><![CDATA[기본 개념 DDD…]]></description><link>https://sharknia.github.io/FastAPI와-DDD/</link><guid isPermaLink="false">https://sharknia.github.io/FastAPI와-DDD/</guid><pubDate>Fri, 20 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;기본 개념&lt;/h2&gt;
&lt;p&gt;DDD는 복잡한 애플리케이션과 시스템의 개발에 있어서 비즈니스 요구사항을 중심으로 설계하고 구현하는 접근법입니다. 이 방식은 비즈니스 도메인의 복잡성을 이해하고, 그 복잡성을 모델링하여 소프트웨어에 반영하는 것에 중점을 둡니다.&lt;/p&gt;
&lt;h2&gt;핵심 요소&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Ubiquitous Language (모든 곳에서 사용되는 언어)&lt;/strong&gt;: 개발팀과 비즈니스 팀 간에 공통적으로 사용되는 언어. 이를 통해 불필요한 혼동을 줄이고, 의사소통의 효율을 높입니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bounded Context (경계가 정의된 맥락)&lt;/strong&gt;: 특정한 맥락 내에서만 유효한 모델을 정의. 다른 맥락에서는 같은 용어도 다른 의미를 가질 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Entities, Value Objects, Aggregates, Repositories&lt;/strong&gt;: 도메인 모델을 구성하는 주요 요소들입니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Domain Events&lt;/strong&gt;: 도메인 내에서 중요한 비즈니스 이벤트를 나타냅니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;FastAPI에서 DDD의 기본 구조&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;├── api                               &lt;span class=&quot;token comment&quot;&gt;# 첫 번째 API 모듈&lt;/span&gt;
│   ├── domain                        &lt;span class=&quot;token comment&quot;&gt;# 도메인 로직과 엔티티 정의&lt;/span&gt;
│   │   ├── entities                  &lt;span class=&quot;token comment&quot;&gt;# 엔티티 정의 (비즈니스 모델)&lt;/span&gt;
│   │   └── value_objects             &lt;span class=&quot;token comment&quot;&gt;# 값 객체 정의 (데이터 검증 및 전송 용도)&lt;/span&gt;
│   ├── presentation                  &lt;span class=&quot;token comment&quot;&gt;# 애플리케이션의 사용자 인터페이스 레이어&lt;/span&gt;
│   │   ├── dto                       &lt;span class=&quot;token comment&quot;&gt;# 데이터 전송 객체 정의 (Pydantic 모델)&lt;/span&gt;
│   │   └── rest                      &lt;span class=&quot;token comment&quot;&gt;# REST 엔드포인트 정의&lt;/span&gt;
│   │       └── controllers           &lt;span class=&quot;token comment&quot;&gt;# REST 컨트롤러 (FastAPI 경로 작업 처리)&lt;/span&gt;
│   ├── repository                    &lt;span class=&quot;token comment&quot;&gt;# 영속성 관리를 위한 인터페이스 정의&lt;/span&gt;
│   │   └── impl                      &lt;span class=&quot;token comment&quot;&gt;# 리포지토리 구현체 (영속성 레이어)&lt;/span&gt;
│   │       └── sql                   &lt;span class=&quot;token comment&quot;&gt;# SQL 기반 리포지토리 구현체&lt;/span&gt;
│   │           ├── models.py         &lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 모델 (ORM 모델)&lt;/span&gt;
│   │           ├── crud.py           &lt;span class=&quot;token comment&quot;&gt;# CRUD 연산 로직&lt;/span&gt;
│   │           └── database.py       &lt;span class=&quot;token comment&quot;&gt;# 데이터베이스 세션 및 연결 관리&lt;/span&gt;
│   └── &lt;span class=&quot;token function&quot;&gt;service&lt;/span&gt;                       &lt;span class=&quot;token comment&quot;&gt;# 도메인 서비스 정의, 도메인 로직 구현&lt;/span&gt;
│       └── impl                      &lt;span class=&quot;token comment&quot;&gt;# 서비스 구현체 (비즈니스 로직의 구현)&lt;/span&gt;
├── api2                              &lt;span class=&quot;token comment&quot;&gt;# 두 번째 API 모듈&lt;/span&gt;
│   └── &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.                           &lt;span class=&quot;token comment&quot;&gt;# 같은 구조를 가져간다&lt;/span&gt;
├── core                              &lt;span class=&quot;token comment&quot;&gt;# 공통 핵심 기능이나 공유 컴포넌트&lt;/span&gt;
└── router                            &lt;span class=&quot;token comment&quot;&gt;# 애플리케이션의 라우팅 로직, URL 라우트 정의&lt;/span&gt;
    └── routes                        &lt;span class=&quot;token comment&quot;&gt;# 개별 라우트 정의 파일&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;DDD의 원칙에 따라 애플리케이션을 조직화하면 각 도메인이 뚜렷하게 분리되고 관리하기 쉬워진다. 위에 제시된 디렉토리 구조는 DDD를 적용한 예시이다. &lt;/p&gt;
&lt;p&gt;도메인 레이어, 애플리케이션 레이어, 인프라 레이어로 분리되어 코드의 응집도를 높이고 결합도를 낮출 수 있다. 또한 각 레이어가 제공하는 인터페이스와 구현체를 분리함으로써 유지보수와 확장성에 유리한 구조를 만들 수 있다. &lt;/p&gt;
&lt;h3&gt;도메인 레이어&lt;/h3&gt;
&lt;h4&gt;domain 디렉토리&lt;/h4&gt;
&lt;p&gt;DDD에서 가장 중요한 부분으로 복잡한 비즈니스 로직과 애플리케이션 핵심 기능을 표현하는 모델을 담고 있다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;entities&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;비즈니스 도메인의 기본적인 데이터 단위로 고유한 식별자를 가지고 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;비즈니스 규칙을 캡슐화하고 FastAPI 애플리케이션에서 데이터베이스 레코드와 1:1로 매핑되는 경우가 많다. &lt;/li&gt;
&lt;li&gt;FastAPI는 이러한 엔티티에 직접적으로 연관되지능 않지만 ORM 도구를 사용하여 엔티티 클래스를 데이터 모델로 변환하고 데이터베이스와 상호작용을 할 수 있다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;value_objects&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;식별자를 가지지 않는 불변 객체로 엔티티의 속성을 표현한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FastAPI에서는 값 객체를 표현하기 위해 Pydantic의 기능을 활용할 수 있으며 요청 검증이나 응답 시리얼라이징에 유용하게 사용된다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;애플리케이션 레이어(presentation, service)&lt;/h3&gt;
&lt;h4&gt;presentaion 디렉토리&lt;/h4&gt;
&lt;p&gt;이 디렉토리는 사용자 인터페이스와 외부에 노출되는 API 엔드포인트의 정의를 담당한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DTO&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DTO는 클라이언트와 서버간에 데이터를 전달할 때 사용하는 객체이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FastAPI에서는 Pydantic 모델을 이용해 DTO를 정의한다. 이 모델들은 본문, 쿼리 파라미터, 경로 파라미터, 그리고 응답 모델을 정의하는데 사용된다.&lt;/li&gt;
&lt;li&gt;DTO는 엔드포인트가 받아들이고 반환하는 데이터의 구조와 유효성 검증 규칙을 명시한다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;REST&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Restful 원칙을 따르는 API 엔드포인트를 정의한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FastAPI에서는 각 API 경로에 해당하는 함수를 작성하고 이를 HTTP 메서드에 매핑한다. &lt;/li&gt;
&lt;li&gt;각 함수는 Pydantic DTO를 매개변수로 사용하여 요청 데이터의 유효성을 검사하고 이를 도메인 모델로 변환하거나 서비스 레이어로 전달한다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Controllers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;API 엔드포인트에 대한 요청을 처리하는 로직을 담당한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FastAPI에서는 주로 경로 작업 함수로 표현되며 경로 데코레이터를 사용하여 라우트를 설정한다. &lt;/li&gt;
&lt;li&gt;컨트롤러는 요청을 받아 DTO로 파싱하고 필요한 비즈니스 로직을 수행한 후 적절한 HTTP 응답을 반환한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 구성 요소들은 FastAP의 강점인 타입 힌트, 자동 문서화, 요청 검증 등을 활용하여 효율적인 API 인터페이스 레이어를 구성하는데 중요한 역할을 한다. &lt;/p&gt;
&lt;h4&gt;service 디렉토리&lt;/h4&gt;
&lt;p&gt;애플리케이션의 비즈니스 로직을 구현하는 부분을 담당한다. 컨트롤러와 데이터 액세스 계층 사이에서 중간 역할을 한다. 주요 목적은 비즈니스 규칙과 애플리케이션 로직을 캡슐화하여 재사용성을 높이고 애플리케이션의 다룬 부분과의 결합도를 낮추는 것이다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Service Implementations (impl)&lt;/p&gt;
&lt;p&gt;실제 로직을 구현한다. 이 구현체는 데이터베이스 호출, 외부 서비스 호출, 비즈니스 규칙 처리 등을 담당한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;인프라 레이어(repository)&lt;/h3&gt;
&lt;p&gt;도메인 레이어와 애플리케이션 레이어의 기술적 세부 사항을 추상화하는 역할을 한다. 주로 데이터베이스, 메시징 시스템, 파일 시스템와 같은 외부 자원과의 통신을 담당한다. 애플리케이션의 나머지 부분이 기술적인 세부사항에 직접적으로 의존하지 않도록 추상화를 제공한다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Unit Test(단위 테스트)]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Unit-Test단위-테스트/</link><guid isPermaLink="false">https://sharknia.github.io/Unit-Test단위-테스트/</guid><pubDate>Tue, 17 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;단위 테스트는 소프트웨어 개발의 기본 구성 단위를 테스트하는 것을 말한다. 이 경우 기본 구성 단위는 보통 함수나 메소드, 작은 클래스 등이 될 수 있다. 단위 테스트의 주된 목적은 개별 구성 단위가 예상대로 동작하는지 확인하고, 코드의 특정 부분에 대한 논리적 오류를 식별하는 것이다. &lt;/p&gt;
&lt;h3&gt;특징과 목적&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;독립성 : 각 단위 테스트는 독립적으로 실행되어야 하며, 다른 테스트의 결과에 영향을 받지 않아야 한다. &lt;/li&gt;
&lt;li&gt;작고 빠름 : 단위 테스트는 빠르게 실행되어야 하며, 코드의 작은 부분만을 테스트해야 한다. &lt;/li&gt;
&lt;li&gt;예측 가능함 : 동일한 입력에 대해 항상 동일한 출력을 반환해야 한다. &lt;/li&gt;
&lt;li&gt;자동화 가능 : 단위 테스트는 자동으로 실행되어야 하며 수동 테스트 없이도 결과를 제공해야 한다. &lt;/li&gt;
&lt;li&gt;명확함 : 테스트의 결과는 명확하게 통과 또는 실패로 나타나야 하며 이유를 쉽게 파악할 수 있어야 한다. &lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[__post_init__]]></title><description><![CDATA[메소드는 Python…]]></description><link>https://sharknia.github.io/__post_init__/</link><guid isPermaLink="false">https://sharknia.github.io/__post_init__/</guid><pubDate>Tue, 17 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드는 Python의 &lt;code class=&quot;language-text&quot;&gt;dataclasses&lt;/code&gt; 모듈에 있는 &lt;code class=&quot;language-text&quot;&gt;dataclass&lt;/code&gt; 데코레이터를 사용하여 클래스를 정의할 때 사용된다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드는 객체가 초기화된 직후에 자동으로 호출된다. 즉, &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드가 호출된 후에 &lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드가 호출된다.&lt;/p&gt;
&lt;p&gt;클래스의 인스턴스가 생성될 때 &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드가 호출되어 인스턴스 변수들을 초기화하고, 바로 이어서 &lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드가 호출되어 추가적인 초기화 작업을 수행할 수 있다. 이러한 방식으로, 객체의 초기화 과정 중에 추가적인 로직을 실행할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;dto &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ContentListQueryDto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ContentListQueryDto&lt;/code&gt; 클래스의 인스턴스를 생성하면서 &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드가 자동으로 호출되고, 이어서 &lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드도 자동으로 호출된다. &lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드는 &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드가 완료된 직후에 실행되므로, &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드에서 설정된 필드 값을 기반으로 추가적인 초기화 작업을 수행할 수 있다.&lt;/p&gt;
&lt;p&gt;이 경우에, &lt;code class=&quot;language-text&quot;&gt;dto = ContentListQueryDto(**payload)&lt;/code&gt; 코드를 실행하면 &lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt; 메소드가 호출되어 &lt;code class=&quot;language-text&quot;&gt;payload&lt;/code&gt; 딕셔너리의 키-값 쌍을 이용하여 인스턴스 변수들을 초기화하고, 이어서 &lt;code class=&quot;language-text&quot;&gt;__post_init__&lt;/code&gt; 메소드가 호출되어 해당 메소드에 정의된 작업들을 수행한다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[dataclass]]></title><description><![CDATA[dataclass는 [파이썬]3.…]]></description><link>https://sharknia.github.io/dataclass/</link><guid isPermaLink="false">https://sharknia.github.io/dataclass/</guid><pubDate>Tue, 17 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;dataclass는 [[파이썬]]3.7부터 표준 라이브러리의 일부로 도입된 데코레이터이다.
주로 클래스를 정의할 때 반복적으로 필요한 특수 메서드들(&lt;code class=&quot;language-text&quot;&gt;__init__&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;__repr__&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;__eq__&lt;/code&gt; 등)을 자동으로 생성해주는 역할을 한다. 이를 통해 데이터를 저장하고 처리하는 클래스를 보다 간결하게 정의할 수 있다.&lt;/p&gt;
&lt;h2&gt;주요 특징&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;자동 생성된 생성자&lt;/li&gt;
&lt;li&gt;자동 생성된 표현 메서드&lt;/li&gt;
&lt;li&gt;자동 생성된 비교 메서드&lt;/li&gt;
&lt;li&gt;불변성 옵션&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;예제&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; dataclasses &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; dataclass

&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@dataclass&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;
    y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드는 아래의 코드를 간결하게 표현한 것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; x
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; y

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__repr__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;Point(x=&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;, y=&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__eq__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; other&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;other&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Point&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; NotImplemented
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; other&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; other&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;dataclass는 데이터 구조나 간단한 객체를 정의할 때 유용하게 사용된다. 그러나 복잡한 로직이나 특별한 초기화가 필요한 경우에는 일반 클래스를 사용하는 것이 더 나을 수 있다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[브랜치 관리 전략]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/브랜치-관리-전략/</link><guid isPermaLink="false">https://sharknia.github.io/브랜치-관리-전략/</guid><pubDate>Mon, 16 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;개요&lt;/h3&gt;
&lt;p&gt;브랜치 관리 전략은 소프트웨어 개발에서 코드 베이스의 다양한 변경 사항을 조직하고 관리하기 위한 방법이나 원칙이다. 특히 버전관리 시스템을 사용하는 프로젝트에서 브랜치를 효과적으로 활용하면 여러 개발자나 팀이 동시에 다양한 기능, 버그 수정, 실험 등을 독립적으로 처리할 수 있다. &lt;/p&gt;
&lt;h3&gt;목적&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;코드의 안정성 유지&lt;/li&gt;
&lt;li&gt;여러 개발자나 팀 간의 협업 촉진&lt;/li&gt;
&lt;li&gt;배포와 통합을 위한 과정 단순화&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;대표적인 전략&lt;/h3&gt;
&lt;h4&gt;Feature branching&lt;/h4&gt;
&lt;p&gt;각 기능마다 별도의 브랜치를 만들어 개발한다. 기능이 완성되면 메인 브랜치에 병합한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점&lt;/p&gt;
&lt;p&gt;각 기능이 독립적으로 개발되므로 다양한 기능과 버그 수정을 동시에 진행할 수 있다. &lt;/p&gt;
&lt;p&gt;충돌이 발생할 경우 해당 기능의 브랜치에서만 처리하면 되므로 메인 브랜치는 상대적으로 안정적이다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점&lt;/p&gt;
&lt;p&gt;병합 시점에 복잡한 병합 충돌이 발생할 수 있다. &lt;/p&gt;
&lt;p&gt;오랜 시간 분리된 브랜치에서 작업할 경우 메인 브랜치와의 동기화가 어려워질 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;적합한 상황&lt;/p&gt;
&lt;p&gt;개발자들이 독립적으로, 혹은 소규모 팀으로 작업을 진행하는 경우&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Gitflow&lt;/h4&gt;
&lt;p&gt;master, develop, feture/, hotfix/ 등 여러 브랜치를 사용하여 작업의 단계와 종류를 구분한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점&lt;/p&gt;
&lt;p&gt;명확한 브랜치 구조를 가지고 있어 프로젝트의 다양한 단계와 상태를 잘 구분한다. &lt;/p&gt;
&lt;p&gt;핫픽스와 기능 개발을 동시에 진행할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점&lt;/p&gt;
&lt;p&gt;브랜치 관리가 복잡하다. &lt;/p&gt;
&lt;p&gt;많은 규칙과 워크 플로우를 따라야 하므로 초보자에게는 진입 장벽이 될 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;적합한 상황&lt;/p&gt;
&lt;p&gt;큰 규모의 프로젝트나, 여러 단계의 배포 과정을 가진 프로젝트에서 사용&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Github flow&lt;/h4&gt;
&lt;p&gt;간단하게 master와 feature 브랜치만을 사용한다. 기능이 준비되면 master에 PR을 통해 병합 요청한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점&lt;/p&gt;
&lt;p&gt;브랜치 관리가 간단하다. &lt;/p&gt;
&lt;p&gt;지속적인 통합 및 배포 환경에 적합하다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점&lt;/p&gt;
&lt;p&gt;복잡한 프로젝트에서는 세부적인 브랜치 구분이 부족할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;적합한 상황&lt;/p&gt;
&lt;p&gt;중소 규모의 프로젝트나 간단한 배포 과정을 가진 프로젝트에서 사용&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Trunk Based Deveolpment(TBD)&lt;/h4&gt;
&lt;p&gt;모든 개발자가 하나의 trunk 혹은 main 브랜치에서 직접 작업한다. 기능 토글등을 활용하여 미완성 기능을 숨긴다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;장점&lt;/p&gt;
&lt;p&gt;브랜치 관리가 매우 간단하다. &lt;/p&gt;
&lt;p&gt;지속적인 통합 및 배포 환경에 최적화되어 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단점&lt;/p&gt;
&lt;p&gt;안정적인 CI/CD 파이프라인 및 테스트 환경이 필요하다. &lt;/p&gt;
&lt;p&gt;기능 토글 등 추가적인 관리 도두가 필요할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;적합한 상황&lt;/p&gt;
&lt;p&gt;빠른 개발 주기와 지속적인 배포를 원하는 프로젝트에서 사용&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[TypeError: non-default argument 'content' follows default argument]]></title><description><![CDATA[이 오류는 Python…]]></description><link>https://sharknia.github.io/TypeError-non-default-argument-content-follows-default-argument/</link><guid isPermaLink="false">https://sharknia.github.io/TypeError-non-default-argument-content-follows-default-argument/</guid><pubDate>Tue, 10 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;TypeError: non-default argument &apos;content&apos; follows default argument&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;이 오류는 Python 클래스 또는 함수에서 기본값이 설정된 인자 뒤에 기본값이 설정되지 않은 인자가 위치할 때 발생한다. 예를 들어, 나는 다음과 같았다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@dataclass&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CsDetailQueryReturnDto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    occurrence_datetime&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    content&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;
    cs_type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CsType
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;occurrence_datetime&lt;/code&gt; 필드에 기본값 &lt;code class=&quot;language-text&quot;&gt;None&lt;/code&gt;이 설정되어 있고, 이 필드 뒤에 기본값이 설정되지 않은 &lt;code class=&quot;language-text&quot;&gt;content&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;cs_type&lt;/code&gt; 필드가 위치하고 있다.&lt;/p&gt;
&lt;h3&gt;해결 방법&lt;/h3&gt;
&lt;p&gt;이 문제가 발생한 이유는 기본값이 설정된 매개변수 뒤에 기본값이 설정되지 않은 매개변수가 올 수 없다는 규칙 때문이다. &lt;/p&gt;
&lt;p&gt;함수를 호출할 때, Python은 매개변수를 위치나 키워드로 판별할 수 있어야 한다. 만약 기본값이 없는 매개변수가 기본값이 있는 매개변수 뒤에 온다면, Python은 어떤 매개변수에 값을 할당해야 하는지 혼동할 수 있다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dynamo DB]]></title><description><![CDATA[1. 정의 AWS에서 제공하는 완전 관리형 NoSQL 데이터베이스 서비스이다. 높은 트래픽의 웹 스케일 애플리케이션에 적합한 특성을 가지며, 밀리초 단위의 지연 시간으로 대량의 데이터를 처리할 수 있다.
확장 가능하고 높은 성능의 NoSQL…]]></description><link>https://sharknia.github.io/Dynamo-DB/</link><guid isPermaLink="false">https://sharknia.github.io/Dynamo-DB/</guid><pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1. 정의&lt;/h2&gt;
&lt;p&gt;AWS에서 제공하는 완전 관리형 NoSQL 데이터베이스 서비스이다. 높은 트래픽의 웹 스케일 애플리케이션에 적합한 특성을 가지며, 밀리초 단위의 지연 시간으로 대량의 데이터를 처리할 수 있다.
확장 가능하고 높은 성능의 NoSQL 데이터베이스로 다양한 웹 기반 애플리케이션과 서비스에서 데이터 관리를 위한 핵심 선택지이다. AWS의 다른 서비스와 통합이 잘 되어 있어 복잡한 애플리케이션 구축에 적합하다.&lt;/p&gt;
&lt;h2&gt;2. 주요 특징&lt;/h2&gt;
&lt;h3&gt;성능&lt;/h3&gt;
&lt;p&gt;밀리초 미만의 응답 시간을 제공한다.&lt;/p&gt;
&lt;h3&gt;확장성&lt;/h3&gt;
&lt;p&gt;사용자의 요구에 따라 자동으로 확장 및 축소 된다.&lt;/p&gt;
&lt;h3&gt;내구성 및 가용성&lt;/h3&gt;
&lt;p&gt;자동으로 여러 AWS 리전 및 가용 영역에 데이터를 복제하여 데이터 손실과 서비스 중단 없이 운영된다.&lt;/p&gt;
&lt;h3&gt;완전관리형&lt;/h3&gt;
&lt;p&gt;서버 인프라스트럭쳐 또는 관리 작업 없이 실행된다.&lt;/p&gt;
&lt;h3&gt;이벤트 소싱&lt;/h3&gt;
&lt;p&gt;DynamoDB Streams를 통해 테이블의 데이터 변경을 캡쳐할 수 있다.&lt;/p&gt;
&lt;h3&gt;글로벌 테이블&lt;/h3&gt;
&lt;p&gt;여러 AWS 리전에서 동일한 테이블에 액세스 할 수 있다.&lt;/p&gt;
&lt;h3&gt;3. 데이터 모델&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;테이블 : 데이터의 컬렉션. RDBMS와 유사하지만 스키마가 고정되어있지 않다.&lt;/li&gt;
&lt;li&gt;항목 : 테이블 내의 개별 데이터 항목. RDBMS의 Row와 유사하다.&lt;/li&gt;
&lt;li&gt;속성 : 항목의 데이터 요소. RDBMS의 칼럼과 유사하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4. 주요 기능&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;초당 읽기/쓰기 용량 조절 : 요구에 따라 자동으로 조정된다.&lt;/li&gt;
&lt;li&gt;보조 인덱스 : 다양한 쿼리 옵션을 제공한다.&lt;/li&gt;
&lt;li&gt;트랜잭션 : 여러 항목 및 테이블에 걸친 ACID 트랜잭션을 지원한다.&lt;/li&gt;
&lt;li&gt;보안 : IAM을 통해 데이터 액세스 및 암호화를 제어한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;5. 사용 사례&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;웹 애플리케이션 : 세션 데이터, 사용자 프로필, 소셜 그래프 등의 저장&lt;/li&gt;
&lt;li&gt;모바일 애플리케이션 : 빠른 액세스와 확장성이 필요한 데이터를 저장&lt;/li&gt;
&lt;li&gt;IoT 애플리케이션 : 대량의 장치 데이터를 실시간으로 수집 및 분석&lt;/li&gt;
&lt;li&gt;게임 : 게임 상태, 플레이어 프로필, 리더보드 등을 저장&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[NoSQL]]></title><description><![CDATA[1. 등장 배경 RDBMS는 정해진 스키마와 트랜잭션의 ACID 속성을 기반으로 설계되었다. 하지만 웹 2.0 시대가 도래하면서 대용량 데이터와 급격한 트래픽 증가, 다양한 데이터 구조의 요구가 생기면서 RDBMS의 한계가 드러나 NoSQL…]]></description><link>https://sharknia.github.io/NoSQL/</link><guid isPermaLink="false">https://sharknia.github.io/NoSQL/</guid><pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1. 등장 배경&lt;/h2&gt;
&lt;p&gt;RDBMS는 정해진 스키마와 트랜잭션의 ACID 속성을 기반으로 설계되었다. 하지만 웹 2.0 시대가 도래하면서 대용량 데이터와 급격한 트래픽 증가, 다양한 데이터 구조의 요구가 생기면서 RDBMS의 한계가 드러나 NoSQL이 등장하게 되었다.&lt;/p&gt;
&lt;h2&gt;2. RDBMS와의 주요 차이점&lt;/h2&gt;
&lt;h3&gt;스키마&lt;/h3&gt;
&lt;p&gt;RDBMS는 고정된 스키마를 가지고 있으나, NoSQL은 동적 스키마를 가진다.&lt;/p&gt;
&lt;h3&gt;확장성&lt;/h3&gt;
&lt;p&gt;RDBMS는 수직 확장을 위해 설계 되었지만 NoSQL은 수평 확장이 가능하다.&lt;/p&gt;
&lt;h3&gt;데이터 모델&lt;/h3&gt;
&lt;p&gt;RDBMS는 테이블 기반의 데이터 모델을 사용하지만 NoSQL은 키-값, 문서, 컬럼, 그래프 등 다양한 데이터 모델을 사용한다.&lt;/p&gt;
&lt;h3&gt;트랜잭션&lt;/h3&gt;
&lt;p&gt;RDMBS는 ACID 트랜잭션을 지원하지만 NoSQL은 일반적으로 이를 지원하지 않거나 부분적으로 지원한다.&lt;/p&gt;
&lt;h2&gt;3. NoSQL의 일관성과 무결성&lt;/h2&gt;
&lt;h3&gt;일관성(Consistency)&lt;/h3&gt;
&lt;p&gt;RDBMS에서는 ACID 트랜잭션 속성을 지원하여 강력한 일관성을 보장한다.
반면, 많은 NoSQL 데이터베이스는 BASE 모델을 채용한다. 이는 즉각적인 일관성보다는 가용성과 복원력을 우선시하며 일시적인 불일관성을 허용하지만 결국 일관된 상태로 수렴한다는 의미이다.
일부 NoSQL 시스템은 일관성 수준을 조정할 수 있도록 설정할 수 있다.&lt;/p&gt;
&lt;h3&gt;무결성(Intergirty)&lt;/h3&gt;
&lt;p&gt;RDBMS는 외래 키 제약 조건, 유니크 제약 조건 등을 통해 데이터 무결성을 보장한다.
NoSQL 데이터베이스는 스키마가 유연하므로 같은 강도의 무결성 제약 조건을 갖지 않을 수 있다. 그러나 일부 NoSQL 시스템은 도큐먼트의 유효성 검사나 스키마 유효성 검사를 지원하여 무결성을 일정 수준 보장하기도 한다.&lt;/p&gt;
&lt;h3&gt;정리&lt;/h3&gt;
&lt;p&gt;NoSQL 데이터베이스는 일관성과 무결성을 &quot;없애는&quot; 것이 아니라 다양한 요구 사항과 환경에 맞게 그 특성과 규칙을 조정하고 최적화 한 것이다. 따라서 특정 응용 프로그램의 요구 사항에 따라 적절한 데이터베이스와 설정을 선택하는 것이 중요하다.&lt;/p&gt;
&lt;h2&gt;4. 주요 특징 및 장점&lt;/h2&gt;
&lt;h3&gt;유연성&lt;/h3&gt;
&lt;p&gt;다양한 데이터 및 동적 스키마를 지원함으로써 다양한 데이터 구조에 유연하게 대응할 수 있다.&lt;/p&gt;
&lt;h3&gt;확장성&lt;/h3&gt;
&lt;p&gt;수평 확장을 통해 대량의 데이터와 트래픽을 처리할 수 있다. NoSQL은 데이터를 여러 노드에 복제하거나 분할하는 매커니즘을 내장하고 있다. 이는 고가용성과 분산 처리를 위한 핵심 요소로 수평 확장을 자연스럽게 지원한다.&lt;/p&gt;
&lt;h3&gt;빠른 성능&lt;/h3&gt;
&lt;p&gt;간단한 쿼리와 특정 작업에 최적화된 데이터베이스 설계로 빠른 성능을 제공한다.&lt;/p&gt;
&lt;h3&gt;다양한 데이터 처리&lt;/h3&gt;
&lt;p&gt;구조화, 반구조화, 비구조화 데이터를 모두 처리할 수 있다.&lt;/p&gt;
&lt;h2&gt;5. 단점&lt;/h2&gt;
&lt;h3&gt;표준 부재&lt;/h3&gt;
&lt;p&gt;다양한 NoSQL 데이터베이스 중 특정 표준이 없어 학습 곡선이 높을 수 있다.&lt;/p&gt;
&lt;h3&gt;일관성&lt;/h3&gt;
&lt;p&gt;ACID 트랜잭션의 일부를 희생하므로 데이터 일관성 문제가 발생할 수 있다.&lt;/p&gt;
&lt;h2&gt;6. NoSQL이 필요한 경우&lt;/h2&gt;
&lt;h3&gt;빠른 개발&lt;/h3&gt;
&lt;p&gt;동적 스키마로 개발과 변화에 빠르게 대응할 수 있다.&lt;/p&gt;
&lt;h3&gt;대량의 데이터 처리&lt;/h3&gt;
&lt;p&gt;수평 확장을 통해 대량의 데이터를 처리하는데 적합하다.&lt;/p&gt;
&lt;h3&gt;다양한 데이터 구조&lt;/h3&gt;
&lt;p&gt;구조화 된 데이터 뿐 아니라 로그, 소셜 미디어 포스트 등 다양한 데이터를 저장하고 처리할 때 유용하다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[REST]]></title><description><![CDATA[1. 정의 REST는 웹서비스를 설계하기 위한 아키텍쳐 스타일이다. 웹의 기본 프로토콜인 HTTP를 최대한 활용하기 위한 일련의 제약사항 및 원칙을 포함한다. 2. 기본 원칙 Stateless…]]></description><link>https://sharknia.github.io/REST/</link><guid isPermaLink="false">https://sharknia.github.io/REST/</guid><pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1. 정의&lt;/h2&gt;
&lt;p&gt;REST는 웹서비스를 설계하기 위한 아키텍쳐 스타일이다. 웹의 기본 프로토콜인 HTTP를 최대한 활용하기 위한 일련의 제약사항 및 원칙을 포함한다.&lt;/p&gt;
&lt;h2&gt;2. 기본 원칙&lt;/h2&gt;
&lt;h3&gt;Stateless&lt;/h3&gt;
&lt;p&gt;각 요청은 모든 정보를 가지고 있어야 한다. 즉, 서버는 클라이언트의 상태 정보를 저장하면 안된다.&lt;/p&gt;
&lt;h3&gt;클라이언트-서버 구조&lt;/h3&gt;
&lt;p&gt;클라이언트와 서버가 별도로 존재하고 각각의 역할이 분리되어 있어야 한다.&lt;/p&gt;
&lt;h3&gt;캐시 가능&lt;/h3&gt;
&lt;p&gt;클라이언트에서 캐시를 사용할 수 있어야 하며, 응답이 캐시 가능한지 아닌지를 명시해야 한다.&lt;/p&gt;
&lt;h3&gt;계층화된 시스템 (Layered System)&lt;/h3&gt;
&lt;p&gt;클라이언트는 중간 계층(서버)을 알 필요 없이, 끝단 서버에만 접속하면 된다.&lt;/p&gt;
&lt;h3&gt;코드 온 디맨드 (optional)&lt;/h3&gt;
&lt;p&gt;서버는 코드를 클라이언트에게 보낼 수 있으며, 클라이언트는 그 코드를 실행할 수 있다.&lt;/p&gt;
&lt;h3&gt;인터페이스 일관성 (Uniform Interface)&lt;/h3&gt;
&lt;p&gt;아키텍쳐의 규칙을 정의하며, 이를 통해 시스템의 분리와 통합이 용이해진다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;자원의 식별 : 각 리소스는 URI로 식별되어야 한다.&lt;/li&gt;
&lt;li&gt;메시지를 통한 자원 조작 : 리소스는 HTTP Method를 통해 조작된다.&lt;/li&gt;
&lt;li&gt;자기 설명적 메시지(Self-descriptive message): 각 메시지는 자신을 어떻게 처리해야 하는지에 대한 충분한 정보를 포함해야 한다.&lt;/li&gt;
&lt;li&gt;HATEOAS(Hypermedia as the Engine of Application State): 응답에 다음 가능한 액션에 대한 정보도 포함되어야 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3. HTTP 메서드&lt;/h2&gt;
&lt;h3&gt;GET&lt;/h3&gt;
&lt;p&gt;리소스를 조회하는데 사용된다.&lt;/p&gt;
&lt;h3&gt;POST&lt;/h3&gt;
&lt;p&gt;리소스를 생성한다.&lt;/p&gt;
&lt;h3&gt;PUT&lt;/h3&gt;
&lt;p&gt;리소스를 수정한다.&lt;/p&gt;
&lt;h3&gt;DELETE&lt;/h3&gt;
&lt;p&gt;리소스를 삭제한다.&lt;/p&gt;
&lt;h3&gt;PATCH&lt;/h3&gt;
&lt;p&gt;리소스의 일부를 수정한다.&lt;/p&gt;
&lt;h2&gt;4. 상태코드 (Status Code)&lt;/h2&gt;
&lt;h3&gt;2xx (Successful)&lt;/h3&gt;
&lt;p&gt;요청이 성공적으로 수행됨&lt;/p&gt;
&lt;h3&gt;3xx (Redirection)&lt;/h3&gt;
&lt;p&gt;요청을 완료하기 위해 추가 동작이 필요함&lt;/p&gt;
&lt;h3&gt;4xx (Client Error)&lt;/h3&gt;
&lt;p&gt;클라이언트의 잘못된 요청으로 인한 오류&lt;/p&gt;
&lt;h3&gt;5xx (Server Error)&lt;/h3&gt;
&lt;p&gt;서버 오류&lt;/p&gt;
&lt;h2&gt;5. URI 설계&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;리소스를 명시하며, 명사를 사용해야 한다. (ex) &lt;code class=&quot;language-text&quot;&gt;/users&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;/products&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;리소스의 계층 관계를 나타날 때는 &lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;를 사용한다. (ex) &lt;code class=&quot;language-text&quot;&gt;/users/123/orders&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 미디어 타입&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;JSON, XML등 다양한 미디어 타입을 사용하여 데이터를 표현한다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Accept&lt;/code&gt; 헤더를 통해 클라이언트가 원하는 미디어 타입을 서버에게 알릴 수 있다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[AWS API Gateway]]></title><description><![CDATA[AWS API Gateway는 개발자가 간편하게 RESTful API와 WebSocket API를 생성, 배포, 유지 관리 할 수 있도록 지원하는 AWS의 완전 관리형 서비스이다. 클라이언트와 백엔드 서비스 간의 호출을 중개한다.…]]></description><link>https://sharknia.github.io/AWS-API-Gateway/</link><guid isPermaLink="false">https://sharknia.github.io/AWS-API-Gateway/</guid><pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;AWS API Gateway는 개발자가 간편하게 RESTful API와 WebSocket API를 생성, 배포, 유지 관리 할 수 있도록 지원하는 AWS의 완전 관리형 서비스이다. 클라이언트와 백엔드 서비스 간의 호출을 중개한다.&lt;/p&gt;
&lt;h2&gt;1. 주요 기능&lt;/h2&gt;
&lt;h3&gt;API 생성 및 배포&lt;/h3&gt;
&lt;p&gt;빠르게 API를 생성하고 배포할 수 있다.&lt;/p&gt;
&lt;h3&gt;호출 중개&lt;/h3&gt;
&lt;p&gt;클라이언트와 백엔드 서비스 간의 호출을 중개한다.&lt;/p&gt;
&lt;h3&gt;요청 및 응답 변환&lt;/h3&gt;
&lt;p&gt;데이터 매핑 템플릿을 사용하여 호출 중 요청 및 응답 데이터를 변환할 수 있다.&lt;/p&gt;
&lt;h3&gt;액세스 제어&lt;/h3&gt;
&lt;p&gt;AWS Identity and Access Management (IAM) 또는 AWS Lambda 권한 기반 접근 제어를 사용하여 API 호출을 보호할 수 있다.&lt;/p&gt;
&lt;h3&gt;API 키 및 요금 제한&lt;/h3&gt;
&lt;p&gt;API키를 생성하고 배포하고 사용량을 추적하여 API 호출에 요금을 부과할 수 있다.&lt;/p&gt;
&lt;h3&gt;API 캐싱&lt;/h3&gt;
&lt;p&gt;API 호출의 성능을 향상시키기 위해 캐시를 사용할 수 있다.&lt;/p&gt;
&lt;h3&gt;API 버전 관리&lt;/h3&gt;
&lt;p&gt;API의 다양한 버전 및 스테이지를 관리할 수 있다.&lt;/p&gt;
&lt;h2&gt;2. 통합&lt;/h2&gt;
&lt;h3&gt;AWS 서비스 통합&lt;/h3&gt;
&lt;p&gt;AWS Lambda, Dynamo DB, Amazone S3등의 AWS 서비스와 손쉽게 통합할 수 있다.&lt;/p&gt;
&lt;h3&gt;모니터 및 로깅&lt;/h3&gt;
&lt;p&gt;Amazone CloudWatch와 통합하여 API 호출 및 오류 데이터를 모니터링 및 로깅할 수 있다.&lt;/p&gt;
&lt;h2&gt;3. 보안&lt;/h2&gt;
&lt;h3&gt;SSL/TLS 인증서&lt;/h3&gt;
&lt;p&gt;커스텀 도메인 이름에 대한 SSL/TLS 인증서를 제공하고 관리한다.&lt;/p&gt;
&lt;h3&gt;사용자 인증 및 인가&lt;/h3&gt;
&lt;p&gt;Amazone Cognito와 통합하여 사용자 인증 및 인가를 수행할 수 있다. 또한, OAuth토큰을 사용하여 API 엑세스를 제어할 수 있다.&lt;/p&gt;
&lt;h2&gt;4. 비용&lt;/h2&gt;
&lt;p&gt;사용한 만큼의 비용만 지불한다. 요청 수 및 데이터 전송량에 따라 비용이 발생한다.&lt;/p&gt;
&lt;h2&gt;5. 사용 사례&lt;/h2&gt;
&lt;h3&gt;Serverless&lt;/h3&gt;
&lt;p&gt;AWS Lambda와 결합하여 서버리스 애플레키션의 백엔드를 구축할 수 있다.&lt;/p&gt;
&lt;h3&gt;모바일 및 웹 애플리케이션&lt;/h3&gt;
&lt;p&gt;다양한 클라이언트에서 사용될 RESTful API를 제공한다.&lt;/p&gt;
&lt;h3&gt;웹사이트의 서드파티 애플리케이션 통합&lt;/h3&gt;
&lt;p&gt;다른 웹 서비스나 데이터 소스와의 통합을 위한 API를 제공한다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ColdStart]]></title><description><![CDATA[먼저 ColdStart를 이해하기 위해서는 Serverless의 동작방식을 이해할 필요가 있다. 간단히 알아보자.
Serverless 컴퓨팅에서 사용자의 요청이 오면 해당 요청을 처리하는 함수(Function…]]></description><link>https://sharknia.github.io/ColdStart/</link><guid isPermaLink="false">https://sharknia.github.io/ColdStart/</guid><pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;먼저&lt;/h2&gt;
&lt;p&gt;ColdStart를 이해하기 위해서는 Serverless의 동작방식을 이해할 필요가 있다. 간단히 알아보자.
Serverless 컴퓨팅에서 사용자의 요청이 오면 해당 요청을 처리하는 함수(Function)가 실행된다. 이 함수는 이벤트에 응답하여 실행되는데, 이 함수는 항상 실행 상태를 유지하고 있지 않다. 대신에 요청이 들어오면 새롭게 시작되거나 재사용된다.&lt;/p&gt;
&lt;p&gt;이제 콜드 스타트의 개념에 대해서 알아볼 수 있다.&lt;/p&gt;
&lt;h2&gt;콜드 스타트와 웜 스타트&lt;/h2&gt;
&lt;h3&gt;콜드 스타트&lt;/h3&gt;
&lt;p&gt;함수가 처음 호출될 때, 아직 사용 가능한 인스턴스가 없거나 지나치게 오래된 인스턴스에 대한 요청이 들어왔을 때 함수 인스턴스가 새롭게 생성된다. 이런 상태에서 함수가 실행될 때를 &apos;콜드 스타트&apos; 라고 한다.
콜드 스타트는 초기화에 필요한 시간과 리소스를 요구하기 때문에 함수의 실행 시작까지의 대기 시간이 길어질 수 있다. 이로 인한 지연은 사용자 경험에 영향을 줄 수 있다.&lt;/p&gt;
&lt;h3&gt;웜 스타트&lt;/h3&gt;
&lt;p&gt;이미 실행된 함수 인스턴스가 재사용될 때 발생한다. 초기화 시간이 필요 없기 때문에 대기 시간이 짧다.&lt;/p&gt;
&lt;h2&gt;지연 최소화를 위한 전략&lt;/h2&gt;
&lt;h3&gt;최적의 함수 크기 할당&lt;/h3&gt;
&lt;p&gt;메모리와 CPU를 적절히 할당하여 함수의 시작 시간을 줄일 수 있다.&lt;/p&gt;
&lt;h3&gt;초기화 코드 최적화&lt;/h3&gt;
&lt;p&gt;함수 내에서 필요한 라이브러리나 자원을 로드하는 초기화 코드를 최적화 하여 실행 시간을 줄인다.&lt;/p&gt;
&lt;h3&gt;외부 연결 최소화&lt;/h3&gt;
&lt;p&gt;외부 시스템이나 데이터베이스에 대한 연결을 미리 확립하거나 재사용하는 방식을 고려한다.&lt;/p&gt;
&lt;h3&gt;함수 미리 실행&lt;/h3&gt;
&lt;p&gt;일정 주리고 함수를 호출하여 웜 상태를 유지한다.&lt;/p&gt;
&lt;p&gt;서버리스 제공 업체에 따라 콜드 스타트의 영향도와 대응 전략이 다를 수 있다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Serverless]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Serverless/</link><guid isPermaLink="false">https://sharknia.github.io/Serverless/</guid><pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;서버가 &quot;없는&quot; 것이 아니다.
서버리스는 개발자 또는 운영 팀이 서버의 운영, 관리, 확장 등에 대한 걱정 없이 어플리케이션 코드에만 집중할 수 있게 해주는 컴퓨팅 모델을 의미한다.&lt;/p&gt;
&lt;h2&gt;특징&lt;/h2&gt;
&lt;h3&gt;자동확장&lt;/h3&gt;
&lt;p&gt;사용량에 따라 자동으로 리소스를 확장하거나 축소한다. 따라서 트래픽이 급증하더라도 시스템이 알아서 처리한다.&lt;/p&gt;
&lt;h3&gt;이벤트 주도&lt;/h3&gt;
&lt;p&gt;대부분의 서버리스 어플리케이션은 이벤트에 응답하여 동작한다.&lt;/p&gt;
&lt;h3&gt;비용 효율&lt;/h3&gt;
&lt;p&gt;실제로 사용된 컴퓨팅 리소스만큼만 비용을 지불한다. 즉, 코드가 실행되지 않을 때에는 비용이 발생하지 않는다.&lt;/p&gt;
&lt;h3&gt;서버 관리 불필요&lt;/h3&gt;
&lt;p&gt;인프라의 설정, 관리, 유지보수와 같은 작업들이 서버리스 플랫폼 제공업체에 의해 자동으로 처리된다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;대표적인 서버리스 서비스로는 AWS Lambda, Google Cloud Function, Azure Function 등이 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;단점&lt;/h2&gt;
&lt;h3&gt;ColdStart 문제&lt;/h3&gt;
&lt;h3&gt;실행 시간 제한&lt;/h3&gt;
&lt;p&gt;대부분의 서버리스 플랫폼은 함수의 최대 실행 시간에 제한을 두고 있다.&lt;/p&gt;
&lt;h3&gt;상태 관리&lt;/h3&gt;
&lt;p&gt;서버리스 함수는 상태가 없기 때문에 외부 저장소나 캐싱 시스템을 통해 상태를 관리해야 한다.&lt;/p&gt;
&lt;h3&gt;종속성 및 복잡성&lt;/h3&gt;
&lt;p&gt;여러 서버리스 컴포넌트와 서비스의 상호작용은 의존성과 복잡성을 증가시킬 수 있다.&lt;/p&gt;
&lt;h3&gt;보안 및 권한 관리&lt;/h3&gt;
&lt;p&gt;특히 여러 서비스와 컴포넌트가 연동되는 환경에서 권한 설정과 보안 관리가 복잡해질 수 있다.&lt;/p&gt;
&lt;h3&gt;로컬 개발 환경 설정 어려움&lt;/h3&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅(2)]]></title><description><![CDATA[지난 시간 지난시간에는 DataBase를 불러오는 비동기 로직 때문에 Factory Method를 사용해서 노션의 DataBase…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅2/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅2/</guid><pubDate>Mon, 04 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;지난 시간&lt;/h2&gt;
&lt;p&gt;지난시간에는 DataBase를 불러오는 비동기 로직 때문에 Factory Method를 사용해서 노션의 DataBase를 불러오는 코드를 작성했다. &lt;/p&gt;
&lt;p&gt;기능만 점검 후, 전체적인 설계를 다시 하고 프로젝트의 디렉토리 구조도 다시 짰다. &lt;/p&gt;
&lt;h2&gt;새로운 설계&lt;/h2&gt;
&lt;p&gt;일단, 크게 네 가지의 클래스를 만들기로 했다. &lt;/p&gt;
&lt;h3&gt;DataBase 클래스&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;생성시에 날짜를 입력 받아 파라미터마다 다른 조건으로 쿼리 하여 노션 API에서 결과값을 받아오는 필터링 기능을 가진다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Page 클래스&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Page 타입의 Block이다. &lt;/li&gt;
&lt;li&gt;해당 페이지를 마크다운으로 저장(Print)하는 메소드를 가지고 있다. &lt;/li&gt;
&lt;li&gt;Property들을 가지고 있다. (페이지의 속성)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Content 클래스&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Page에 귀속된다. &lt;/li&gt;
&lt;li&gt;종류가 여러가지이다. h1, h2, h3.. 등등 직접적으로 포스팅의 내용이 될 블록이다.&lt;/li&gt;
&lt;li&gt;가장 상위의 Content는 부모가 Page이다. &lt;/li&gt;
&lt;li&gt;자기 자신을 마크다운으로 변환하여 부모에게 리턴하는 method를 가지고 있다. 만약 child가 있다면, 해당 child도 함께 변환하여 부모에게 리턴한다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;일단 기본적으로 다음의 속성을 가진다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;id&lt;/strong&gt; : idx&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;parent&lt;/strong&gt; : 부모 ID&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;hasChidren&lt;/strong&gt; : 자식 요소가 있는지 여부 (true, false)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;type&lt;/strong&gt; : &lt;code class=&quot;language-text&quot;&gt;heading_1&lt;/code&gt; 등등 블록의 종류. 종류마다 마크다운 변환 전략이 달라야 하므로 중요하다. &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;is_toggleable&lt;/strong&gt; : **** 토글 여부&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Posting 클래스&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;생성자에 날짜를 넣어서 생성하면 해당하는 DataBase를 조회하고, Page → Content 를 돌면서 마크다운으로 페이지를 변환하여 저장하는 클래스들의 메소드를 모두 여기서 실행한다. 메인함수 같은 개념이다. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;위 내용은 언제든지 달라질 수 있다. 실제로 매일매일 하루하루 숨 쉬듯이 달라지고 있다. &lt;/p&gt;
&lt;h2&gt;디렉토리 구조&lt;/h2&gt;
&lt;p&gt;src/models 디렉토리를 새로 만들고 여기에 모든 클래스, 비즈니스 로직을 넣기로 했다. &lt;/p&gt;
&lt;h2&gt;database.ts&lt;/h2&gt;
&lt;p&gt;일단 이번에는 database.ts를 1차적으로 완성했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; QueryDatabaseResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client/build/src/api-endpoints&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; dotenv &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dotenv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataBase&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; databaseId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; database&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; pageIds&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; databaseId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;DataBase&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        dotenv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/../../.env&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notionkey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; databaseid&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;notionkey &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;databaseid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;NOTION_KEY or NOTION_DATABASE_ID is missing in the environment variables.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; notionkey &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataBase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;lastest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 현재 날짜와 시간을 가져옵니다.&lt;/span&gt;
            today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 날짜를 하루 전으로 설정합니다.&lt;/span&gt;

            &lt;span class=&quot;token comment&quot;&gt;// YYYY-MM-DD 형식의 문자열로 날짜를 가져옵니다.&lt;/span&gt;
            filterUdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFullYear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMonth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;padStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;padStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryDatabaseResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                filter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    and&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상태&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            select&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                equals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;update&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            date&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; on_or_after&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; filterUdate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                sorts&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;update&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        direction&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;descending&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// pageId 리스트 업데이트&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageIds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Error querying the database:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;전에 제작한 클래스를 수정하여 만들었으며, 필터 기능을 추가하였다. &lt;/p&gt;
&lt;p&gt;Notion 서버에는 반드시 세계공통시? 로 저장이 되는 문제가 있다. 서울 시간대가 달라서 필터에도 현재 시간을 변환하여 조회하는 로직을 짜야 할 것 같다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;pageIds&lt;/code&gt; 속성으로 DataBase에 저장된 페이지들의 ID를 받을 수 있다. &lt;/p&gt;
&lt;h2&gt;코드 작성시 고려한 점&lt;/h2&gt;
&lt;h3&gt;DataBase 클래스가 Page 인스턴스 리스트 관리 책임을 가진다면?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;SRP(Single Responsibility Principle) 원칙에 의거해 하나의 클래스는 하나의 책임만을 져야 한다. DataBase 클래스가 Page 인스턴스 리스트 관리 책임도 가진다면 이 원칙에 어긋날 수 있다. &lt;/li&gt;
&lt;li&gt;두 클래스가 강한 연결성을 가지게 되어 유연성이 떨어질 수 있다. &lt;/li&gt;
&lt;li&gt;코드가 더 직관적으로 보일 수 있다. (추적이 쉽다)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;결론적으로, DataBase 클래스와 Page 클래스의 연결을 줄이고(유연성을 늘리고) SRP를 준수하기 위해 현재의 방식을 선택했다. &lt;/p&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;databaseId&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;notionkey&lt;/code&gt; 를 생성자의 파라미터로 전달한다면?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;해당 값을 생성자의 파라미터로 값을 전달할 경우 코드가 길어지는 단점이 있다. 또한, 다양한 notionkey나 databaseid로 클래스를 생성할 수 있다. &lt;/li&gt;
&lt;li&gt;하지만, 해당 프로젝트에서 Database는 여러개를 생성하거나 값을 바꿔가면서 클래스를 생성할 일이 없으므로 현재의 방법을 택했다. &lt;/li&gt;
&lt;li&gt;다만 지금처럼 할 경우 클래스 내부에서 외부 환경 변수에 직접 접근하므로 캡슐화 원칙에 어긋나기는 한다. 하지만 앞서 언급한대로 해당 변수가 바뀔일은 거의 없다고 여겨지므로 지금의 방법을 택했다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;추가 수정&lt;/h2&gt;
&lt;h3&gt;고려사항&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;DataBase는 여러개일 필요가 없으므로, Singleton 패턴을 고려한다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;DataBase&lt;/code&gt; 클래스는 Notion과의 통신 뿐만 아니라, 환경 변수의 로딩 및 데이터베이스 ID 및 키의 유효성 검사까지 담당하고 있다. 이러한 기능들을 분리하여 각각의 책임을 명확히 하는 것이 좋다. &lt;/li&gt;
&lt;li&gt;Typings: 현재 코드에서는 TypeScript를 사용하고 있다. 가능한 한 모든 변수, 함수 매개변수 및 반환 타입에 타입 주석을 추가하는 것이 좋다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;완성코드&lt;/h2&gt;
&lt;p&gt;위의 문제를 고려해 Notion과의 통신을 NotionAPI 클래스로 분리했다. Page나 Block 같은 다른 클래스에서도 동일한 Notion Client를 사용해야 하므로, 이는 아주 타당한 선택이었다. 또 하나의 프로젝트에 API는 유일하므로 싱글톤 패턴을 사용했다. 다음은 이를 위해 만들어진 notionapi.ts 코드이다. &lt;/p&gt;
&lt;h3&gt;notionapi.ts&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionAPI&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; instance&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NotionAPI &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; client&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionKey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; notionKey &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionKey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;notionKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;NOTION_KE is missing&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionAPI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;최초 클래스 생성시에만 notionKey가 필요하도록 해두었다. 나중에 이 클래스를 호출할 때에는 번거롭게 환경변수를 조회할 필요가 없다. &lt;/p&gt;
&lt;h3&gt;database.ts&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; QueryDatabaseResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client/build/src/api-endpoints&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; dotenv &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dotenv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; NotionAPI &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./notionapi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataBase&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; instance&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; DataBase &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; databaseId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; database&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; pageIds&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; databaseId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;DataBase&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            dotenv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/../../.env&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notionkey&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; databaseid&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;notionkey &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;databaseid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;NOTION_KEY or NOTION_DATABASE_ID is missing in the environment variables.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notionApi&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; NotionAPI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; NotionAPI&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionkey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataBase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notionApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseid&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;lastest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; today&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Date &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                filterUdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getFullYear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMonth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;padStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;today&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;padStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryDatabaseResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                filter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    and&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;상태&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            select&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                equals&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filterUdate &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;update&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            date&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; on_or_after&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; filterUdate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                sorts&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        property&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;update&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        direction&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;descending&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// pageId 리스트 업데이트&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageIds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; pageId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Error querying the database:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;타입 주석을 모두 추가해주었고, 싱글톤 패턴으로 변경되었다. Notion Client의 생성부가 다른 곳으로 분리되었다. &lt;/p&gt;
&lt;p&gt;환경변수 역시 분리하는것을 고려중이지만, &lt;/p&gt;
&lt;p&gt;일단은 database.ts를 이 정도로 완성 하려고 한다. &lt;/p&gt;
&lt;p&gt;database.ts 완성!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Sharknia/Notion-to-Markdown/tree/database-class-complete&quot;&gt;https://github.com/Sharknia/Notion-to-Markdown/tree/database-class-complete&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Factory Pattern]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/Factory-Pattern/</link><guid isPermaLink="false">https://sharknia.github.io/Factory-Pattern/</guid><pubDate>Sun, 03 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;팩토리 패턴은 객체 생성에 관련된 로직을 클래스 내부에 포함시키는 대신 별도의 클래스나 메소드에 위임하는 패턴이다. &lt;/p&gt;
&lt;h3&gt;개요&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;팩토리 패턴은 객체를 생성하는 코드와 객체의 사용 코드를 분리하는 역할을 한다. &lt;/li&gt;
&lt;li&gt;객체를 생성하는 로직을 별도의 팩토리 클래스나 팩토리 메소드에 위임하여 객체 생성을 캡슐화 한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;특징&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;유연성 : 객체 생성 과정에 변화가 생겼을 때, 클라이언트 코드는 변경되지 않고 팩토리 코드만 변경하면 된다. &lt;/li&gt;
&lt;li&gt;확장성 : 새로운 타입의 객체를 지원하기 위해 클라이언트 코드를 변경할 필요 없이 팩토리 클래스를 확장하면 된다. &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;분리 및 재사용&lt;/li&gt;
&lt;li&gt;유지보수&lt;/li&gt;
&lt;li&gt;클라이언트 코드 간소화&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;복잡도&lt;/li&gt;
&lt;li&gt;학습곡선&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;사용 시나리오&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;객체 생성 로직이 복잡하거나 초기화에 많은 설정이 필요한 경우&lt;/li&gt;
&lt;li&gt;다양한 타입의 객체를 생성해야 하며, 이런 객체들이 공통의 인터페이스나 추상 클래스를 가지고 있는 경우&lt;/li&gt;
&lt;li&gt;시스템에서 아용되는 객체의 구체적인 타입을 시스템에서 분리하고자 할 때&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[NotionAPI를 활용한 자동 포스팅]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅/</link><guid isPermaLink="false">https://sharknia.github.io/NotionAPI를-활용한-자동-포스팅/</guid><pubDate>Sun, 03 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;갑자기 짚고 넘어가는 프로젝트의 목표&lt;/h3&gt;
&lt;p&gt;이번 프로젝트의 목표는 다음과 같다. &lt;/p&gt;
&lt;h4&gt;개발 내적인 목표&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;타입스크립트를 사용한다. &lt;/li&gt;
&lt;li&gt;변경에는 닫혀있고, 확장에는 열린 코드를 작성한다. &lt;/li&gt;
&lt;li&gt;이를 위해 구현에만 집중하지 않고 설계에 신경을 써서 진행해본다.&lt;/li&gt;
&lt;li&gt;이를 위해 디자인 패턴을 가능한 한 적극적으로 활용해본다. &lt;/li&gt;
&lt;li&gt;가능한 한 사용이 쉽도록 만들어본다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;명확한 명명 규칙을 사용한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;PascalCase를 클래스 이름에 사용한다.&lt;/li&gt;
&lt;li&gt;camelCase를 메소드 및 변수에 사용한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;개발 외적인 목표&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;노션으로 공부만 해도 포스팅/풀심기가 모두 되는 꿈의 프로그램을 만든다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;그래서 이번에는?&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/Notion-API2&quot;&gt;Notion API(2)&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;지난번에 API 정상 작동을 확인만 한 코드를 타입스크립트로 바꾸고, 하나의 클래스로 만들려고 한다. &lt;/p&gt;
&lt;h4&gt;최초 작성 코드&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; dotenv &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dotenv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; QueryDatabaseResponse &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client/build/src/api-endpoints&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionToMarkdown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; databaseID&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; database&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        dotenv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Environment variable NOTION_KEY is not defined.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_PAGE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Environment variable NOTION_PAGE_ID is not defined.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_PAGE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;initializeDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initializeDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryDatabaseResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseID &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Error querying the database:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... 다른 메소드들 (retrievePage, retrieveBlock, listBlockChildren) ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런 식으로 구성을 했는데 위 코드의 문제는 생성자에서 비동기 작업을 직접 실행하는 것에 있다. &lt;/p&gt;
&lt;p&gt;비동기 작업을 생성자에서 실행할 경우 잠재적으로 발생할 수 있는 문제는 다음과 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;비동기 로직이 실패할 경우, 객체 생성 자체에 문제가 생길 수 있다. 생성자는 객체 초기화를 수행하는 로직만 포함해야 하며, 부작용(side-effect)이 발생할 수 있는 코드는 포함되어서는 안된다. &lt;/li&gt;
&lt;li&gt;비동기 로직이 포함되면 생성자의 수행 시간이 길어질 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이 문제는 Factory 패턴을 사용하여 해결할 수 있다. Factory 메소드를 사용하여 비동기 로직을 수행하고 완료되면 객체를 반환한다. 아래와 같이 Factory 패턴을 사용하여 코드를 수정했다.  &lt;/p&gt;
&lt;h4&gt;Factory Pattern을 활용한 코드&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionToMarkdown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; databaseId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; database&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseID&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; database&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; databaseID&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; database&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NotionToMarkdown&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        dotenv&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Environment variable is not defined.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; auth&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; databaseId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_DATABASE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionToMarkdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; QueryDatabaseResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotionToMarkdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; databaseId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;queryDatabase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryDatabaseResponse&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; database_id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databaseId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Error querying the database:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ... 다른 메소드들 (retrievePage, retrieveBlock, listBlockChildren) ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 사용 예제:&lt;/span&gt;
NotionToMarkdown&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;handler &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;handler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// database 속성 출력&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드에서 create 메소드가 비동기 팩토리 메소드이다. 이 메소드는 &lt;code class=&quot;language-text&quot;&gt;NotionToMarkdown&lt;/code&gt; 객체를 비동기적으로 생성하고 반환한다. 생성자는 private로 선언되어 직접 호출할 수 없고, 반드시 create 메소드를 통해 객체를 생성해야 한다. &lt;/p&gt;
&lt;h3&gt;진행 코드&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Sharknia/Notion-to-Markdown/blob/42911777c0146c4260a5769fe9a7d5b1f9ac4c32/notionApi.ts&quot;&gt;https://github.com/Sharknia/Notion-to-Markdown/blob/42911777c0146c4260a5769fe9a7d5b1f9ac4c32/notionApi.ts&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[네이밍 규칙(naming conventions)]]></title><description><![CDATA[naming conventions는 클래스, 메소드 또는 변수의 이름을 지을 때 사용되는 명명 규칙이다.  camelCase…]]></description><link>https://sharknia.github.io/네이밍-규칙naming-conventions/</link><guid isPermaLink="false">https://sharknia.github.io/네이밍-규칙naming-conventions/</guid><pubDate>Sun, 03 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;naming conventions는 클래스, 메소드 또는 변수의 이름을 지을 때 사용되는 명명 규칙이다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;camelCase&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;첫번째 단어는 소문자로 시작하고 그 후의 단어는 대문자로 시작한다. 변수 또는 함수 명으로 주로 사용된다. &lt;/p&gt;
&lt;p&gt;예 : &lt;code class=&quot;language-text&quot;&gt;variableName&lt;/code&gt;  &lt;code class=&quot;language-text&quot;&gt;printMyName&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;PascalCase&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;모든 단어가 대문자로 시작한다. 주로 클래스명으로 사용된다. &lt;/p&gt;
&lt;p&gt;예 : &lt;code class=&quot;language-text&quot;&gt;ClassName&lt;/code&gt;  &lt;code class=&quot;language-text&quot;&gt;PrintMyName&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;snake_case&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;모든 단어를 소문자로 작성하고 단어 사이를 &lt;code class=&quot;language-text&quot;&gt;_&lt;/code&gt; 로 구분한다. 변수나 함수명 또는 데이터베이스 필드명으로 사용된다. &lt;/p&gt;
&lt;p&gt;예 : &lt;code class=&quot;language-text&quot;&gt;variable_name&lt;/code&gt;  &lt;code class=&quot;language-text&quot;&gt;print_my_name&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;kebab-case&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;모든 단어를 소문자로 작성하고 단어 사이를 &lt;code class=&quot;language-text&quot;&gt;-&lt;/code&gt; 로 구분한다. 주로 URL 또는 css 클래스 명에 사용된다. &lt;/p&gt;
&lt;p&gt;예 : &lt;code class=&quot;language-text&quot;&gt;variable-name&lt;/code&gt;  &lt;code class=&quot;language-text&quot;&gt;print-my-name&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UPPER&lt;em&gt;SNAKE&lt;/em&gt;CASE&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;모든 단어를 대문자로 작성하고 단어 사이를 &lt;code class=&quot;language-text&quot;&gt;_&lt;/code&gt; 로 구분한다. 주로 상수를 나타낼 때 사용된다. &lt;/p&gt;
&lt;p&gt;예 : &lt;code class=&quot;language-text&quot;&gt;CONSTANT_VALUE&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;물론 이것들은 강제되는 것은 아니다. 하지만 일관된 스타일을 여러 개발자 사이에 유지하면 협업이나 가독성에 도움이 될 것이다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Typescript 시작하기]]></title><description><![CDATA[TypeScript TypeScript란? TypeScript는 Microsoft에서 개발한 오픈 소스 프로그래밍 언어이다. JavaScript의 SuperSet…]]></description><link>https://sharknia.github.io/Typescript-시작하기/</link><guid isPermaLink="false">https://sharknia.github.io/Typescript-시작하기/</guid><pubDate>Sat, 02 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;TypeScript&lt;/h2&gt;
&lt;h3&gt;TypeScript란?&lt;/h3&gt;
&lt;p&gt;TypeScript는 Microsoft에서 개발한 오픈 소스 프로그래밍 언어이다. JavaScript의 SuperSet(상위 집합)이므로, 기존의 자바스크립트 코드도 타입스크립트에서 동작한다. 타입스크립트의 주요 목적은 큰 규모의 어플리케이션 개발을 돕기 위해 정적 타입, 인터페이스, 클래스, 모듈 등의 기능을 자바스크립트에 추가하는 것이다. &lt;/p&gt;
&lt;h3&gt;주요 특징&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;정적 타이핑 : 변수, 함수 매개변수, 함수 반환 값에 대한 타입을 지정할 수 있다. 이를 통해 컴파일 시점에 오류를 발견할 수 있으며, IDE와 에디터는 타입 정보를 사용하여 더 나은 코드 제안과 리팩토링을 제안할 수 있다. &lt;/li&gt;
&lt;li&gt;객체 지향 프로그래밍 : 클래스, 인터페이스, 상속, 제네릭 등과 같은 객체 지향 프로그래밍 기능을 제공하여 코드의 구조와 디자인을 개선한다. &lt;/li&gt;
&lt;li&gt;도구 및 에디터 지원 : 코드 자동완성, 타입검사, 코드 리팩토링과 같은 기능을 지원하는 다양한 도구 및 에디터에 통합된다. &lt;/li&gt;
&lt;li&gt;다운레벨 타겟팅 : 최신 자바스크립트 기능을 사용하여 코드를 작성하고 ES3, ES5, ES6등 이전 버전의 자바스크립트로 컴파일 할 수 있다. 이를 통해 최신 기능을 사용하면서도 구버전 브라우저와의 호환성을 유지할 수 있다. &lt;/li&gt;
&lt;li&gt;확장성 : 모듈화 된 방식으로 동작하여 외부 라이브러리와의 통합을 쉽게 만들어준다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;TypeScript의 설치&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;TypeScript 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-g&lt;/span&gt; typescript&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;새 프로젝트 시작&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; my-ts-project
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; my-ts-project
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; init &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TypeScript 설정 파일 생성&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;tsc &lt;span class=&quot;token parameter variable&quot;&gt;--init&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;tsconfig.json&lt;/code&gt; 파일이 생성된다. 이 파일에서 TypeScript의 컴파일 옵션을 설정할 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;필요한 TypeScript 타입 정의 설치&lt;/p&gt;
&lt;p&gt;Node.js와 TypeScript를 함 사용하기 위해 해당 타입 정의를 설치한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--save&lt;/span&gt; @types/node&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;첫 TypeScript 파일 작성&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;index.ts&lt;/code&gt; 파일에 다음과 같은 내용을 작성해보자. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; greet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Hello, &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token builtin&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;greet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;TypeScript&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;컴파일 및 실행&lt;/p&gt;
&lt;p&gt;아래 명령어로 컴파일 할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;tsc index.ts&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.js가 생성되었다. 이제 Node.js로 실행할 수 있다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;node&lt;/span&gt; index.js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;자동 컴파일 설정(선택사항)&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ts-node&lt;/code&gt; 라는 패키지를 설치하여 TypeScript 코드를 바로 실행할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-g&lt;/span&gt; ts-node&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치 후, 아래 명령어로 TypeScript 코드를 바로 실행할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ts-node index.ts&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;TypeScript 설정 파일(&lt;strong&gt;tsconfig.json)&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;tsconfig.json&lt;/code&gt; 은 타입스크립트 프로젝트의 루트 디렉토리에 위치하는 설정 파일이다. 타입스크립트 컴파일러에 대한 구성 옵션을 정의한다. 이 파일을 통해 타입스크립트 코드가 자바스크립트 코드로 변환되는지, 어떤 파일들이 포함되거나 제외되는지 등을 정의할 수 있다. &lt;/p&gt;
&lt;p&gt;주요 옵션들은 다음과 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;files&lt;/strong&gt;: 컴파일에 포함할 파일의 목록이다. 이 옵션을 사용하면 특정 파일만 명시적으로 포함시킬 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;include&lt;/strong&gt;: 컴파일에 포함할 파일이나 디렉토리의 패턴 목록다. Glob 패턴을 사용할 수 있다. 예: &lt;code class=&quot;language-text&quot;&gt;[&quot;src/**/*.ts&quot;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;exclude&lt;/strong&gt;: 컴파일에서 제외할 파일이나 디렉토리의 패턴 목록다. 예: &lt;code class=&quot;language-text&quot;&gt;[&quot;node_modules&quot;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;extends&lt;/strong&gt;: 다른 &lt;code class=&quot;language-text&quot;&gt;tsconfig.json&lt;/code&gt; 파일을 기반으로 현재 설정을 확장하려면 파일 경로를 지정한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;compilerOptions&lt;/strong&gt;: 컴파일러에 대한 다양한 설정을 제공하는 핵심 옵션이다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;typeRoots와 types&lt;/strong&gt;: 사용자 정의 타입 선언의 위치와 포함될 타입 선언 패키지를 지정한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;compilerOptions에 대해 좀 더 자세히 알아보면 다음과 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;target&lt;/strong&gt;: 컴파일된 JavaScript의 버전을 지정한다. 예: ES5, ES6 등&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;module&lt;/strong&gt;: 모듈 시스템을 지정한다. 예: CommonJS, ESNext, UMD 등&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;outDir&lt;/strong&gt;: 컴파일된 JavaScript 파일이 저장될 디렉토리를 지정한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rootDir&lt;/strong&gt;: 입력 파일의 루트 디렉토리를 지정한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;strict&lt;/strong&gt;: 모든 엄격한 타입 검사 옵션을 활성화한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;noImplicitAny&lt;/strong&gt;: 암시적인 &apos;any&apos; 타입이 없는 경우 오류를 발생시킨다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;esModuleInterop&lt;/strong&gt;: CommonJS와 ES 모듈 간의 상호 운용성을 위한 코드를 생성한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;skipLibCheck&lt;/strong&gt;: 선언 파일의 타입 검사를 건너뛴다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[gitignore]]></title><description><![CDATA[gitignore란?  는 Git에서 프로젝트에 특정 파일 또는 디렉터리를 추적하지 않도록 지시하는 파일이다.  파일에 나열된 패턴과 일치하는 파일/디렉터리는 Git에서 무시된다. 이는 민감한 데이터, 컴파일 된 바이너리, 로그 파일 등 Git…]]></description><link>https://sharknia.github.io/gitignore/</link><guid isPermaLink="false">https://sharknia.github.io/gitignore/</guid><pubDate>Sat, 02 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;gitignore란?&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 는 Git에서 프로젝트에 특정 파일 또는 디렉터리를 추적하지 않도록 지시하는 파일이다. &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일에 나열된 패턴과 일치하는 파일/디렉터리는 Git에서 무시된다. 이는 민감한 데이터, 컴파일 된 바이너리, 로그 파일 등 Git 저장소에 저장할 필요가 없거나 저장해서는 안되는 파일들을 제외하는 데에 유용하다. &lt;/p&gt;
&lt;h2&gt;문법&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일에는 여러 패턴을 사용할 수 있는데, 이를 알고 있으면 파일과 디렉터리를 무시하는 데 더 유용하게 사용할 수 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;&lt;/code&gt; : 어떤 문자든지 0개 이상을 의미한다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;.log&lt;/code&gt;는 모든 로그 파일을 무시한다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt; : 디렉터리 구분자로 사용된다. &lt;code class=&quot;language-text&quot;&gt;/logs&lt;/code&gt;는 logs라는 이름의 디렉터리만 무시하며, &lt;code class=&quot;language-text&quot;&gt;logs/&lt;/code&gt;는 logs로 시작하는 모든 디렉터리를 무시한다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;!&lt;/code&gt; : 패턴을 부정한다. 예를 들면, &lt;code class=&quot;language-text&quot;&gt;.log&lt;/code&gt; 아래에 &lt;code class=&quot;language-text&quot;&gt;!important.log&lt;/code&gt;를 추가하면, 모든 로그 파일은 무시되지만 important.log 파일은 예외로 추적된다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;#&lt;/code&gt; : 주석을 작성하는 데 사용된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;전역 설정하기&lt;/h2&gt;
&lt;p&gt;프로젝트마다 반복적으로 무시 해야하는 파일이나 디렉터리가 있다면, 전역 &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일을 만들 수 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;전역 &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일 생성: &lt;code class=&quot;language-text&quot;&gt;touch ~/.gitignore_global&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Git 설정에 전역 &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 파일 추가: &lt;code class=&quot;language-text&quot;&gt;git config --global core.excludesFile ~/.gitignore_global&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;TypeScript 프로젝트에서의 gitignore&lt;/h2&gt;
&lt;p&gt;일반적으로 아래와 같지만, 프로젝트의 상황과 요구에 따라 추가/제외되는 항목이 당연히 있을 수 있다. &lt;/p&gt;
&lt;h3&gt;포함하지 말아야 할 파일들&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/node_modules/&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;npm install&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt; 명령으로 설치한 패키지들이 이 디렉터리에 저장된다. 이는 대부분의 경우에 매우 크며, 이를 Git에 저장하는 것은 비효율적이다. 대신, &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;에 의존성이 기록되므로 다른 개발자들은 동일한 패키지를 쉽게 설치할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/dist/&lt;/code&gt; &lt;strong&gt;또는&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;/build/&lt;/code&gt;: TypeScript를 JavaScript로 컴파일할 때 생성되는 출력 디렉터리이다. 이것은 원본 코드에서 파생된 것이므로 저장소에 포함할 필요가 없다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt;: 환경 변수가 포함된 파일이다. 이 파일은 민감한 정보 (API 키, 비밀번호 등)를 포함할 수 있으므로 공개 저장소에 저장되어서는 안된다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.DS_Store&lt;/code&gt;: macOS에서 파일 시스템이 생성하는 메타데이터 파일이다. 이는 프로젝트와 관련이 없으므로 무시해야 한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;포함되어야 할 파일들&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.js&lt;/code&gt;&lt;strong&gt;와&lt;/strong&gt; &lt;code class=&quot;language-text&quot;&gt;.js.map&lt;/code&gt;: TypeScript를 JavaScript로 컴파일하면, 일반적으로 &lt;code class=&quot;language-text&quot;&gt;.js&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;.js.map&lt;/code&gt; 파일이 생성된다. 이러한 파일은 &lt;code class=&quot;language-text&quot;&gt;/dist/&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;/build/&lt;/code&gt; 디렉터리에 포함될 수 있지만, 그렇지 않은 경우에도 이러한 파일을 무시하는 것이 좋다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.tsbuildinfo&lt;/code&gt;: TypeScript 3.4 이후로 컴파일러는 프로젝트 빌드 정보를 이 파일에 저장할 수 있다. 이것은 증분 빌드(incremental build)를 빠르게 만들기 위한 것이므로 저장소에 포함시키지 않아도 된다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/coverage/&lt;/code&gt;: 테스트 코드의 코드 커버리지를 저장하는 디렉터리이다. 보통 이 디렉터리는 코드 커버리지 도구로 생성된다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;로그 파일&lt;/strong&gt;: 예를 들면, &lt;code class=&quot;language-text&quot;&gt;.log&lt;/code&gt; 확장자를 가진 파일들이다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;정의되었는데, 추적되는 경우&lt;/h2&gt;
&lt;p&gt;예를 들어 나의 경우에는 *.js를 정의했는데 특정 js 파일이 계속해서 추적당했다. 이는 몇가지 이유가 있을 수 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;이전에 추적되었던 파일&lt;/li&gt;
&lt;li&gt;위치 문제&lt;/li&gt;
&lt;li&gt;다른 &lt;code class=&quot;language-text&quot;&gt;.gitignore&lt;/code&gt; 규칙&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;나의 경우에는 1번의 경우였다. &lt;code class=&quot;language-text&quot;&gt;git rm --cached 파일명.js&lt;/code&gt; 명령어를 사용해 추적에서 따로 제거해줘야 한다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Branch]]></title><description><![CDATA[브랜치란? 브랜치는 코드의 다양한 버전을 동시에 관리하고 작업할 수 있게 해주는 도구이다. 개발자는 브랜치를 통해 작업을 병렬적으로 진행하고 나중에 원하는 시점에 이 작업들을 병합할 수 있다.  브랜치의 핵심 개념 Commit Git…]]></description><link>https://sharknia.github.io/Branch/</link><guid isPermaLink="false">https://sharknia.github.io/Branch/</guid><pubDate>Fri, 01 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;브랜치란?&lt;/h3&gt;
&lt;p&gt;브랜치는 코드의 다양한 버전을 동시에 관리하고 작업할 수 있게 해주는 도구이다. 개발자는 브랜치를 통해 작업을 병렬적으로 진행하고 나중에 원하는 시점에 이 작업들을 병합할 수 있다. &lt;/p&gt;
&lt;h3&gt;브랜치의 핵심 개념&lt;/h3&gt;
&lt;h4&gt;Commit&lt;/h4&gt;
&lt;p&gt;Git에서 변경점을 나타내는 스냅샷이다. 각 커밋은 이전 커밋에 대한 참조를 가진다. &lt;/p&gt;
&lt;h4&gt;HEAD&lt;/h4&gt;
&lt;p&gt;현재 작업중인 브랜치의 가장 최신 커밋이다. &lt;/p&gt;
&lt;h4&gt;Merge&lt;/h4&gt;
&lt;p&gt;두 브랜치의 변경 내용을 합치는 과정이다. &lt;/p&gt;
&lt;h3&gt;브랜치의 사용목적&lt;/h3&gt;
&lt;p&gt;브랜치를 사용하여 코드의 특정 시점을 백업하자. 이것은 Git의 핵심 기능 중 하나이다. &lt;/p&gt;
&lt;p&gt;브랜치를 사용하는 것은 코드의 특정 상태나 특정 기능을 분리하고, 나중에 필요한 경우 그 상태로 되돌아가거나 다른 브랜치와 병합하는 데 유용하다. &lt;/p&gt;
&lt;p&gt;브랜치를 백업 목적으로 사용하는 것의 장점은 다음과 같다. &lt;/p&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;상태보존 : 특정 코드의 상태를 보존하고 싶을 때 브랜치를 생성하면 그 시점의 코드 상태를 유지할 수 있다. &lt;/li&gt;
&lt;li&gt;안전한 테스트 : 새로운 기능이나 변경 사항을 시도하고 싶을 때 별도의 브랜치에서 작업하면 메인 브랜치를 안전하게 보호할 수 있다. &lt;/li&gt;
&lt;li&gt;히스토리 관리 : 브랜치를 통해 어떤 변경 사항이 이루어졌는지의 히스토리를 명확하게 관리할 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;주의사항&lt;/h4&gt;
&lt;p&gt;많은 수의 브랜치가 생성되면 관리가 복잡해질 수 있다. 정기적으로 더 이상 필요하지 않은 브랜치를 정리하는 습관을 들이는 것이 좋다. &lt;/p&gt;
&lt;p&gt;코드의 모든 작은 변경마다 브랜치를 생성한다면(그럴 리 없겠지만), 과도하게 많은 브랜치가 생성될 수 있다. 백업 목적으로 브랜치를 사용할 때에는 특히 실제로 중요한 시점에서만 브랜치를 생성하는 것이 바람직하다. &lt;/p&gt;
&lt;h3&gt;브랜치 이름 짓기&lt;/h3&gt;
&lt;p&gt;브랜치 이름을 지을 때 고려할 수 있는 일반적인 가이드라인은 다음과 같다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;명확하게&lt;/li&gt;
&lt;li&gt;짧게&lt;/li&gt;
&lt;li&gt;소문자 사용 : 대소문자 구문을 위해 소문자로 통일하는 것이 좋다. &lt;/li&gt;
&lt;li&gt;하이픈 사용 : 띄어쓰기가 안되므로 단어와 단어를 하이픈으로 구분한다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;카테고리/분류 사용 : 작업의 유형 또는 카테고리를 브랜치 이름의 접두사로 사용한다. 예시는 다음과 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;feat/&lt;/code&gt; 새로운 기능 추가&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;fix/&lt;/code&gt; 버그 수정&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;refactor/&lt;/code&gt; 코드 리팩토링&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;docs/&lt;/code&gt; 문서 관련 작업&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;예) &lt;code class=&quot;language-text&quot;&gt;feat/user-authentication&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;티켓 번호 포함 : 이슈 트래커나 프로젝트 관리도구와 연계된 작업의 경우 해당 IDX를 브랜치 이름에 포함시키는기 유용할 수 있다. &lt;/li&gt;
&lt;li&gt;명사보다 동사를 선호 &lt;/li&gt;
&lt;li&gt;확장자 사용 주의 : 브랜치 이름에 txt, md 같은 확장자를 포함하지 않도록 주의한다. &lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[DataTable 클래스]]></title><description><![CDATA[DataTable 개요 DataTable은 .Net 프레임워크와 .Net Core, 그리고 .Net 5 이후 버전에서 제공하는 ADO.Net의 일부이다. 메모리 상에서 데이터의 테이블 형태를 관리하기 위한 .Net의 클래스이다.  DataTable…]]></description><link>https://sharknia.github.io/DataTable-클래스/</link><guid isPermaLink="false">https://sharknia.github.io/DataTable-클래스/</guid><pubDate>Fri, 01 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;DataTable 개요&lt;/h3&gt;
&lt;p&gt;DataTable은 .Net 프레임워크와 .Net Core, 그리고 .Net 5 이후 버전에서 제공하는 ADO.Net의 일부이다. 메모리 상에서 데이터의 테이블 형태를 관리하기 위한 .Net의 클래스이다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DataTable은 클래스이다. 객체를 인스턴스화하고 메서드와 속성에 액세스 할 수 있다. &lt;/li&gt;
&lt;li&gt;메모리상에서 데이터의 테이블 형태를 표현한다. 열(DataColumn)과 행(DataRow)로 이루어진다. &lt;/li&gt;
&lt;li&gt;데이터베이스 쿼리 결과 저장, 사용자 인터페이스에 데이터 표시, 데이터 처리 및 변환, XML과 같은 다른 형식으로 데이터 직렬화 등 다양한 곳에 사용될 수 있다. &lt;/li&gt;
&lt;li&gt;DataTable은 DataSet 내에 존재할 수 있다. DataSet은 여러 DataTable 객체를 포함할 수 있으며, 이러한 테이블간에 관계(DataRelation)를 정의할 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;장점과 단점&lt;/h3&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;자유로운 데이터 접근 : 행과 열을 사용하여 데이터에 액세스 할 수 있으므로 데이터를 쉽게 탐색/수정 할 수 있다. &lt;/li&gt;
&lt;li&gt;자체적인 변경 추적 : 데이터 변경 내역을 추적할 수 있다. &lt;/li&gt;
&lt;li&gt;연결 독립성 : 메모리 상의 데이터 구조이므로 데이터베이스 연결이 필요 없다. &lt;/li&gt;
&lt;li&gt;스키마 정보 포함 : 스키마 정보를 포함하므로 데이터의 형식 및 관계를 정의하고 이해하기 쉽다. &lt;/li&gt;
&lt;li&gt;필터 및 계산 기능 : 데이터를 필터링 하거나 계산 할 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;메모리 사용량 : 메모리 기반의 구조이므로 큰 데이터 세트를 로딩할 경우 상당한 양의 메모리를 사용할 수 있다. &lt;/li&gt;
&lt;li&gt;성능 : 엔터티나 객체와 같은 스트림라인된 모델에 비해 처리 및 직렬화에 상대적으로 더 많은 리소스를 요구한다. &lt;/li&gt;
&lt;li&gt;타이핑 : 데이터를 액세스 할 때 타입 캐스팅이 필요할 수 있다. &lt;/li&gt;
&lt;li&gt;학습 곡선 : ORM이나 LINQ 같은 현대적인 접근법에 익숙한 개발자에게는 학습곡선이 필요하다. &lt;/li&gt;
&lt;li&gt;모듈성과 확장성 : 객체지향적인 접근법이나 도메인 주도 설계와 같은 설계 패턴에 직접 통합하기 어려울 수 있다. &lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;DataTable.Compute의 사용 가능한 주요 표현식&lt;/h3&gt;
&lt;h4&gt;집계함수&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Sum&lt;/th&gt;
&lt;th&gt;합계&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Avg&lt;/td&gt;
&lt;td&gt;평균&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Min&lt;/td&gt;
&lt;td&gt;최소값&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Max&lt;/td&gt;
&lt;td&gt;최대값&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Count&lt;/td&gt;
&lt;td&gt;항목의 수&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StDev&lt;/td&gt;
&lt;td&gt;표준 편차&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Var&lt;/td&gt;
&lt;td&gt;분산&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;산술 연산자&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;+&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;-&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;%&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;비교 연산자&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;=&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;&amp;lt;&gt;&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;&gt;&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;&amp;lt;&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;&gt;=&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;&amp;lt;=&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;논리 연산자&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;AND&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;OR&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;NOT&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;문자열 함수&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;LEN&lt;/th&gt;
&lt;th&gt;문자열의 길이&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SUBSTRING&lt;/td&gt;
&lt;td&gt;부분 문자열&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TRIM&lt;/td&gt;
&lt;td&gt;앞 뒤 공백 제거&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UPPER&lt;/td&gt;
&lt;td&gt;대문자로 변환&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOWER&lt;/td&gt;
&lt;td&gt;소문자로 변환&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;기타 함수&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ISNULL&lt;/th&gt;
&lt;th&gt;NULL일 경우 대체할 값 반환&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CONVERT&lt;/td&gt;
&lt;td&gt;데이터 타입 변환&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;기타 다른 주요 메소드&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Select&lt;/th&gt;
&lt;th&gt;특정 조건을 만족하는 행을 DataRow 배열로 반환&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;NewRow&lt;/td&gt;
&lt;td&gt;새 DataRow를 생성&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Rows.Add&lt;/td&gt;
&lt;td&gt;행을 추가&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Rows.Remove&lt;/td&gt;
&lt;td&gt;행을 삭제&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Rows.RemoveAt&lt;/td&gt;
&lt;td&gt;지정한 위치의 행을 삭제&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Clear&lt;/td&gt;
&lt;td&gt;모든 행을 삭제&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Copy&lt;/td&gt;
&lt;td&gt;DataTable의 사본을 생성&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Clone&lt;/td&gt;
&lt;td&gt;구조만 복사한 새 DataTable을 반환&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GetChanges&lt;/td&gt;
&lt;td&gt;변경된 행들만을 포함하는 새 DataTable을 반환&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;AcceptChanges&lt;/td&gt;
&lt;td&gt;변경 내용을 확정&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RejectChanges&lt;/td&gt;
&lt;td&gt;변경 내용을 취소&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</content:encoded></item><item><title><![CDATA[Notion API(2)]]></title><description><![CDATA[무엇을 하는가? Notion API를 이용해서 내가 쓴 글 들을 불러와 MD…]]></description><link>https://sharknia.github.io/Notion-API2/</link><guid isPermaLink="false">https://sharknia.github.io/Notion-API2/</guid><pubDate>Fri, 01 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;무엇을 하는가?&lt;/h2&gt;
&lt;p&gt;Notion API를 이용해서 내가 쓴 글 들을 불러와 MD 파일로 만들려고 한다. 그 과정을 실시간으로 기록하려고 한다. 명확하게 가능한가? 는 사실 아직 알아보지 않았다. &lt;/p&gt;
&lt;h2&gt;왜 하는가?&lt;/h2&gt;
&lt;p&gt;너무나 너무나 귀찮기 때문이다.&lt;/p&gt;
&lt;p&gt;블로그 포스팅을 위해서 마크다운 에디터로 노션을 쓰고 싶기 때문이다. 아니? 노션으로 쓴 것을 그대로 블로그에 커밋해버리고 싶기 때문이다. 그 과정을 자동화해버리고 싶기 때문이다. &lt;/p&gt;
&lt;p&gt;즉, 노션에 글만 써두면 자동으로 마크다운으로 받아져서 깃허브에 커밋이 되고 깃허브 페이지에 배포가 되는 원대한 자동화를 원한다. &lt;/p&gt;
&lt;h2&gt;어떻게 하는가?&lt;/h2&gt;
&lt;h3&gt;환경&lt;/h3&gt;
&lt;p&gt;Node.js 18.17.1 버전을 사용한다.&lt;/p&gt;
&lt;p&gt;Node.js 프로젝트 시작&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.env 생성&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;NOTION_KEY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;노션키&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;NOTION_PAGE_ID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PageId&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.gitignore에 .env 등록&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;.env&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.env 안의 내용을 가져올 수 있도록 &lt;code class=&quot;language-text&quot;&gt;dotenv&lt;/code&gt; 패키지 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; dotenv&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notion API를 이용할 수 있도록 패키지 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; @notionhq/client&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;API 확인&lt;/h3&gt;
&lt;h4&gt;코드&lt;/h4&gt;
&lt;p&gt;Notion API reference에 아주 친절하게 JavaScript 예제 코드까지 전부 붙어있다. Node.js를 선택한 이유이기도 하다. 예제 코드가 자바스크립트로 되어있어 그대로 갖다 붙이기 쉬워 보였기 때문이다. 일단 API의 결과물이 어떻게 날아오는지 확인하기 위해 있는 대로 갖다 붙였다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;dotenv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;@notionhq/client&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_PAGE_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOTION_KEY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notion &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;auth&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; key &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;databases&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;database_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pageId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// console.log(response);&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;//페이지들을 돌면서 id로 페이지를 읽어온다. &lt;/span&gt;
        response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;results&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;//page properties&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;page_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pageId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;----------Page Properties----------&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;//page contents&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blockId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blocks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retrieve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;token literal-property property&quot;&gt;block_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; blockId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;----------Page Contents as Block----------&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blockId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pageId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; notion&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blocks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;token literal-property property&quot;&gt;block_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; blockId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token literal-property property&quot;&gt;page_size&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;----------Page Block List----------&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Error querying the database:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;노션의 페이지 구성&lt;/h4&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d66ebcb40149754ca4d4201abad4eef1/d5d41/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVR42m1SS47TQBTMlViwQ4glB2A1XIEbIHGcsBgYic1sYDaAEIhFJkIiv0kcJ47tOLHbseNP4k9Rr6MwM7JbKnX36/fqfbo6SZLAtm342y08z0OgFPzAR+ATQYDNZgOlAjxc9fGIwrLQtjphqNDv9zCd3uFuMsLgzy3msylGoyEmkzGGg78Y8/yYsUbluvCYbLlcwiK54zioqgqdmo9lWUL2moY8iVEWRSOzvEuA9qN/uVrhSL/D4aBxZNW6Qrnkea6N2plGCRRIItkb5CSq4ri9ZQkS9oJOcn7Ylqw8zTD+1UPv2098/f4Dxu/PSNYWahW2EwqZ6zqcga0RhqGG4ucUhwwTy8fblxd4/fQFnjx7jnev3mDZMwC14YjqJqFUpphNfjvLUqTpCTIGWUFS4ObTNb58vES3+x5XH24Q7zivraf99vs9Yrb/f4ZxHOkfFtnIQxRFGnIWBUS7ECnJkyxjkoyzlkT8oPUaW8a4/G2BkGvCPQPNuQFzMcec+2Jh6t2gdE73BWZTno2ZltGKEhE1lCRsnaG06lDYMsfzLG1KwrZPONulNUHCSkpWW5imVoRWRn0/y87Z8EhnDVQNYdctchLCfwhURTchecHcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/d66ebcb40149754ca4d4201abad4eef1/ca1dc/image1.png&apos; srcset=&apos;/static/d66ebcb40149754ca4d4201abad4eef1/e7570/image1.png 170w,
/static/d66ebcb40149754ca4d4201abad4eef1/f46e7/image1.png 340w,
/static/d66ebcb40149754ca4d4201abad4eef1/ca1dc/image1.png 680w,
/static/d66ebcb40149754ca4d4201abad4eef1/02d09/image1.png 1020w,
/static/d66ebcb40149754ca4d4201abad4eef1/9d567/image1.png 1360w,
/static/d66ebcb40149754ca4d4201abad4eef1/d5d41/image1.png 2238w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
page properties는 정확하게 마크다운의 Front Matter에 사용하면 될 것 같다. &lt;/p&gt;
&lt;p&gt;그리고, 마크다운의 콘텐츠에 page content가 들어가면 되겠다. &lt;/p&gt;
&lt;p&gt;page properties를 얻기 위해서는 notion.pages.retrieve method를 이용하면 된다. &lt;/p&gt;
&lt;h4&gt;코드 실행 결과문 분석&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;notion.pages.retrieve&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;page&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;created_time&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2023-08-23T13:32:00.000Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;last_edited_time&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2023-09-01T12:45:00.000Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;created_by&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;last_edited_by&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;cover&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;icon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;parent&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;database_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;database_id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;archived&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;properties&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;tags&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;PHNF&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;multi_select&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;multi_select&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;AWS&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;brown&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;...id...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;TAG2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pink&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://www.notion.so/...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;public_url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://name.notion.site/...&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정확하게 페이지의 속성들을 가져오고 있다. Front Matter에 필요한 내용들을 속성으로 만들어두면 완벽할 것 같다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;notion.blocks.retrieve&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;notion.blocks.retrieve는 page ID를 넣으면 해당 페이지의 정보를 가져다 주는데 왜냐면 노션에서 모든 단위가 블록이기 때문이다. 해당 페이지의 블록으로서의 데이터를 주는 것이기 때문에 지금 내 상황에선 그다지 사용할 필요가 없어 보인다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;notion.blocks.children.list&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;list&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;results&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;block&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;parent&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;page_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;page_id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;created_time&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2023-09-01T12:00:00.000Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;last_edited_time&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2023-09-01T12:12:00.000Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;created_by&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;last_edited_by&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;has_children&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;archived&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;heading_1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;heading_1&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;rich_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;제목1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;link&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;annotations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;italic&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;strikethrough&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;underline&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;plain_text&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;제목1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null keyword&quot;&gt;null&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;is_toggleable&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;color&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;default&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;우리가 원하는 Page Content들의 내용이 드디어 보인다. 위의 결과에는 나타나지 않았지만, 들여쓰기가 된 경우에는 해당 들여쓰기가 된 block의 상위 요소에게 종속된다. 다시 말 내 다음 블록에 들여쓰기를 한 블록이 있다면 &lt;code class=&quot;language-text&quot;&gt;has_children&lt;/code&gt; 속성이 true가 된다. 그 안을 다시 파고 들어가면 될 것 같다. &lt;/p&gt;
&lt;h2&gt;오늘의 결론&lt;/h2&gt;
&lt;h4&gt;코드 기록&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Sharknia/Notion-to-Markdown/tree/check-api-test-complete&quot;&gt;https://github.com/Sharknia/Notion-to-Markdown/tree/check-api-test-complete&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;이렇게 해서, API를 통해서 내 노션에 올려진 글들을 가져오는 데에 성공했다. 이제 다음 시간에는 이 JSON들을 가공해서 Markdown으로 변환하려고 한다. &lt;/p&gt;
&lt;p&gt;방법은 세 가지 정도를 생각하고 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;노션 내부 API 사용&lt;/p&gt;
&lt;p&gt;실제 노션 페이지를 띄울 때 오고 가는 요청값 들을 확인해 이를 사용하여 마크다운 파일을 바로 만들 수 있는 것으로 보인다. 이는 만들기가 가장 쉬워 보이나, 언제 폭파 될지 모른다는 문제점을 갖고 있다.  만약 폭파된다면 귀찮게도 다시 만들어야 한다는 치명적인 문제 때문에 지금 당장은 고려하고 있지 않지만 실패할 가능성도 가장 적어 보이므로, 귀찮아지면 언제든지 이쪽으로 틀도록 하자. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;오픈 소스 사용&lt;/p&gt;
&lt;p&gt;Notion 블록을 마크다운 형식으로 바꿔주는 오픈 소스가 있는 것으로 보인다. 아직 자세히 살펴보지는 않았다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;직접 구현&lt;/p&gt;
&lt;p&gt;그냥.. 직접 만든다. 아마 많은 기능을 지원하지는 못하겠지만 노션을 쓰면서 느낀 건데 많은 기능을 딱히 사용하지 않는다. 정말 개인적인 용도라면 그냥 생각보다 쉽게 될 것 같기도 하다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;일단 코드를 막 짜고 있는데, 이번에는 변화에 닫힌, 확장에 열린 코드를 짜보려고 한다. 설계도 신경써서 하고 싶다. &lt;/p&gt;
&lt;p&gt;또 여유가 허락된다면 타입스크립트도 써보고 싶다. &lt;/p&gt;
&lt;h2&gt;참고문서&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.notion.com/reference&quot;&gt;https://developers.notion.com/reference&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.hwahae.co.kr/all/tech/10960&quot;&gt;https://blog.hwahae.co.kr/all/tech/10960&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[npx]]></title><description><![CDATA[npx란? npx는 Node.js와 함께 제공되는 패키지 실행도구이다.  npm에서 제공하는 패키지를 설치하지 않고 즉시 실행하게 해주는 역할을 한다.  npx…]]></description><link>https://sharknia.github.io/npx/</link><guid isPermaLink="false">https://sharknia.github.io/npx/</guid><pubDate>Thu, 31 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h4&gt;npx란?&lt;/h4&gt;
&lt;p&gt;npx는 Node.js와 함께 제공되는 패키지 실행도구이다.  npm에서 제공하는 패키지를 설치하지 않고 즉시 실행하게 해주는 역할을 한다. &lt;/p&gt;
&lt;h4&gt;npx의 특징 및 기능&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;전역설치 없이 실행&lt;/p&gt;
&lt;p&gt;패키지를 전역으로 설치하지 않고 즉시 명령어를 바로 실행할 수 있다.&lt;/p&gt;
&lt;p&gt;에를 들어  gh-pages와 같은 CLI 도구를 전역적으로 설치하지 않아도 npx gh-pages로 바로 실행할 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;일회성 실행&lt;/p&gt;
&lt;p&gt;npx를 사용하여 패키지를 실행하면 해당 패키지는 일시적으로 다운로드 되어 실행되고 실행 후에는 시스템에서 제거된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;명령어 실행&lt;/li&gt;
&lt;li&gt;Github gist 실행&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;임시 패키지 실행&lt;/p&gt;
&lt;p&gt;특정 버전의 패키지나 다른 레지스트리의 패키지를 실행하는데 npx를 사용할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;npx의 장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;디스크 공간 절약&lt;/p&gt;
&lt;p&gt;사용 후에 패키지가 제거되므로, 불필요한 디스크 공간을 사용하지 않는다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;항상 최신 버전 사용&lt;/p&gt;
&lt;p&gt;최신 버전의 패키지를 가져와 실행한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;전역 충돌 방지&lt;/p&gt;
&lt;p&gt;패키지를 전역 설치하지 않으므로 다른 버전의 동일한 패키지가 설치되어 있을 때 충돌을 피할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;npx의 단점&lt;/h4&gt;
&lt;p&gt;매번 다시 받을 필요 없는 자주 사용하는 패키지나 용량이 큰 패키지의 경우 의미 없이 시간이 걸릴 수 있다. &lt;/p&gt;
&lt;h4&gt;npx의 실행순서&lt;/h4&gt;
&lt;p&gt;예를 들어 &lt;code class=&quot;language-text&quot;&gt;npx gh-pages -d public&lt;/code&gt; 를 실행하면 다음의 과정을 거친다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;시스템에 &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt;가 설치되어 있는지 확인한다. &lt;/li&gt;
&lt;li&gt;설치되어 있지 않다면, 일시적으로 &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt;를 다운로드한다. &lt;/li&gt;
&lt;li&gt;다운로드 된 &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; 패키지의 실행 파일을 사용하여 &lt;code class=&quot;language-text&quot;&gt;-d public&lt;/code&gt; 옵션과 함께 실행한다. &lt;/li&gt;
&lt;li&gt;실행이 완료된 후에 &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; 패키지는 시스템에서 제거된다. &lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[github.io 자동배포]]></title><description><![CDATA[왜 하는가 나는 귀찮은게 너무 귀찮다.  커밋 한 이후에  를 해야 배포가 되는 것도 너무 귀찮았다.  무엇을 하는가 그래서, 이걸  을 이용해서 자동화를 했다.  에 임의의 yml 파일을 넣어주면 해당 작업을 github action…]]></description><link>https://sharknia.github.io/githubio-자동배포/</link><guid isPermaLink="false">https://sharknia.github.io/githubio-자동배포/</guid><pubDate>Wed, 30 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h4&gt;왜 하는가&lt;/h4&gt;
&lt;p&gt;나는 귀찮은게 너무 귀찮다. &lt;/p&gt;
&lt;p&gt;커밋 한 이후에 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run deploy-gh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 해야 배포가 되는 것도 너무 귀찮았다. &lt;/p&gt;
&lt;h4&gt;무엇을 하는가&lt;/h4&gt;
&lt;p&gt;그래서, 이걸 &lt;code class=&quot;language-text&quot;&gt;github action&lt;/code&gt; 을 이용해서 자동화를 했다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.gitbub/workflows&lt;/code&gt;에 임의의 yml 파일을 넣어주면 해당 작업을 github action에서 진행한다. &lt;/p&gt;
&lt;h4&gt;어떻게 했는가&lt;/h4&gt;
&lt;p&gt;yml 파일 내용은 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;name: Deploy

on: &lt;span class=&quot;token comment&quot;&gt;# 어떤 작업이 수행될 때 deploy.yml 작업이 수행된다. (트리거)&lt;/span&gt;
  push: &lt;span class=&quot;token comment&quot;&gt;# push 작업이 수행될 때&lt;/span&gt;
    branches: &lt;span class=&quot;token comment&quot;&gt;# 특정 브랜치를 대상으로&lt;/span&gt;
      - master

permissions: &lt;span class=&quot;token comment&quot;&gt;# github action이 수행되는 환경에서 특정 권한을 준다&lt;/span&gt;
  contents: &lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: &lt;span class=&quot;token number&quot;&gt;20.3&lt;/span&gt;.1

      - name: Install &lt;span class=&quot;token function&quot;&gt;node&lt;/span&gt; packages
        run: &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt;
        
      - name: Check lint
        run: &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; check:lint
        
      &lt;span class=&quot;token comment&quot;&gt;# 아래와 같은 오류가 남&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;# error Command failed with exit code 1.&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;# info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;# - name: Check prettier&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;#   run: yarn check:prettier&lt;/span&gt;
      
      - name: Build
        run: &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; build
        
      - name: Set up GitHub token
        env:
          GITHUB_TOKEN: &lt;span class=&quot;token variable&quot;&gt;${{ secrets.Token}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        run: &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; config &lt;span class=&quot;token parameter variable&quot;&gt;--global&lt;/span&gt; user.email &lt;span class=&quot;token string&quot;&gt;&quot;email입력&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; config &lt;span class=&quot;token parameter variable&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;token string&quot;&gt;&quot;name입력&quot;&lt;/span&gt;

      - name: Set Git remote URL with token
        run: &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; remote set-url origin https://&lt;span class=&quot;token variable&quot;&gt;${{ secrets.classicToken }&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;@github.com/Sharknia/Sharknia.github.io

      - name: Deploy to GitHub Pages
        run: npx gh-pages &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; public&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;문제는 없었는가&lt;/h4&gt;
&lt;p&gt;처음에는 npm install을 사용했었는데, 패키지가 없다던지 여러가지 문제가 났다. 해당 문제는 npx 명령을 사용하는 것으로 해결돼&lt;/p&gt;
&lt;p&gt;Deploy 까지 자동으로 하기 위해서는 깃허브 설정 관련 명령어가 필요했다. &lt;/p&gt;
&lt;p&gt;특히, 반드시 토큰을 발행하고 Github Action의 환경 변수에 추가를 해주어야 한다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[github.io를 이용한 블로그]]></title><description><![CDATA[https://devhudi.github.io/gatsby-starter-hoodie/quick-start-kr/ 디자인이 마음에 들고, 필요로 하는 기능이 모두 들어가 있기 때문에 해당 테마를 선택했다. (시리즈 기능, 목차 기능, 댓글 기능)…]]></description><link>https://sharknia.github.io/githubio를-이용한-블로그/</link><guid isPermaLink="false">https://sharknia.github.io/githubio를-이용한-블로그/</guid><pubDate>Mon, 28 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://devhudi.github.io/gatsby-starter-hoodie/quick-start-kr/&quot;&gt;https://devhudi.github.io/gatsby-starter-hoodie/quick-start-kr/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;디자인이 마음에 들고, 필요로 하는 기능이 모두 들어가 있기 때문에 해당 테마를 선택했다. (시리즈 기능, 목차 기능, 댓글 기능)&lt;/p&gt;
&lt;p&gt;5번까지는 무사히 테스트 했는데, &lt;/p&gt;
&lt;p&gt;6번 특히 Netlify를 활용한 배포에서 막혔다. &lt;/p&gt;
&lt;p&gt;Repository를 생성 후, 해당 저장소를 바로 Netlify에서 빌드하려고 하면 의존성 오류가 났다. &lt;/p&gt;
&lt;p&gt;Netlify를 활용하려고 한 이유는 Github Pages를 통해 배포할 경우 마스터 브랜치와 별도의 브랜치가 생성되는것이 번잡스러웠기 때문이다. &lt;/p&gt;
&lt;p&gt;조금 더 알아본 결과,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 실행하면, &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/public&lt;/code&gt; 에 빌드 결과물이 생성되고 해당 폴더만 배포하면 될 것 같긴하다. 또는 &lt;code class=&quot;language-text&quot;&gt;github action&lt;/code&gt; 을 이용할 수도 있겠다. &lt;/p&gt;
&lt;p&gt;조금 더 편하게 블로그를 하려는 길은 아직 멀고 험하다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Notion API(1)]]></title><description><![CDATA[Notion API를 사용해보려고 한다.  이것으로 무엇을 할 것인가? 는 생각해둔게 있지만, 가능하다고 생각된 시점에서 본격적으로 해보려고 하고, 일단 오늘은 Notion API를 살펴보려고 한다.  간단한 소개 https://developers…]]></description><link>https://sharknia.github.io/Notion-API1/</link><guid isPermaLink="false">https://sharknia.github.io/Notion-API1/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Notion API를 사용해보려고 한다. &lt;/p&gt;
&lt;p&gt;이것으로 무엇을 할 것인가? 는 생각해둔게 있지만, 가능하다고 생각된 시점에서 본격적으로 해보려고 하고, 일단 오늘은 Notion API를 살펴보려고 한다. &lt;/p&gt;
&lt;h4&gt;간단한 소개&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://developers.notion.com/&quot;&gt;https://developers.notion.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Notion의 공개 Rest API를 이용하여 Notion Workspace와 상호 작용 할 수 있다.&lt;/p&gt;
&lt;p&gt;페이지, 데이터베이스, 사용자, 페이지 및 인라인 주석, Workspace의 포스팅에 대한 검색 등등.. &lt;/p&gt;
&lt;p&gt;점점 지원 영역이 늘어나는 것 같다. change-log가 꽤 활발해보인다. &lt;/p&gt;
&lt;h4&gt;API 생성 및 권한 부여&lt;/h4&gt;
&lt;p&gt;일단 우선, API를 생성하고 권한 부여 작업을 해야 한다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.notion.so/my-integrations&quot;&gt;https://www.notion.so/my-integrations&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;올라와 있는 한글 블로그들과 현재의 API 권한 부여 방식이 달라지는 바람에  여기서 은근 헤맸다… 역시 공식 가이드를 우선적으로 봐야한다. &lt;/p&gt;
&lt;p&gt;위 페이지에서 새 &lt;code class=&quot;language-text&quot;&gt;API 통합 만들기&lt;/code&gt; 를 선택한다. &lt;/p&gt;
&lt;p&gt;API의 권한은 워크스페이스별로 관리되므로, &lt;code class=&quot;language-text&quot;&gt;연결된 워크스페이스&lt;/code&gt; 를 정확히 선택해준다. &lt;/p&gt;
&lt;p&gt;필수 항목을 입력해주고 &lt;code class=&quot;language-text&quot;&gt;제출&lt;/code&gt; 을 눌러주자. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 476px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/b4786f442a67ccd65a59902b3261a38c/09261/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 37.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAz0lEQVR42qWRywrCMBBF+/9f5EJciKALF4JbQbSKbaNR82yaxzWpBa248DFwuTCTOTNksuAdgrcIIbkDwn/Klos5ZrMpRsMBJpMxUqQBPwNPpEC+3WC3XWO/zxPuPyB6EdJ69yL8R4DwCrSmRqvGoDE6eg1nTeveNV/BWiA9EpwpBT1WKMtDK8YuoCcCrUS39Xugi0e01vUOminFISV7oy4v2MM7iSitOVYFw7riIFcBcuHwto7A1Pj0uNf8POClrrRAcZYwRoEriauQ8YsMbpcEcK3ihZd7AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/b4786f442a67ccd65a59902b3261a38c/09261/image1.png&apos; srcset=&apos;/static/b4786f442a67ccd65a59902b3261a38c/e7570/image1.png 170w,
/static/b4786f442a67ccd65a59902b3261a38c/f46e7/image1.png 340w,
/static/b4786f442a67ccd65a59902b3261a38c/09261/image1.png 476w&apos; sizes=&apos;(max-width: 476px) 100vw, 476px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
그럼 바로 위와 같은 화면으로 넘어온다. 표시를 눌러서 시크릿 키를 복사해서 보관해주자. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 509px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/ea5eeced68059fd25375b5fbb8290f34/98235/image2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 112.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWElEQVR42pWU2bLTMBBE8/9/xRu88wbcJN73fZWXoXvsa8glgOOqKcmy1ZrlaC7LNErftyKyPNr6YXy2vs6Pc9hlhmBV5jLPRiYzyoT3yQyyTPs7zIwDvm/rZuzVOOfeCd8mvK/LtAny5yyJpa4KKYtM4iiQKPQlS2OJw1DHFMZvbVNJU5dqXdfIMHS6RqO4Ci44eey3U43p9WOPnzl2LTb1nYzY+Cst625PwqcgF1qeCg97bDx+5vgxj/umf9mFsX/63opl2xL4roS+o14xpwvsPTdnDYKzBKWROImQr0hzlueJGkM/PD0vOMnnW68eeq4t1v0q99ubFoF5HfpGK/qSh05uIFBsHmaxNE25VRRGpLq2Fv53WvALPLxZlrgO7Q7xXLHYcDCnC7JVeaedYRGNcejVow2b+uDrvCDEqrJQWBeGdXC2/sHYKUGikcSBeAjVdWzJs1RRoWe856+io1VmuHEYSIJrV+SpdAi3LFLMM72ShlU+CzY9SMGgY9/Etu8SBp7MaAgD8kkbATnxebkoxIPe0Jq6UE+5Rh5fwoZiZgAidYXQUFF9fiuKLK9j89Xt4FWl91hbWByiOLGsL1T3QTCsJwXZ92yJUJgAwlHoHSHXdXGE/r/OA0EgIZMWgIXJs0R8dp3Axd2GMIrEA/QQHKZ9ERv/hpJ6yNDYBHzPAZOhjnHk65zdnPMYXTyK/O2+gwpehGeiyuEyI+SmluvbN0mSUBzrqt4SdL778M5DOhzrhk70Qw8kBU8F3yeEu1R0Sil3ZLTj4F3XmMsKOS0x7og9a2s/ASLGAUHcd7NBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image2&apos; title=&apos;&apos; src=&apos;/static/ea5eeced68059fd25375b5fbb8290f34/98235/image2.png&apos; srcset=&apos;/static/ea5eeced68059fd25375b5fbb8290f34/e7570/image2.png 170w,
/static/ea5eeced68059fd25375b5fbb8290f34/f46e7/image2.png 340w,
/static/ea5eeced68059fd25375b5fbb8290f34/98235/image2.png 509w&apos; sizes=&apos;(max-width: 509px) 100vw, 509px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
기능도 커스텀 할 수 있는데, 일단 기본적인 기능을 넣어주었다. &lt;/p&gt;
&lt;p&gt;배포는 당연히 공개로 해두지 않았다. &lt;/p&gt;
&lt;p&gt;이후, 노션으로 돌아와 API와 연결된 워크스페이스를 선택하고 &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 264px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/ebf883758d0060d2c1bb5cb519b74d8b/df2dd/image3.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 231.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAuCAYAAAAoaDnGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFqElEQVR42pWW2VKjVRSFeQOrWhtIwpQ5JAQSkhAIM2EIczM10o1YhVZZljdeemPpvQ/hlWXpG/hYvEC26zv2Tv9JE1svVp3xX2ft4ezzj8Risafx8fFn4WsvX758Gh0d7Y1pY2o/HRt7uozHn87V3gktzY+Mx+OWTqdtbm7OstmsFQoFm52dtfn5eUskEmHu+PjYNjc3TcShrddqYa1zeGhfJZM2pf0lfX+juZHYi0+68Xi8OzU11Z2YmOiBsZSEfi6X64q4K5VdHRTGCa0tNBrdI61fJpPds3Sq+6i5kfjt9zadydmE2Kemp8PJIgntzMxMwOTkpOkAS0oNfTCtvXH2qN3S+HEmaRv5ko1M/PKXlWsN29neslarZa9evQom0q6srNjCwoLVZOLi4qJVq9XQZ9/y8rKtra2Ffm25aYV6wxLzdRtJ/PS7zVVrtrfbDpuur6+t3W7b7u5uIKxUKoHIATH7wIrIIGw2GlapLtp0qQLhH5afm7eUzJFveqZhKm0mkwmBAQSPcT6fD2A/yINiSYRVmfzzn5bOz9r62qoVSyU7ODgI6ra3t+3s7Cz0UdGQiv39fVtdXe07JIBxvmAz5do/hCkRtne2lTplOzo6CqSYfXl5Gfrr6+vWbDbDATs7O0FpH2E2Y5lc3mrtYxH++JvlSuUQraykexQB0QZEFBfgjlQq1TM5ilxh1pb2TuTDH3617GzJVhSpkkxGDdja2rKNjY1gOi1AZb+y90hLYWNXCuPlhqUzWTtU1hNFTOZj0gZiUgjz8R2+HEooPzZaG7opn70IPkEd0skzQLrU63UrFovBXEwFz5HxXUYcjeaKCHWXiVqn0wlJfHFxYaenpz1lbqanyHOEiKGtL7dEGIsFhZChplwuB1AsKBLMDTMzeggcDQhVjsLk+fl58CGpQr4B/Ig/MXVQHVZxKG6hMmUGCfGby/dS9n/Qp5AaeHt7G04jed+8eRPu7LAgOHAT+whg8GHznQ+Rz6InKQo5xCNI302mZT+gz1ovylGTHx4ebG9vL9xdVBJh8o78ZPz27dswh19RReDwOUJQyAENjzKE1DYW8CGb6eNsgGI+pl1aWgp9os/e9z6PEGIKyevliRbgQzfNzfQ9jmjUe4QMMIeTuHoEiMSm2FK2IMFPqMZEz1VMx4JeUKKJTYSR7yUfcj5w9ahkHVMdPmZvTyEliY8ICKfd3NyEawi4dlxDKo4nd9TcqNm9PCTsDHgjOImqgpk4HwX0UUpN5En4sLgOJPbY2FjIJRRBgA+pyqiiJlKxabmKpBQRHnwCuPM8A8GHmAUhH+BcTOe1Yx6VjDmAMfP4d1AlfuzzoQcFYkggoCjgBvokOOuQ4gIneNZkXyCx8SFVGrWkDSZeXV0FlRzAPP82uGYooacGwWAjPkIJeee/Il6xvf3gGR2sNmy6u7sL0cREUoe+P+peSIdV7D5C/OSpwweoIEX8+kUr87+hLyhMEEGIOQCTiSZ+9SfgPxO6Wa9fvw7X7uTkJDwH5CWBwa+e0FHVQ03GV9HiSXpAzDVEJS17/JeOXA0FdViUuSksevRQ5FWYisIt8BpJWoHngtMXFDZQvviQXOPlozJj/v39ffCrX4CPmuwbPQ+5CfT9+pHImOuV2R/1oYRekf3nksTGT/4LHP1zdd9+NCjR5I3WuFwE+Uhb4LV7h/xg2hAUNhbl/DxPp8gdGSEtJLmGQ5D0XHTCZfkpLSIqyr4KQ0XkFS2CGr5Vu6f2RDgeAHObWi/qm0k3OaFr1tbgAWjhS234Qv3Qanyt/pGwq/G+2ig46EJ4VMrtKwaLIcra+LUmz1UUpmX2gcpVR69dS5V6Q9W7KtWj2hOXeXGZFosg/g5pRf87ER4u6f+wrKAg/xvd2Y4+vOahUjTP5IZTkVyr/VabP9eeQ6Hj4J9SuEKh2otUUr/VLfsbDteB7KWNckEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image3&apos; title=&apos;&apos; src=&apos;/static/ebf883758d0060d2c1bb5cb519b74d8b/df2dd/image3.png&apos; srcset=&apos;/static/ebf883758d0060d2c1bb5cb519b74d8b/e7570/image3.png 170w,
/static/ebf883758d0060d2c1bb5cb519b74d8b/df2dd/image3.png 264w&apos; sizes=&apos;(max-width: 264px) 100vw, 264px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
오른쪽 상단의 … 를 눌러서 연결추가 를 선택한 다음, 아까 만들어준 API의 이름을 검색해 해당 API와 연결을 해주면 된다.&lt;/p&gt;
&lt;p&gt;이 부분이 UI가 달라진 부분이어서 공식 가이드를 보기 전까지 한참 헤맸던 부분이었다.&lt;/p&gt;
&lt;p&gt;이제, API와 Notion Workspace가 연결되었다!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[PRG 패턴 (Post/Redirect/Get)]]></title><description><![CDATA[정의 PRG 패턴은 웹 어플리케이션에서 폼 제출 후의 중복 제출 문제를 해결하기 위한 웹 디자인 패턴입니다. 사용자가 웹 폼을 제출한 후 (Post), 서버가 해당 요청을 처리하고 사용자를 새로운 위치로 리다이렉트 (Redirect…]]></description><link>https://sharknia.github.io/PRG-패턴-PostRedirectGet/</link><guid isPermaLink="false">https://sharknia.github.io/PRG-패턴-PostRedirectGet/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h4&gt;정의&lt;/h4&gt;
&lt;p&gt;PRG 패턴은 웹 어플리케이션에서 폼 제출 후의 중복 제출 문제를 해결하기 위한 웹 디자인 패턴입니다. 사용자가 웹 폼을 제출한 후 (Post), 서버가 해당 요청을 처리하고 사용자를 새로운 위치로 리다이렉트 (Redirect) 시킵니다. 이후 사용자는 리다이렉트된 위치의 정보를 (Get) 요청하여 표시합니다.&lt;/p&gt;
&lt;h4&gt;특징&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;중복 폼 제출 방지: 사용자가 새로고침을 눌렀을 때, 같은 폼 데이터가 다시 제출되는 것을 방지합니다.&lt;/li&gt;
&lt;li&gt;향상된 사용자 경험: 사용자가 폼 제출 후 브라우저의 뒤로 가기 버튼을 사용할 때, &quot;폼 데이터 제출 확인&quot;과 같은 경고 메시지가 나타나지 않습니다.&lt;/li&gt;
&lt;li&gt;검색 엔진 최적화: 리다이렉트된 URL은 검색 엔진에 의해 색인화될 수 있기 때문에, POST 요청으로 인한 잘못된 URL 색인화를 방지합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;브라우저 호환성: 대부분의 웹 브라우저에서 지원되므로 호환성 문제가 적습니다.&lt;/li&gt;
&lt;li&gt;직관적인 URL: 리다이렉트 후의 URL은 대체로 사용자에게 직관적이며, 북마크나 공유하기에 적합합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;단점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;추가적인 서버 응답: 리다이렉트로 인해 추가적인 서버 응답이 필요하므로, 약간의 성능 저하가 발생할 수 있습니다.&lt;/li&gt;
&lt;li&gt;구현 복잡성: 일부 웹 어플리케이션 프레임워크에서는 PRG 패턴의 구현이 복잡할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;쇠퇴 이유&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;프레임워크의 발전: 많은 현대 웹 프레임워크와 라이브러리가 이 문제를 내부적으로 처리합니다.&lt;/li&gt;
&lt;li&gt;Single Page Applications (SPA): AJAX와 함께 SPA의 인기가 높아지면서 전통적인 폼 제출 방식이 적게 사용되게 되었습니다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Python venv (Windows)]]></title><description><![CDATA[venv란? Python의 표준 라이브러리에 포함된 가상 환경 모듈이다. 가상환경은 프로젝트마다 독립적인 Python…]]></description><link>https://sharknia.github.io/Python-venv-Windows/</link><guid isPermaLink="false">https://sharknia.github.io/Python-venv-Windows/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h4&gt;venv란?&lt;/h4&gt;
&lt;p&gt;Python의 표준 라이브러리에 포함된 가상 환경 모듈이다. 가상환경은 프로젝트마다 독립적인 Python 환경을 생성하여 패키지 의존성을 분리하고 관리할 수 있는 기능을 제공한다. &lt;/p&gt;
&lt;p&gt;한 시스템 내에서 여러 프로젝트를 개발하거나 실행할 때 각 프로젝트별로 필요한 패키지를 격리된 환경에서 관리할 수 있다. &lt;/p&gt;
&lt;p&gt;Python 3.3부터 venv가 표준 라이브러리에 탑재되었다. &lt;/p&gt;
&lt;h4&gt;venv의 장점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;독립성&lt;/li&gt;
&lt;li&gt;의존성 분리&lt;/li&gt;
&lt;li&gt;가볍고 효율적&lt;/li&gt;
&lt;li&gt;파일 분리&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;venv를 이용한 가상환경 생성&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;가상환경을 생성할 디렉토리를 생성하고 이동한다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;가상환경 생성&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;phthon &lt;span class=&quot;token parameter variable&quot;&gt;-m&lt;/span&gt; venv venv&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;마지막 “venv”는 가상환경 이름이다. 이렇게 하면 현재 디렉토리 하에 가상환경의 이름으로 새로운 디렉토리가 생성된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;가상환경 활성화&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;venv&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;Scripts&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;activate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;첫번째 venv는 가상환경의 이름이다. 가상환경이 활성화되면, 프롬포트에서 가장 앞에 가상 환경의 이름이 나타난다. 이제부터 설치한 패키지는 해당 가상환경에만 적용이 된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;가상환경 비활성화&lt;/p&gt;
&lt;p&gt;가상환경이 활성화된 상태에서 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;deactivate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[print와 pprint]]></title><description><![CDATA[print와 pprint는 모두 Python에서 사용되는 출력 관련 함수이다.  print 값을 터미널에 간단히 출력할 때 사용한다.  pprint pprint는 pretty print…]]></description><link>https://sharknia.github.io/print와-pprint/</link><guid isPermaLink="false">https://sharknia.github.io/print와-pprint/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;print와 pprint는 모두 Python에서 사용되는 출력 관련 함수이다. &lt;/p&gt;
&lt;h3&gt;print&lt;/h3&gt;
&lt;p&gt;값을 터미널에 간단히 출력할 때 사용한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# 출력: 10 Hello&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;pprint&lt;/h3&gt;
&lt;p&gt;pprint는 pretty print의 약자로, 복잡한 데이터 구조를 읽기 쉽게 출력하는 데에 사용된다. 데이터 구조를 계층적으로 출력하고 들여쓰기를 적용하여 가독성을 향상시킨다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; pprint

data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;John&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;age&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;city&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;New York&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
pprint&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pprint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 위와 같은 코드를 실행하면,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;age&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token string&quot;&gt;&apos;city&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;New York&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;John&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;로 출력이 된다. &lt;/p&gt;
&lt;p&gt;딕셔너리, 리스트, 중첩된 데이터 구조 등을 보기 좋게 출력해주어 디버깅이나 데이터 분석시에 유리하다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[정규화와 역정규화]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/정규화와-역정규화/</link><guid isPermaLink="false">https://sharknia.github.io/정규화와-역정규화/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;정규화&lt;/h2&gt;
&lt;p&gt;정규화는 데이터베이스 설계 과정 중에서 중복을 최소화하고 데이터의 일관성과 무결성을 유지하기 위한 기법이다. 정규화는 데이터를 더 작은 논리적 단위로 분할하고 이를 통해 중복 데이터를 제거하여 데이터베이스의 효율성과 유지보수 용이성을 향상 시킨다. &lt;/p&gt;
&lt;p&gt;정규화는 대표적으로 업데이트 이상, 삽입 이상, 삭제 이상과 같은 무제를 해결한다. &lt;/p&gt;
&lt;h4&gt;주요 정규화 단계&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;제 1정규형(1NF)&lt;/li&gt;
&lt;li&gt;제 2정규형(2NF)&lt;/li&gt;
&lt;li&gt;제 3정규형(3NF)&lt;/li&gt;
&lt;li&gt;보이스-코드 정규형(BCNF)&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;정규화의 필요성&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;데이터 중복 최소화&lt;/p&gt;
&lt;p&gt;중복 데이터는 데이터베이스 내에서 일관성 문제를 일으킨다. 중복된 데이터가 변경될 경우 모든 복사본을 일관되게 업데이트 해야 하며, 이를 놓칠경우 불일치가 발생할 수 있다. &lt;/p&gt;
&lt;p&gt;정규화는 데이터를 더 작은 단위로 분할하여 중복을 최소화 하고 이로 인한 불일치 가능성을 낮춘다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터 일관성 유지&lt;/p&gt;
&lt;p&gt;데이터를 여러 테이블에 나누고 관계를 설정함으로써 데이터 간의 의미적 관계를 명확하게 정의할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터 이상 방지&lt;/p&gt;
&lt;p&gt;삽입, 업데이트, 삭제 시 발생할 수 있는 이상 현상을 방지한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;검색 성능 개선&lt;/li&gt;
&lt;li&gt;데이터베이스 구조의 명확성&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;유지보수 용이성&lt;/p&gt;
&lt;p&gt;정규화된 데이터는 데이터베이스 변경이 필요한 경우에도 수정 작업이 해당 테이블에서만 이루어질 가능성이 높다. 이로써 수정이 다른 부분에 미치는 영향을 최소화 하고 유지보수를 용이하게 만든다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터베이스 확장성&lt;/p&gt;
&lt;p&gt;추후 DB 확장 또는 새로운 기능 추가할 때 더 유연하게 대응할 수 있는 기반이 된다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터 무결성 강화&lt;/p&gt;
&lt;p&gt;중복이 최소화 되고 일관성이 유지되면서 데이터의 무결성이 강화된다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;정규화의 단점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;정규화되면 데이터의 일부가 여러 테이블에 나눠져 저장되어 테이블이 증가하므로 아래와 같은 문제점들이 발생할 수 있다. &lt;/li&gt;
&lt;li&gt;조인의 증가&lt;/li&gt;
&lt;li&gt;읽기 작업의 복잡성&lt;/li&gt;
&lt;li&gt;데이터 일관성 유지의 어려움&lt;/li&gt;
&lt;li&gt;갱신 작업의 비효율성&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;정규화시 주의해야 할 점&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;과도한 정규화&lt;/p&gt;
&lt;p&gt;너무 과도한 정규화는 복잡한 쿼리, 늘어난 조인으로 성능 저하의 원인이 될 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터베이스 디자인의 복잡성&lt;/p&gt;
&lt;p&gt;데이터가 분산되어 복잡한 조인과 서브쿼리가 늘어나면서 쿼리 작성, 유지보수가 어려워 질 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;역정규화의 필요성&lt;/p&gt;
&lt;p&gt;때로 성능 향상이나 특정 요구사항을 위해 데이터 무결성을 해칠 위험을 각오하고도 역정규화가 필요할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;역정규화&lt;/h2&gt;
&lt;p&gt;성능 향상 또는 특정 비즈니스 요구에 맞추기 위해 데이터베이스의 구조를 다시 조정하는 과정을 말한다. 정규화된 데이터를 다시 조합하여 중복 데이터를 허용하는 등의 작업이다.&lt;/p&gt;
&lt;h4&gt;역정규화가 필요한 이유&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;성능향상&lt;/p&gt;
&lt;p&gt;과도한 정규화는 여러 테이블에 데이터를 나누어 저장하므로 데이터 추출 또는 조인 시 성능 저하의 우려가 있다. 데이터를 조합하여 빠른 검색과 조인을 가능하게 하여 성능을 향상 시킬 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;복잡한 쿼리 간소화&lt;/p&gt;
&lt;p&gt;마찬가지로 과도한 정규화는 많은 조인으로 인해 쿼리문이 복잡해진다. 역정규화를 통해 쿼리문의 간소화를 노릴 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;비즈니스 요구 사항 충족&lt;/p&gt;
&lt;p&gt;보고서 생성 및 분석이나 실시간 대시보드 처럼 데이터를 실시간으로 수집하거나 집계해야 하는 경우 데이터베이스 구조를 최적화 하거나 데이터를 임의로 중복저장 하여 성능향상을 노릴 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;p&gt;정규화와 역정규화는 서로 장점, 단점을 역으로 공유한다. 따라서 데이터의 무결성이나 성능, 일관성 등 여러가지를 신중하게 검토하여 최적의 전략을 선택해야 한다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/DB-%ED%8A%9C%EB%8B%9D-%EA%B2%BD%ED%97%98&quot;&gt;DB 튜닝 경험&lt;/a&gt;  &lt;/p&gt;</content:encoded></item><item><title><![CDATA[트래픽 튜닝]]></title><description><![CDATA[트래픽 튜닝(traffic tuning…]]></description><link>https://sharknia.github.io/트래픽-튜닝/</link><guid isPermaLink="false">https://sharknia.github.io/트래픽-튜닝/</guid><pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;트래픽 튜닝(traffic tuning)은 네트워크 성능을 최적화하기 위한 방법 중 하나이다.&lt;/p&gt;
&lt;p&gt;트래픽 튜닝은 대부분 네트워크의 병목 현상을 최소화하고, 서비스 응답 시간을 개선하며, 사용자의 경험을 향상시키는 데 목표를 둔다. 다음은 트래픽 튜닝과 관련된 몇 가지 주요 측면과 전략이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;로드 밸런싱 (Load Balancing)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;로드 밸런싱은 서비스의 안정성을 유지하는 핵심 요소이다. 서비스에 과부하가 걸리지 않도록 여러 서버간에 트래픽을 균등하게 분산시켜 주는 역할을 한다. 이는 서비스의 가용성을 향상시키며, 단일 서버의 과부하를 방지한다.&lt;/p&gt;
&lt;p&gt;로드 밸런서는 일반적으로 클라이언트와 서버 중간에 위치하여 요청을 전달하는 역할을 한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;로드 밸런싱의 특징 및 이점&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;고가용성/장애복구/무정지 업그레이드&lt;/p&gt;
&lt;p&gt;로드 밸런서의 도입으로 서버 중 하나에 문제가 발생해도 다른 서버가 작업을 처리하므로 서비스 중단을 최소화 가능하다. &lt;/p&gt;
&lt;p&gt;또한 특정 서버에 장애가 발생했을 때에도 로드 밸런서가 그 사실을 인지하고 자동으로 정상 작동하는 서버로 트래픽을 전환할 수 있다. &lt;/p&gt;
&lt;p&gt;또, 서버의 유지보수나 업그레이드시 서비스 중단 없이 서버를 순차적으로 점검 또는 업그레이드 할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;확장성&lt;/p&gt;
&lt;p&gt;트래픽이 늘어나면 추가 서버를 쉽게 추가하여 트래픽을 처리할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;균등한 분산&lt;/p&gt;
&lt;p&gt;서버 간의 트래픽이나 작업 부하를 균등하게 분산하여 각 서버의 효율적인 작동을 지원한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;로드 밸런싱의 주요 유형&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DNS 로드 밸런싱&lt;/p&gt;
&lt;p&gt;DNS 쿼리를 기반으로 요청을 다양한 서버 IP 주소로 리디렉션한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;레이어 4 로드 밸런싱&lt;/p&gt;
&lt;p&gt;전송 계층(TCP/UDP)에서 작동하며, IP 주소와 포트 정보를 기반으로 트래픽을 분산시킨다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;레이어 7 로드 밸런싱&lt;/p&gt;
&lt;p&gt;응용 프로그램 계층에서 작동하며 HTTP 헤더, 쿠키, URL 등의 내용을 기반으로 트래픽을 분산시킨다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;로드 밸런싱의 주의 또는 단점&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;설정의 복잡성&lt;/p&gt;
&lt;p&gt;올바르게 설정하지 않으면 문제 발생 가능&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단일 장애점&lt;/p&gt;
&lt;p&gt;로드 밸런서 자체가 단일 장애점(SPOF, Single Point Of Failure)이 될 수 있다. 이를 예방하기 위해서 고가용성 구성을 가진 여러 로드 밸런서를 사용해야 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;세션 유지 문제&lt;/p&gt;
&lt;p&gt;로드 밸런서는 상태가 없는(stateless) 방식으로 작동하므로 특정 사용자의 세션을 특정 서버에 고정 시키기 위해 추가적인 설정이 필요&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;데이터 동기화 문제&lt;/p&gt;
&lt;p&gt;여러 서버에 걸쳐 데이터가 저장된다면 이를 동기화 하는 것이 중요하다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;기타&lt;/p&gt;
&lt;p&gt;비용, 지연 시간 등이 추가로 발생할 수 있다. 또한 로드 밸런서는 시스템 중앙에 위치하므로 보안 설정 및 업데이트에 주의를 기울여야한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;데이터베이스 최적화&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;대형 서비스에서는 많은 양의 데이터가 데이터베이스에 저장되기 때문에, 데이터베이스의 성능은 서비스의 성능에 직접적인 영향을 미친다. 쿼리 최적화, 인덱싱, 캐싱 등의 방법으로 데이터베이스 응답 시간을 최적화하는 것이 중요하다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sharknia.github.io/DB-%ED%8A%9C%EB%8B%9D-%EA%B2%BD%ED%97%98&quot;&gt;DB 튜닝 경험&lt;/a&gt;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;캐싱 (Caching)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;많은 사용자가 동일한 정보나 페이지에 접근할 가능성이 높다. 캐싱을 통해 빈번하게 접근되는 데이터나 페이지를 빠르게 제공할 수 있으며, 네트워크 트래픽과 데이터베이스 부하를 줄일 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;데이터 압축&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;대규모 서비스에서는 데이터 전송량이 많을 수 있다. 압축을 통해 네트워크 부하를 줄이고 응답 속도를 향상시킬 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;로깅 및 모니터링&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;실시간으로 서비스의 상태를 모니터링하고, 문제가 발생할 경우 빠르게 대응하기 위해 로깅 및 모니터링 시스템의 구축이 중요하다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CDN 사용&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;이미지나 정적 파일과 같은 컨텐츠를 전세계적으로 빠르게 제공하기 위해 CDN 사용을 고려할 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Nuget 패키지 dll 추출]]></title><description><![CDATA[파일의 확장자를 으로 변경합니다. 예를 들어, 을 으로 변경합니다. ZIP 압축 해제 도구 (예: WinRAR, 7-Zip…]]></description><link>https://sharknia.github.io/Nuget-패키지-dll-추출/</link><guid isPermaLink="false">https://sharknia.github.io/Nuget-패키지-dll-추출/</guid><pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.nupkg&lt;/code&gt; 파일의 확장자를 &lt;code class=&quot;language-text&quot;&gt;.zip&lt;/code&gt;으로 변경합니다. 예를 들어, &lt;code class=&quot;language-text&quot;&gt;tiktokensharp.1.0.6.nupkg&lt;/code&gt;을 &lt;code class=&quot;language-text&quot;&gt;tiktokensharp.1.0.6.zip&lt;/code&gt;으로 변경합니다.&lt;/li&gt;
&lt;li&gt;ZIP 압축 해제 도구 (예: WinRAR, 7-Zip 등)를 사용하여 변경된 &lt;code class=&quot;language-text&quot;&gt;.zip&lt;/code&gt; 파일을 엽니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;.zip&lt;/code&gt; 파일 내에서 &lt;code class=&quot;language-text&quot;&gt;lib&lt;/code&gt; 폴더나 해당하는 폴더를 찾아 &lt;code class=&quot;language-text&quot;&gt;.dll&lt;/code&gt; 파일을 찾습니다.&lt;/li&gt;
&lt;li&gt;해당 &lt;code class=&quot;language-text&quot;&gt;.dll&lt;/code&gt; 파일을 추출합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이렇게 하면 &lt;code class=&quot;language-text&quot;&gt;.nupkg&lt;/code&gt;에서 원하는 &lt;code class=&quot;language-text&quot;&gt;.dll&lt;/code&gt; 파일을 얻을 수 있습니다.&lt;/p&gt;
&lt;p&gt;이렇게 하면 의존성, 버전 호환성 등의 문제가 발생할 수 있고 NuGet 패키지 관리 기능도 사용할 수 없기 때문에 권장하지 않는 방법입니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[무료 웹 호스팅 비교]]></title><description><![CDATA[gh-pages (GitHub Pages) 설명: GitHub Pages는 GitHub…]]></description><link>https://sharknia.github.io/무료-웹-호스팅-비교/</link><guid isPermaLink="false">https://sharknia.github.io/무료-웹-호스팅-비교/</guid><pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;gh-pages (GitHub Pages)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;설명&lt;/strong&gt;: GitHub Pages는 GitHub 저장소를 기반으로 정적 웹사이트를 무료로 호스팅할 수 있는 서비스입니다. 주로 프로젝트 페이지, 개인 포트폴리오, 단순한 블로그 등을 호스팅하는 데 사용됩니다. Jekyll과 같은 정적 사이트 생성 도구와 함께 사용될 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;비슷한 서비스&lt;/strong&gt;: GitLab Pages, Bitbucket Pages.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Heroku&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;설명&lt;/strong&gt;: Heroku는 클라우드 플랫폼으로 개발자들이 다양한 프로그래밍 언어로 작성된 애플리케이션을 쉽게 배포, 운영, 스케일링 할 수 있게 해줍니다. 기본적으로 무료 티어를 제공하며, 필요에 따라 리소스를 추가적으로 구매할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;비슷한 서비스&lt;/strong&gt;: Google Cloud Run, AWS Elastic Beanstalk, Microsoft Azure App Service.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Vercel&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;설명&lt;/strong&gt;: Vercel은 주로 프론트엔드와 서버리스 함수를 위한 배포 및 호스팅 플랫폼입니다. Next.js, Gatsby와 같은 프론트엔드 프레임워크에 특화되어 있지만, 다른 프로젝트에도 사용될 수 있습니다. 푸시를 할 때마다 자동으로 배포되는 Continuous Deployment를 지원합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;비슷한 서비스&lt;/strong&gt;: Netlify, Surge.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Vercel, Netlify, Surge에 대해 더 알아보자.&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Vercel&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Next.js의 개발팀에 의해 만들어진 서비스로, 특히 Next.js와의 통합이 매우 간편함.&lt;/li&gt;
&lt;li&gt;서버리스 함수의 지원.&lt;/li&gt;
&lt;li&gt;자동화된 Continuous Deployment (CD).&lt;/li&gt;
&lt;li&gt;무료 플랜과 함께 커스텀 도메인 연결 지원.&lt;/li&gt;
&lt;li&gt;최적의 사용 사례: Next.js를 사용한 프로젝트, React 프로젝트, 서버리스 함수가 필요한 프로젝트.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Netlify&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;다양한 정적 사이트 생성기와의 통합 (Gatsby, Hugo, Jekyll 등).&lt;/li&gt;
&lt;li&gt;서버리스 함수 지원.&lt;/li&gt;
&lt;li&gt;자동화된 Continuous Deployment (CD)와 Git 리포지토리 연동.&lt;/li&gt;
&lt;li&gt;Netlify Identity, Netlify CMS 등의 추가 기능을 제공.&lt;/li&gt;
&lt;li&gt;무료 플랜에도 커스텀 도메인 연결 지원.&lt;/li&gt;
&lt;li&gt;분할 A/B 테스팅, 인증 및 더 많은 기능 제공.&lt;/li&gt;
&lt;li&gt;최적의 사용 사례: 다양한 정적 사이트 생성 도구를 사용하는 프로젝트, 서버리스 함수가 필요한 프로젝트, 웹사이트에 추가 기능이 필요한 경우.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Surge&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;매우 간단하고 빠른 정적 웹사이트 배포.&lt;/li&gt;
&lt;li&gt;CLI를 통한 간단한 배포 경험.&lt;/li&gt;
&lt;li&gt;무료 플랜에서 커스텀 도메인 연결 가능.&lt;/li&gt;
&lt;li&gt;HTTPS 자동 지원.&lt;/li&gt;
&lt;li&gt;최적의 사용 사례: 빠르게 정적 사이트를 배포하고자 하는 프로젝트.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;요약&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Vercel은 특히 Next.js와 함께 사용하기에 최적화된 서비스입니다.&lt;/li&gt;
&lt;li&gt;Netlify는 다양한 정적 사이트 생성 도구와의 호환성과 다양한 추가 기능을 통해 풍부한 개발 경험을 제공합니다.&lt;/li&gt;
&lt;li&gt;Surge는 정적 웹사이트를 빠르고 간단하게 배포하는데 초점을 맞춘 서비스입니다.
각 프로젝트의 요구 사항에 따라 적합한 플랫폼을 선택할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[웹 사이트 프로젝트 vs 웹 응용 프로그램 프로젝트]]></title><description><![CDATA[웹 사이트 프로젝트 특징 웹 사이트 프로젝트는 파일 시스템을 기반으로 하는 프로젝트 유형입니다. 웹 애플리케이션의 파일들이 프로젝트 디렉토리 내에 그대로 위치하며, ASP.NET…]]></description><link>https://sharknia.github.io/웹-사이트-프로젝트-vs-웹-응용-프로그램-프로젝트/</link><guid isPermaLink="false">https://sharknia.github.io/웹-사이트-프로젝트-vs-웹-응용-프로그램-프로젝트/</guid><pubDate>Mon, 21 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;웹 사이트 프로젝트&lt;/h2&gt;
&lt;h3&gt;특징&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;웹 사이트 프로젝트는 파일 시스템을 기반으로 하는 프로젝트 유형입니다. 웹 애플리케이션의 파일들이 프로젝트 디렉토리 내에 그대로 위치하며, &lt;a href=&quot;http://asp.net/&quot;&gt;ASP.NET&lt;/a&gt; 컴파일러에 의해 실시간으로 컴파일됩니다.&lt;/li&gt;
&lt;li&gt;프로젝트 파일이 없고, 각 파일은 개별적으로 관리됩니다. 이로 인해 각 파일의 수정이 간단하며, 특히 작은 프로젝트나 신속한 개발에 유리합니다.&lt;/li&gt;
&lt;li&gt;런타임 시 컴파일되므로 변경된 파일만 다시 컴파일되고 재시작하지 않아도 됩니다.&lt;/li&gt;
&lt;li&gt;소스 코드 파일이 웹 서버에 그대로 배포되므로, 보안 측면에서 주의가 필요합니다.&lt;/li&gt;
&lt;li&gt;개발 및 디버깅이 상대적으로 더 간단합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;장단점&lt;/h3&gt;
&lt;h4&gt;장점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;신속한 개발과 테스트가 가능합니다.&lt;/li&gt;
&lt;li&gt;작은 규모의 프로젝트나 간단한 웹 사이트에 적합합니다.&lt;/li&gt;
&lt;li&gt;파일 단위로 변경 및 배포가 가능하여 유연성이 높습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;단점:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;대규모 프로젝트에서는 파일의 분산 관리 및 성능 문제가 발생할 수 있습니다.&lt;/li&gt;
&lt;li&gt;보안 취약성이 있을 수 있으며, 코드를 직접 노출시키기 때문에 보안에 더욱 신경을 써야 합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;웹 응용 프로그램 프로젝트&lt;/h2&gt;
&lt;h3&gt;특징&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;웹 응용 프로그램 프로젝트는 Visual Studio 솔루션 파일에 의해 관리되며, 컴파일된 어셈블리로 배포됩니다.&lt;/li&gt;
&lt;li&gt;컴파일된 어셈블리 파일은 웹 서버에 배치되므로, 소스 코드가 직접 노출되지 않습니다.&lt;/li&gt;
&lt;li&gt;코드 비하인드 파일과 레이어 분리가 쉽게 가능하며, 따라서 대규모 및 복잡한 프로젝트에 적합합니다.&lt;/li&gt;
&lt;li&gt;런타임 이전에 컴파일되므로, 타입 오류 등을 컴파일 단계에서 미리 확인할 수 있습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;장단점&lt;/h3&gt;
&lt;h4&gt;장점:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;대규모 및 복잡한 프로젝트에 적합하며, 레이어 구조와 코드 분리를 지원하여 유지 보수가 용이합니다.&lt;/li&gt;
&lt;li&gt;컴파일된 어셈블리의 배포로 인해 보안 측면에서 더욱 안전합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;단점:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;컴파일 단계가 추가되므로 개발 및 디버깅이 웹 사이트 프로젝트에 비해 상대적으로 복잡할 수 있습니다.&lt;/li&gt;
&lt;li&gt;프로젝트 설정이 복잡하거나 변경되어야 할 때 번거로울 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[MORETHAN-LOG 수정]]></title><description><![CDATA[아주 마음에 드는 오픈소스로, 다만 내 취향에 맞게 짜잘짜잘 임의로 몇 가지 부분을 수정했다.  Tags 정렬 등록한 태그들이 블로그 좌측에 나열되는데, 이를 이름 순서대로 나오게 정렬했다.  자동썸네일 기능 테스트 src\routes\Detail…]]></description><link>https://sharknia.github.io/MORETHAN-LOG-수정/</link><guid isPermaLink="false">https://sharknia.github.io/MORETHAN-LOG-수정/</guid><pubDate>Sun, 20 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;아주 마음에 드는 오픈소스로, 다만 내 취향에 맞게 짜잘짜잘 임의로 몇 가지 부분을 수정했다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Tags 정렬&lt;/p&gt;
&lt;p&gt;등록한 태그들이 블로그 좌측에 나열되는데, 이를 이름 순서대로 나오게 정렬했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// itemObj를 item name으로 정렬&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sortedItemObj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;itemObj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;localeCompare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      acc&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; val
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; acc
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;itemName&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; sortedItemObj&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;자동썸네일 기능 테스트&lt;/p&gt;
&lt;p&gt;src\routes\Detail\PostDetail\PostHeader.tsx 에서 썸네일을 가져오고 있고, &lt;/p&gt;
&lt;p&gt;src\pages[slug].tsx 에서 ogImageGenerateURL을 이용한 부분이 있다. &lt;/p&gt;
&lt;p&gt;다만 ogImageGenerateURL을 이용한 부분은 meta에만 적용되고 있고, 자동 썸네일 용 &lt;a href=&quot;https://og-image-korean.vercel.app/&quot;&gt;https://og-image-korean.vercel.app&lt;/a&gt; 는 만약 사용을 위해서라면 내 이미지를 활용한것으로 수정해야 할 것 같다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[NestJS 설치]]></title><description><![CDATA[모 회사 과제 때문에 NestJS를 설치해 볼 일이 생겨 기록해둔다.  Node.js 설치 NestJS는 Node.js를 기반으로 한다. Node.js에서 맞는 버전을 설치한다.  NestJS 프로젝트 생성 Node.js에 npm…]]></description><link>https://sharknia.github.io/NestJS-설치/</link><guid isPermaLink="false">https://sharknia.github.io/NestJS-설치/</guid><pubDate>Sun, 20 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;모 회사 과제 때문에 NestJS를 설치해 볼 일이 생겨 기록해둔다. &lt;/p&gt;
&lt;h4&gt;Node.js 설치&lt;/h4&gt;
&lt;p&gt;NestJS는 Node.js를 기반으로 한다. &lt;a href=&quot;https://nodejs.org/ko/download&quot;&gt;Node.js&lt;/a&gt;에서 맞는 버전을 설치한다. &lt;/p&gt;
&lt;h4&gt;NestJS 프로젝트 생성&lt;/h4&gt;
&lt;p&gt;Node.js에 npm이 포함되어있다. NestJS 서버를 구성하기 위해서는 @nestjs/cli 를 설치해야 한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; i &lt;span class=&quot;token parameter variable&quot;&gt;-g&lt;/span&gt; @nestjs/cli&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원하는 디렉토리로 이동해서 프로젝트를 초기화한다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;nest new &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;project-Name&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;project-Name&gt; 에는 원하는 프로젝트 이름을 입력한다. 패키지 매니저를 선택할 수 있는데, npm을 선택했다. &lt;/p&gt;
&lt;h4&gt;NestJS 프로젝트 구동&lt;/h4&gt;
&lt;p&gt;npm run start 명령어로 구동할 수 있지만, &lt;/p&gt;
&lt;p&gt;NestJS에는 내부적으로 내부적으로 &lt;a href=&quot;https://webpack.js.org/&quot;&gt;&lt;strong&gt;webpack&lt;/strong&gt;&lt;/a&gt;과 함께 작동하는 &lt;a href=&quot;https://docs.nestjs.com/cli/overview&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;@nestjs/cli&lt;/code&gt;&lt;/a&gt;를 제공한다. &lt;/p&gt;
&lt;p&gt;이 CLI 도구는 소스 코드의 변경을 감지하고 자동으로 애플리케이션을 재시작하는 기능을 포함하고 있다. &lt;/p&gt;
&lt;p&gt;개발 모드로 애플리케이션을 실행하려면 다음 명령어를 사용하면 된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run start:dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 localhost:3000 에서 서버가 실행되었음을 확인할 수 있다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[NestJS의 디렉토리 구조]]></title><description><![CDATA[NestJS는 MVC 패턴을 지원하지만, 전통적인 Express.js 스타일의 MVC 구조와는 약간 차이가 있다.  NestJS의 기본적인 디렉토리 구조는 다음과 같다.  NestJS…]]></description><link>https://sharknia.github.io/NestJS의-디렉토리-구조/</link><guid isPermaLink="false">https://sharknia.github.io/NestJS의-디렉토리-구조/</guid><pubDate>Sun, 20 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;NestJS는 MVC 패턴을 지원하지만, 전통적인 Express.js 스타일의 MVC 구조와는 약간 차이가 있다. &lt;/p&gt;
&lt;p&gt;NestJS의 기본적인 디렉토리 구조는 다음과 같다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lua&quot;&gt;&lt;pre class=&quot;language-lua&quot;&gt;&lt;code class=&quot;language-lua&quot;&gt;src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- app.module.ts         // 앱의 주 모듈&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- main.ts               // 앱의 진입점&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- controllers/          // 컨트롤러 폴더&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- app.controller.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- services/             // 서비스 폴더&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- app.service.ts&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NestJS에서는 각 기능별로 (예: 사용자, 포스트, 댓글 등) 모듈을 분리하는 것을 권장한다. 따라서 각 기능별로 모듈을 생성하고, 해당 모듈 내에서 MVC 구조를 구성하는 것이 더 일반적이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lua&quot;&gt;&lt;pre class=&quot;language-lua&quot;&gt;&lt;code class=&quot;language-lua&quot;&gt;src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- app.module.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- main.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- user/&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- user.module.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- user.controller.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- user.service.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- user.model.ts (또는 user.entity.ts)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- post/&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- post.module.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- post.controller.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- post.service.ts&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;-- post.model.ts (또는 post.entity.ts)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;MVC 패턴과의 비교&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;NestJS의 장점:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;모듈화: NestJS는 기능별로 코드를 모듈로 분리하고 관리하도록 설계되었다. 이로 인해 각 기능이 독립적으로 개발되고 테스트될 수 있으며, 코드 재사용성도 향상된다.&lt;/li&gt;
&lt;li&gt;의존성 주입: NestJS는 내장된 의존성 주입 컨테이너를 제공하므로, 코드의 결합도를 낮추고 유닛 테스트를 쉽게 할 수 있다.&lt;/li&gt;
&lt;li&gt;타입 안전성: TypeScript를 기본 언어로 사용하기 때문에, 타입 검사와 관련된 오류를 컴파일 시점에 발견할 수 있다.&lt;/li&gt;
&lt;li&gt;데코레이터 기반: 데코레이터를 사용하여 메타데이터를 기반으로 하는 다양한 기능을 쉽게 추가할 수 있다.&lt;/li&gt;
&lt;li&gt;플랫폼 독립성: NestJS는 기본적으로 Express.js를 사용하지만, Fastify와 같은 다른 HTTP 서버 라이브러리로 쉽게 전환할 수 있다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NestJS의 단점:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;학습 곡선: NestJS에는 다양한 개념과 기능이 있으므로 초기에 학습하기가 다소 어려울 수 있다.&lt;/li&gt;
&lt;li&gt;추가적인 추상화: 모듈화와 의존성 주입과 같은 기능들은 유용하지만, 간단한 애플리케이션에서는 오버헤드로 느껴질 수 있다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MVC 패턴의 장점:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;간단함: 전통적인 MVC 패턴은 많은 웹 개발자들에게 잘 알려져 있으므로 학습 곡선이 낮다.&lt;/li&gt;
&lt;li&gt;직관성: 모델, 뷰, 컨트롤러의 구조는 웹 애플리케이션의 데이터 흐름을 이해하기 쉽다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MVC 패턴의 단점:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;확장성: 애플리케이션의 복잡도가 증가하면 MVC 구조만으로는 코드의 복잡성을 관리하기 어려울 수 있다.&lt;/li&gt;
&lt;li&gt;타이트 커플링: 모델, 뷰, 컨트롤러 간에 타이트 커플링이 발생할 수 있어, 변경 사항이 여러 컴포넌트에 영향을 줄 수 있다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[var와 let,const]]></title><description><![CDATA[var와 let, 그리고 const는 JavaScript에서 변수를 선언할 때 사용되는 키워드이다. 그러나 둘 사이엔 중요한 차이점들이 있으며, 이를 명확히 이해하고 사용해야 한다.  let과 const는 ES6에서 도입된 키워드로, ES…]]></description><link>https://sharknia.github.io/var와-letconst/</link><guid isPermaLink="false">https://sharknia.github.io/var와-letconst/</guid><pubDate>Sat, 19 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;var와 let, 그리고 const는 JavaScript에서 변수를 선언할 때 사용되는 키워드이다. 그러나 둘 사이엔 중요한 차이점들이 있으며, 이를 명확히 이해하고 사용해야 한다. &lt;/p&gt;
&lt;p&gt;let과 const는 ES6에서 도입된 키워드로, ES6 이전에 변수를 선언하는 유일한 방법은 var 사용 뿐이었다. &lt;/p&gt;
&lt;p&gt;var는 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;블록범위를 지원하지 않는다. &lt;/li&gt;
&lt;li&gt;Hoisting되어 해당 범위의 맨 위로 이동하게 되어 변수 선언 전에 변수를 사용해도 오류가 발생하지 않는다. &lt;/li&gt;
&lt;li&gt;동일한 범위 내에서 같은 이름의 변수를 여러 번 선언할 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이러한 문제는 개발자가 의도하지 않은 오류를 발생시킬 가능성이 높았기 때문에 ES6에서 let과 const이 등장하게 되었다. &lt;/p&gt;
&lt;p&gt;let과 const는 var와 비교해서 아래와 같은 특성을 가진다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Scope&lt;/p&gt;
&lt;p&gt;블록범위를 지원한다. 가장 가까운 중괄호 내에서만 변수가 유효하다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Hoisting&lt;/p&gt;
&lt;p&gt;선언 자체는 호이스팅 되지만, 선언 전에 접근하려면 오류가 발생한다. 이를 일시적 죽은 영역(Temporal Dead Zone, TDZ)이라고 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;재선언&lt;/p&gt;
&lt;p&gt;동일한 범위 내에서 변수를 재선언 할 수 없다. &lt;/p&gt;
&lt;p&gt;다만, let은 재할당이 가능하지만 const는 재할당도 할 수 없다. (상수 선언)&lt;/p&gt;
&lt;p&gt;따라서 let은 초기 선언 시 초기 값을 제공하지 않을 수 있지만, const는 초기 선언시에 반드시 초기값을 제공해야 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;언뜻 보면 마구 쓰기에 var 선언이 더 편하다고 생각할 수 있다. 하지만 인간은 늘 실수를 하기 때문에, 특히 코드가 길어지고 복잡해질수록 이런 제한 조건이 더욱 필요해지는 것 같다. &lt;/p&gt;
&lt;p&gt;원래 브라우저에서만 쓰이려고 태어난 JavaScript 언어가 브라우저의 역할이 늘어나고, 심지어 단순히 브라우저에서만 쓰이는 걸 넘어서 다양한 플랫폼과 환경에서 더 많은 역할을 하게 되면서 이런 것들이 생기는 것 같다. 이러한 맥락에서 ES6 → TypeScript가 생긴게 아닐까?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[DB 튜닝 경험]]></title><description><![CDATA[DB  처음에는 단순히 코드 짜는것에만 집중했었는데, 어느 순간 단순한 에러 고침 또는 간단한 로직 수정을 넘어서 더 큰 의미의 유지보수 또는 고도화를 겪으면서 DB…]]></description><link>https://sharknia.github.io/DB-튜닝-경험/</link><guid isPermaLink="false">https://sharknia.github.io/DB-튜닝-경험/</guid><pubDate>Fri, 18 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;DB &lt;/p&gt;
&lt;p&gt;처음에는 단순히 코드 짜는것에만 집중했었는데, 어느 순간 단순한 에러 고침 또는 간단한 로직 수정을 넘어서 더 큰 의미의 유지보수 또는 고도화를 겪으면서 DB 튜닝이 속도에 큰 영향을 미침을 인지하고, 더 빠른 페이지를 만드는것에 집중했다.&lt;/p&gt;
&lt;p&gt;그때 아래와 같은 것들을 시도하였다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;인덱싱 : 자주 사용하는, 자주 불려오는 테이블들, 자주 사용되는 컬럼에 대해 인덱싱&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;인덱싱이란?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터를 빠르게 조회하기 위한 자료구조(B-tree 등)&lt;/li&gt;
&lt;li&gt;색인과 유사한 개념&lt;/li&gt;
&lt;li&gt;특정행을 찾기 위한 경로를 미리 만들어 두는 것과 같아 검색 시간을 크게 줄일 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인덱싱 사용할 때 주의할 점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;추가적인 공간을 사용하므로 무작정 늘려서는 안된다. 가장 자주 조회되는 &lt;/li&gt;
&lt;li&gt;복합 인덱스 생성시에는 가장 많이 쿼리되는 열을 인덱스의 앞부분에 둔다. &lt;/li&gt;
&lt;li&gt;인덱스는 쓰기 연산(Insert, Update, Delete)시에 유지 비용이 발생(쉽게 생각하면 색인을 새로 만들어야 하므로)하므로 연산이 빈번하게 일어나는 테이블에 대해 많은 인덱스를 만들면 성능 저하가 일어날 수 있음 &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;쿼리 최적화 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;불필요한 컬럼 제거(select *(스타) 지양)&lt;/li&gt;
&lt;li&gt;서브쿼리 대신 조인 사용&lt;/li&gt;
&lt;li&gt;데이터 타입을 최적화 하기 위해 노력(적절한 크기 지정, 숫자형이나 날짜형 형식을 주의해서 용도에 맞게 사용, 예를 들면 idx로 사용할건데 또는 학번에는 숫자만 사용되는데 varchar형식으로 선언되는 경우도 있었는데 그런 경우를 피하기 위해 노력)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;정규화와 반정규화&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;회사의 테이블들이 중복된 데이터들이 저장되어있는 경우가 많았다. 따라서 데이터의 무결성을 해치거나 해치지 않더라도 유지보수에 어려움을 야기하는 경우가 자주 발생 → 이런것들을 최대한 피하고 싶어서 직접 설계한 스키마는 이런것들을 최대한 피하고자 했다. 중복 데이터를 피하기 위한 정규화를 진행.&lt;/li&gt;
&lt;li&gt;정규화를 빈틈없이 했더니 테이블이 많이 쪼개지고, 중복된 데이터들이 하나도 없어서 조인을 여러 테이블을 해야 하는 경우가 많았다. 정규화를 한 경우에는 반드시 자체 협업툴에 스키마에 대한 문서를 남겼다(정규화가 덜 된 테이블에 비해 상대적으로 알아보기 어려우므로).  또한, 정규화된 테이블들을 이쁘게 조인해서 뷰로 만들어서 문서로 함께 제공했다. &lt;/li&gt;
&lt;li&gt;소수의 데이터만 필요한데 조인을 너무 많이 해야 하는 경우나, 특정 집계 결과가 필요한 경우 또는 학생의 역량별 성적같이 조회가 많은데 잦은 계산이 필요한 경우 에는 반정규화를 하기도 했다. 반정규화를 한 경우에는, 테이블 관리(update, insert, edit등)하는 코드를 가능한 한 한군데로 모으고 자체 협업툴에 문서를 자세히 적어서 다른 개발자가 유지보수 시 최대한 알 수 있도록 했다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[MORETHAN-LOG 설치]]></title><description><![CDATA[개발자로서 어엿한 블로그 하나는 있어야 하지 않을까, 생각을 항상 하곤 했다.   하지만 블로그라는게 여간 귀찮은 일이 아니다.  공부한 내용을 노션에 적어두기 시작한지 좀 됐는데, 티스토리나 velog…]]></description><link>https://sharknia.github.io/MORETHAN-LOG-설치/</link><guid isPermaLink="false">https://sharknia.github.io/MORETHAN-LOG-설치/</guid><pubDate>Fri, 18 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개발자로서 어엿한 블로그 하나는 있어야 하지 않을까, 생각을 항상 하곤 했다.  &lt;/p&gt;
&lt;p&gt;하지만 블로그라는게 여간 귀찮은 일이 아니다.  공부한 내용을 노션에 적어두기 시작한지 좀 됐는데, 티스토리나 velog나 여러 방법을 시도한적이 있었지만 노션에 적은 내용을 거기로 옮기는게 얼마나 귀찮은지, 시작은 해도 도무지 꾸준히 이어할 수가 없었다. &lt;/p&gt;
&lt;p&gt;그냥 언젠가 노션에 쓰기만 하면 블로그가 되는게 없나 그냥 가끔 검색만 하는 정도였는데, 어느샌가 나온 것이다. 그런 천지개벽할 물건이. &lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/image1.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 19.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxUlEQVR42n2QzQ6CMBCEOfuPCigqxbYU2lIhYPT9n2zcrolHD5tvsk0nM5vMzwHGT2jcCOMGqC5AdwNsmJGXNRabI1a7/O8stxlznRZIpDa4yY5MHhDKoiItjWeerhL7/Io0uzD3xVcfioqZHkscaJ+da9bRNCmFYbM498b/0t3JtLGkHzM0sQsT+vGFtp/gxzeUCdRopD89WmpY3hRWlDQ5V5qXqg1ERykdm9faQ2jHjMaS3iM1UWgLIS3tek4ezxLrxsofMH5tp9NAXXwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;image1&apos; title=&apos;&apos; src=&apos;/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/image1.png&apos; srcset=&apos;/static/c03971264fd9083e9b65a4a3d1818362/e7570/image1.png 170w,
/static/c03971264fd9083e9b65a4a3d1818362/f46e7/image1.png 340w,
/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/image1.png 569w&apos; sizes=&apos;(max-width: 569px) 100vw, 569px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
커밋할 필요도, 포스트 할 필요도 없다. 단지 노션에 글을 적으면 바로 포스팅 된다. &lt;/p&gt;
&lt;p&gt;게다가 Readme에 설치방법이 10단계로 스크린샷까지 동봉되어서 너무나 친절하게 나와있다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/morethanmin/morethan-log#readme&quot;&gt;https://github.com/morethanmin/morethan-log#readme&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;블로그로 대성하겠다, 이런 마음가짐은 없기 때문에 심플한 구성과 간단한 기능이 너무 마음에 들었다. 누구나 따라할 수 있을 만큼 쉽게 되어있기 때문에 그대로 그대로 따라하는데,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;Failed to compile&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;src&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;routes&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Detail&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;PostDetail&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;CommentBox&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Utterances&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tsx&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;11&lt;/span&gt;
Type error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Type &lt;span class=&quot;token string&quot;&gt;&apos;{ repo: string | undefined; &quot;issue-term&quot;: string; label: string; }&apos;&lt;/span&gt; is not assignable to type &lt;span class=&quot;token string&quot;&gt;&apos;{ [key: string]: string; }&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  Property &lt;span class=&quot;token string&quot;&gt;&apos;repo&apos;&lt;/span&gt; is incompatible &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; index signature&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    Type &lt;span class=&quot;token string&quot;&gt;&apos;string | undefined&apos;&lt;/span&gt; is not assignable to type &lt;span class=&quot;token string&quot;&gt;&apos;string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
      Type &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; is not assignable to type &lt;span class=&quot;token string&quot;&gt;&apos;string&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;     script&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;issue-term&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; issueTerm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;     script&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;theme&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; theme&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;28&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;     &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;utterances&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config
     &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;           &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;29&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;     Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;       script&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
error Command failed &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; exit code &lt;span class=&quot;token number&quot;&gt;1.&lt;/span&gt;
info Visit https&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;yarnpkg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;com&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;en&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;docs&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;cli&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;run &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; documentation about &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; command&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token literal-property property&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Command &lt;span class=&quot;token string&quot;&gt;&quot;yarn run build&quot;&lt;/span&gt; exited &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;글쎄 대체 나만 Deploy가 안되는것이다. &lt;/p&gt;
&lt;p&gt;ISSUE에 나와 같은 오류를 겪은 외국인이 한 명 더 있었는데, 다른 플랫폼으로 갈아탄 모양인지 해결방법은 적혀있지 않았다. &lt;/p&gt;
&lt;p&gt;타입스크립트, 리액트는 처음이었기 때문에 정확히 알 수 없었는데, site.config.js 의 utterances-config 의 값을 가져올 때 오류가 나는 것이라고 짐작을 할 수 있었기 때문에 해당 부분을 챗지피티의 도움을 받아 코드를 수정했다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;typescript&quot;&gt;&lt;pre class=&quot;language-typescript&quot;&gt;&lt;code class=&quot;language-typescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; config&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CONFIG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;utterances&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;_&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하여, 무사히 deploy를 마치고 블로그 포스팅에 성공한것이다. &lt;/p&gt;
&lt;p&gt;문제는 여기서 끝나지 않았는데 노션에 글을 써도 도무지 블로그에 새로운 글이 포스팅되지 않았다. &lt;/p&gt;
&lt;p&gt;이것 때문에 잠도 못자고 설쳐가면서 새벽에 새로고침을 해보기도 했는데 자고 일어나도 되어있지 않았다. &lt;/p&gt;
&lt;p&gt;결론부터 이야기하자면, 아무것도 오류는 아니었다. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://vercel.com/docs/functions/serverless-functions&quot;&gt;https://vercel.com/docs/functions/serverless-functions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;vercel의 Serverless Functions 기능은 모든 plan에서 이용가능하며, 이 기능을 이용해서 Notion API를 활용해서 글 내용을 불러오도록 되어있었다. &lt;/p&gt;
&lt;p&gt;site.config.js를 확인하면 revalidateTime 변수가 있는데 처음에는 이 값이 42시간(!)으로 설정되어있었으므로, 이를 임의로 1시간으로 수정해주었다. &lt;/p&gt;
&lt;p&gt;성격이 급해서 1시간 단위로 갱신되게 해두었는데, 지금 와서 생각해보면 굳이 1시간일 필요도 없다는 생각이 든다. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[RDB(관계형 데이터베이스) + RDBMS]]></title><description><![CDATA[RDB(관계형 데이터베이스)란? RDB(Relational Database) Oracle, MySQL 둘 다 관계형 데이터베이스이다.  모든 데이터를…]]></description><link>https://sharknia.github.io/RDB관계형-데이터베이스-RDBMS/</link><guid isPermaLink="false">https://sharknia.github.io/RDB관계형-데이터베이스-RDBMS/</guid><pubDate>Fri, 18 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;RDB(관계형 데이터베이스)란?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDB(Relational Database)&lt;/li&gt;
&lt;li&gt;Oracle, MySQL 둘 다 관계형 데이터베이스이다. &lt;/li&gt;
&lt;li&gt;모든 데이터를 2차원의 테이블 형태로 표현한다. &lt;/li&gt;
&lt;li&gt;데이터의 독립성이 높고 고수준의 데이터 조작 언어를 사용하여 결합, 제약, 투영등의 관계 조작에 의해 비약적으로 표현 능력을 높일 수 있다. &lt;/li&gt;
&lt;li&gt;관계 조작에 의해 자유롭게 구조를 변경할 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RDBMS란?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RDBMS(Relational Database Management System)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;R&lt;/p&gt;
&lt;p&gt;관계형은 DBMS의 특정한 종류를 의미하고, 여러개의 테이블을 조합해 원하는 데이터를 찾아올 수 있게한다. 보통 한 개의 테이블로 답을 얻을 수 없는 상황에서 이 관계성을 사용해 더 복잡한 요구를 실현할 수 있다. &lt;/p&gt;
&lt;p&gt;관계형을 지원하기 위해 트랜잭션, ACID 등의 개념이 도입되었다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DB&lt;/p&gt;
&lt;p&gt;일종의 저장소(Storage)&lt;/p&gt;
&lt;p&gt;정보를 단순하고 규칙적인 모양새로 구성한 저장소&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MS&lt;/p&gt;
&lt;p&gt;관리 시스템은은 레코드들을 삽입, 탐색, 수정, 삭제 할 수 있도록 해주는 소프트웨어를 지칭&lt;/p&gt;
&lt;p&gt;데이터를 처리할 수 있는 기능을 의미함&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;관계형 데이터베이스를 생성하고 수정/관리할 수 있는 소프트웨어&lt;/li&gt;
&lt;li&gt;모든 데이터를 2차원 테이블로 표현&lt;/li&gt;
&lt;li&gt;테이블은 Row, Column으로 이루어진 기본 데이터 저장 단위&lt;/li&gt;
&lt;li&gt;상호 관련성을 가진 테이블의 집합&lt;/li&gt;
&lt;li&gt;만들거나 이용하기도 비교적 쉽지만, 확장이 가장 용이함&lt;/li&gt;
&lt;li&gt;데이터베이스의 설계도를 ER(Entity Relationship) 모델로 나타낼 수 있다. &lt;/li&gt;
&lt;li&gt;ER모델에 따라 데이터베이스가 만들어지며, 데이터베이스는 하나 이상의 테이블로 구성된다. &lt;/li&gt;
&lt;li&gt;ER 모델에서 엔티티를 기반으로 테이블이 만들어진다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JOIN&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;INNER JOIN&lt;/p&gt;
&lt;p&gt;교집합&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OUTER JOIN&lt;/p&gt;
&lt;p&gt;특정 테이블 기준으로 데이터를 보여줌&lt;/p&gt;
&lt;p&gt;ex) Left Outer Join : 왼쪽 테이블 A의 모든 데이터와 A와 B 테이블의 중복 데이터가 검색됨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[NestJS 소개]]></title><description><![CDATA[Nest.js란? Node.js 서버측 애플리케이션을 구축하기 위한 프레임워크 TypeScript 기반으로 구축되어 완벽하게 지원 Express를 기본으로 채택하고 그 위에 여러 기능을 미리 구현한 것이 NestJS Nest.js…]]></description><link>https://sharknia.github.io/NestJS-소개/</link><guid isPermaLink="false">https://sharknia.github.io/NestJS-소개/</guid><pubDate>Wed, 25 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Nest.js란?&lt;/p&gt;
&lt;p&gt;Node.js 서버측 애플리케이션을 구축하기 위한 프레임워크&lt;/p&gt;
&lt;p&gt;TypeScript 기반으로 구축되어 완벽하게 지원&lt;/p&gt;
&lt;p&gt;Express를 기본으로 채택하고 그 위에 여러 기능을 미리 구현한 것이 NestJS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nest.js의 특징&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;확장 가능하며 유지 관리가 쉬운 애플리케이션을 개발할 수 있다&lt;/li&gt;
&lt;li&gt;TypeScript, OOP, FP, FRP 요소의 결합&lt;/li&gt;
&lt;li&gt;타입스크립트 적극 도입&lt;/li&gt;
&lt;li&gt;모듈로 감싸는 형태로 테스트 코드의 작성이 용이함&lt;/li&gt;
&lt;li&gt;모듈을 사용하여 확장이 용이함&lt;/li&gt;
&lt;li&gt;스프링과 유사한 경험을 제공한다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Express&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Express 특징&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;전 세계 node.js 프레임워크 1위, 개발 규칙이 강제되어 코드 및 구조의 통일성이 향상됨&lt;/li&gt;
&lt;li&gt;레퍼런스가 많다&lt;/li&gt;
&lt;li&gt;구조에 대한 자유도가 높다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;차이점&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NestJS는 타입스크립트를 적극 채용하여 json 파일을 만들고 세팅하는 과정이 복잡하지 않다. &lt;/li&gt;
&lt;li&gt;NestJS는 아키텍쳐 정의가 프레임워크에서 제공되므로 각 개발자들의 아키텍쳐가 통일되어있다. (장점이자 단점)&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;라우팅의 차이&lt;/p&gt;
&lt;p&gt;Express는 라우팅 할 때 app.use 처럼 등록해서 사용하지만 NestJS는 모듈별로 나누어서 라우팅한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;컨트롤러&lt;/p&gt;
&lt;p&gt;NestJS는 클래스별로 컨트롤러에서 메소드에 데코레이터를 사용한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;서비스&lt;/p&gt;
&lt;p&gt;NestJS는 create 함수 인자로 인터페이스로 정한 값들이 들어오고 return 타입을 공통 coreOutput이라는 인터페이스로 정한 ok, message로 리턴한다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[JavaScript 클로저]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/JavaScript-클로저/</link><guid isPermaLink="false">https://sharknia.github.io/JavaScript-클로저/</guid><pubDate>Sat, 21 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;클로저란?&lt;/p&gt;
&lt;p&gt;자신을 포함하고 있는 외부함수보다 내부함수가 더 오래 유지되는 경우, 외부 함수 밖에서 내부함수가 호출되더라도 외부함수의 지역 변수에 접근할 수 있는데 이러한 함수를 클로저라고 부른다. &lt;/p&gt;
&lt;p&gt;클로저는 반환된 내부함수가 자신이 선언됐을 때의 환경인 스코프를 기억하여 자신이 선언됐을 때의 환경밖에서 호출되어도 그 환경에 접근할 수 있는 함수를 말한다.&lt;/p&gt;
&lt;p&gt;간단히 말하면 클로저는 자신이 생성될 때의 환경을 기억하는 함수 라고 말할 수 있다. &lt;/p&gt;
&lt;p&gt;내부 함수가 클로저이며, 외부함수는 자유변수라고 부른다. 클로저라는 이름은 자유변수에 함수가 닫혀있다는 의미로 의역하면 자유변수에 엮여있는 함수라는 뜻이다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;클로저의 활용&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;상태 유지&lt;/p&gt;
&lt;p&gt;클로저가 가장 유용하게 사용되는 상황은 현재 상태를 기억하고 변경된 최신 상태를 유지하는 것이다. &lt;/p&gt;
&lt;p&gt;클로저가 아니고 전역변수를 사용할 수 있지만 전역 변수는 언제든지 누구나 접근할 수 있고 변경할 수 있기 때문에 많은 부작용을 유발하므로 사용하지 않는 것이 좋다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;전역 변수 사용의 억제&lt;/p&gt;
&lt;p&gt;변수의 값은 누군가에 의해 언제든지 변경될 수 있어 오류 발생의 근본적인 원인이 될 수 있다. 상태 변경이나 가변 데이터를 피하고 불변성을 유지향하는 함수형 프로그래밍에서 사이드 이펙트를 최대한 억제하여 오류를 피하고 프로그램의 안정성을 높이기 위해 클로저를 사용한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;정보의 은닉&lt;/p&gt;
&lt;p&gt;자신이 생성됐을 때의 렉시컬 환경인 생성자 함수의 변수에 접근 가능한 클로저의 특징을 사용해 private 키워드를 흉내낼 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[JavaScript의 타입 변환과 단축 평가]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/JavaScript의-타입-변환과-단축-평가/</link><guid isPermaLink="false">https://sharknia.github.io/JavaScript의-타입-변환과-단축-평가/</guid><pubDate>Tue, 10 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;타입변환이란?&lt;/p&gt;
&lt;p&gt;자바스크립트의 모든 값은 타입이 있다. 값의 타입은 다른 타입으로 개발자에 의해 의도적으로 변환할 수 있다. 또는 자바스크립트 엔진에 의해 암묵적으로 자동 변환될 수 있다.&lt;/p&gt;
&lt;p&gt;개발자가 의도적으로 타입을 변경하는 것을 명시적 타입 변환(Explict coercion) 또는 타입 캐스팅(Type casting) 이라고 한다. &lt;/p&gt;
&lt;p&gt;자바스크립트 엔진이 타입을 자동 변환 하는 것을 암묵적 타입 변환(Implict coercion) 또는 타입 강제 변환(Type coercion)이라고 한다. &lt;/p&gt;
&lt;p&gt;타입변환이 값을 직접 변경하는 것은 아니다. 변수 값을 변경하려면 재할당을 통해 새로운 메모리 공간을 확보하고 그 곳에 원시 값을 저장한 후 변수명이 재할당된 원시값이 저장된 메모리 공간의 주소를 기억하도록 해야 한다. &lt;/p&gt;
&lt;p&gt;압묵적 타입 변환은 변수 값을 재할당하는 것이 아니라 자바스크립트 엔진이 표현식을 에러없이 평가하기 위해 기존 값을 바탕으로 새로운 타입의 값을 만들어 단 한 번 사용하고 버린다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;암묵적 타입 변환&lt;/p&gt;
&lt;p&gt;자바스크립트 엔진은 표현식을 평가할 때에 컨텍스트를 고려하여 가급적 에러를 발생시키지 않도록 암묵적으로 타입 변환을 실시한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;boolean 타입으로 변환&lt;/p&gt;
&lt;p&gt;자바스크립트 엔진은 다음과 같은 값을 false로 평가한다. 아래의 값을 제외한 값은 모두 true로 판단한다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;false&lt;/li&gt;
&lt;li&gt;undefined&lt;/li&gt;
&lt;li&gt;null&lt;/li&gt;
&lt;li&gt;0, -0&lt;/li&gt;
&lt;li&gt;NaN&lt;/li&gt;
&lt;li&gt;‘’(빈 문자열)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;명시적 타입 변환&lt;/p&gt;
&lt;p&gt;암묵적 타입 변환을 이용해서 명시적 타입 변환을 할 수도 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;단축평가&lt;/p&gt;
&lt;p&gt;논리곱(&amp;#x26;&amp;#x26;) 논리합(||) 연산자&lt;/p&gt;
&lt;p&gt;단축평가는 다음과 같은 상황에서 유리하다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;객체가 null 인지 확인하고 프로퍼티를 참조할 때에&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;함수의 인수를 초기화할 때&lt;/p&gt;
&lt;p&gt;함수를 호출할 때에 인수를 전달하지 않으면 매개변수는 undefined를 갖는다. 이때 단축 평가를 사용하여 매개변수의 기본값을 설정하면 undefined로 인해 발생할 수 있는 에러를 방지할 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[JavaScript의 변수]]></title><description><![CDATA[변수 호이스팅 (Variable Hoisting) 자바스크립트에서는 모든 변수는 호이스팅 된다. 호이스팅이란 var 선언문이나 function 선언문 등 모든 선언문이 해당 Scope…]]></description><link>https://sharknia.github.io/JavaScript의-변수/</link><guid isPermaLink="false">https://sharknia.github.io/JavaScript의-변수/</guid><pubDate>Sat, 07 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;변수 호이스팅 (Variable Hoisting)&lt;/p&gt;
&lt;p&gt;자바스크립트에서는 모든 변수는 호이스팅 된다. 호이스팅이란 var 선언문이나 function 선언문 등 모든 선언문이 해당 Scope의 선두로 옮겨진 것처럼 동작하는 특성을 말한다. 즉 자바스크립트에서는 모든 선언문(var, let, const, function, function*, class)이 선언되기 이전에도 참조가 가능하다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;var 키워드로 생성된 변수의 문제점&lt;/p&gt;
&lt;p&gt;ES5에서는 오직 var 키워드로만 변수의 선언이 가능하다. 이는 다음과 같은 특징을 가지며 주의를 기울이지 않으면 심각한 문제를 발생시킨다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;함수 레벨 스코프&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;전역변수의 남발&lt;/li&gt;
&lt;li&gt;for문에서 초기화식에 사용한 변수를 for문 외부 또는 전역에서 참조할 수 있다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;var 키워드 생략 허용&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;의도하지 않은 변수의 전역화&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;중복 선언 허용&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;의도하지 않은 변수값 변경&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;변수 호이스팅&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ES6는 이런 단점을 보완하기 위해 let, const 키워드를 도입하였다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[JavaScript 기본 문법]]></title><description><![CDATA[변수(Variable…]]></description><link>https://sharknia.github.io/JavaScript-기본-문법/</link><guid isPermaLink="false">https://sharknia.github.io/JavaScript-기본-문법/</guid><pubDate>Fri, 06 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;변수(Variable)&lt;/p&gt;
&lt;p&gt;메모리상의 주소(위치)를 기억하는 저장소. 즉 메모리 주소에 접근하기 위해 사람이 이해할 수 있는 언어로 지정한 식별자&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;값&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;데이터 타입 - 프로그래밍 언어에서 사용할 수 있는 값의 종료&lt;/li&gt;
&lt;li&gt;변수 - 값이 저장된 메모리를 가리키는 식별자&lt;/li&gt;
&lt;li&gt;리터럴 - 소스코드 안에 직접 만들어낸 상수 값 자체. 값의 최소 단위&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;값은 프로그램에 의해 조작될 수 있는 대상을 말한다. &lt;/p&gt;
&lt;p&gt;자바스크립트의 모든 값은 자바스크립트가 제공하는 7가지 데이터 타입 중 하나를 갖는다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;데이터타입&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;원시타입(Privitive data type)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;number&lt;/li&gt;
&lt;li&gt;string&lt;/li&gt;
&lt;li&gt;boolean&lt;/li&gt;
&lt;li&gt;null&lt;/li&gt;
&lt;li&gt;undefined&lt;/li&gt;
&lt;li&gt;symbol(ES6)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;객체 타입(Object data type)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;object&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;자바스크립트는 데이터 타입을 미리 지정하지 않는다. 값의 타입에 의해 동적으로 변수의 타입이 결정되며, 이를 동적 타이핑이라고 한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;연산자&lt;/p&gt;
&lt;p&gt;피연산자의 타입이 반드시 일치할 필요가 없다. 암묵적 타입 강제 변환을 통해 연산을 수행한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;키워드&lt;/p&gt;
&lt;p&gt;키워드는 수행할 동작을 규정한다. 예를 들어 var 는 변수를 생성할 것을 지시한다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;주석&lt;/p&gt;
&lt;p&gt;// 로 쓴다. 또는 /* */ 사이에 쓴다. &lt;/p&gt;
&lt;p&gt;주석은 해석기가 무시하며 실행되지 않는다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;문&lt;/p&gt;
&lt;p&gt;브라우저에 의해 단계별로 수행될 명령들의 집합. 문은 리터럴, 연산자, 표현식, 키워드 등으로 구성되며 세미콜론으로 끝나야 한다. &lt;/p&gt;
&lt;p&gt;문은 코드 블록으로 그룹화 할 수 있다. &lt;/p&gt;
&lt;p&gt;자바스크립트는 블록 유효범위 (Block-Level Scope)를 생성하지 않는다. 함수 단위의 유효범위 (Function-Level Scope)만 생성된다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;표현식&lt;/p&gt;
&lt;p&gt;표현식은 하나의 값으로 평가된다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;문과 표현식의 비교&lt;/p&gt;
&lt;p&gt;문은 표현식을 포함한다. 표현식은 그 자체로 하나의 문이 될 수도 있다. &lt;/p&gt;
&lt;p&gt;표현식은 평가되어 값을 만들지만 그 이상의 행위는 할 수 없다. &lt;/p&gt;
&lt;p&gt;표현식을 통해 평가한 값을 통해 실제로 컴퓨터에게 명령을 하여 무언가를 하는 것은 문이다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;함수&lt;/p&gt;
&lt;p&gt;어떤 작업을 수행하기 위해 필요한 문들의 집함. 이름과 매개변수를 가진다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;객체&lt;/p&gt;
&lt;p&gt;자바스크립트는 객체(object) 기반의 스크립트 언어로 자바스크립트를 이루는 거의 모든 것이 객체이다. &lt;/p&gt;
&lt;p&gt;원시 타입을 제외한 나머지 값들은 모두 객체이다. (함수, 배열, 정규표현식 등)&lt;/p&gt;
&lt;p&gt;자바스크립트 객체는 키(이름)와 값으로 구성된 프로퍼티(property)의 집합이다. 프로퍼티의 값으로 자바스크립트에서 사용할 수 있는 모든 값을 사용할 수 있다. 자바스크립트의 함수는 일급 객체이므로 값으로 취급할 수 있다. &lt;/p&gt;
&lt;p&gt;따라서 프로퍼티 값으로 함수를 사용할수도 있으며, 프로퍼티 값이 함수일 경우 일반 함수와 구분하기 위헤 메소드라 부른다. &lt;/p&gt;
&lt;p&gt;객체는 데이터를 의미하는 프로퍼티와 데이터를 참조하고 조작할 수 있는 동작을 의미하는 메소드로 구성된 집합이다. 객체는 데이터(프로퍼티)와 그 데이터에 관련되는 동작(메소드)을 모두 포함할 수 있기 때문에 데이터와 동작을 하나의 단위로 구조화할 수 있어 유용하다. &lt;/p&gt;
&lt;p&gt;자바스크립트의 객체는 객체지향의 상속을 구현하기 위해 “프로토타입”이라고 불리는 객체의 프로퍼티와 메소드를 상속받을 수 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;배열&lt;/p&gt;
&lt;p&gt;자바스크립트의 배열은 객체이다. 유용한 내장 메소드를 포함하고 있다. &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[JavaScript의 특징, 브라우저 동작 원리]]></title><description><![CDATA[…]]></description><link>https://sharknia.github.io/JavaScript의-특징-브라우저-동작-원리/</link><guid isPermaLink="false">https://sharknia.github.io/JavaScript의-특징-브라우저-동작-원리/</guid><pubDate>Thu, 05 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;자바스크립트의 특징&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;웹브라우저에서 동작하는 유일한 프로그래밍 언어&lt;/li&gt;
&lt;li&gt;별도의 컴파일 작업을 수행하지 않는 인터프리터 언어 &lt;/li&gt;
&lt;li&gt;명령형, 함수형, 프로토타입 기반 객체지향 프로그래밍을 지원하는 멀티 패러다임 프로그래밍 언어&lt;/li&gt;
&lt;li&gt;강력한 프로토타입 기반의 객체지향 언어&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;브라우저 동작 원리&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;브라우저의 핵심 기능은 사용자가 참조하고자 하는 페이지를 서버에 요청(Request) 하고 서버의 응답(Response)를 받아 브라우저에 표시하는 것. 브라우저는 서버로부터 HTML, CSS, JavaScript, 이미지 파일 등을 응답받는다. HTML, CSS 파일은 렌더링 엔진의 HTML 파서와 CSS 파서에 의해 파싱되어 DOM, CSSOM 트리로 변환되고 렌더 트리로 결합된다. 렌더 트리를 기반으로 브라우저는 웹페이지를 표시한다. &lt;/li&gt;
&lt;li&gt;자바스크립트는 렌더링 엔진이 아닌 자바스크립트 엔진이 처리한다. HTML 파서는 script 태그를 만나면 자바스크립트 코드를 실행하기 위해 DOM 생성 프로세스를 중지하고 자바스크립트 엔진으로 제어 권한을 넘긴다. 제어 권한을 넘겨 받은 자바스크립트 엔진은 script 태그 내의 자바스크립트 코드 또는 script 태그의 src 속성에 정의된 자바스크립트 파일을 로드하고 파싱하여 실행한다. 자바스크립트의 실행이 완료되면 다시 HTML 파서가 제어 권한을 받아 DOM 생성을 재개한다. &lt;/li&gt;
&lt;li&gt;이처럼 브라우저는 동기적으로 HTML, CSS, JAVASCRIPT를 처리한다. 이것은 script 위치에 따라 블로킹이 발생하여 DOM 구조 생성이 지연될 수 있음을 의미한다. 따라서 script 태그의 위치는 중요한 의미를 갖는다. &lt;/li&gt;
&lt;li&gt;
&lt;p&gt;body 요소의 가장 아래에 자바스크립트를 위치시키는 것은 좋은 아이디어다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTML 요소들이 지연없이 렌더링 되므로 페이지 로딩 시간이 단축된다. &lt;/li&gt;
&lt;li&gt;DOM이 완성되지 않은 상태에서 자바스크립트가 DOM을 조작한다면 에러가 발생한다. &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[화상상담을 위한 Janus 구성]]></title><description><![CDATA[Stun 서버와 Turn 서버를 위한 Coturn Server도 함께 설치 환경구성 Ubuntu 18.04 bionic Python 3.7 설치 명령어 정리 파이썬 및 기본 소프트웨어 설치 Janus 설치 https://ourcodeworld.com…]]></description><link>https://sharknia.github.io/화상상담을-위한-Janus-구성/</link><guid isPermaLink="false">https://sharknia.github.io/화상상담을-위한-Janus-구성/</guid><pubDate>Tue, 03 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    Janus를 우분투에 설치하면서 사용한 명령어 정리&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Stun 서버와 Turn 서버를 위한 Coturn Server도 함께 설치&lt;/p&gt;
&lt;h3&gt;환경구성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu 18.04 bionic&lt;/li&gt;
&lt;li&gt;Python 3.7&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;설치 명령어 정리&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;파이썬 및 기본 소프트웨어 설치&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Janus 설치&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://ourcodeworld.com/articles/read/1197/how-to-install-janus-gateway-in-ubuntu-server-18-04&quot;&gt;https://ourcodeworld.com/articles/read/1197/how-to-install-janus-gateway-in-ubuntu-server-18-04&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Janus 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;packagelist&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; 
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; 
libmicrohttpd-dev 
libjansson-dev 
libssl-dev 
libsrtp-dev 
libsofia-sip-ua-dev 
libglib2.0-dev 
libopus-dev 
libogg-dev 
libcurl4-openssl-dev 
liblua5.3-dev 
libconfig-dev 
pkg-config 
gengetopt 
libtool 
automake 
gtk-doc-tools 
cmake 
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${packagelist&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;libnice 설치&lt;/p&gt;
&lt;p&gt;&lt;em&gt;※ 최소 파이썬 3.7을 요구한다.&lt;/em&gt; &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;pip3 &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;meson&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.61&lt;/span&gt;.5 
&lt;span class=&quot;token function&quot;&gt;ln&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; /usr/local/bin/meson /usr/bin/ 
&lt;span class=&quot;token function&quot;&gt;wget&lt;/span&gt; https://github.com/ninja-build/ninja/releases/download/v1.10.1/ninja-linux.zip 
&lt;span class=&quot;token function&quot;&gt;unzip&lt;/span&gt; ninja-linux.zip 
&lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; ninja /usr/bin/ 
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://gitlab.freedesktop.org/libnice/libnice.git
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; libnice 
meson &lt;span class=&quot;token parameter variable&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr build 
ninja &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt; build 
ninja &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt; build &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;libstrp 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;wget&lt;/span&gt; https://github.com/cisco/libsrtp/archive/v2.2.0.tar.gz 
&lt;span class=&quot;token function&quot;&gt;tar&lt;/span&gt; xfv v2.2.0.tar.gz 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; libsrtp-2.2.0 
./configure —prefix&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr —enable-openssl 
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; shared_library &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;usrctp 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/sctplab/usrsctp 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; usrsctp 
./bootstrap 
./configure &lt;span class=&quot;token parameter variable&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;libwebsockets 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/warmcat/libwebsockets.git 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; libwebsockets 
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; build 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; build 
cmake &lt;span class=&quot;token parameter variable&quot;&gt;-DLWS_MAX_SMP&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-LWS_IPV6&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ON &lt;span class=&quot;token parameter variable&quot;&gt;-DCMAKE_INSTALL_PREFIX:PATH&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr &lt;span class=&quot;token parameter variable&quot;&gt;-DCMAKE_C_FLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;-fpic&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt; 
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mqtt 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/eclipse/paho.mqtt.c.git 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; paho.mqtt.c 
&lt;span class=&quot;token assign-left variable&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NanoMSG 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; libnanomsg-dev &lt;span class=&quot;token parameter variable&quot;&gt;-y&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RabbitMQ C AMQP 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/alanxz/rabbitmq-c 
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; rabbitmq-c 
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; submodule init 
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; submodule update 
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; build &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; build 
cmake &lt;span class=&quot;token parameter variable&quot;&gt;-DCMAKE_INSTALL_PREFIX&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;janus 컴파일링&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/meetecho/janus-gateway.git
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; janus-gateway
&lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt; autogen.sh
./configure —prefix&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/opt/janus
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; configs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Janus 설정&lt;/p&gt;
&lt;p&gt;설정 파일 위치 : /opt/janus/etc/janus&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;janus.jcfg&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;- log_to_file &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 
- admin_secret &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 변경 &lt;span class=&quot;token string&quot;&gt;&quot;PW&quot;&lt;/span&gt; 
- rtp_port_range &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 및 변경 &lt;span class=&quot;token string&quot;&gt;&quot;20000-60000&quot;&lt;/span&gt; 
- stun_server &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 변경 &lt;span class=&quot;token string&quot;&gt;&quot;Stun Server Domain&quot;&lt;/span&gt; 
- stun_port &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 
- nat_1_1_mapping &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 변경 &lt;span class=&quot;token string&quot;&gt;&quot;Server IP&quot;&lt;/span&gt; 
- turn_server &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 변경 &lt;span class=&quot;token string&quot;&gt;&quot;Turn Server Domain&quot;&lt;/span&gt; 
- turn_port &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 
- turn_type &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 
- turn_user &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 및 변경 &lt;span class=&quot;token string&quot;&gt;&quot;Turn ID&quot;&lt;/span&gt; 
- turn_pwd &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 및 변경 &lt;span class=&quot;token string&quot;&gt;&quot; Turn PW&quot;&lt;/span&gt; 
- ipv6 &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 및 변경 &lt;span class=&quot;token string&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;janus.plugin.videoroom.jcfg&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;general&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
admin_key &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석해제 및 변경 &lt;span class=&quot;token string&quot;&gt;&quot;비밀번호&quot;&lt;/span&gt; 
publishers &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 생성 값 &lt;span class=&quot;token string&quot;&gt;&quot;10&quot;&lt;/span&gt; 
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;janus.transport.http.jcfg&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;https &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 값 변경 &lt;span class=&quot;token string&quot;&gt;&quot;true&quot;&lt;/span&gt; 
secure_port &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석 해제 
admin_https &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 주석처리 값 변경 &lt;span class=&quot;token string&quot;&gt;&quot;true&quot;&lt;/span&gt; 
cert_pem &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 값 변경 &lt;span class=&quot;token string&quot;&gt;&quot;crt.pem 위치&quot;&lt;/span&gt; 
cert_key &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 값 변경 &lt;span class=&quot;token string&quot;&gt;&quot;key.pem 위치&quot;&lt;/span&gt; 
cert_pwd &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt; 값 변경 &lt;span class=&quot;token string&quot;&gt;&quot;인증서 비밀번호&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Coturn 설치&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://john-home.iptime.org:8085/xe/index.php?mid=board_sKSz42&amp;#x26;document_srl=1546&quot;&gt;http://john-home.iptime.org:8085/xe/index.php?mid=board&lt;em&gt;sKSz42&amp;#x26;document&lt;/em&gt;srl=1546&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item></channel></rss>