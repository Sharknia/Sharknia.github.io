---
tags:
  - Python
update: "2024-01-31"
date: "2023-10-31"
상태: "Ready"
title: "Poetry"
---
## 개요

Poetry는 파이썬 프로젝트의 의존성 관리와 패키징을 도와주는 도구이다. Poetry의 주요 목표는 프로젝트의 설정과 관리를 단순화하고, 이를 위한 통합된 솔루션을 제공하는 것이다. 

파이썬 개발자에게 일관된 개발 환경을 제공하며, 의존성 해결, 버전 관리, 패키징 배포와 같은 일반적인 작업을 처리하는 통합된 도구를 제공하여 파이썬 프로젝트의 생명 주기를 관리하는데 필요한 모든 기능을 제공한다. 

기존의 requirements.txt, venv, setup.py, wheel, twine 등을 모두 통합해 하나의 인터페이스와 프로세스로 간소화하여 제공한다. 

## 기능과 이점

### 의존성 관리

`pyproject.toml` 파일을 사용하여 프로젝트의 의존성을 선언적으로 정의하고 관리한다. 

의존성이 충돌하지 않고 서로 호환되는지 자동으로 확인하여 프로젝트의 의존성 그래프를 안정적으로 유지한다. 

### 패키징

프로젝트를 패키지화하고 배포할 수 있는 도구를 제공한다. 

`build` 및 `publish` 명령을 사용하여 프로젝트를 빌드하고 PyPi와 같은 패키지 저장소에 배포할 수 있다. 

### 가상 환경 관리

프로젝트에 대한 가상 환경을 자동으로 생성하고 관리하여 프로젝트의 의존성이 시스템 전역의 Python 환경으로부터 격리되도록 한다. 

`poetry shell` 과 `poetry run` 명령어를 사용하여 가상 환경 내에서 명령을 실행할 수 있다. 

### 버전 관리

프로젝트의 버전을 쉽게 관리할 수 있도록 돕는다. 

`version` 명령어를 사용하여 프로젝트의 버전을 업데이트 할 수 있다. 

### 프로젝트 생성과 설정

`new` 명령을 사용하여 프로젝트를 생성하고 기본 구조와 설정 파일을 자동으로 생성한다. 

### 플러그인 시스템

사용자 정의 플러그인을 지원하여 기능을 확장하고 사용자 정의 작업을 수행할 수 있다. 

### 다양한 설정 옵션

다양한 설정 옵션을 제공하여 프로젝트의 특별한 요구 사항에 따라 도구의 동작을 사용자 정의할 수 있다.  

## requirements.txt 와의 비교

requirements.txt는 파이썬 프로젝트에서 아요되는 의존성과 그 버전을 나열하는 텍스트 파일이다. 프로젝트에 필요한 모든 패키지와 버전을 명시하며, 이를 통해 다른 개발자가 다른 환경에서 동일한 의존성을 쉽게 유지할 수 있다. 

- requirements.txt는 단순히 프로젝트의 의존성과 해당 버전을 나열하는 데 사용되며, 이를 넘어서는 확장성을 제공하지 않는다.

- 의존성 간의 충돌을 자동으로 해결하지 않는다. 

- 가상 환경을 자동으로 생성하거나 관리하지 않는다. 

- 프로젝트 패키징, 배포 기능을 제공하지 않는다. 

- 프로젝트의 구조나 설정에 대한 정보를 제공하지 않는다. 

## venv와의 비교

venv는 파이썬 가상환경을 생성하고 관리하는 기본 도구이다. venv의 주요 목적은 프로젝트의 의존성을 시스템 전역의 파이썬 환경으로부터 격리하는 것이다. 

- venv는 의존성을 관리하지 않는다. 가상 환경 내에서 pip를 사용하여 수동으로 패키지를 설치하고 관리해야 한다. 

- 프로젝트 패키징, 배포 기능을 제공하지 않는다. 

- 프로젝트의 구조나 설정에 대한 정보를 제공하지 않는다. 

- poetry는 install 명령을 실행할 때에 자동으로 가상환경을 생성하지만, venv는 별도의 명령어를 사용해 가상환경을 생성해야한다. 

- 기본적인 명령줄 인터페이스만 제공한다. 

## 단점

### 학습곡선

그 자체로 너무 많은 기능이 들어있기 때문에 기존 도구에들에 익숙한 개발자들에게는 적응 시간이 필요할 수 있다. 

### 호환성 문제

일부 레거시 프로젝트나 특정 시스템에서는 호환성 문제가 발생할 수 있다. 

### 성능

큰 프로젝트에서 종속성의 해결이 다소 느릴 수 있다. 

### 통합 문제

아직 모든 플랫폼이나 서비스에 완벽하게 통합되지 않았을 수 있다. CI/CD 도구와의 통합, 또는 특정 클라우드 서비스와의 통합에서 약간의 설정 작업이 필요할 수 있다. 

## 주요 사용법 및 명령어

### 설치

```bash
curl -sSL https://install.python-poetry.org | python3 -
```

### 새 프로젝트 시작

```bash
poetry new project-name
```

### 기존 프로젝트에서 시작

이미 존재하는 프로젝트에서도 poetry를 사용할 수 있다. 프로젝트의 루트 디렉토리에서 다음 명령어를 실행한다. 

```bash
poetry init
```

### 종속성 추가

```bash
poetry add package-name
```

한편 개발중에만 필요한 패키지를 추가하려면 다음을 실행한다. 

```bash
poetry add package-name --dev
```

### 종속성 제거

```bash
poetry remove package-name
```

### 종속성 설치

`pyproject.toml`에 정의된 종속성을 설치하려면 다음 명령어를 실행한다. 

```bash
poetry install
```

### 스크립트 실행

```bash
poetry run python your_script.py
```

### 빌드 및 배포

프로젝트를 패키징 하려면 다음의 명령어를 실행한다. 이렇게 하면 `dist`  디렉토리에 패키지가 생성된다. 

```bash
poetry build
```

### 가상환경

poetry는 자동으로 가상환경을 생성한다. 가상 환경에 들어가기 위해서는 다음의 명령어를 실행한다. 

```bash
poetry shell
```

### 기능 탐색

```bash
poetry --help
```



