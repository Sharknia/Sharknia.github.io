{"componentChunkName":"component---src-templates-post-jsx","path":"/PyMySQL-소개/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"98c226f5-551e-517d-8fb9-7615c0a95595","excerpt":"서론 Apple Silicon 환경에서 Python, 특히 Django 개발 환경을 설정하다 보면 유독  패키지 설치 단계에서 붉은 에러 메시지와 마주치는 경우가 많습니다. (제가 레거시 환경을 다루다보니 많은 것일수도 있습니다. ) 경로를 직접 찾거나 C 라이브러리 설치, 환경 변수 설정을 통해 이 문제를 해결할 수도 있지만, 과정이 번거롭고 다른 환경…","html":"<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/139d65685f7dfe16b43253c38a45e9bd/6ffd1/image1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9AAMHdgQIdwULegcNfggPgwoSigsUkgwZnQkZpwwesBQouholvCMuwiMNuS8+2jlR4jQLxzUv2D814UM65QADCHgEC4EGC4MHDoMJEYoLFJEPGJgYIqU5Rbs6RcAZJb4gIsAnGb0iArU+Sd9Kgeg0B8hGHeFYLedWJOQABAl6BxOTCSOtBxKMCxSVDBWZGiKnVV3NfYnad4TZMjvGKSPGOx/LLBPGXEflennpOATPUCnmWjHpTynlAAQNgQURiwkdowkTkg4YnwsUpSk0umZ02ENLxjY5wiknyCoj4TUn4zgs12o35ptn7EQH2lUo5mM961g37AAFD4oGEYsHEIwLFZUQGaoSGrZVZMxJT8MZFLIjGLo2KdJfX/9dVPZGLd5SK+RqKehYIulfMO1sNu9cMfAATFKlVVyrT1eqV12uW2PCW2zOOEC5FhKvKiW+MR7Dqa7srf//vvL8mHHuUSnpXjjvYjv0aTTyfjjzZDb1AExUslxks2Ztt1ddsm11xnuG0kFRziYowS8kwjkqzYuZ6qnE983R+6yI9Vom7m889W899208+Ho++W5E+gAHFq8IF6QMF6EPGacdIq0/OMA3NcAlI7gvIr48LM1sf+eSi/HDtvmnhPVmJfN5Pvl5QvpxQPt9aPx2Y/0ADjHQDiWxEiOxGyq+FxyrGRqjGxihJh+xLx+7OyXJcHfmnZP0zbj5pXb1cSb3mmr7f0/9eD79h4D9enj9ABAzyQ0fqBkouDJA1h8ktycmvC8rxT0y3Ucy2VE02lc4329H6oFQ8Hk09IY2+b17/JBO/XtD/ZBv/Id1/QAOG6MLHKUpKLZSRNEiKrssLcA5McxSUvJXV+tgOeFsOupwLu56MPSINPiMNvvOcvubTv1/SP6HV/2HZf0ADR6lDyGrIiezPDS/JSy9LzLEPTrLW1PgXkbjazrmeTvuhTz0jT33jDb7iTT8jz38iUT9iVD9jFz+j2v9ZXE+U/JfKyoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image1' title='' src='/static/139d65685f7dfe16b43253c38a45e9bd/ca1dc/image1.png' srcset='/static/139d65685f7dfe16b43253c38a45e9bd/e7570/image1.png 170w,\n/static/139d65685f7dfe16b43253c38a45e9bd/f46e7/image1.png 340w,\n/static/139d65685f7dfe16b43253c38a45e9bd/ca1dc/image1.png 680w,\n/static/139d65685f7dfe16b43253c38a45e9bd/02d09/image1.png 1020w,\n/static/139d65685f7dfe16b43253c38a45e9bd/9d567/image1.png 1360w,\n/static/139d65685f7dfe16b43253c38a45e9bd/6ffd1/image1.png 1500w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2><strong>서론</strong></h2>\n<p>Apple Silicon 환경에서 Python, 특히 Django 개발 환경을 설정하다 보면 유독 <code class=\"language-text\">mysqlclient</code> 패키지 설치 단계에서 붉은 에러 메시지와 마주치는 경우가 많습니다. (제가 레거시 환경을 다루다보니 많은 것일수도 있습니다. )</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token variable\"><span class=\"token variable\">`</span>src/MySQLdb/_mysql.c:29:10: fatal error: <span class=\"token string\">'mysql.h'</span> <span class=\"token function\">file</span> not found<span class=\"token variable\">`</span></span></code></pre></div>\n<p>경로를 직접 찾거나 C 라이브러리 설치, 환경 변수 설정을 통해 이 문제를 해결할 수도 있지만, 과정이 번거롭고 다른 환경에 배포할 때 또 다른 문제를 낳기도 합니다.</p>\n<p>이 글에서는 골치 아픈 컴파일 에러와 싸우는 대신, 순수 파이썬(Pure Python)으로 작성된 <code class=\"language-text\">PyMySQL</code> 라이브러리를 사용하여 이 문제를 5분 안에 빠르게 해결하는 방법을 소개합니다.</p>\n<h2><strong>왜</strong> <code class=\"language-text\">mysqlclient</code><strong>는 설치가 까다로울까?</strong></h2>\n<p>이 에러의 원인을 알면 해결책을 더 잘 이해할 수 있습니다.</p>\n<ol>\n<li>C-확장 라이브러리: <code class=\"language-text\">mysqlclient</code>는 100% 파이썬 코드가 아닙니다. 빠른 성능을 위해 C언어로 작성된 부분을 포함하고 있어, 설치 시 사용자의 시스템 환경에 맞게 소스 코드를 컴파일하는 과정이 필요합니다.</li>\n<li>시스템 의존성: 이 컴파일 과정은 시스템에 MySQL 또는 MariaDB의 C 개발 라이브러리(헤더 파일 <code class=\"language-text\">mysql.h</code> 포함)가 미리 설치되어 있기를 요구합니다.</li>\n<li>Apple Silicon의 특수성: 애플 실리콘 맥에서는 Homebrew를 통해 라이브러리를 설치해도, 그 경로가 기존 Intel 맥과 다른 <code class=\"language-text\">/opt/homebrew</code> 아래에 위치합니다. 이 때문에 컴파일러가 헤더 파일과 라이브러리를 제대로 찾지 못해 에러가 발생하는 경우가 많습니다.</li>\n</ol>\n<h2><strong>PyMySQL의 등장</strong></h2>\n<p>PyMySQL은 이 모든 문제를 한 번에 해결해 주는 대안입니다.</p>\n<p>PyMySQL은 C 컴파일 과정이 전혀 필요 없는, 100% 순수 파이썬으로 작성된 MySQL 드라이버입니다.</p>\n<h3><strong>장점과 단점 (Trade-off)</strong></h3>\n<h4><strong>압도적인 장점</strong></h4>\n<ul>\n<li><strong>쉬운 설치:</strong> C 컴파일이 없으므로 <code class=\"language-text\">pip install pymysql</code> 한 줄이면 끝납니다. 어떤 OS(macOS, Linux, Windows)나 아키텍처(Intel, Apple Silicon)에서도 동일하게, 의존성 문제 없이 작동합니다.</li>\n<li><strong>배포 환경 단순화:</strong> Docker 이미지를 만들거나 새로운 서버에 배포할 때, 복잡한 시스템 라이브러리 설치 과정이 사라져 배포 과정이 매우 단순하고 깔끔해집니다.</li>\n<li>\n<p><strong>유일한 단점:</strong></p>\n<ul>\n<li>C로 최적화된 <code class=\"language-text\">mysqlclient</code>에 비해 아주 약간의 성능 차이가 있을 수 있습니다. 하지만 데이터베이스 통신이 병목의 대부분을 차지하는 일반적인 웹 애플리케이션 환경에서는 이 차이를 체감하기 거의 어렵습니다.</li>\n</ul>\n</li>\n</ul>\n<p>결론적으로, 대부분의 경우 설치 및 배포의 편리함이 미세한 성능 차이를 압도합니다.</p>\n<h2><strong>Django 프로젝트에 PyMySQL 적용하기</strong></h2>\n<p>적용 방법은 놀라울 정도로 간단합니다.</p>\n<h3><strong>1. 의존성 변경</strong></h3>\n<p>사용하시는 패키지 매니저에 맞게 <code class=\"language-text\">mysqlclient</code>를 제거하고 <code class=\"language-text\">pymysql</code>을 추가합니다.</p>\n<h4><strong>Poetry 사용 시</strong></h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">poetry remove mysqlclient\npoetry <span class=\"token function\">add</span> pymysql</code></pre></div>\n<h4><strong>pip 사용 시 (</strong><code class=\"language-text\">requirements.txt</code><strong>)</strong></h4>\n<div class=\"gatsby-highlight\" data-language=\"plaintext\"><pre class=\"language-plaintext\"><code class=\"language-plaintext\"># requirements.txt\n# mysqlclient  &lt;-- 이 줄을 삭제하거나 주석 처리\npymysql      # 이 줄을 추가</code></pre></div>\n<p><code class=\"language-text\">pip install -r requirements.txt</code> 를 실행합니다.</p>\n<h3><strong>2. Django에 PyMySQL 인식시키기</strong></h3>\n<p>이제 Django가 <code class=\"language-text\">mysqlclient</code> 대신 <code class=\"language-text\">PyMySQL</code>을 사용하도록 알려줘야 합니다. 프로젝트의 메인 <code class=\"language-text\">__init__.py</code> 파일 최상단에 다음 두 줄을 추가하면 됩니다.</p>\n<p>보통 <code class=\"language-text\">settings.py</code> 파일과 같은 위치에 있는 <code class=\"language-text\">__init__.py</code> 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># your_project/__init__.py</span>\n\n<span class=\"token keyword\">import</span> pymysql\n\n<span class=\"token comment\"># Django가 MySQLdb 모듈을 임포트할 때, 대신 PyMySQL을 사용하도록 설정</span>\npymysql<span class=\"token punctuation\">.</span>install_as_MySQLdb<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 코드는 Django의 DB 클라이언트가 기본적으로 찾는 <code class=\"language-text\">MySQLdb</code> 모듈(즉, <code class=\"language-text\">mysqlclient</code>)을 <code class=\"language-text\">PyMySQL</code>이 대신하도록 위장시켜주는 역할을 합니다.</p>\n<p>이것으로 모든 설정이 끝났습니다. 이제 <code class=\"language-text\">runserver</code>를 실행하면 Django가 <code class=\"language-text\">PyMySQL</code>을 통해 정상적으로 DB에 연결하는 것을 확인할 수 있습니다.</p>","frontmatter":{"title":"PyMySQL 소개","date":"June 26, 2025","update":"July 02, 2025","tags":["Python","Django","BackEnd"],"series":"Django Upgrade"},"fields":{"slug":"/PyMySQL-소개/","readingTime":{"minutes":5.49}}},"seriesList":{"edges":[{"node":{"id":"c76b7fdb-3f26-5c95-907d-424c078a8ca9","fields":{"slug":"/안전한-레거시-탈출을-위한-계획-설계/"},"frontmatter":{"title":"안전한 레거시 탈출을 위한 계획 설계"}}},{"node":{"id":"b82c89be-1529-5999-9daa-9bd3fe7ad2d5","fields":{"slug":"/설계-중-만난-장애물/"},"frontmatter":{"title":"설계 중 만난 장애물"}}},{"node":{"id":"98c226f5-551e-517d-8fb9-7615c0a95595","fields":{"slug":"/PyMySQL-소개/"},"frontmatter":{"title":"PyMySQL 소개"}}}]},"previous":{"fields":{"slug":"/설계-중-만난-장애물/"},"frontmatter":{"title":"설계 중 만난 장애물"}},"next":null},"pageContext":{"id":"98c226f5-551e-517d-8fb9-7615c0a95595","series":"Django Upgrade","previousPostId":"b82c89be-1529-5999-9daa-9bd3fe7ad2d5","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}