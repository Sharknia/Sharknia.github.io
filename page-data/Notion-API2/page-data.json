{"componentChunkName":"component---src-templates-post-jsx","path":"/Notion-API2/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"caff6e2f-342b-5d54-80ee-e047c9a93fd1","excerpt":"무엇을 하는가? Notion API를 이용해서 내가 쓴 글 들을 불러와 MD 파일로 만들려고 한다. 그 과정을 실시간으로 기록하려고 한다. 명확하게 가능한가? 는 사실 아직 알아보지 않았다.  왜 하는가? 너무나 너무나 귀찮기 때문이다. 블로그 포스팅을 위해서 마크다운 에디터로 노션을 쓰고 싶기 때문이다. 아니? 노션으로 쓴 것을 그대로 블로그에 커밋해버…","html":"<h2>무엇을 하는가?</h2>\n<p>Notion API를 이용해서 내가 쓴 글 들을 불러와 MD 파일로 만들려고 한다. 그 과정을 실시간으로 기록하려고 한다. 명확하게 가능한가? 는 사실 아직 알아보지 않았다. </p>\n<h2>왜 하는가?</h2>\n<p>너무나 너무나 귀찮기 때문이다.</p>\n<p>블로그 포스팅을 위해서 마크다운 에디터로 노션을 쓰고 싶기 때문이다. 아니? 노션으로 쓴 것을 그대로 블로그에 커밋해버리고 싶기 때문이다. 그 과정을 자동화해버리고 싶기 때문이다. </p>\n<p>즉, 노션에 글만 써두면 자동으로 마크다운으로 받아져서 깃허브에 커밋이 되고 깃허브 페이지에 배포가 되는 원대한 자동화를 원한다. </p>\n<h2>어떻게 하는가?</h2>\n<h3>환경</h3>\n<p>Node.js 18.17.1 버전을 사용한다.</p>\n<p>Node.js 프로젝트 시작</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init</code></pre></div>\n<p>.env 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">NOTION_KEY</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>노션키<span class=\"token operator\">></span>\n<span class=\"token assign-left variable\">NOTION_PAGE_ID</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>PageId<span class=\"token operator\">></span></code></pre></div>\n<p>.gitignore에 .env 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">.env</code></pre></div>\n<p>.env 안의 내용을 가져올 수 있도록 <code class=\"language-text\">dotenv</code> 패키지 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> dotenv</code></pre></div>\n<p>Notion API를 이용할 수 있도록 패키지 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> @notionhq/client</code></pre></div>\n<h3>API 확인</h3>\n<h4>코드</h4>\n<p>Notion API reference에 아주 친절하게 JavaScript 예제 코드까지 전부 붙어있다. Node.js를 선택한 이유이기도 하다. 예제 코드가 자바스크립트로 되어있어 그대로 갖다 붙이기 쉬워 보였기 때문이다. 일단 API의 결과물이 어떻게 날아오는지 확인하기 위해 있는 대로 갖다 붙였다. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Client <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@notionhq/client\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> pageId <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NOTION_PAGE_ID</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NOTION_KEY</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> notion <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Client</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">auth</span><span class=\"token operator\">:</span> key <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> notion<span class=\"token punctuation\">.</span>databases<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">database_id</span><span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// console.log(response);</span>\n        <span class=\"token comment\">//페이지들을 돌면서 id로 페이지를 읽어온다. </span>\n        response<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> pageId <span class=\"token operator\">=</span> page<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//page properties</span>\n                <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> notion<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">.</span><span class=\"token function\">retrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">page_id</span><span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------Page Properties----------\"</span><span class=\"token punctuation\">)</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">//page contents</span>\n                <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> blockId <span class=\"token operator\">=</span> pageId<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> notion<span class=\"token punctuation\">.</span>blocks<span class=\"token punctuation\">.</span><span class=\"token function\">retrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                        <span class=\"token literal-property property\">block_id</span><span class=\"token operator\">:</span> blockId<span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------Page Contents as Block----------\"</span><span class=\"token punctuation\">)</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">const</span> blockId <span class=\"token operator\">=</span> pageId<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> notion<span class=\"token punctuation\">.</span>blocks<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                        <span class=\"token literal-property property\">block_id</span><span class=\"token operator\">:</span> blockId<span class=\"token punctuation\">,</span>\n                        <span class=\"token literal-property property\">page_size</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"----------Page Block List----------\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error querying the database:\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>노션의 페이지 구성</h4>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/d66ebcb40149754ca4d4201abad4eef1/d5d41/image1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVR42m1SS47TQBTMlViwQ4glB2A1XIEbIHGcsBgYic1sYDaAEIhFJkIiv0kcJ47tOLHbseNP4k9Rr6MwM7JbKnX36/fqfbo6SZLAtm342y08z0OgFPzAR+ATQYDNZgOlAjxc9fGIwrLQtjphqNDv9zCd3uFuMsLgzy3msylGoyEmkzGGg78Y8/yYsUbluvCYbLlcwiK54zioqgqdmo9lWUL2moY8iVEWRSOzvEuA9qN/uVrhSL/D4aBxZNW6Qrnkea6N2plGCRRIItkb5CSq4ri9ZQkS9oJOcn7Ylqw8zTD+1UPv2098/f4Dxu/PSNYWahW2EwqZ6zqcga0RhqGG4ucUhwwTy8fblxd4/fQFnjx7jnev3mDZMwC14YjqJqFUpphNfjvLUqTpCTIGWUFS4ObTNb58vES3+x5XH24Q7zivraf99vs9Yrb/f4ZxHOkfFtnIQxRFGnIWBUS7ECnJkyxjkoyzlkT8oPUaW8a4/G2BkGvCPQPNuQFzMcec+2Jh6t2gdE73BWZTno2ZltGKEhE1lCRsnaG06lDYMsfzLG1KwrZPONulNUHCSkpWW5imVoRWRn0/y87Z8EhnDVQNYdctchLCfwhURTchecHcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image1' title='' src='/static/d66ebcb40149754ca4d4201abad4eef1/ca1dc/image1.png' srcset='/static/d66ebcb40149754ca4d4201abad4eef1/e7570/image1.png 170w,\n/static/d66ebcb40149754ca4d4201abad4eef1/f46e7/image1.png 340w,\n/static/d66ebcb40149754ca4d4201abad4eef1/ca1dc/image1.png 680w,\n/static/d66ebcb40149754ca4d4201abad4eef1/02d09/image1.png 1020w,\n/static/d66ebcb40149754ca4d4201abad4eef1/9d567/image1.png 1360w,\n/static/d66ebcb40149754ca4d4201abad4eef1/d5d41/image1.png 2238w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\npage properties는 정확하게 마크다운의 Front Matter에 사용하면 될 것 같다. </p>\n<p>그리고, 마크다운의 콘텐츠에 page content가 들어가면 되겠다. </p>\n<p>page properties를 얻기 위해서는 notion.pages.retrieve method를 이용하면 된다. </p>\n<h4>코드 실행 결과문 분석</h4>\n<ul>\n<li>notion.pages.retrieve</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"created_time\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-08-23T13:32:00.000Z\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"last_edited_time\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-09-01T12:45:00.000Z\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"created_by\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"last_edited_by\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"cover\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"database_id\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"database_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"archived\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PHNF\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"multi_select\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"multi_select\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"AWS\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"brown\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...id...\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"TAG2\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pink\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.notion.so/...\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"public_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://name.notion.site/...\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>정확하게 페이지의 속성들을 가져오고 있다. Front Matter에 필요한 내용들을 속성으로 만들어두면 완벽할 것 같다. </p>\n<ul>\n<li>notion.blocks.retrieve</li>\n</ul>\n<p>notion.blocks.retrieve는 page ID를 넣으면 해당 페이지의 정보를 가져다 주는데 왜냐면 노션에서 모든 단위가 블록이기 때문이다. 해당 페이지의 블록으로서의 데이터를 주는 것이기 때문에 지금 내 상황에선 그다지 사용할 필요가 없어 보인다. </p>\n<ul>\n<li>notion.blocks.children.list</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"results\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"block\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"page_id\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"page_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"id\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"created_time\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-09-01T12:00:00.000Z\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"last_edited_time\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2023-09-01T12:12:00.000Z\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"created_by\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"id\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"last_edited_by\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"object\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"id\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"has_children\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"archived\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"heading_1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"heading_1\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"rich_text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"제목1\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"제목1\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"is_toggleable\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t...\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>우리가 원하는 Page Content들의 내용이 드디어 보인다. 위의 결과에는 나타나지 않았지만, 들여쓰기가 된 경우에는 해당 들여쓰기가 된 block의 상위 요소에게 종속된다. 다시 말 내 다음 블록에 들여쓰기를 한 블록이 있다면 <code class=\"language-text\">has_children</code> 속성이 true가 된다. 그 안을 다시 파고 들어가면 될 것 같다. </p>\n<h2>오늘의 결론</h2>\n<h4>코드 기록</h4>\n<p><a href=\"https://github.com/Sharknia/Notion-to-Markdown/tree/check-api-test-complete\">https://github.com/Sharknia/Notion-to-Markdown/tree/check-api-test-complete</a></p>\n<p>이렇게 해서, API를 통해서 내 노션에 올려진 글들을 가져오는 데에 성공했다. 이제 다음 시간에는 이 JSON들을 가공해서 Markdown으로 변환하려고 한다. </p>\n<p>방법은 세 가지 정도를 생각하고 있다. </p>\n<ol>\n<li>\n<p>노션 내부 API 사용</p>\n<p>실제 노션 페이지를 띄울 때 오고 가는 요청값 들을 확인해 이를 사용하여 마크다운 파일을 바로 만들 수 있는 것으로 보인다. 이는 만들기가 가장 쉬워 보이나, 언제 폭파 될지 모른다는 문제점을 갖고 있다.  만약 폭파된다면 귀찮게도 다시 만들어야 한다는 치명적인 문제 때문에 지금 당장은 고려하고 있지 않지만 실패할 가능성도 가장 적어 보이므로, 귀찮아지면 언제든지 이쪽으로 틀도록 하자. </p>\n</li>\n<li>\n<p>오픈 소스 사용</p>\n<p>Notion 블록을 마크다운 형식으로 바꿔주는 오픈 소스가 있는 것으로 보인다. 아직 자세히 살펴보지는 않았다. </p>\n</li>\n<li>\n<p>직접 구현</p>\n<p>그냥.. 직접 만든다. 아마 많은 기능을 지원하지는 못하겠지만 노션을 쓰면서 느낀 건데 많은 기능을 딱히 사용하지 않는다. 정말 개인적인 용도라면 그냥 생각보다 쉽게 될 것 같기도 하다.</p>\n</li>\n</ol>\n<p>일단 코드를 막 짜고 있는데, 이번에는 변화에 닫힌, 확장에 열린 코드를 짜보려고 한다. 설계도 신경써서 하고 싶다. </p>\n<p>또 여유가 허락된다면 타입스크립트도 써보고 싶다. </p>\n<h2>참고문서</h2>\n<p><a href=\"https://developers.notion.com/reference\">https://developers.notion.com/reference</a></p>\n<p><a href=\"https://blog.hwahae.co.kr/all/tech/10960\">https://blog.hwahae.co.kr/all/tech/10960</a></p>","frontmatter":{"title":"Notion API(2)","date":"September 01, 2023","update":"February 02, 2024","tags":["Hobby","Blogging","Notion-API"],"series":"GitHub Pages와 Notion API 연동"},"fields":{"slug":"/Notion-API2/","readingTime":{"minutes":7.46}}},"seriesList":{"edges":[{"node":{"id":"0fc9d8ab-d5cd-51cd-a9ea-7d2dbe9644d5","fields":{"slug":"/Notion-API1/"},"frontmatter":{"title":"Notion API(1)"}}},{"node":{"id":"5d83473a-37f6-5854-84e9-c083bdf24f14","fields":{"slug":"/githubio를-이용한-블로그/"},"frontmatter":{"title":"github.io를 이용한 블로그"}}},{"node":{"id":"6625c14e-d728-5423-88f6-0cc5c53f96c7","fields":{"slug":"/githubio-자동배포/"},"frontmatter":{"title":"github.io 자동배포"}}},{"node":{"id":"caff6e2f-342b-5d54-80ee-e047c9a93fd1","fields":{"slug":"/Notion-API2/"},"frontmatter":{"title":"Notion API(2)"}}},{"node":{"id":"4f2b0f85-f328-5e25-88ca-906cc5445cbf","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅"}}},{"node":{"id":"5a3e30f1-80e8-5c33-95b0-81497cb4e76b","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅2/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(2)"}}},{"node":{"id":"5c524660-ffc4-54c8-be1b-d0c0e9c91055","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅3/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(3)"}}},{"node":{"id":"8e106531-286c-5f27-ba3a-9da87d18147c","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅4/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(4)"}}},{"node":{"id":"3faae0e4-d1a6-5ca3-b3c7-470156c96737","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅5/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(5)"}}},{"node":{"id":"9cca374d-ff65-5a66-8343-1e26af2ffd38","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅6/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(6)"}}},{"node":{"id":"c17ac7ea-2da0-57e3-a89a-c69530e3c6da","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅7/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(7)"}}},{"node":{"id":"18cf5cda-673d-5303-b3dd-bc3a79b78863","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅8/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(8)"}}},{"node":{"id":"6022311e-ce33-5d11-a85b-2b5639189b92","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅9/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(9)"}}},{"node":{"id":"048cbee4-4ec0-520d-abe1-1327446f88cb","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅10/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(10)"}}}]},"previous":{"fields":{"slug":"/DataTable-클래스/"},"frontmatter":{"title":"DataTable 클래스"}},"next":{"fields":{"slug":"/Typescript-시작하기/"},"frontmatter":{"title":"Typescript 시작하기"}}},"pageContext":{"id":"caff6e2f-342b-5d54-80ee-e047c9a93fd1","series":"GitHub Pages와 Notion API 연동","previousPostId":"c44faec0-9520-54c4-80ae-be2c30cc098b","nextPostId":"5207d586-fb17-555a-98df-511914e0e7de"}},"staticQueryHashes":[],"slicesMap":{}}