{"componentChunkName":"component---src-templates-post-jsx","path":"/NotionAPI를-활용한-자동-포스팅4/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"81e99043-692d-5112-8edc-5d43774968a0","excerpt":"지난 이야기 NotionAPI를 활용한 자동 포스팅(3) 간만에 복귀를 했다. 별건 아니고.. 그냥 복습을 했다.  오늘의 작업 block.ts 나머지 작업 지난번에 block.ts를 미완성 된 상태로 두었다. 타입 검사에서 걸린 상태로 일단 두었고, Union Type이라는 것이 있다는 것을 알게 되었다. 해당 내용에 대해서는 따로 정리 해두었다.  U…","html":"<h2>지난 이야기</h2>\n<p><a href=\"https://sharknia.github.io/NotionAPI%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99-%ED%8F%AC%EC%8A%A4%ED%8C%853\">NotionAPI를 활용한 자동 포스팅(3)</a></p>\n<p>간만에 복귀를 했다. 별건 아니고.. 그냥 복습을 했다. </p>\n<h2>오늘의 작업</h2>\n<h3>block.ts 나머지 작업</h3>\n<p>지난번에 block.ts를 미완성 된 상태로 두었다. 타입 검사에서 걸린 상태로 일단 두었고,</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">GetBlockResponse</span> <span class=\"token operator\">=</span> PartialBlockObjectResponse <span class=\"token operator\">|</span> BlockObjectResponse<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Union Type이라는 것이 있다는 것을 알게 되었다. 해당 내용에 대해서는 따로 정리 해두었다. </p>\n<p><a href=\"https://sharknia.github.io/Union-Type\">Union Type</a>  </p>\n<h3>로그 강화</h3>\n<p>로그도 작업 순서에 맞게 찍히도록 강화했다. json 형태의 데이터여서 [object Object] 와 같이 찍히던 것도 제대로 내용물이 출력되도록 수정했다. 다음과 같은 코드로 json 형태의 데이터도 이쁘게 출력할 수 있다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">convertParagraph - paragraph : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\n                paragraph<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>ConvertParagraph 완성</h3>\n<p>paragraph는 노션 블록 타입 주으이 하나로, 텍스트의 기본 단위이다. 텍스트를 입력할 때 기본적으로 생성되는 블록 유형이다. </p>\n<p>이 블록 안에 들어있는 내용을 마크다운으로 바꿔주는 메소드를 완성했다. </p>\n<p>원본 노션의 내용은 다음과 같다. 일부러 여러가지 케이스를 집어넣었다. </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 182px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 38.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABi0lEQVR42m2RW2/aQBCF+RsFX9bGxsYYYxMDruNQwFHrtlHjtCBVSi9cFKnKE///5evgJlIleDh7dnZnz8ycbem6jmEYnLjT6TQ4xZqm0W63z85eoZS6iFaSJHiex1WaslitWC6XRKMR8/mcuq7J85yiKIiiiMViQVmWTXwqcFFwJQ8/396yfXzkabvl+PxMfXdH/fDA8Xhkt9ux3++pqorD4cBWcjabDbZtXxasgoAfScz3OGYdDvjqupzOHOFAuC/wfb9Jdnu9hofDIY7jYJrmuaAhiy7QlIluKd5YFu2XS93QMQ0TTcYz5F6ZCktZdMRDQ8QsyT0TDAZ91tmUb7MJ9SRlPZ1QpWN0WxE5fZ5mXyjDjE/DG96HOR+jgpkfkwk+SJx7iRTUmkKNYBgG/Mzf8ivP+HNzzW/Z309TonHCyB+wiUtSL6LoX1EOMu5H74jdAdf9MdOefFScEYhVr+O3ul0bT/xyXUd8c+iKN47TbTxS1svokqyZhnShsKUT3fxnwYmVjP3/B/0FwLz0WbdFeN8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image1' title='' src='/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png' srcset='/static/c37e9a2ed8f76a7f64abfe844e3b2069/e7570/image1.png 170w,\n/static/c37e9a2ed8f76a7f64abfe844e3b2069/7d08f/image1.png 182w' sizes='(max-width: 182px) 100vw, 182px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이 paragraph블록의 데이터 형태는 다음과 같다. </p>\n<h4><u>노</u><u><del>션이</del></u>  <strong>좋습***</strong>니다***..</h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rich_text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"노\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"노\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"션이\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"션이\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"좋습\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"좋습\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"니다\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"니다\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"..\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"..\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4><code class=\"language-text\">정말로</code>.. <span style=\"color: pink;\">좋아합니다</span>..</h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rich_text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"정말로\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"정말로\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".. \"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".. \"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"좋아합니다\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pink\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"좋아합니다\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".. \"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"annotations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"bold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"italic\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"strikethrough\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"underline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"plain_text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".. \"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"href\"</span><span class=\"token operator\">:</span> <span class=\"token null keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 중에서 밑줄과 색상은 기본적으로 마크다운에서 지원하지 않는 기능이므로 html 태그를 사용했다. 코드는 다음과 같다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">private</span> <span class=\"token function\">convertParagraph</span><span class=\"token punctuation\">(</span>paragraph<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> markdown <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> textElement <span class=\"token keyword\">of</span> paragraph<span class=\"token punctuation\">.</span>rich_text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> textContent <span class=\"token operator\">=</span> textElement<span class=\"token punctuation\">.</span>plain_text<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 텍스트 스타일링 처리</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">**</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>italic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">*</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">*</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>strikethrough<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">~~</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">~~</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>underline<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 마크다운은 기본적으로 밑줄을 지원하지 않으므로, HTML 태그 사용</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;u></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/u></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token comment\">// 색상 처리 (HTML 스타일을 사용)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>color <span class=\"token operator\">!==</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span style=\"color: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>color<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textElement<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            markdown <span class=\"token operator\">+=</span> textContent<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">convertParagraph - paragraph : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\n                paragraph<span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        markdown <span class=\"token operator\">=</span> markdown <span class=\"token operator\">+</span> <span class=\"token string\">'\\n\\n'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">convertParagraph - markdown : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>markdown<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> markdown<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 문단 끝에 줄바꿈 추가</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>각 문장은 각각 다음과 같이 변환된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">convertParagraph - markdown <span class=\"token builtin class-name\">:</span> <span class=\"token operator\">&lt;</span>u<span class=\"token operator\">></span>노<span class=\"token operator\">&lt;</span>/u<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>u<span class=\"token operator\">></span>~~션이~~<span class=\"token operator\">&lt;</span>/u<span class=\"token operator\">></span> **좋습*****니다***<span class=\"token punctuation\">..</span>\nconvertParagraph - markdown <span class=\"token builtin class-name\">:</span> <span class=\"token variable\"><span class=\"token variable\">`</span>정말로<span class=\"token variable\">`</span></span><span class=\"token punctuation\">..</span> <span class=\"token operator\">&lt;</span>span <span class=\"token assign-left variable\">style</span><span class=\"token operator\">=</span><span class=\"token string\">\"color: pink;\"</span><span class=\"token operator\">></span>좋아합니다<span class=\"token operator\">&lt;</span>/span<span class=\"token operator\">></span><span class=\"token punctuation\">..</span></code></pre></div>\n<p>이를 vscode의 마크다운 편집 기능을 통해서 확인하면 다음과 같이 정상적으로 출력되는 것을 확인할 수 있다. </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 388px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 17.64705882352941%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAvElEQVR42j1QywqEMBDz///K23rV9abiCxUUpZa6tj6yzYAeQjqvTKaBcw77vmPbNlhrwZh8nieO45Aa4yd3XdfbxxljjMRk1oKu61CWJeq6Fs7zXLCuK8ZxRFEUqKpK8OTSNEWWZUiSBJ8oQuZ7ku9XFgTDMIhY0zRo21beHNZaY5qmdxlBF33fIwxDxHEM691De2dK414NYH4IuHVZFhGY51lEyM8ZfCulpIdnso+uKcwvgfOwDreHT+APdpIuAlwaOU4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image2' title='' src='/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png' srcset='/static/e2c499b18f033781be6c338bb4de1ad2/e7570/image2.png 170w,\n/static/e2c499b18f033781be6c338bb4de1ad2/f46e7/image2.png 340w,\n/static/e2c499b18f033781be6c338bb4de1ad2/5bbd5/image2.png 388w' sizes='(max-width: 388px) 100vw, 388px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>마크다운 파일 저장 기능 추가</h3>\n<p>page.ts에 block들로부터 받아온 마크다운 내용과 properties에 저장된 내용들을 합해 마크다운 파일로 저장하는 메소드를 완성했다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">printMarkDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//contentMarkdown과 properties의 내용을 마크다운 파일로 저장한다.</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 파일 이름 설정 (페이지 제목으로)</span>\n            <span class=\"token keyword\">const</span> filename <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pageTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.md</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 마크다운 메타데이터 생성</span>\n            <span class=\"token keyword\">const</span> markdownMetadata <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">formatMarkdownMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 마크다운 메타데이터와 contentMarkdown을 결합</span>\n            <span class=\"token keyword\">const</span> fullMarkdown <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>markdownMetadata<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contentMarkdown<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 디렉토리 생성 (이미 존재하는 경우 오류를 무시함)</span>\n            <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdir</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pageUrl <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> recursive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> filePath <span class=\"token operator\">=</span> <span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pageUrl <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'index.md'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// 결합된 내용을 파일에 쓰기 (이미 존재하는 경우 덮어쓰기)</span>\n            <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> fullMarkdown<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[page.ts] Markdown 파일 저장됨: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filePath<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[page.ts] 파일 저장 중 오류 발생: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">formatMarkdownMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// properties를 마크다운 메타데이터로 변환</span>\n        <span class=\"token keyword\">const</span> metadata <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'---'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">title: \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>title <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">description: \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>description <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">date: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>date <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">update: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>update <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// tags가 배열인 경우에만 join 메소드를 호출</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">tags:\\n  - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n                <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>tags<span class=\"token punctuation\">)</span>\n                    <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n  - '</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n            <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">series: \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>properties<span class=\"token operator\">?.</span>series <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'---'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> metadata<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>github.io의 블로그 형식에 맞춰서 properties를 바꿔주고, 블로그 형식에 맞는 위치에 일단 마크다운 파일을 저장하게끔 해주었다. 아마, 추후 배포 방식에 따라 해당 위치는 바뀔 수 있을 것이다. 아직 정확하게 어떤 방식으로 블로그를 배포할 것인지까지는 고려하지 않았다. </p>\n<p>위 코드를 포함해서 실행하면, </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 190px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACAElEQVR42oVSy3LaQBDkGzCSVg/0RhICgZC0CBTAvKFsXK5UXDmmUpWbLz75mFvyP/nDzqyo+IKJD32Qdqanp3sacT9BlmWI0gK9u29IywrJYIis4Mg5xyjPUYxL9OnfIB1hOMrorUDc76Pb612gkaQZVsslomKO299/8PD9GdPqE7bHIza7PWGL9e4APqmw2h+w2++wWK6QEHkyTC/QME0TbQHDgO/aCLtx/e163hmuC8dx0QkCeJ4L07Lh+z5E33toyLIMy3YQRxHy8QQvP3/Bj3qYLRaYz2fI0hRx3ENVTZGNUnTJokk5hsoYFEW5QIPRg67r0DQNOqkMwoiKZVLlUIEMSZIghjLRwBRoqgqVagUhewdvhLpuQJFbMMIhbH6AR4SL2zWO5NlsPgUvp9isNvBodZmGqER8lVCoY1QgtW7QlBQwO6w9LfgYJa3HeY5hmqPMCti2fVZ8XaFSh2BZJsXex/p4B6tt1AEwGvTPbBGMrmtXid4IhZEiuYhWGdAJ/Xh5RRCEGAwSuH5AKjmKIqd75KimE9imAZl62P88FCsLwyWphWbzBkw368TqAFQGSZZq3/R2Gxr5rXxEaJBfAgo1WjH5NDkh7HRw//CIr09fcH86YLU94PPpEQGdl9RqfRzKORjxk6bTuQh1FgUgzsdxnfpWHbLmvM11D/8C58BWiDU8hLUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image3' title='' src='/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png' srcset='/static/bd60ee265b49dce0e87e516a1d70d48a/e7570/image3.png 170w,\n/static/bd60ee265b49dce0e87e516a1d70d48a/08678/image3.png 190w' sizes='(max-width: 190px) 100vw, 190px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이렇게 저장이 되고, </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/0d515458e22973fa572822c3536f30db/86467/image4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 37.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAq0lEQVR42q2PWwqDQAxFZyHWeSQ+Oo/N220orkBQtyFyOzOlIAVLCwYOST5yuBFU39E2LcgYKKkglYSUEmWaYy+KAsEHPLoO4zii73sMw3CKqFsLax2IDDhKTUQbAmkFJnoJQ8CyLEi17zu+lTDEIK7QVAxmjgkVVEQntM5C7z3mec4H27Zl6Rkiv1eWuEVST/ubJP474VHwyVG4rut1wuPLlwidc5im6SfhE9Elb1W+TBl+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image4' title='' src='/static/0d515458e22973fa572822c3536f30db/ca1dc/image4.png' srcset='/static/0d515458e22973fa572822c3536f30db/e7570/image4.png 170w,\n/static/0d515458e22973fa572822c3536f30db/f46e7/image4.png 340w,\n/static/0d515458e22973fa572822c3536f30db/ca1dc/image4.png 680w,\n/static/0d515458e22973fa572822c3536f30db/02d09/image4.png 1020w,\n/static/0d515458e22973fa572822c3536f30db/9d567/image4.png 1360w,\n/static/0d515458e22973fa572822c3536f30db/86467/image4.png 2233w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이렇게 깔끔하게 저장이 된다. 이제 앞으로는 각 블록 타입들에 대한 변환을 추가하면 된다!</p>\n<h3>BlockObjectResponse 분석</h3>\n<p>실질적으로 컨텐츠들은 BlockObjectResponse 타입들로 이루어져있다. BlockObjectResponse는 다음의 Union Type이다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">BlockObjectResponse</span> <span class=\"token operator\">=</span> ParagraphBlockObjectResponse <span class=\"token operator\">|</span> Heading1BlockObjectResponse <span class=\"token operator\">|</span> Heading2BlockObjectResponse <span class=\"token operator\">|</span> Heading3BlockObjectResponse <span class=\"token operator\">|</span> BulletedListItemBlockObjectResponse <span class=\"token operator\">|</span> NumberedListItemBlockObjectResponse <span class=\"token operator\">|</span> QuoteBlockObjectResponse <span class=\"token operator\">|</span> ToDoBlockObjectResponse <span class=\"token operator\">|</span> ToggleBlockObjectResponse <span class=\"token operator\">|</span> TemplateBlockObjectResponse <span class=\"token operator\">|</span> SyncedBlockBlockObjectResponse <span class=\"token operator\">|</span> ChildPageBlockObjectResponse <span class=\"token operator\">|</span> ChildDatabaseBlockObjectResponse <span class=\"token operator\">|</span> EquationBlockObjectResponse <span class=\"token operator\">|</span> CodeBlockObjectResponse <span class=\"token operator\">|</span> CalloutBlockObjectResponse <span class=\"token operator\">|</span> DividerBlockObjectResponse <span class=\"token operator\">|</span> BreadcrumbBlockObjectResponse <span class=\"token operator\">|</span> TableOfContentsBlockObjectResponse <span class=\"token operator\">|</span> ColumnListBlockObjectResponse <span class=\"token operator\">|</span> ColumnBlockObjectResponse <span class=\"token operator\">|</span> LinkToPageBlockObjectResponse <span class=\"token operator\">|</span> TableBlockObjectResponse <span class=\"token operator\">|</span> TableRowBlockObjectResponse <span class=\"token operator\">|</span> EmbedBlockObjectResponse <span class=\"token operator\">|</span> BookmarkBlockObjectResponse <span class=\"token operator\">|</span> ImageBlockObjectResponse <span class=\"token operator\">|</span> VideoBlockObjectResponse <span class=\"token operator\">|</span> PdfBlockObjectResponse <span class=\"token operator\">|</span> FileBlockObjectResponse <span class=\"token operator\">|</span> AudioBlockObjectResponse <span class=\"token operator\">|</span> LinkPreviewBlockObjectResponse <span class=\"token operator\">|</span> UnsupportedBlockObjectResponse<span class=\"token punctuation\">;</span></code></pre></div>\n<p><del>너무 많다</del></p>\n<p>일단, 많이 쓸 것 같은 블록들을 예제 파일로 만들고 해당 노션 파일들을 불러와보고 어떤 타입들을 사용하는지 살펴보기로 했다. 나머지는 모르겠다 아직은 그냥 미지원이다. </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/2af61caa2c35f58e15a78afe1588f244/f7121/image5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 92.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByklEQVR42qWUy27UMBSG/QoMI7GguTh2HDsTJ5P7NCO1IITUFRUS8A4seP/lzzmmQVUl0HSy+BM7Uj6fy38spmHAx/s7ZFmGJEmQpukmibnrcDfPyKTcDAvAZZqwjCOiKLoKIOUL4D1Ft/Q9ojgOKQddAJGU0U0UI6b/eB/FCa0TiPZ4xHJ7i6IooJSC1hqa6vk/IEM4o/FYoq4OuEkNWm9wKA2EyQ36rkff/9FI6XdlCa008jwPhxhjwprffPCb3VvIdzs8zg5f+gNOSuLXtxFfHyYIVVu0pwG196iqCnVdo24adNQsBnBEDGUX8Ju13+/g5R5H/R4fbIyfPx7w/fOCR5JQRsM6C2ddOL2wFgWBLK05qlCCJ63AXEv4A6WvMspEoT1/gqs7CqaC4J8aiogjW1NaZQn+LxWFg3MurI3OKAATDhX84I/h5KeavV76b1nEWjfu2kxT42nPFrra2Gt9mO4p5Yqjpf0mINvlRAYfyDLL+Ry6fe1cC34wlP3HYJ6AeEvK3Aiu4UQzPVAN5cZLQnCHx7bFTEDu1JboArCiMVtoStILLoWLgIUhY/sKJYHZ2M8n47XiDIWh0WsaT3VsyODPbpwrgb8BKZ0dd/NVeLkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image5' title='' src='/static/2af61caa2c35f58e15a78afe1588f244/ca1dc/image5.png' srcset='/static/2af61caa2c35f58e15a78afe1588f244/e7570/image5.png 170w,\n/static/2af61caa2c35f58e15a78afe1588f244/f46e7/image5.png 340w,\n/static/2af61caa2c35f58e15a78afe1588f244/ca1dc/image5.png 680w,\n/static/2af61caa2c35f58e15a78afe1588f244/f7121/image5.png 899w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이것들을 넘는것은 내가 아직은 노션에 쓸 것 같지가 않다. 따라서 위의 블록들을 중점적으로 먼저 변환하기로 하자. </p>\n<p>다음의 녀석들이 그 녀석들이다. </p>\n<h4>heading_ 시리즈</h4>\n<p>제목1, 제목2, 제목3 들이다. heading<em>1부터 heading</em>3까지를 노션에서는 사용할 수 있는데, 각각 h2, h3, h4로 변환하면 될 것 같다. 이건 쉬울 것 같은 예감이 든다. </p>\n<h4>bookmark</h4>\n<p>북마크는 간단할 것 같지만, 간단하지 않은 점이 있다. 노션에는 페이지 링크 기능이 있는데, 이것도 가능하면 (페이지 링크도 어차피 내 블로그 글 일테니까, 아니 사용자가 그렇게 사용해야 한다. ) 블로그 글의 링크로 변환하고 싶다. 이게 가능할까? 이건 쉽지 않을 수도 있을 것 같은 생각이 지금은 든다. 생성된 페이지 링크와 페이지 아이디가 다르다면 근본적으로 불가능한 일이다. </p>\n<h4>code</h4>\n<p>코드 블록이다. 이건 쉬울 것 같다. </p>\n<h4>table, table_row</h4>\n<p>마크다운은 표 그리기가 까다롭다. 그래도 어떻게든 할 수 있지 않을까? </p>\n<h4>bulleted<em>list</em>item</h4>\n<p>글머리 기호이다. 이건.. 이건 쉽지 않을까? </p>\n<h4>numbered<em>list</em>item</h4>\n<p>번호 이것도 쉽지 않을까?? </p>\n<h4>toggle</h4>\n<p>토글도 어떻게든 되지 않을까? 다른것보단 복잡하겠지만 특별한 건 없을 것 같다. </p>\n<h4>quote, divider, callout</h4>\n<p>이 놈들도 특별한 어려움은 예상되지 않는다. 그냥 스타일이나 이쁘게 주면 될 것 같다. </p>\n<p>결국, 표나 북마크를 제외하면 나머지는 그냥 단순 노가다로 예상이 된다. </p>\n<h3>heading 시리즈 컨버터 생성</h3>\n<p>이건 간단했다. 다만, 컨버팅 관련 내용이 길어질 것 같아 해당 역할을 하는 클래스 MarkdownConverter을 만들어서 이걸 이용하기로 했다. 이 클래스는 블록의 내용을 받아 markdown 문자열로 변환해서 리턴하는 역할을 한다. </p>\n<p>paragraph와 heading 시리즈에 겹치는 내용이 많다. 사실상 pre 태그만 다르다. 따라서 중복되는 내용을 formatTextElement 메소드로 분리했다. 아마 다른 타입에 대해서도 사용할 수 있을 것 같은 예감이 든다. </p>\n<p>완성된 코드는 다음과 같다. </p>\n<h4>코드</h4>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BlockObjectResponse <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@notionhq/client/build/src/api-endpoints'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MarkdownConverter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> block<span class=\"token operator\">:</span> BlockObjectResponse<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>block<span class=\"token operator\">:</span> BlockObjectResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>block <span class=\"token operator\">=</span> block<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>block<span class=\"token operator\">:</span> BlockObjectResponse<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> converter<span class=\"token operator\">:</span> MarkdownConverter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MarkdownConverter</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> converter<span class=\"token punctuation\">.</span><span class=\"token function\">makeMarkDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">makeMarkDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> block <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>block<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> markdown<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[markdownConverter.ts] makeMarkDown : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n                block<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span>\n            <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 텍스트의 기본 단위,텍스트를 입력할 때 기본적으로 생성되는 블록 유형</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'paragraph'</span><span class=\"token operator\">:</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">convertParagraph</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>paragraph<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'heading_1'</span><span class=\"token operator\">:</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">convertHeading</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>heading_1<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'heading_2'</span><span class=\"token operator\">:</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">convertHeading</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>heading_2<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">'heading_3'</span><span class=\"token operator\">:</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">convertHeading</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">.</span>heading_3<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// 다른 블록 유형에 대한 처리를 여기에 추가...</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[markdownConverter.ts] makeMarkDown : Unsupported block type - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>block<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> markdown<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">convertParagraph</span><span class=\"token punctuation\">(</span>paragraph<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> markdown <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> textElement <span class=\"token keyword\">of</span> paragraph<span class=\"token punctuation\">.</span>rich_text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">formatTextElement</span><span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> markdown <span class=\"token operator\">+</span> <span class=\"token string\">'\\n\\n'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">convertHeading</span><span class=\"token punctuation\">(</span>heading<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> level<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> markdown <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> prefix <span class=\"token operator\">=</span> <span class=\"token string\">'#'</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span>level <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> textElement <span class=\"token keyword\">of</span> heading<span class=\"token punctuation\">.</span>rich_text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">formatTextElement</span><span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> prefix <span class=\"token operator\">+</span> markdown <span class=\"token operator\">+</span> <span class=\"token string\">'\\n\\n'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">formatTextElement</span><span class=\"token punctuation\">(</span>textElement<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> textContent <span class=\"token operator\">=</span> textElement<span class=\"token punctuation\">.</span>plain_text<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 텍스트 스타일링 처리</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">**</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>italic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">*</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">*</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>strikethrough<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">~~</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">~~</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>underline<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;u></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/u></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>color <span class=\"token operator\">!==</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span style=\"color: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textElement<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span>color<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            textContent <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>textElement<span class=\"token punctuation\">.</span>href<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> textContent<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>convertLinkToPage 생성</h3>\n<p>아까 북마크에 대해서 고려할 때, 페이지 링크가 어렵지 않을까? 고민했었는데 해당 문제는 해결이 가능했다. link<em>to</em>page 타입에서 페이지 아이디를 제공하고 있었고, 페이지 아이디를 API를 통해서 호출을 하면 해당 데이터를 가져오는 것이 가능했다. 이 경우에는 마크다운 파일은 필요없고 URL만 필요하므로, Page 클래스에 간단한 정보만 가져오는 메소드를 만들고 해당 메소드를 활용해 북마크를 생성해주었다. 또, 설정 파일에 블로그의 주소를 설정하도록 했다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Page</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> pageId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> notion<span class=\"token operator\">:</span> Client<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> properties<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> PropertyValue<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> pageTitle<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> pageUrl<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> contentMarkdown<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>pageId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> notion<span class=\"token operator\">:</span> Client<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pageId <span class=\"token operator\">=</span> pageId<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>notion <span class=\"token operator\">=</span> notion<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span>page<span class=\"token operator\">:</span> Page<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> properties <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">getProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        page<span class=\"token punctuation\">.</span>properties <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">extractDataFromProperties</span><span class=\"token punctuation\">(</span>properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        page<span class=\"token punctuation\">.</span>pageUrl <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n            page<span class=\"token punctuation\">.</span>pageTitle\n                <span class=\"token operator\">?.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^가-힣\\w\\-_~]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 한글, 영어, 숫자, '-', '_', '.', '~'를 제외한 모든 문자 제거</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\s+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> <span class=\"token comment\">// 공백을 하이픈으로 치환</span>\n            <span class=\"token string\">''</span>\n        <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token operator\">...</span><span class=\"token punctuation\">.</span> 생략 <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getSimpleData</span><span class=\"token punctuation\">(</span>pageId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> notionApi<span class=\"token operator\">:</span> NotionAPI <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> NotionAPI<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> page<span class=\"token operator\">:</span> Page <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Page</span><span class=\"token punctuation\">(</span>pageId<span class=\"token punctuation\">,</span> notionApi<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            pageTitle<span class=\"token operator\">:</span> page<span class=\"token punctuation\">.</span>pageTitle <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n            pageUrl<span class=\"token operator\">:</span> page<span class=\"token punctuation\">.</span>pageUrl <span class=\"token operator\">??</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token operator\">...</span><span class=\"token punctuation\">.</span> 생략 <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>기존의 생성자 create 메소드와 중복되는 부분을 init 메소드로 분리하고, getSimpleData에서는 title, url만 리턴하도록 수정해주었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">convertLinkToPage</span><span class=\"token punctuation\">(</span>linkToPage<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> envConfig <span class=\"token operator\">=</span> EnvConfig<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// EnvConfig 인스턴스 생성</span>\n            <span class=\"token keyword\">const</span> blogUrl <span class=\"token operator\">=</span> envConfig<span class=\"token punctuation\">.</span>blogUrl<span class=\"token punctuation\">;</span> <span class=\"token comment\">// blogUrl 가져오기</span>\n            <span class=\"token keyword\">const</span> pageId <span class=\"token operator\">=</span> linkToPage<span class=\"token punctuation\">.</span>page_id<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> pageData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Page<span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleData</span><span class=\"token punctuation\">(</span>pageId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> pageTitle <span class=\"token operator\">=</span> pageData<span class=\"token punctuation\">.</span>pageTitle<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> pageUrl <span class=\"token operator\">=</span> pageData<span class=\"token punctuation\">.</span>pageUrl<span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pageTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>blogUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pageUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\n\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error converting link_to_page:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 이렇게 해당 값과 설정값을 이용해 북마크를 연결할 주소를 만들었다. </p>\n<h3>Page 멘션 기능 대응</h3>\n<p>Page Mention의 경우에는 특이하게 paragraph에 링크 관련 정보가 담겨서 온다. 해당 경우에 대응하기 위해 convertParagraph를 다음과 같이 수정해주었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">convertParagraph</span><span class=\"token punctuation\">(</span>paragraph<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> markdown <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> textElement <span class=\"token keyword\">of</span> paragraph<span class=\"token punctuation\">.</span>rich_text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n                textElement<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'mention'</span> <span class=\"token operator\">&amp;&amp;</span>\n                textElement<span class=\"token punctuation\">.</span>mention<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'page'</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// mention 타입이고, page를 참조하는 경우</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">convertMentionToPageLink</span><span class=\"token punctuation\">(</span>\n                    textElement<span class=\"token punctuation\">.</span>mention<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 기타 텍스트 요소</span>\n                markdown <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">formatTextElement</span><span class=\"token punctuation\">(</span>textElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> markdown <span class=\"token operator\">+</span> <span class=\"token string\">'\\n\\n'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">convertMentionToPageLink</span><span class=\"token punctuation\">(</span>pageId<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> envConfig <span class=\"token operator\">=</span> EnvConfig<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// EnvConfig 인스턴스 생성</span>\n            <span class=\"token keyword\">const</span> blogUrl <span class=\"token operator\">=</span> envConfig<span class=\"token punctuation\">.</span>blogUrl<span class=\"token punctuation\">;</span> <span class=\"token comment\">// blogUrl 가져오기</span>\n            <span class=\"token keyword\">const</span> pageData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Page<span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleData</span><span class=\"token punctuation\">(</span>pageId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> pageTitle <span class=\"token operator\">=</span> pageData<span class=\"token punctuation\">.</span>pageTitle<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> pageUrl <span class=\"token operator\">=</span> pageData<span class=\"token punctuation\">.</span>pageUrl<span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pageTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>blogUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pageUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error converting mention to page link:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이로써 까다로울 것 같았던 두 가지에 대한 대응이 끝났고, 나머지는 노가다만 남은 것 같다!</p>\n<h3>imageConverter 구현</h3>\n<p>이미지도 구현이 쉬웠다. 마크다운과 같은 폴더에 이미지를 다운로드 받고(amazone 저장소 주소가 API에서 제공된다. ) 캡션 형식으로 넣어주면 된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">convertImage</span><span class=\"token punctuation\">(</span>imageBlock<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> imageUrl <span class=\"token operator\">=</span> imageBlock<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> imageCaption <span class=\"token operator\">=</span>\n                imageBlock<span class=\"token punctuation\">.</span>caption<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span>\n                    <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">formatRichText</span><span class=\"token punctuation\">(</span>imageBlock<span class=\"token punctuation\">.</span>caption<span class=\"token punctuation\">)</span>\n                    <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 이미지 이름을 순서대로 할당 (image1, image2, ...)</span>\n            <span class=\"token keyword\">const</span> imageName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">image</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token operator\">++</span>MarkdownConverter<span class=\"token punctuation\">.</span>imageCounter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> imageDownDir <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pageUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">const</span> imagePath <span class=\"token operator\">=</span> <span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'contents/post'</span><span class=\"token punctuation\">,</span> imageDownDir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 이미지 다운로드 및 로컬에 저장</span>\n            <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>imageUrl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                responseType<span class=\"token operator\">:</span> <span class=\"token string\">'arraybuffer'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span>imagePath<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 마크다운 이미지 문자열 생성</span>\n            <span class=\"token keyword\">let</span> markdownImage <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">![</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageCaption<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>imageCaption<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                markdownImage <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;p style=\"text-align:center;\">&lt;small></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>imageCaption<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/small>&lt;/p>\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">return</span> markdownImage<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error converting image:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>단, 이 클래스는 상당히 분리되어있는 클래스여서 따로 저장될 곳의 디렉토리 명을 알 수 있는 방법이 없었다.. 어쩔 수 없이 Page클래스부터 계속해서 디렉토리 명을 던져줬다.. 깔끔하지 않다.. </p>\n<p>또, 저장될 디렉토리 (contents/post) 도 설정의 영역에 넣어야 할 것 같다. </p>\n<h2>오늘의 마무리</h2>\n<p>오늘은 이 정도면 될 것 같다. 이미 핵심 부분은 모두 진행이 됐고, 앞으로는</p>\n<h3>남은 타입별 구현</h3>\n<p>콜아웃, devider, quote는 html, css의 영역으로 생각된다. 이건 추후 따로 정적 파일에 html, css를 추가하거나 해야 할 것 같다. 자세한 방법은 나중에 생각해보려고 한다. 오늘 다섯시간? 정도를 쉬지 않고 했더니 집중력이 많이 떨어진 게 느껴진다. </p>\n<p>토글도 의외로 까다로울지도? 뭐 초반엔 내가 그냥 토글을 노션에 안쓰면 되는거 아닐까? </p>\n<p>까다로운 부분은 많이 구현된 것 같다. 빠르면 내일, 열심히 한다면 이번주 안에 직접 사용을 해볼 수 있을 것 같다.</p>","frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(4)","date":"January 27, 2024","update":"February 02, 2024","tags":["Blogging","Notion-API","Typescript","Hobby"],"series":"GitHub Pages와 Notion API 연동"},"fields":{"slug":"/NotionAPI를-활용한-자동-포스팅4/","readingTime":{"minutes":18.735}}},"seriesList":{"edges":[{"node":{"id":"cf782302-a534-55e4-9607-9ba22069ba6d","fields":{"slug":"/Notion-API1/"},"frontmatter":{"title":"Notion API(1)"}}},{"node":{"id":"3a290e6d-b6bb-5ad3-b93c-646dd6597d8b","fields":{"slug":"/githubio를-이용한-블로그/"},"frontmatter":{"title":"github.io를 이용한 블로그"}}},{"node":{"id":"96b463ae-d648-5426-a574-faa73a2daf4d","fields":{"slug":"/githubio-자동배포/"},"frontmatter":{"title":"github.io 자동배포"}}},{"node":{"id":"a38352f2-1a18-57cb-988e-c685e392175d","fields":{"slug":"/Notion-API2/"},"frontmatter":{"title":"Notion API(2)"}}},{"node":{"id":"66bbbd52-9b37-5eea-9c37-1de08fc608f7","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅"}}},{"node":{"id":"ea79504b-7f4b-5185-a504-018bbe1ca05d","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅2/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(2)"}}},{"node":{"id":"613f37b4-2fd9-5208-9d9d-16174c9d3180","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅3/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(3)"}}},{"node":{"id":"81e99043-692d-5112-8edc-5d43774968a0","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅4/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(4)"}}},{"node":{"id":"e35e71eb-8137-5b3d-a497-988e2554e292","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅5/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(5)"}}},{"node":{"id":"ee22bc46-0f12-56ec-9e8a-8cd3b3fe4451","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅6/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(6)"}}},{"node":{"id":"814f77a8-f23a-5f6b-9562-cbab62343d0f","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅7/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(7)"}}},{"node":{"id":"b61dee75-4a5f-5a2d-a782-a5dfc8b65fb6","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅8/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(8)"}}},{"node":{"id":"ff71aedb-1637-5d59-812e-38da46dbaf77","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅9/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(9)"}}},{"node":{"id":"11e3ce39-5b5d-5164-8a1d-f034614e34d4","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅10/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(10)"}}},{"node":{"id":"8aeec2a3-8c02-5cf6-81c2-d98f08e09fd3","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅11/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(11)"}}},{"node":{"id":"f9e23df5-9e1f-5d92-b4b7-0f37d54560f2","fields":{"slug":"/Readme/"},"frontmatter":{"title":"Readme"}}}]},"previous":{"fields":{"slug":"/NotionAPI를-활용한-자동-포스팅3/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(3)"}},"next":{"fields":{"slug":"/NotionAPI를-활용한-자동-포스팅5/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(5)"}}},"pageContext":{"id":"81e99043-692d-5112-8edc-5d43774968a0","series":"GitHub Pages와 Notion API 연동","previousPostId":"613f37b4-2fd9-5208-9d9d-16174c9d3180","nextPostId":"e35e71eb-8137-5b3d-a497-988e2554e292"}},"staticQueryHashes":[],"slicesMap":{}}