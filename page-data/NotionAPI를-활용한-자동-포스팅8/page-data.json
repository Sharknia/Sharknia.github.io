{"componentChunkName":"component---src-templates-post-jsx","path":"/NotionAPI를-활용한-자동-포스팅8/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"87ec1cfb-0d3c-589c-892e-edf6d04f51fd","excerpt":"목표 단계적으로 GitHub Action을 사용해 블로그 자동 배포를 하려고 한다.  일단, 구상한 깃허브 액션에서 실행할 플로우는 다음과 같다.  구상 블로그 레포지토리를 받아온다.  내 프로그램을 돌려 블로그 레포지토리를 업데이트한다.  블로그 레포지토리를 커밋/푸시한다.  해당 작업은 특정 시간에, 또는 특정 시간마다 이뤄져야 한다.  구현 Noti…","html":"<h2>목표</h2>\n<p>단계적으로 GitHub Action을 사용해 블로그 자동 배포를 하려고 한다. </p>\n<p>일단, 구상한 깃허브 액션에서 실행할 플로우는 다음과 같다. </p>\n<h2>구상</h2>\n<ol>\n<li>블로그 레포지토리를 받아온다. </li>\n<li>내 프로그램을 돌려 블로그 레포지토리를 업데이트한다. </li>\n<li>블로그 레포지토리를 커밋/푸시한다. </li>\n<li>해당 작업은 특정 시간에, 또는 특정 시간마다 이뤄져야 한다. </li>\n</ol>\n<h2>구현</h2>\n<h3>Notion to Markdown 프로그램 실행</h3>\n<h4>워크플로우 파일 생성</h4>\n<p>단계적으로 구현해보려고 한다. 일단은 내 프로그램을 돌려보자. </p>\n<p>일단 대충 다음과 같이 초안을 짜주었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># 이름을 정의한다. </span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run TypeScript\n<span class=\"token comment\"># 실행 시기입니다. 이번엔 push, pull_request 될 때 이다. </span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">,</span> pull_request<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 깃허브 액션에서 실행할 작업을 정의하는 섹션이다.</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># 단일 작업의 이름을 정의합니다. 이 경우에는 이름이 run 이다.</span>\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token comment\"># 작업이 어떤 환경에서 실행될지 정의한다. </span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\t\t<span class=\"token comment\"># 각 작업에서 실행할 순차적인 단계들을 정의한다. </span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token comment\"># uses : 특정 액션을 사용할 때 사용한다.</span>\n\t\t<span class=\"token comment\"># name : step의 이름을 정의한다.</span>\n\t\t<span class=\"token comment\"># with : user로 지정된 액션에 추가적인 매개변수를 전달한다. </span>\n\t\t<span class=\"token comment\"># run : 쉘 명령어를 실행한다. </span>\n\t\t<span class=\"token comment\"># env : 환경변수를 설정한다. </span>\n\t\t<span class=\"token comment\"># if : 조건문</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'18'</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install TypeScript\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>save<span class=\"token punctuation\">-</span>dev typescript\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npx tsc\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Script\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> node ./index.js</code></pre></div>\n<p>이 파일을 프로젝트의 <code class=\"language-text\">.github/workflows/main.yml</code> 로 저장해준다.</p>\n<p>그리고 커밋-푸시를 하면 </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/5d06e704853408fa3478937cf49cfd67/7a54e/image1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 45.294117647058826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVR42qWS2Q6CMBBFK2XrTqEgmhj//yuvMxV8IBExPNxM2qRnzrQVvpvQ6i6nahyKUu/mIhWq1iPNT/TTA76/IQx3KNujpn2hTIQLDI2QtUVRmZ9QDjcvKXxmPVdSFcYNcGSpqWrqcsRyNeVsmxAwIcQ5W9YqHILtWQvjE3y8wvoRDQG3Xf/JMnLKdrw4Y/cBWv8emU0lXewZw2XkAfx1XBjBtvzqp4AtAfQCYmV58Nt8G/kFlfDDUxJD5Q0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image1' title='' src='/static/5d06e704853408fa3478937cf49cfd67/ca1dc/image1.png' srcset='/static/5d06e704853408fa3478937cf49cfd67/e7570/image1.png 170w,\n/static/5d06e704853408fa3478937cf49cfd67/f46e7/image1.png 340w,\n/static/5d06e704853408fa3478937cf49cfd67/ca1dc/image1.png 680w,\n/static/5d06e704853408fa3478937cf49cfd67/02d09/image1.png 1020w,\n/static/5d06e704853408fa3478937cf49cfd67/9d567/image1.png 1360w,\n/static/5d06e704853408fa3478937cf49cfd67/7a54e/image1.png 2216w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이렇게 실행이 된다. 그리고</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/686dbb0c0704c84fbeb9a7b10c204a35/40851/image2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 28.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzUlEQVR42m2Q2xKCMAxE8YYUem8pKKAz+uT/f2DclBFvPJzZtslstimu9wf14410OIGetF8BNZPrs/6eGdcOubeQJpGPA3k8COmpFIaq2lKtAonG5fO+lKvswHZff1EcYcBmIY1Z2VzqCFpqoIxoPFUwrzGQ+8tKZ2X+DA8oWkT27UixmyhAtetI2bToAn7TqLik3uzEekKHVG1/ySljd5mTAhvOeJtQP+eBfDf+RBZol3LCX9OC43ORm/i7Bovl3b32N+v7fjiqv1Sfhk9rqoudfkDvqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image2' title='' src='/static/686dbb0c0704c84fbeb9a7b10c204a35/ca1dc/image2.png' srcset='/static/686dbb0c0704c84fbeb9a7b10c204a35/e7570/image2.png 170w,\n/static/686dbb0c0704c84fbeb9a7b10c204a35/f46e7/image2.png 340w,\n/static/686dbb0c0704c84fbeb9a7b10c204a35/ca1dc/image2.png 680w,\n/static/686dbb0c0704c84fbeb9a7b10c204a35/02d09/image2.png 1020w,\n/static/686dbb0c0704c84fbeb9a7b10c204a35/9d567/image2.png 1360w,\n/static/686dbb0c0704c84fbeb9a7b10c204a35/40851/image2.png 2218w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\nenv 파일이 없기 때문에 바로 설정값 오류가 났다. </p>\n<h4>Github secret을 이용한 환경변수 설정</h4>\n<p>환경변수 설정을 워크플로우 파일 내에서 직접 설정하거나, 리포지토리 설정 또는 깃허브 환경에서 설정할 수 있다. 환경변수가 노출되지 않기를 원하지만 깃허브 전체에 적용될 필요는 없으므로 리포지토리 Setting에서 설정해주려고 한다. </p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/042275ebaf7674b515056fe67f8552bd/01d29/image3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 58.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABwElEQVR42nVT2W7bMBD0SwsnkUXdEnWfliIrdRAnKIp+Qx/6/x8z3d2YdNA2D4OlSO7szNDeuX4KhhdqhEkpaxVkBI1Et7IXJhWilFHDp3t53mB/7+PL3sXXvbrhTmHneAkORBJTs0tE5vtA67Kb0U0runFBz5XAg2UgVS/KLVw/o74MO25morweBXyRSfnSvF3Qrj9QLD+Rj6/Q/Rnd/IxpPWN6POO4PmPZXqR200l6hZDRjivG5YyArDGhT4QDNU3bG4YTYb2gn4nwuGGYn6CrAbrskV0R60Z4LCHbCygva5kQErkfsyXONBUFDBPNg4qlGlhCvlARIds0B4rWrGZcvokdPmMCA8eLJTPu/QhL2I4nFM1kCXmPFTP8uJBvfrisGq1NVmvcGFwJtRCW7VGmm8N7N8LdIbSK0qKnHFnxhqp/lCGfENIrkzpWwtZMTkneCqKsvuXm3XJzP7Usr3ySvNi2TOYYKDt+fVb+fo/2nRSOQ7Go9B91N4VhiWF5EuTNQD+d99yMZa6OShBUFZZfb1h/f0dxmeG4FE/wH8IHL0XRTtD1IFZURJavti1InUro7zk3iNYWXl2Is78t/wH+5DFnF5aiqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image3' title='' src='/static/042275ebaf7674b515056fe67f8552bd/ca1dc/image3.png' srcset='/static/042275ebaf7674b515056fe67f8552bd/e7570/image3.png 170w,\n/static/042275ebaf7674b515056fe67f8552bd/f46e7/image3.png 340w,\n/static/042275ebaf7674b515056fe67f8552bd/ca1dc/image3.png 680w,\n/static/042275ebaf7674b515056fe67f8552bd/02d09/image3.png 1020w,\n/static/042275ebaf7674b515056fe67f8552bd/9d567/image3.png 1360w,\n/static/042275ebaf7674b515056fe67f8552bd/01d29/image3.png 2536w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\nSecrets는 로그에도 노출되지 않으며, variables는 로그에서 노출이 된다. 적절하게 선택하자. </p>\n<p>NOTION<em>KEY와 NOTION</em>DATABASE_ID는 시크릿에, 나머지는 변수들에 저장해주었다. </p>\n<p>다음과 같이 워크플로우 파일을 수정해주면 정상 작동된다. </p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run TypeScript\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">,</span> pull_request<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'18'</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install TypeScript\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>save<span class=\"token punctuation\">-</span>dev typescript\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npx tsc\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Script\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> node ./index.js\n\t\t\t<span class=\"token comment\"># 환경변수 불러오기 추가 </span>\n      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">NOTION_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.NOTION_KEY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">NOTION_DATABASE_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.NOTION_DATABASE_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">BLOG_URL</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.BLOG_URL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">SAVE_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.SAVE_DIR <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">SAVE_SUB_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.SAVE_SUB_DIR <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3>블로그 Repository 추가</h3>\n<p>1, 3번 작업을 위해 블로그 레포를 체크아웃 하는 과정을 추가하자. </p>\n<p>이 전에 깃 권한을 얻기 위해 토큰을 발급해주었다. Setting - Develper 설정에 가서 토큰을 발급해주자. classic token으로 발행하고, 적당히 권한을 수정해주었다. </p>\n<p>그리고 해당 토큰도 레포의 Secret에 추가해주었다. </p>\n<p>그리고 나서 워크플로우를 아래와 같이 수정해주었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run TypeScript\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">,</span> pull_request<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\t\t<span class=\"token comment\"># 블로그 레포 체크아웃</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout Blog Repository\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Sharknia/Sharknia.github.io'</span>\n        <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GITTOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'blog-repo'</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'18'</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Dependencies\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install TypeScript\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>save<span class=\"token punctuation\">-</span>dev typescript\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npx tsc\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run Script\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> node ./index.js\n      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">NOTION_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.NOTION_KEY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">NOTION_DATABASE_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.NOTION_DATABASE_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">BLOG_URL</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.BLOG_URL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">SAVE_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.SAVE_DIR <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">SAVE_SUB_DIR</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> var.SAVE_SUB_DIR <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\"># 블로그 레포 커밋/푸쉬</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set Git remote URL with token and Commit and Push Changes\n\t\t\t<span class=\"token comment\"># 다른 저장소이므로 git remote set-url을 실행한다. </span>\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        cd blog-repo\n        git remote set-url origin https://${{ secrets.GITTOKEN }}@github.com/name/name.github.io\n        git config user.name 'name'\n        git config user.email 'mail'\n        git add .\n        git commit -m \"Update blog contents\" || echo \"No changes to commit\"\n        git push</span></code></pre></div>\n<p>여기까지 해두면, 제대로 깃허브 블로그에 새로운 글이 커밋/푸쉬 되었다!</p>\n<h2>마무리</h2>\n<p>마지막으로, 테스트를 종료하고 자동 배포가 매 시각 되게 하기 위해 on 부분을 다음과 같이 수정해주었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'0 * * * *'</span></code></pre></div>\n<h3>다음 계획</h3>\n<p>이 방법으로는 삭제가 되지 않는다는 사실을 깨달았다. </p>\n<p>당분간은 수동삭제를 <del>ㅠㅠ</del> 하기로 하고 삭제를 어떻게 할 것인지에 대해서는 구상을 해두었다. </p>\n<p>다음 시간은 삭제의 구현이다. </p>","frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(8)","date":"February 01, 2024","update":"February 02, 2024","tags":["Notion-API","Blogging","Hobby","GitHub","Typescript"],"series":"GitHub Pages와 Notion API 연동"},"fields":{"slug":"/NotionAPI를-활용한-자동-포스팅8/","readingTime":{"minutes":6.165}}},"seriesList":{"edges":[{"node":{"id":"6b823011-f4ee-564b-9bd2-1fd97f52c42a","fields":{"slug":"/Notion-API1/"},"frontmatter":{"title":"Notion API(1)"}}},{"node":{"id":"09f8fd32-26e0-5a52-8ede-e14ffdaaf560","fields":{"slug":"/githubio를-이용한-블로그/"},"frontmatter":{"title":"github.io를 이용한 블로그"}}},{"node":{"id":"d010a89e-4473-5753-aaf3-f7922debcba1","fields":{"slug":"/githubio-자동배포/"},"frontmatter":{"title":"github.io 자동배포"}}},{"node":{"id":"b165881c-d15e-57f0-a697-dfc416607285","fields":{"slug":"/Notion-API2/"},"frontmatter":{"title":"Notion API(2)"}}},{"node":{"id":"5f70e270-91df-52dd-87a0-14923a1eb340","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅"}}},{"node":{"id":"73f01dea-ec1f-5e8a-8eac-87112810be50","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅2/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(2)"}}},{"node":{"id":"6f909200-5e34-5498-b75a-027a07c8de61","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅3/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(3)"}}},{"node":{"id":"4db310b8-3437-5938-ac47-22aad4204559","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅4/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(4)"}}},{"node":{"id":"5dcb73b9-f91e-554f-888c-6c8183a8b74a","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅5/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(5)"}}},{"node":{"id":"53fa48e0-5c1f-5401-85bc-1627e52e6ffd","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅6/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(6)"}}},{"node":{"id":"411d959a-7988-5fed-af68-ca055e1d1823","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅7/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(7)"}}},{"node":{"id":"87ec1cfb-0d3c-589c-892e-edf6d04f51fd","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅8/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(8)"}}},{"node":{"id":"9578cb37-cba5-5b4d-9871-e69d1951cd13","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅9/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(9)"}}}]},"previous":{"fields":{"slug":"/vscode-quick-Suggestions/"},"frontmatter":{"title":"vscode-quick Suggestions"}},"next":{"fields":{"slug":"/NotionAPI를-활용한-자동-포스팅9/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(9)"}}},"pageContext":{"id":"87ec1cfb-0d3c-589c-892e-edf6d04f51fd","series":"GitHub Pages와 Notion API 연동","previousPostId":"aaef2c0a-831d-5bf6-b1bd-7a7208f3e0d9","nextPostId":"9578cb37-cba5-5b4d-9871-e69d1951cd13"}},"staticQueryHashes":[],"slicesMap":{}}