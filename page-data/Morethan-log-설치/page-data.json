{"componentChunkName":"component---src-templates-post-jsx","path":"/Morethan-log-설치/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"e5f5c9e2-6bf3-5850-90ae-6430e4d95005","excerpt":"MORETHAN-LOG 설치 개발자로서 어엿한 블로그 하나는 있어야 하지 않을까, 생각을 항상 하곤 했다.   하지만 블로그라는게 여간 귀찮은 일이 아니다.  공부한 내용을 노션에 적어두기 시작한지 좀 됐는데, 티스토리나 velog나 여러 방법을 시도한적이 있었지만 노션에 적은 내용을 거기로 옮기는게 얼마나 귀찮은지, 시작은 해도 도무지 꾸준히 이어할 수…","html":"<h1>MORETHAN-LOG 설치</h1>\n<p>개발자로서 어엿한 블로그 하나는 있어야 하지 않을까, 생각을 항상 하곤 했다.  </p>\n<p>하지만 블로그라는게 여간 귀찮은 일이 아니다.  공부한 내용을 노션에 적어두기 시작한지 좀 됐는데, 티스토리나 velog나 여러 방법을 시도한적이 있었지만 노션에 적은 내용을 거기로 옮기는게 얼마나 귀찮은지, 시작은 해도 도무지 꾸준히 이어할 수가 없었다. </p>\n<p>그냥 언젠가 노션에 쓰기만 하면 블로그가 되는게 없나 그냥 가끔 검색만 하는 정도였는데, 어느샌가 나온 것이다. 그런 천지개벽할 물건이. </p>\n<p><a href=\"https://github.com/morethanmin/morethan-log\">https://github.com/morethanmin/morethan-log</a></p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; '>\n      <a class='gatsby-resp-image-link' href='/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/Untitled.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 19.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxUlEQVR42n2QzQ6CMBCEOfuPCigqxbYU2lIhYPT9n2zcrolHD5tvsk0nM5vMzwHGT2jcCOMGqC5AdwNsmJGXNRabI1a7/O8stxlznRZIpDa4yY5MHhDKoiItjWeerhL7/Io0uzD3xVcfioqZHkscaJ+da9bRNCmFYbM498b/0t3JtLGkHzM0sQsT+vGFtp/gxzeUCdRopD89WmpY3hRWlDQ5V5qXqg1ERykdm9faQ2jHjMaS3iM1UWgLIS3tek4ezxLrxsofMH5tp9NAXXwAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Untitled' title='' src='/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/Untitled.png' srcset='/static/c03971264fd9083e9b65a4a3d1818362/e7570/Untitled.png 170w,\n/static/c03971264fd9083e9b65a4a3d1818362/f46e7/Untitled.png 340w,\n/static/c03971264fd9083e9b65a4a3d1818362/7ca0c/Untitled.png 569w' sizes='(max-width: 569px) 100vw, 569px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Untitled</figcaption>\n  </figure></p>\n<p>커밋할 필요도, 포스트 할 필요도 없다. 단지 노션에 글을 적으면 바로 포스팅 된다. </p>\n<p>게다가 Readme에 설치방법이 10단계로 스크린샷까지 동봉되어서 너무나 친절하게 나와있다. </p>\n<p><a href=\"https://github.com/morethanmin/morethan-log#readme\">GitHub - morethanmin/morethan-log: 😎 A static blog using notion database</a></p>\n<p>블로그로 대성하겠다, 이런 마음가짐은 없기 때문에 심플한 구성과 간단한 기능이 너무 마음에 들었다. 누구나 따라할 수 있을 만큼 쉽게 되어있기 때문에 그대로 그대로 따라하는데,</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">Failed to compile<span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>routes<span class=\"token operator\">/</span>Detail<span class=\"token operator\">/</span>PostDetail<span class=\"token operator\">/</span>CommentBox<span class=\"token operator\">/</span>Utterances<span class=\"token punctuation\">.</span>tsx<span class=\"token operator\">:</span><span class=\"token number\">28</span><span class=\"token operator\">:</span><span class=\"token number\">11</span>\nType error<span class=\"token operator\">:</span> Type <span class=\"token string\">'{ repo: string | undefined; \"issue-term\": string; label: string; }'</span> is not assignable to type <span class=\"token string\">'{ [key: string]: string; }'</span><span class=\"token punctuation\">.</span>\n  Property <span class=\"token string\">'repo'</span> is incompatible <span class=\"token keyword\">with</span> index signature<span class=\"token punctuation\">.</span>\n    Type <span class=\"token string\">'string | undefined'</span> is not assignable to type <span class=\"token string\">'string'</span><span class=\"token punctuation\">.</span>\n      Type <span class=\"token string\">'undefined'</span> is not assignable to type <span class=\"token string\">'string'</span><span class=\"token punctuation\">.</span>\n  <span class=\"token number\">26</span> <span class=\"token operator\">|</span>     script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"issue-term\"</span><span class=\"token punctuation\">,</span> issueTerm<span class=\"token punctuation\">)</span>\n  <span class=\"token number\">27</span> <span class=\"token operator\">|</span>     script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">,</span> theme<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> <span class=\"token number\">28</span> <span class=\"token operator\">|</span>     <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">config</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> string<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> string <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token constant\">CONFIG</span><span class=\"token punctuation\">.</span>utterances<span class=\"token punctuation\">.</span>config\n     <span class=\"token operator\">|</span>           <span class=\"token operator\">^</span>\n  <span class=\"token number\">29</span> <span class=\"token operator\">|</span>     Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">30</span> <span class=\"token operator\">|</span>       script<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token number\">31</span> <span class=\"token operator\">|</span>     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nerror Command failed <span class=\"token keyword\">with</span> exit code <span class=\"token number\">1.</span>\ninfo Visit https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>yarnpkg<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>en<span class=\"token operator\">/</span>docs<span class=\"token operator\">/</span>cli<span class=\"token operator\">/</span>run <span class=\"token keyword\">for</span> documentation about <span class=\"token keyword\">this</span> command<span class=\"token punctuation\">.</span>\n<span class=\"token literal-property property\">Error</span><span class=\"token operator\">:</span> Command <span class=\"token string\">\"yarn run build\"</span> exited <span class=\"token keyword\">with</span> <span class=\"token number\">1</span></code></pre></div>\n<p>글쎄 대체 나만 Deploy가 안되는것이다. </p>\n<p>ISSUE에 나와 같은 오류를 겪은 외국인이 한 명 더 있었는데, 다른 플랫폼으로 갈아탄 모양인지 해결방법은 적혀있지 않았다. </p>\n<p>타입스크립트, 리액트는 처음이었기 때문에 정확히 알 수 없었는데, site.config.js 의 utterances-config 의 값을 가져올 때 오류가 나는 것이라고 짐작을 할 수 있었기 때문에 해당 부분을 챗지피티의 도움을 받아 코드를 수정했다. </p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> config<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CONFIG</span><span class=\"token punctuation\">.</span>utterances<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>acc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 하여, 무사히 deploy를 마치고 블로그 포스팅에 성공한것이다. </p>\n<p>문제는 여기서 끝나지 않았는데 노션에 글을 써도 도무지 블로그에 새로운 글이 포스팅되지 않았다. </p>\n<p>이것 때문에 잠도 못자고 설쳐가면서 새벽에 새로고침을 해보기도 했는데 자고 일어나도 되어있지 않았다. </p>\n<p>결론부터 이야기하자면, 아무것도 오류는 아니었다. </p>\n<p><a href=\"https://vercel.com/docs/functions/serverless-functions\">Serverless Functions Overview</a></p>\n<p>vercel의 Serverless Functions 기능은 모든 plan에서 이용가능하며, 이 기능을 이용해서 Notion API를 활용해서 글 내용을 불러오도록 되어있었다. </p>\n<p>site.config.js를 확인하면 revalidateTime 변수가 있는데 처음에는 이 값이 42시간(!)으로 설정되어있었으므로, 이를 임의로 1시간으로 수정해주었다. </p>\n<p>성격이 급해서 1시간 단위로 갱신되게 해두었는데, 지금 와서 생각해보면 굳이 1시간일 필요도 없다는 생각이 든다.</p>","frontmatter":{"title":"MORETHAN-LOG-설치","date":"August 18, 2023","update":"August 20, 2023","tags":["Blogging"],"series":null},"fields":{"slug":"/Morethan-log-설치/","readingTime":{"minutes":4.5}}},"seriesList":{"edges":[{"node":{"id":"0b1c2d5a-2b50-5b66-afbf-b01926c0dd54","fields":{"slug":"/화상상담을-위한-Janus-구성/"},"frontmatter":{"title":"화상상담을 위한 Janus 구성"}}},{"node":{"id":"865e05e1-e5c6-526f-92e6-4f2d31e585c0","fields":{"slug":"/JavaScript-기본-문법/"},"frontmatter":{"title":"JavaScript 기본 문법"}}},{"node":{"id":"e5f5c9e2-6bf3-5850-90ae-6430e4d95005","fields":{"slug":"/Morethan-log-설치/"},"frontmatter":{"title":"MORETHAN-LOG-설치"}}},{"node":{"id":"f28bfc02-4c1e-5920-a787-103203356d35","fields":{"slug":"/Morethan-log-수정/"},"frontmatter":{"title":"MORETHAN-LOG-수정"}}}]},"previous":{"fields":{"slug":"/JavaScript-기본-문법/"},"frontmatter":{"title":"JavaScript 기본 문법"}},"next":{"fields":{"slug":"/Morethan-log-수정/"},"frontmatter":{"title":"MORETHAN-LOG-수정"}}},"pageContext":{"id":"e5f5c9e2-6bf3-5850-90ae-6430e4d95005","series":null,"previousPostId":"865e05e1-e5c6-526f-92e6-4f2d31e585c0","nextPostId":"f28bfc02-4c1e-5920-a787-103203356d35"}},"staticQueryHashes":[],"slicesMap":{}}