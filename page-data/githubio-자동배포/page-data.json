{"componentChunkName":"component---src-templates-post-jsx","path":"/githubio-자동배포/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"96b463ae-d648-5426-a574-faa73a2daf4d","excerpt":"왜 하는가 나는 귀찮은게 너무 귀찮다.  커밋 한 이후에  를 해야 배포가 되는 것도 너무 귀찮았다.  무엇을 하는가 그래서, 이걸  을 이용해서 자동화를 했다.  에 임의의 yml 파일을 넣어주면 해당 작업을 github action에서 진행한다.  어떻게 했는가 yml 파일 내용은 다음과 같다.  문제는 없었는가 처음에는 npm install을 사용했…","html":"<h4>왜 하는가</h4>\n<p>나는 귀찮은게 너무 귀찮다. </p>\n<p>커밋 한 이후에 </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run deploy-gh</code></pre></div>\n<p>를 해야 배포가 되는 것도 너무 귀찮았다. </p>\n<h4>무엇을 하는가</h4>\n<p>그래서, 이걸 <code class=\"language-text\">github action</code> 을 이용해서 자동화를 했다. </p>\n<p><code class=\"language-text\">.gitbub/workflows</code>에 임의의 yml 파일을 넣어주면 해당 작업을 github action에서 진행한다. </p>\n<h4>어떻게 했는가</h4>\n<p>yml 파일 내용은 다음과 같다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">name: Deploy\n\non: <span class=\"token comment\"># 어떤 작업이 수행될 때 deploy.yml 작업이 수행된다. (트리거)</span>\n  push: <span class=\"token comment\"># push 작업이 수행될 때</span>\n    branches: <span class=\"token comment\"># 특정 브랜치를 대상으로</span>\n      - master\n\npermissions: <span class=\"token comment\"># github action이 수행되는 환경에서 특정 권한을 준다</span>\n  contents: <span class=\"token function\">write</span>\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-node@v2\n        with:\n          node-version: <span class=\"token number\">20.3</span>.1\n\n      - name: Install <span class=\"token function\">node</span> packages\n        run: <span class=\"token function\">yarn</span>\n        \n      - name: Check lint\n        run: <span class=\"token function\">yarn</span> check:lint\n        \n      <span class=\"token comment\"># 아래와 같은 오류가 남</span>\n      <span class=\"token comment\"># error Command failed with exit code 1.</span>\n      <span class=\"token comment\"># info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span>\n      <span class=\"token comment\"># - name: Check prettier</span>\n      <span class=\"token comment\">#   run: yarn check:prettier</span>\n      \n      - name: Build\n        run: <span class=\"token function\">yarn</span> build\n        \n      - name: Set up GitHub token\n        env:\n          GITHUB_TOKEN: <span class=\"token variable\">${{ secrets.Token}</span><span class=\"token punctuation\">}</span>\n        run: <span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> user.email <span class=\"token string\">\"email입력\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> user.name <span class=\"token string\">\"name입력\"</span>\n\n      - name: Set Git remote URL with token\n        run: <span class=\"token function\">git</span> remote set-url origin https://<span class=\"token variable\">${{ secrets.classicToken }</span><span class=\"token punctuation\">}</span>@github.com/Sharknia/Sharknia.github.io\n\n      - name: Deploy to GitHub Pages\n        run: npx gh-pages <span class=\"token parameter variable\">-d</span> public</code></pre></div>\n<h4>문제는 없었는가</h4>\n<p>처음에는 npm install을 사용했었는데, 패키지가 없다던지 여러가지 문제가 났다. 해당 문제는 npx 명령을 사용하는 것으로 해결돼</p>\n<p>Deploy 까지 자동으로 하기 위해서는 깃허브 설정 관련 명령어가 필요했다. </p>\n<p>특히, 반드시 토큰을 발행하고 Github Action의 환경 변수에 추가를 해주어야 한다. </p>","frontmatter":{"title":"github.io 자동배포","date":"August 30, 2023","update":"February 02, 2024","tags":["Blogging","Hobby"],"series":"GitHub Pages와 Notion API 연동"},"fields":{"slug":"/githubio-자동배포/","readingTime":{"minutes":2.075}}},"seriesList":{"edges":[{"node":{"id":"cf782302-a534-55e4-9607-9ba22069ba6d","fields":{"slug":"/Notion-API1/"},"frontmatter":{"title":"Notion API(1)"}}},{"node":{"id":"3a290e6d-b6bb-5ad3-b93c-646dd6597d8b","fields":{"slug":"/githubio를-이용한-블로그/"},"frontmatter":{"title":"github.io를 이용한 블로그"}}},{"node":{"id":"96b463ae-d648-5426-a574-faa73a2daf4d","fields":{"slug":"/githubio-자동배포/"},"frontmatter":{"title":"github.io 자동배포"}}},{"node":{"id":"a38352f2-1a18-57cb-988e-c685e392175d","fields":{"slug":"/Notion-API2/"},"frontmatter":{"title":"Notion API(2)"}}},{"node":{"id":"66bbbd52-9b37-5eea-9c37-1de08fc608f7","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅"}}},{"node":{"id":"ea79504b-7f4b-5185-a504-018bbe1ca05d","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅2/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(2)"}}},{"node":{"id":"613f37b4-2fd9-5208-9d9d-16174c9d3180","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅3/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(3)"}}},{"node":{"id":"81e99043-692d-5112-8edc-5d43774968a0","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅4/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(4)"}}},{"node":{"id":"e35e71eb-8137-5b3d-a497-988e2554e292","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅5/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(5)"}}},{"node":{"id":"ee22bc46-0f12-56ec-9e8a-8cd3b3fe4451","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅6/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(6)"}}},{"node":{"id":"814f77a8-f23a-5f6b-9562-cbab62343d0f","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅7/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(7)"}}},{"node":{"id":"b61dee75-4a5f-5a2d-a782-a5dfc8b65fb6","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅8/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(8)"}}},{"node":{"id":"ff71aedb-1637-5d59-812e-38da46dbaf77","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅9/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(9)"}}},{"node":{"id":"11e3ce39-5b5d-5164-8a1d-f034614e34d4","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅10/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(10)"}}},{"node":{"id":"8aeec2a3-8c02-5cf6-81c2-d98f08e09fd3","fields":{"slug":"/NotionAPI를-활용한-자동-포스팅11/"},"frontmatter":{"title":"NotionAPI를 활용한 자동 포스팅(11)"}}},{"node":{"id":"f9e23df5-9e1f-5d92-b4b7-0f37d54560f2","fields":{"slug":"/Readme/"},"frontmatter":{"title":"Readme"}}}]},"previous":{"fields":{"slug":"/githubio를-이용한-블로그/"},"frontmatter":{"title":"github.io를 이용한 블로그"}},"next":{"fields":{"slug":"/npx/"},"frontmatter":{"title":"npx"}}},"pageContext":{"id":"96b463ae-d648-5426-a574-faa73a2daf4d","series":"GitHub Pages와 Notion API 연동","previousPostId":"3a290e6d-b6bb-5ad3-b93c-646dd6597d8b","nextPostId":"1f906753-4b2c-58e9-8b1d-65dbacd5a5ed"}},"staticQueryHashes":[],"slicesMap":{}}