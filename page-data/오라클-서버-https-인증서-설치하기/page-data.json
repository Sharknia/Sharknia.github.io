{"componentChunkName":"component---src-templates-post-jsx","path":"/오라클-서버-https-인증서-설치하기/","result":{"data":{"site":{"siteMetadata":{"title":"SharkniA"}},"markdownRemark":{"id":"de24f32b-02cd-55dc-8a4f-2d6d3b167304","excerpt":"서론 일단 아무거나 만들기 시작했습니다. 사둔 도메인도 있고.. 일단 서버를 올리기로 해서 올렸습니다(? 이번 글에서는 Namecheap에서 구매한 도메인에 대해, 오라클 클라우드 서버에서 무료 SSL/TLS 인증서를 발급받고, 이를 Nginx와 Certbot을 활용하여 설치 및 관리하는 과정을 기록합니다. 사전에 80번, 443번 포트는 열어둬야 합니다…","html":"<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/701689482fb3882eeda9adb59d6ed208/42a19/image1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEGElEQVR42lWU6VOaVxTG+Tv6sTPdJmqafknzyS7aAoJLO1FES9QmJTUa4246mZppx2rSyWZaV3hRELBG5YUgAiogi4KKEAXxRXaJIvBqo7imLT1o7cSZ39w5997nmbueQ4itYzvrWOyYnbXlkNsS9S0CmwEb7rdtBuxRvy3qW8ADtg23dXtteedUDy3hpAO2g7DLvzSjlKFSdAAdFAi4iJCH9PWyRc8Ez0V/8HlsGA9i5r2wC8RnzK9eOnZDTq99RqdX9ffzeFxO493GfnAjrIYfbvO4yOCAwGo1eewzuxtOEJ8xH0bd8e1V2K1BI9dOjKjkYrVCYp5WG9RyiDVj0hezuqlJBRwh/mr1MOo5Y5aJBF0dT3pYbd3tj7rbHnW3P2Z3trI6oH2CdLUina0wzmp/zEXaYBzEsZAzYd4Pu4LYXGpaekpKctKFpPfOf/jRxUsXLn78Qcr5d84lv5uUcpbkt98/90laOlj2Iy7CQdS9tjJ/KfXTEnpu2Y0rjBJGWXlp+c2ybxgFefm5NDqNRs87IY+WW1hIz/k653MiMeCYSZjh9EpxX311KZfVOsxn28163I+tOiy4dxn3HXMcbPow3L+MB7Hx58NkMsW3ZDzEPQRYViXuMci4UuFvuhGO1aRuQpqqf68vamEWNTOLW5iM5msl967n3b3SK2J5bfOIqOs+575+XApvTgi5rWMihNPWzGn/VSvjayckn1VnpdZm0h5cZbSVlnSUV/Q00FuZac2XGXe+RZUDpbz6AnYZW9wVsM0Q1lwWo1I4rxlSId/Lum9pJkZTb5DfoqVQG/NJTbQvf7pM/YWe/+Ba6o/ZhfXFUvXQ1Z6qUl5DJ9rhXzQltj02zFoyyvg/k57epiyYjZMGqQBFBGIOX8wRSjh9KFso6eGJWBbLpNU0+bD/YRP/nlqBbq3aCfBjTGpJUXFRyx2mRPg0hq/iASzsdUR92AkRr+PPoCu+G/l7L/x6e21OO07Py/csTicuDJ4q4JhNJ5FXnAvx+NFfR5uRIBbyLW34HQAE0SC2h/uPYuv/HEbj8b1lbJ5IyfDajYmner3lC3usxIwM9BnPYlQZtQr9xIhuQqZXj+pVMgimNPL5adWsYdykU1pM6sH+XhKFEva+ACPhpdMsQ4WZ2TkkKhUgU6mU7CwihZJOIsIKoEsjEr8gk8mZmeTjWdBkfZUDPxSMhDmdnHmdWVl1q6amqra2Gqivq7lZUZ5fQGcUMQB6YQF06+pqTmara6oqKyuYzO/MBgVhK2CzGBSGMVSvFGkVQ5OjgxrZM2i18kScQD6k+X9QMQwywzhqnVJAtSBAch3h3iPccxBxH0RckCf74ZU9IOTcPWHDCd39BC64JJBBSoIl9l9KQnE5rS9vEjstNztvBKeVJ5HP/wKLnjECYyZbHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image1' title='' src='/static/701689482fb3882eeda9adb59d6ed208/ca1dc/image1.png' srcset='/static/701689482fb3882eeda9adb59d6ed208/e7570/image1.png 170w,\n/static/701689482fb3882eeda9adb59d6ed208/f46e7/image1.png 340w,\n/static/701689482fb3882eeda9adb59d6ed208/ca1dc/image1.png 680w,\n/static/701689482fb3882eeda9adb59d6ed208/02d09/image1.png 1020w,\n/static/701689482fb3882eeda9adb59d6ed208/42a19/image1.png 1024w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>서론</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    시작이 반이다. </code></pre></div>\n<p>일단 아무거나 만들기 시작했습니다. 사둔 도메인도 있고.. 일단 서버를 올리기로 해서 올렸습니다(?</p>\n<p>이번 글에서는 Namecheap에서 구매한 도메인에 대해, 오라클 클라우드 서버에서 무료 SSL/TLS 인증서를 발급받고, 이를 Nginx와 Certbot을 활용하여 설치 및 관리하는 과정을 기록합니다.</p>\n<p>사전에 80번, 443번 포트는 열어둬야 합니다. Oracle Cloud의 경우에는 AWS와 설정 방법이 조금 달라서 헤맸습니다. </p>\n<p><a href=\"https://www.yougetsignal.com/tools/open-ports\">이 사이트</a>에서 포트가 제대로 열려있는지 체크할 수 있습니다. </p>\n<h2>Certbot?</h2>\n<p>Certbot은 Let’s Encrypt에서 제공하는 무료 SSL/TLS 인증서를 쉽게 발급하고 설치할 수 있도록 도와주는 오픈소스 도구입니다.</p>\n<p>간단히 요약하면,</p>\n<ul>\n<li>목적: HTTPS(SSL/TLS) 인증서 자동 발급 및 갱신</li>\n<li>\n<p>주요 기능:</p>\n<ul>\n<li>인증서 자동 발급</li>\n<li>인증서 자동 설치 (웹 서버와 연동)</li>\n<li>인증서 자동 갱신</li>\n</ul>\n</li>\n<li>지원 서버: Nginx, Apache 등 주요 웹 서버와 연동 가능</li>\n<li>장점: 무료, 자동화, 사용이 간편함</li>\n</ul>\n<p>즉, 웹사이트를 HTTPS로 안전하게 운영하기 위한 인증서를 쉽고 자동으로 처리해주는 도구입니다.</p>\n<h2>Certbot을 사용하여 Nginx에 Let's Encrypt 무료 인증서를 설치</h2>\n<h3>Certbot 및 Nginx 플러그인 설치</h3>\n<p>우분투 서버에 Certbot과 Certbot의 Nginx 플러그인을 설치해야 합니다. 터미널에서 다음 명령어를 실행합니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> certbot python3-certbot-nginx <span class=\"token parameter variable\">-y</span></code></pre></div>\n<h3>Nginx 설정</h3>\n<p>Certbot을 실행하기 전에, Nginx 설정 파일(<code class=\"language-text\">/etc/nginx/sites-available/</code> 내의 설정 파일)에 인증서를 발급받으려는 도메인(예: <code class=\"language-text\">xxx.com</code> 및 <code class=\"language-text\">www.xxx.com</code>)에 대한 <code class=\"language-text\">server_name</code> 지시어가 올바르게 설정되어 있는지 확인해 주세요.</p>\n<h4>예시 (<code class=\"language-text\">/etc/nginx/sites-available/xxx.com</code>)</h4>\n<div class=\"gatsby-highlight\" data-language=\"plaintext\"><pre class=\"language-plaintext\"><code class=\"language-plaintext\">server {\n    listen 80;\n    server_name xxx.com www.xxx.com;\n\n    # ... 나머지 설정 ...\n}</code></pre></div>\n<p>지금 단계에서는 수동으로 443 (HTTPS) 설정을 추가할 필요가 없습니다. <code class=\"language-text\">Certbot --nginx</code> 플러그인의 가장 큰 장점 중 하나가 바로 이것입니다. Certbot을 실행하여 성공적으로 인증서를 발급받으면, Certbot이 자동으로 이 설정 파일을 수정하여 다음과 같은 작업을 수행합니다.</p>\n<ul>\n<li><code class=\"language-text\">listen 443 ssl;</code> 지시어 추가</li>\n<li>발급받은 SSL 인증서와 개인 키 파일 경로(<code class=\"language-text\">ssl_certificate</code>, <code class=\"language-text\">ssl_certificate_key</code>) 설정</li>\n<li>HTTP (80) 요청을 HTTPS (443)로 리디렉션하는 설정 추가</li>\n</ul>\n<p>설정을 변경했다면 Nginx 설정을 테스트하고 다시 로드합니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> nginx <span class=\"token parameter variable\">-t</span>\n<span class=\"token function\">sudo</span> systemctl reload nginx</code></pre></div>\n<h3>Namecheap DNS 설정 변경</h3>\n<p>메인 관리 메뉴로 이동하여 Advanced DNS를 찾습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e41256ddeb89760f8ee3d1a629bf3b03/28725/image2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 65.88235294117646%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACOUlEQVR42o1SS2sTURSeP6KotJrqf/AXBNOiKbhxnR+grkI2gboNBbu0k4e4ys6QnaUuXEiRLkObQguT5p15JjN3Xp/n3M4NoSB4hsOde+453/nOd6/mTweY9v5gNJkhDEMIcms2hmubWC5X0oVnw3MdeBTzHfYFXG+JqcXnSwR+gNVqhSiKoDWbLeRyL7Bb2MPcNOE4DkSSIk5T2I4L07JgubRS3LTJKcZ727HhUhPLtqVzXiAEtHang5eFXZTef0AMoHv6E58ODvD56EgmsqUEvmkpfQnFVDjdcO1Xr4ePjToOO98RE7PhZIL+1RWub24wXyxgWbZcZ/O5XOezGU77fXw7P8fleAyfRrWJMUvFpul6HY+fbOEVsWQNuJC15P8FScDJjudhSYXKDRrvkoBN0o/zeNQ4ju8AG40mtp7m8Ka4jyiMcHs7hO/7EJTEgquR/te0Zusrtp/tYO91cc2KGXnERHZOEuqerFF5H204X14s9UwzhnzLO8/x7u0+EkoQBCqIPiexLiz+cDRC7+ICxmCAiM8YKMuNsv/1yHq9gQcPHyGfz8suXMCODJBN13UUCgVUKhWpr7r5kAG5AblPb1ECGoaBHycn+H12JgOcxECqgK3dbqNUKqFWq0lZ1oAZ24TWIMgA74vKSUHGQhW3Wi0Ui0VUq9X1aOqcARlcBOIOkDesHTsbd+Lb5UKRAXa7XZTLZXw5PpbslYYBnYeZRP9mGPgIPJe6h/KhKwbq+Siw+55kt/wXUA27yQAid0oAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='image2' title='' src='/static/e41256ddeb89760f8ee3d1a629bf3b03/ca1dc/image2.png' srcset='/static/e41256ddeb89760f8ee3d1a629bf3b03/e7570/image2.png 170w,\n/static/e41256ddeb89760f8ee3d1a629bf3b03/f46e7/image2.png 340w,\n/static/e41256ddeb89760f8ee3d1a629bf3b03/ca1dc/image2.png 680w,\n/static/e41256ddeb89760f8ee3d1a629bf3b03/02d09/image2.png 1020w,\n/static/e41256ddeb89760f8ee3d1a629bf3b03/9d567/image2.png 1360w,\n/static/e41256ddeb89760f8ee3d1a629bf3b03/28725/image2.png 1519w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\nA 레코드를 추가합니다. </p>\n<ul>\n<li>호스트(Host): <code class=\"language-text\">@</code> (또는 xxx.com)</li>\n<li>값(Value/Points to): 서버의 공인 IP 주소</li>\n<li>TTL: 기본값 또는 적절한 시간(예: 300초 또는 Auto)</li>\n</ul>\n<p>Namecheap의 파킹 페이지(Parking page) 관련 레코드나 다른 불필요한 레코드(특히 A 레코드나 CNAME 레코드)가 있다면 삭제하거나 수정해야 할 수도 있습니다.</p>\n<h3>DNS 전파 확인</h3>\n<p>DNS 설정 변경 사항이 전 세계 인터넷에 퍼지는 데 시간이 걸릴 수 있습니다 (보통 몇 분에서 몇 시간 소요). 다음 명령어를 사용해 DNS 변경 반영 여부를 확인할 수 있습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">dig</span> xxx.com +short</code></pre></div>\n<h3>Certbot 실행하여 인증서 받기</h3>\n<p>Certbot을 실행하여 Let's Encrypt 인증서를 자동으로 받고 Nginx 설정을 구성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot <span class=\"token parameter variable\">--nginx</span> <span class=\"token parameter variable\">-d</span> xxx.com <span class=\"token parameter variable\">-d</span> www.xxx.com</code></pre></div>\n<ul>\n<li><code class=\"language-text\">d</code> 옵션 뒤에 인증서를 적용할 도메인 이름을 지정합니다. www가 붙은 도메인과 붙지 않은 도메인 모두를 포함하는 것이 좋습니다.</li>\n<li>실행 과정에서 이메일 주소를 입력하고 서비스 약관에 동의하는 등의 몇 가지 질문이 나올 수 있습니다.</li>\n<li>HTTP 트래픽을 HTTPS로 자동으로 리디렉션할지 묻는 질문이 나오면, 일반적으로 '2' (Redirect)를 선택하는 것이 보안상 좋습니다.</li>\n</ul>\n<h3>Nginx 설정 수정</h3>\n<p>8000번 포트에서 돌고 있는 서버를 위해 아래와 같이 <a href=\"https://sharknia.github.io/Nginx%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-Reverse-Proxy-%EA%B5%AC%ED%98%841\">리버스 프록시</a>를 설정해주고, http에서는 자동으로 https로 리다이렉트 되는 설정도 해주었습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"plaintext\"><pre class=\"language-plaintext\"><code class=\"language-plaintext\">server {\n    listen 80;\n    server_name xxx.com;\n\n    return 301 https://$host$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name xxx.com;\n\n    ssl_certificate     /etc/letsencrypt/live/xxx.com/fullchain.pem;     # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/xxx.com/privkey.pem;       # managed by Certbot\n    include             /etc/letsencrypt/options-ssl-nginx.conf;             # managed by Certbot\n    ssl_dhparam         /etc/letsencrypt/ssl-dhparams.pem;                   # managed by Certbot\n\n    access_log  /var/log/nginx/xxx.com.access.log;\n    error_log   /var/log/nginx/xxx.com.error.log;\n\n    location / {\n        proxy_pass         http://127.0.0.1:8000;\n        proxy_set_header   Host              $host;\n        proxy_set_header   X-Real-IP         $remote_addr;\n        proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n        proxy_set_header   X-Forwarded-Proto $scheme;\n    }\n}</code></pre></div>\n<h3>자동 갱신 확인</h3>\n<p>Certbot 패키지를 설치하면 대부분의 시스템에서 자동으로 갱신 작업이 설정됩니다 (보통 <code class=\"language-text\">cron</code> 작업이나 <code class=\"language-text\">systemd</code> 타이머를 통해). 다음 명령어로 자동 갱신이 제대로 작동하는지 테스트해 볼 수 있습니다 (실제로 갱신하지는 않습니다).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot renew --dry-run</code></pre></div>\n<p>오류 없이 \"Congratulations, all simulated renewals succeeded\" 메시지가 나오면 자동 갱신 설정이 정상적으로 된 것입니다. Let's Encrypt 인증서는 90일마다 만료되므로 자동 갱신이 중요합니다.</p>","frontmatter":{"title":"오라클 서버 https 인증서 설치하기","date":"April 24, 2025","update":"May 02, 2025","tags":["Oracle Cloud","BackEnd","DevOps"],"series":"취미생활 - FastAPI 서버 구성"},"fields":{"slug":"/오라클-서버-https-인증서-설치하기/","readingTime":{"minutes":6.86}}},"seriesList":{"edges":[{"node":{"id":"de24f32b-02cd-55dc-8a4f-2d6d3b167304","fields":{"slug":"/오라클-서버-https-인증서-설치하기/"},"frontmatter":{"title":"오라클 서버 https 인증서 설치하기"}}},{"node":{"id":"b1be2bcf-85db-5aa6-96b9-fadfa8cb5016","fields":{"slug":"/prepared-statement-does-not-exist-오류/"},"frontmatter":{"title":"prepared statement does not exist  오류"}}},{"node":{"id":"fc1ca32a-2bbd-5396-afb8-a2b1405ba9c3","fields":{"slug":"/Ubuntu-서버에서-메모리-사용량-확인-및-스왑-설정으로-안정성-높이기/"},"frontmatter":{"title":"\nUbuntu 서버에서 메모리 사용량 확인 및 스왑 설정으로 안정성 높이기"}}}]},"previous":{"fields":{"slug":"/Nginx의-Reverse-Proxy-모니터링/"},"frontmatter":{"title":"Nginx의 Reverse Proxy 모니터링"}},"next":{"fields":{"slug":"/prepared-statement-does-not-exist-오류/"},"frontmatter":{"title":"prepared statement does not exist  오류"}}},"pageContext":{"id":"de24f32b-02cd-55dc-8a4f-2d6d3b167304","series":"취미생활 - FastAPI 서버 구성","previousPostId":"b3908629-2878-58ff-9d75-3eaa9afe939a","nextPostId":"b1be2bcf-85db-5aa6-96b9-fadfa8cb5016"}},"staticQueryHashes":[],"slicesMap":{}}